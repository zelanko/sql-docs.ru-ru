---
title: Использование переименования и рефакторинга для внесения изменений в объекты базы данных
ms.prod: sql
ms.technology: ssdt
ms.topic: conceptual
f1_keywords:
- sql.data.tools.dbrefactoring.previewdialog
- sql.data.tools.editor.howto.refactoring
- sql.data.tools.dbrefactoring.renamedialog
- sql.data.tools.dbrefactoring.moveschemadialog
- sql.data.tools.dbrefactoring.renameserverdatabasedialog
ms.assetid: f35520e6-8e6e-47b1-87a3-22c0cf2cabdb
author: markingmyname
ms.author: maghan
manager: jroth
ms.reviewer: “”
ms.custom: seo-lt-2019
ms.date: 02/09/2017
ms.openlocfilehash: ac10530cf2fa3831a26733e7470b6bd107d17121
ms.sourcegitcommit: ff82f3260ff79ed860a7a58f54ff7f0594851e6b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2020
ms.locfileid: "75244240"
---
# <a name="how-to-use-rename-and-refactoring-to-make-changes-to-your-database-objects"></a>Как использовать переименование и рефакторинг для внесения изменений в объекты базы данных

В контекстном меню "Рефакторинг" в редакторе Transact\-SQL можно переименовать объект или переместить его в другую схему, а также просмотреть все затрагиваемые области, прежде чем фиксировать изменение. Кроме того, с помощью меню "Рефакторинг" можно полностью указывать все ссылки на объекты базы данных либо развертывать подстановочные знаки в инструкциях `SELECT` проекта базы данных.  
  
> [!NOTE]  
> В следующих процедурах используются сущности, созданные с помощью процедур, которые описывались ранее в разделах [Connected Database Development](../ssdt/connected-database-development.md) (Разработка подключенной базы данных) и [Project-Oriented Offline Database Development](../ssdt/project-oriented-offline-database-development.md) (Разработка базы данных вне сети с учетом проекта).  
  
### <a name="to-rename-a-type"></a>Переименование типа  
  
1.  Правой кнопкой мыши щелкните таблицу **Products** (Products.sql) в **обозревателе решений** и выберите **Просмотреть код**, чтобы открыть скрипт в редакторе Transact\-SQL.  
  
2.  Правой кнопкой мыши щелкните `[Products]` в скрипте, выберите **Рефакторинг** и **Переименовать**.  
  
3.  В поле **Новое имя** введите **Product**. Оставьте включенным параметр **Предварительный просмотр изменений** и нажмите кнопку **OК**.  
  
4.  На следующем экране можно будет просмотреть список скриптов, на которые повлияет эта операция переименования. В частности, будут выделены все, которые ссылаются на `Products`. Это очень похоже на задачу «Найти все ссылки» в предыдущей процедуре. Щелкните в любом месте в верхней области и просмотрите фактические изменения в скриптах (выделены зеленым) в нижней области.  
  
5.  Нажмите кнопку **Применить**.  
  
6.  Обратите внимание, что в редакторе Transact\-SQL в файлах скриптов, которые уже открыты в конструкторе таблиц или редакторе Transact\-SQL, места с внесенными изменениями выделены зеленой полосой слева.  
  
7.  Также обратите внимание на добавление журнала **TradeDev.refactorlog** в **обозревателе решений**. Дважды щелкните его, чтобы открыть. Он содержит XML-представление всех изменений в этом сеансе.  
  
8.  Нажмите клавишу F5 для построения и развертывания проекта в локальной базе данных.  
  
9. Правой кнопкой мыши щелкните базу данных **TradeDev** в разделе **Local** **обозревателя объектов SQL Server** и выберите команду **Обновить**.  
  
10. Разверните узел **Таблицы** и обратите внимание, что таблица **Products** уже переименована.  
  
11. Правой кнопкой мыши щелкните **Product** и выберите **Просмотр данных**. Обратите внимание, что существующие данные остаются без изменений, несмотря на операцию переименования.  
  
### <a name="to-expand-wildcards"></a>Разворачивание символов-шаблонов  
  
1.  Разверните узел **Функции** в **обозревателе решений** и дважды щелкните **GetProductsBySupplier.sql**.  
  
2.  Поместите курсор на звездочке в этой строке и щелкните правой кнопкой мыши. Выберите **Рефакторинг** и **Сделать подстановки**.  
  
    ```  
    SELECT * from Product p  
    ```  
  
3.  В диалоговом окне **Предварительный просмотр изменений** щелкните символ `SELECT * from Product p` на верхней панели, чтобы выделить его.  
  
4.  Обратите внимание, что в расположенной ниже области **Предварительный просмотр изменений** символ `*` развернут в скрипте.  
  
    ```  
    [Id], [Name], [ShelfLife], [SupplierId], [CustomerId]  
    ```  
  
5.  Нажмите кнопку **Применить**.  Обратите внимание, что линия, которая содержит изменения, внесенные операцией разворачивания, снова выделены зеленой полосой слева.  
  
### <a name="to-fully-qualify-database-object-names"></a>Указание полных имен объектов баз данных  
  
1.  Убедитесь, что файл **GetProductsBySupplier.sql** еще открыт в редакторе Transact\-SQL.  
  
2.  Поместите курсор на `Product` в этой строке и щелкните правой кнопкой мыши. Выберите **Рефакторинг** и **Определить имена полностью**.  
  
    ```  
    SELECT [Id], [Name], [ShelfLife], [SupplierId], [CustomerId] from Product p  
    ```  
  
3.  Нажмите кнопку **Применить** в диалоговом окне **Предварительный просмотр изменений**.  Обратите внимание, что обновились все ссылки на объекты: теперь в них указано имя схемы объекта, а также имя родительского элемента, если он есть у объекта.  
  
    ```  
    SELECT [p].[Id], [p].[Name], [p].[ShelfLife], [p].[SupplierId], [p].[CustomerId] from [dbo].[Product] p  
    ```  
  
### <a name="to-move-schema"></a>Перемещение схемы  
  
1.  Щелкните правой кнопкой мыши объект, который нужно переместить. Выберите **Рефакторинг**, а затем **Переместить схему**.  
  
2.  В списке **Новая схема** щелкните имя схемы, в которую нужно переместить объект. Нажмите кнопку «ОК».  
  
    Если флажок **Предварительный просмотр изменений** установлен, откроется диалоговое окно **Предварительный просмотр изменений**. В противном случае имя объекта будет обновлено, а объект будет перемещен в новую схему.  
  
