---
title: выполнить отладку хранимой процедуры
description: Узнайте, как использовать отладчик Transact-SQL для интерактивной отладки хранимых процедур. Узнайте, как отобразить стек вызовов SQL, локальные переменные и параметры.
ms.prod: sql
ms.technology: ssdt
ms.topic: conceptual
f1_keywords:
- SQL.DATA.TOOLS.EXECUTESTOREDPROCEDURE.DIALOG
ms.assetid: e3c8707f-0f6b-4265-8a5a-81f079330b52
author: markingmyname
ms.author: maghan
ms.reviewer: “”
ms.custom: seo-lt-2019
ms.date: 02/09/2017
ms.openlocfilehash: fc60da27d0176057fb7340b4db743786efe27017
ms.sourcegitcommit: b860fe41b873977649dca8c1fd5619f294c37a58
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2020
ms.locfileid: "85518874"
---
# <a name="how-to-debug-stored-procedures"></a>Руководство. выполнить отладку хранимой процедуры

Отладчик Transact\-SQL позволяет в интерактивном режиме отлаживать хранимые процедуры, отображая стек вызовов SQL, локальные переменные и параметры хранимой процедуры SQL. Как и в других языках программирования, при отладке скриптов Transact\-SQL вы можете просматривать и изменять локальные переменные и параметры, просматривать глобальные переменные, а также управлять точками останова.  
  
В этом примере показаны пошаговое создание и отладка хранимой процедуры Transact\-SQL.  
  
> [!WARNING]  
> В следующих процедурах используются сущности, созданные в процедурах, которые описываются ранее в разделе [Разработка подключенной базы данных](../ssdt/connected-database-development.md) и статье [Разработка базы данных вне сети с учетом проекта](../ssdt/project-oriented-offline-database-development.md).  
  
### <a name="to-debug-stored-procedures"></a>Отладка хранимых процедур  
  
1.  В **обозревателе решений** щелкните правой кнопкой мыши проект **TradeDev**, выберите **Добавить** и **Хранимая процедура**. Присвойте этой новой хранимой процедуре имя **AddProduct** и щелкните **Добавить**.  
  
2.  Вставьте следующий код в хранимую процедуру.  
  
    ```  
    CREATE PROCEDURE [dbo].[AddProduct]  
    @id int,  
    @name nvarchar(128)  
    AS  
    INSERT INTO [dbo].[Product] (Id, Name) VALUES (@id, @name)  
    ```  
  
3.  Нажмите клавишу F5 для построения и развертывания проекта.  
  
4.  В окне обозревателя объектов SQL Server в узле **Локальные** щелкните правой кнопкой мыши базу данных **TradeDev** и выберите команду **Создать запрос**.  
  
5.  Вставьте следующий код в окно запроса.  
  
    ```  
    EXEC [dbo].[AddProduct] 50, N'Contoso';  
    GO  
    ```  
  
6.  Щелкните в левом поле окна, чтобы добавить точку останова в инструкцию `EXEC`.  
  
7.  Щелкните стрелку раскрывающегося списка на кнопке с зеленой стрелкой на панели инструментов редактора Transact\-SQL и выберите команду **Выполнить с отладчиком**, чтобы выполнить запрос в режиме отладки.  
  
8.  Вы также можете запустить отладку из обозревателя объектов SQL Server. Щелкните правой кнопкой мыши хранимую процедуру **AddProduct** (чтобы найти ее, последовательно выберите **Локально** -> **TradeDev** -> **Программирование** -> **Хранимые процедуры**). Выберите команду **Отладка процедуры...** . Если для объекта требуется задать параметры, то откроется диалоговое окно **Отладка процедуры** с таблицей, каждая строка которой будет соответствовать параметру. Каждая строка таблицы состоит из двух столбцов: один для имени параметра, а другой для его значения. Введите значение для каждого параметра и нажмите кнопку «ОК».  
  
9. Окно **Locals** (Локальные) должно быть открыто. Если оно не открыто, откройте меню **Отладка**, выберите пункты **Окна** и **Локально**.  
  
10. Нажмите клавишу F11 для пошагового выполнения запроса. Обратите внимание, что параметры хранимой процедуры и соответствующие значения отображаются в окне **Locals** (Локальные). Кроме того, можно навести указатель мыши на параметр `@name` в предложении `INSERT`: отобразится присвоенное параметру значение **Contoso**.  
  
11. Щелкните **Contoso** в текстовом поле. Введите **Fabrikam** и нажмите клавишу ВВОД, чтобы изменить значение переменной `name` во время отладки. Кроме того, ее значение можно изменить в окне **Locals**.(Локальные). Обратите внимание, что значение параметра теперь отображается красным цветом, означающим его изменение.  
  
12. Нажмите клавишу F10, чтобы пройти по оставшемуся коду.  
  
13. В обозревателе объектов SQL Server обновите узел базы данных **TradeDev**, чтобы просмотреть новое содержимое в представлении данных для таблицы **Product**.  
  
14. В окне обозревателя объектов SQL Server в узле **Локально** найдите таблицу **Product** базы данных **TradeDev**.  
  
15. Щелкните правой кнопкой мыши таблицу **Product** и выберите **Просмотр данных**. Обратите внимание, что в таблицу добавилась новая строка.  
  
