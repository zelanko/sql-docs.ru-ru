---
title: 'Занятие 3: Использование программы командной строки dta | Документация Майкрософт'
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: sql-tools
ms.component: dta
ms.reviewer: ''
ms.suite: sql
ms.technology: performance
ms.tgt_pltfrm: ''
ms.topic: conceptual
applies_to:
- SQL Server 2016
helpviewer_keywords:
- Database Engine [SQL Server], tutorials
ms.assetid: 30f27f4d-8852-4b12-ba62-57f63e496f1d
caps.latest.revision: 26
author: stevestein
ms.author: sstein
manager: craigg
ms.openlocfilehash: 6fa260e1a20f13736b9df767508e4cf8a1b94de5
ms.sourcegitcommit: 95093f8b4f3d02f8d55d415f03a241102a641cb3
ms.translationtype: MTE75
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39654239"
---
# <a name="lesson-3-using-the-dta-command-prompt-utility"></a>Занятие 3. Использование программы командной строки dta
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
Программа командной строки **dta** расширяет функциональные возможности помощника по настройке ядра СУБД.  
  
Применяя XML-схему помощника по настройке ядра СУБД, пользователь может создавать входные файлы данной программы с помощью удобных для себя средств XML. Эта схема устанавливается вместе со службами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и находится по следующему адресу: C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd.  
  
XML-схема помощника по настройке ядра СУБД также доступна на [веб-сайте корпорации Майкрософт](http://go.microsoft.com/fwlink/?linkid=43100&clcid=0x409).  
  
XML-схема помощника по настройке ядра СУБД расширяет спектр параметров настройки. Например, с ее помощью можно проводить анализ гипотетических вариантов. При этом виде анализа задается набор существующих и допустимых структур физического проектирования для базы данных, которую необходимо настроить, а затем с использованием помощника по настройке ядра СУБД выполняется анализ данного набора, цель которого — выявить, повысит ли такая допустимая структура физического проектирования скорость обработки запросов. Преимущество этого типа анализа заключается в оценке новой настройки без накладных расходов, связанных с ее фактической реализацией. Если предложенная допустимая физическая структура не дает требуемого улучшения производительности, ее можно легко изменить и снова выполнить анализ, повторяя эту процедуру до тех пор, пока не будет найдена конфигурация, обеспечивающая необходимые результаты.  
  
Кроме того, использование схемы XML помощника по настройке ядра СУБД и программы командной строки **dta** позволяет внедрить функциональность помощника по настройке ядра СУБД в скрипты и использовать его в сочетании с другими средствами проектирования баз данных.  
  
Тематика применения функциональности ввода данных на языке XML с использованием помощника по настройке ядра СУБД выходит за рамки данного занятия.  
  
Эта задача помогает запустить программу **dta** , просмотреть ее справку, а затем использовать эту программу для настройки рабочей нагрузки из командной строки. Программа использует рабочую нагрузку MyScript.sql, созданную для использовании графического пользовательского интерфейса помощника по настройке ядра СУБД (см. руководство по [настройке рабочей нагрузки](lesson-2-using-database-engine-tuning-advisor.md#tuning-a-workload)).  
  
В руководстве используется образец базы данных AdventureWorks2017. В целях повышения безопасности образцы баз данных не установлены. Дополнительные сведения об установке образцов баз данных см. в статье [Установка образцов SQL Server и образцов баз данных](https://docs.microsoft.com/sql/samples/adventureworks-install-configure).  
  
В следующих задачах рассматривается открытие командной строки, запуск программы командной строки **dta** , просмотр справки по ее синтаксису, а также настройка простой рабочей нагрузки MyScript.sql, которая была создана в примере [Настройка рабочей нагрузки](../../tools/dta/lesson-1-1-tuning-a-workload.md).  

## <a name="prerequisites"></a>предварительные требования 

Для работы с этим учебником требуется среда SQL Server Management Studio, доступ к серверу SQL Server и база данных AdventureWorks.

- Установите выпуск [SQL Server 2017 Developer Edition](https://www.microsoft.com/sql-server/sql-server-downloads).
- Скачайте [пример базы данных AdventureWorks2017](https://docs.microsoft.com/sql/samples/adventureworks-install-configure).


См. инструкции по [восстановлению резервной копии базы данных с помощью SSMS](https://docs.microsoft.com/sql/relational-databases/backup-restore/restore-a-database-backup-using-ssms?view=sql-server-2017).

  >[!NOTE]
  > Этот учебник предназначен для пользователей, знакомых с использованием SQL Server Management Studio и основные задачи администрирования. 

## <a name="access-dta-command-prompt-utility-help-menu"></a>Доступ DTA командной строки программы меню "Справка"
  
  
1.  В меню **Пуск** наведите указатель на пункт **Все программы**, затем на пункт **Стандартные**и выберите пункт **Командная строка**.  
  
2.  В командной строке введите следующую команду и нажмите клавишу ВВОД:  
  
    ```  
    dta -? | more  
    ```  
  
    Часть `| more` этой команды является необязательной. Однако ее использование позволит пролистывать справку по синтаксису этой программы. Нажимайте клавишу ВВОД, чтобы просматривать текст справки построчно, или клавишу ПРОБЕЛ, чтобы перелистывать текст справки по страницам.  

  ![Использование справки с помощью служебной программы командной строки DTA](media/dta-tutorials/dta-cmd-help.png)

## <a name="tune-simple-workload-using-the-dta-command-prompt-utility"></a>Настройка простой рабочей нагрузки с помощью командной строки dta  


  
1.  В командной строке перейдите в каталог, где был сохранен файл MyScript.sql.  
  
2.  В командной строке введите следующую команду и нажмите клавишу ВВОД, чтобы запустить команду и начать сеанс настройки (обратите внимание, что программа учитывает регистр в ходе синтаксического анализа команд):  
  
    ```  
    dta -S YourServerName\YourSQLServerInstanceName -E -D AdventureWorks2012 -if MyScript.sql -s MySession2 -of MySession2OutputScript.sql -ox MySession2Output.xml -fa IDX_IV -fp NONE -fk NONE  
    ```  
  
    где `-S` указывает имя сервера и экземпляр служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на котором установлена база данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] . Параметр `-E` указывает, что требуется использовать доверительное соединение с экземпляром. Это целесообразно, если соединение устанавливается с учетной записью домена Windows. Параметр `-D` указывает базу данных, которую нужно настроить, параметр `-if` указывает файл рабочей нагрузки, параметр `-s` указывает имя сеанса, параметр `-of` указывает файл, в который средство должно записать скрипт рекомендаций [!INCLUDE[tsql](../../includes/tsql-md.md)] , а параметр `-ox` указывает файл, в который средство должно записать рекомендации в формате XML. Последние три параметра управляют настройкой следующим образом: параметр `-fa IDX_IV` указывает, что помощник по настройке ядра СУБД должен добавлять только индексы (как кластеризованные, так и некластеризованные) и индексированные представления; параметр `-fp NONE` указывает, что в ходе анализа не должна учитываться стратегия секционирования; параметр `-fk NONE` указывает, что существующие в базе данных структуры физического проектирования не должны сохраняться при формировании рекомендаций помощником по настройке ядра СУБД.  

  ![с использованием командной строки с DTA](media/dta-tutorials/dta-cmd.png)
  
3.  Закончив настройку рабочей нагрузки, помощник по настройке ядра СУБД выведет сообщение, свидетельствующее об успешном завершении сеанса настройки. Можно просмотреть результаты настройки, используя среду [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] , чтобы открыть файлы MySession2OutputScript.sql и MySession2Output.xml. Кроме того, сеанс настройки MySession2 можно открыть в графическом интерфейсе помощника по настройке ядра СУБД и просмотреть его рекомендации и отчеты, что рассматривалось в разделах [Просмотр рекомендаций по настройке](../../tools/dta/lesson-1-2-viewing-tuning-recommendations.md) и [Просмотр отчетов настройки](../../tools/dta/lesson-1-3-viewing-tuning-reports.md).  
  
 
## <a name="after-you-finish-this-tutorial"></a>После завершения работы с этим учебником  
Выполнив задания этого учебника, изучите следующие разделы, чтобы получить дополнительные сведения о помощнике по настройке ядра СУБД:  
  
-   В статье[Database Engine Tuning Advisor](../../relational-databases/performance/database-engine-tuning-advisor.md) описывается выполнение задач с использованием этого средства. 
-   [dta Utility](../../tools/dta/dta-utility.md) — справочный материал по программе командной строки и дополнительному XML-файлу, который вы можете использовать для управления ее работой.  
  
Чтобы вернуться к началу учебника, воспользуйтесь ссылкой [Учебник. Помощник по настройке ядра СУБД](../../tools/dta/tutorial-database-engine-tuning-advisor.md).  
  
## <a name="see-also"></a>См. также:  
[Учебники по компоненту ядра СУБД](../../relational-databases/database-engine-tutorials.md)  
    
