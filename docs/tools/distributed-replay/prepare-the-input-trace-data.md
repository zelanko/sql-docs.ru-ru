---
title: Подготовка входных данных трассировки
titleSuffix: SQL Server Distributed Replay
ms.prod: sql
ms.prod_service: sql-tools
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: c14fd3d2-5770-47c2-a851-cc13ddbc9bf5
author: markingmyname
ms.author: maghan
ms.custom: seo-lt-2019
ms.date: 03/14/2017
ms.openlocfilehash: 514d11ded0761cd4719b3d3a44b7c91d08d97e04
ms.sourcegitcommit: b78f7ab9281f570b87f96991ebd9a095812cc546
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/31/2020
ms.locfileid: "75307008"
---
# <a name="prepare-the-input-trace-data"></a>Подготовка входных данных трассировки

[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]

Прежде чем начинать распределенное воспроизведение с помощью функции распределенного воспроизведения [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], необходимо подготовить входные данные трассировки, а для этого инициировать стадию предварительной подготовки с помощью средства администрирования распределенного воспроизведения. На стадии предварительной обработки контроллер распределенного воспроизведения обрабатывает данные трассировки и формирует промежуточный файл:  
  
 ![Стадия предварительной обработки распределенного воспроизведения](../../tools/distributed-replay/media/preprocess.gif "Стадия предварительной обработки распределенного воспроизведения")  
  
 Дополнительные сведения о программе распределенного воспроизведения см. в разделе [Распределенное воспроизведение SQL Server](../../tools/distributed-replay/sql-server-distributed-replay.md).  
  
> [!NOTE]  
>  Входные данные трассировки должны быть получены в версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , совместимой с распределенным воспроизведением. Кроме того, эти данные должны быть совместимы с целевым сервером, на котором планируется их воспроизведение. Дополнительные сведения о требованиях к версии см. в разделе [Distributed Replay Requirements](../../tools/distributed-replay/distributed-replay-requirements.md).  
  
### <a name="to-prepare-the-input-trace-data"></a>Подготовка входных данных трассировки  
  
1.  **(Необязательно) Измените параметры конфигурации предварительной подготовки**. Если нужно изменить параметры конфигурации предварительной подготовки, например указать, следует ли фильтровать системные сеансы или настроить максимальное время простоя, нужно изменить элемент `<PreprocessModifiers>` в файле конфигурации `DReplay.exe.preprocess.config` для предварительной подготовки на основе XML. При изменении файла конфигурации предварительной подготовки рекомендуется изменять его копию, а не оригинал. Чтобы изменить параметры, выполните следующие действия.  
  
    1.  Скопируйте файл конфигурации предварительной подготовки по умолчанию, `DReplay.exe.preprocess.config`, и переименуйте копию. Файл конфигурации предварительной подготовки по умолчанию расположен в папке установки средства администрирования.  
  
    2.  Измените параметры конфигурации предварительной подготовки в новом файле конфигурации.  
  
    3.  При запуске этапа предварительной обработки (следующий шаг) используйте параметр *config_file* параметра **preprocess** , чтобы задать расположение измененного файла конфигурации.  
  
     Дополнительные сведения о файле конфигурации предварительной обработки см. в разделе [Настройка распределенного воспроизведения](../../tools/distributed-replay/configure-distributed-replay.md).  
  
2.  **Инициация стадии предварительной обработки.** Для подготовки входных данных трассировки необходимо запустить средство администрирования с параметром **preprocess**. Дополнительные сведения см. в разделе [Параметр предварительной обработки (средство администрирования распределенного воспроизведения)](../../tools/distributed-replay/preprocess-option-distributed-replay-administration-tool.md).  
  
    1.  Откройте программу командной строки Windows (**CMD.exe**) и перейдите в место установки средства администрирования распределенного воспроизведения (**DReplay.exe**).  
  
    2.  (Необязательно.) Используйте параметр *controller* , **-m**, чтобы указать контроллер, если служба контроллера и инструмент администрирования работают на разных компьютерах.  
  
    3.  Используйте параметр *input_trace_file* , **-i**, чтобы указать расположение и имена входных файлов трассировки.  
  
    4.  Используйте параметр *controller_working_directory* , **-d**, чтобы указать место сохранения промежуточного файла на контроллере.  
  
    5.  Используйте параметр *config_file* , **-c**, чтобы указать расположение файла конфигурации предварительной обработки (необязательно). Этот параметр позволяет указать новый файл конфигурации, если используется измененная копия файла конфигурации предварительной подготовки по умолчанию.  
  
    6.  Используйте параметр *status_interval* , **-f**, если нужно, чтобы средство администрирования отображало сообщения о состоянии не каждые 30 секунд, а с другим интервалом (необязательно).  
  
     Например, для запуска этапа предварительной обработки на компьютере, на котором выполняется служба контроллера, с файлом трассировки, расположенным по адресу `c:\trace1.trc`, рабочим каталогом контроллера, расположенным в по адресу `c:\WorkingDir` , и сообщением о состоянии, по умолчанию отображаемым каждые 30 секунд, требуется следующий синтаксис: `dreplay preprocess -i c:\trace1.trc -d c:\WorkingDir`  
  
3.  После завершения предварительной подготовки промежуточный файл сохраняется в рабочем каталоге контроллера. Для воспроизведения событий необходимо запустить средство администрирования с параметром **replay** . Дополнительные сведения см. в разделе [Воспроизведение данных трассировки](../../tools/distributed-replay/replay-trace-data.md).  
  
## <a name="see-also"></a>См. также:  
 [Распределенное воспроизведение SQL Server](../../tools/distributed-replay/sql-server-distributed-replay.md)   
 [Distributed Replay Requirements](../../tools/distributed-replay/distributed-replay-requirements.md)   
 [Параметры командной строки средства администрирования (программа распределенного воспроизведения)](../../tools/distributed-replay/administration-tool-command-line-options-distributed-replay-utility.md)   
 [Настройка распределенного воспроизведения](../../tools/distributed-replay/configure-distributed-replay.md)  
  
  
