---
title: Установка распределенного воспроизведения | Документы Microsoft
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: sql-tools
ms.service: ''
ms.component: distributed-replay
ms.reviewer: ''
ms.suite: sql
ms.technology:
- setup-install
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ea1171da-f50e-4f16-bedc-5e468a46477f
caps.latest.revision: 21
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.workload: Inactive
ms.openlocfilehash: 74011785d0185529e04610d55829e689d8dbec3a
ms.sourcegitcommit: a85a46312acf8b5a59a8a900310cf088369c4150
ms.translationtype: MTE
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="install-distributed-replay"></a>Установка распределенного воспроизведения
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  Распределенное воспроизведение можно установить одним из трех способов:  
  
-   [Установка распределенного воспроизведения из мастера установки](#bkmk_wizard)  
  
-   [Установка распределенного воспроизведения из командной строки](#bkmk_command_prompt)  
  
-   [Установка компонентов распределенного воспроизведения с помощью файла конфигурации](#bkmk_configuration_file)  
  
##  <a name="bkmk_wizard"></a> Установка распределенного воспроизведения из мастера установки  
 Установите компоненты распределенного воспроизведения [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с помощью мастера установки [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] . При планировании расположения установленных компонентов примите во внимание следующее.  
  
-   Средство администрирования можно установить на том же компьютере, что и контроллер распределенного воспроизведения, или на другом компьютере.  
  
-   В каждой среде распределенного воспроизведения можно установить только один контроллер.  
  
-   Службу клиента можно установить не более чем на 16 компьютерах (физических или виртуальных).  
  
-   Только один экземпляр службы клиента может быть установлен на компьютере контроллера распределенного воспроизведения. Если в среде распределенного воспроизведения будет больше одного клиента, не рекомендуется устанавливать службу клиента на том же компьютере, что и контроллер. Это может снизить общую скорость распределенного воспроизведения.  
  
-   Для сценариев тестирования производительности не рекомендуется устанавливать средство администрирования, службу контроллера распределенного воспроизведения или службу клиента на целевом экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Установка компонентов на целевом сервере должна выполняться только для проверки совместимости приложений.  
  
-   После установки контроллер распределенного воспроизведения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен быть запущен перед запуском службы клиента распределенного воспроизведения на клиентах.  
  
> [!NOTE]  
>  Чтобы удалить или изменить компоненты распределенного воспроизведения, воспользуйтесь окном **Программы и компоненты** Windows на **Панели управления**. Выберите [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] в окне **Удаление или изменение программы** и нажмите кнопку **Удалить** , чтобы открыть мастер установки [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] . На странице **Выбор компонентов** укажите компоненты программы распределенного воспроизведения, которые нужно удалить.  
  
 **Предварительные условия.**  
  
-   Убедитесь, что компьютеры, которые предполагается использовать, отвечают требованиям, описанным в разделе [Distributed Replay Requirements](../../tools/distributed-replay/distributed-replay-requirements.md).  
  
-   Прежде чем начать эту процедуру, создайте учетные записи домена, под которыми будут запускаться службы контроллера и клиента. Рекомендуется, чтобы эти учетные записи не были членами группы «Администраторы» Windows. Дополнительные сведения см. в подразделе «Учетные записи клиента и служб» раздела [Distributed Replay Security](../../tools/distributed-replay/distributed-replay-security.md) .  
  
    > [!NOTE]  
    >  Локальные пользовательские учетные записи можно использовать, если на одном компьютере используется средство администрирования, службы контроллера и клиента.  
  
 **Расположение установки.**  
  
 Если используются расположения файлов по умолчанию и стандартная установка, базовый каталог находится в каталоге C:\Program Files\Microsoft SQL Server. Ниже показано, где именно в этом каталоге устанавливаются двоичные файлы и сборки.  
  
-   32-разрядные системы:  
  
     [!INCLUDE[ssInstallPath](../../includes/ssinstallpath-md.md)]Инструменты  
  
     \- OR -  
  
     \<Общий каталог компонента>\Tools\\ (предоставленный пользователем альтернативный общий каталог компонента)  
  
-   64-разрядные системы:  
  
     C:\Program Files\\[!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (x86)\130\Tools  
  
     \- OR -  
  
     \<Общий каталог компонента (х86)>\Tools\\ (предоставленный пользователем альтернативный общий каталог компонента (x86))  
  
#### <a name="to-install-distributed-replay-features"></a>Установка компонентов распределенного воспроизведения  
  
1.  Чтобы начать установку компонентов распределенного воспроизведения, запустите мастер установки [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] .  
  
2.  На странице **Правила поддержки установки** указаны проблемы, которые могут возникнуть в ходе установки файлов поддержки SQL Server. Прежде чем продолжить установку, следует устранить все ошибки поддержки установки.  
  
3.  На странице **Ключ продукта** выберите переключатель установки бесплатного выпуска [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]или рабочей версии продукта, которая имеет ключ PID. Дополнительные сведения см. в статье [Выпуски и компоненты SQL Server 2016](../../sql-server/editions-and-components-of-sql-server-2016.md).  
  
4.  На странице **Условия лицензии** прочтите лицензионное соглашение и установите флажок, подтверждая принятие условий соглашения. Чтобы помочь в улучшении [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно также включить параметр наблюдения за использованием компонентов и отправлять отчеты в [!INCLUDE[msCoName](../../includes/msconame-md.md)].  
  
5.  На странице **Файлы поддержки программы установки** щелкните **Установить** , чтобы установить или обновить файлы поддержки программы установки для [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].  
  
6.  На странице **Роль установки** выберите **Установка компонентов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]**, а затем нажмите кнопку **Далее**, чтобы перейти на страницу **Выбор компонентов**.  
  
7.  На странице **Выбор компонентов** укажите компоненты, которые необходимо установить.  
  
    -   Чтобы установить средства администрирования, выберите **Основные средства управления**.  
  
    -   Чтобы установить службу контроллера, выберите **Контроллер распределенного воспроизведения**.  
  
    -   Чтобы установить службу клиента, выберите **Клиент распределенного воспроизведения**.  
  
     **Важно**! При настройке контроллера распределенного воспроизведения можно указать одну или несколько учетных записей, которые будут использоваться для запуска служб клиента распределенного воспроизведения. Далее представлен список поддерживаемых учетных записей.  
  
    -   Доменная учетная запись пользователя  
  
    -   Пользователь, который создал учетную запись локального пользователя  
  
    -   Администратор  
  
    -   Виртуальная учетная запись и управляемая учетная запись службы (MSA)  
  
    -   Сетевые службы, локальные службы и система  
  
     Учетные записи групп (локальные или доменные) и другие встроенные учетные записи (например, «Все») не принимаются.  
  
8.  При необходимости нажмите кнопку с многоточием (…), чтобы изменить путь к общей папке компонента.  
  
    1.  На 32-разрядных компьютерах путь установки по умолчанию — **C:\Program Files\\[!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]\\**  
  
    2.  На 64-разрядных компьютерах путь установки по умолчанию — **C:\Program Files (x86)\\[!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]\\**  
  
9. По завершении нажмите кнопку **Далее**.  
  
10. На странице **Правила установки** программа установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] проверяет конфигурацию компьютера. По завершении процесса проверки нажмите кнопку **Далее**.  
  
11. На странице **Требования к свободному месту на диске** вычисляется необходимое место на диске для указанных компонентов. Затем необходимое пространство сравнивается с доступным местом на диске.  
  
12. На странице **Отчеты об ошибках** укажите сведения, которые будут отправлены в корпорацию [!INCLUDE[msCoName](../../includes/msconame-md.md)] и помогут улучшить [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Параметр создания отчетов об ошибках включен по умолчанию.  
  
13. На странице **Правила настройки установки** перед началом операции обновления средство проверки конфигурации еще раз выполнит оценку конфигурации компьютера с выбранными компонентами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
14. На странице **Все готово для установки программы** нажмите кнопку **Установить**.  
  
    > [!IMPORTANT]  
    >  После установки компонентов распределенного воспроизведения необходимо создать правила брандмауэра на компьютерах контроллера и клиента и предоставить каждому из клиентских компьютеров разрешения на целевом сервере. Дополнительные сведения см. в статье [Выполнение действий после установки](../../tools/distributed-replay/complete-the-post-installation-steps.md).  
  
### <a name="net-framework-security"></a>Безопасность .NET Framework  
 Для установки компонентов распределенного воспроизведения необходимо обладать разрешениями администратора. Только имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с разрешениями sysadmin может добавлять учетные записи службы клиента в роль sysadmin тестового сервера. Дополнительные сведения о вопросах безопасности распределенного воспроизведения см. в разделе [Distributed Replay Security](../../tools/distributed-replay/distributed-replay-security.md).  
  
##  <a name="bkmk_command_prompt"></a> Установка распределенного воспроизведения из командной строки  
 При установке нового экземпляра программы распределенного воспроизведения из командной строки можно указать устанавливаемые компоненты и способ их настройки. Установка из командной строки поддерживает установку, восстановление, обновление и удаление компонентов распределенного воспроизведения. При установке из командной строки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] поддерживает полностью тихий режим (включается параметром /Q).  
  
> [!NOTE]  
>  Для локальных установок необходимо запускать программу установки с правами администратора. При установке [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] из удаленной общей папки необходимо использовать учетную запись домена с разрешениями на чтение и выполнение для удаленной общей папки.  
  
### <a name="installation-parameters"></a>Параметры установки  
 В список компонентов верхнего уровня входят [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]и средства. Компонент «Инструменты» устанавливает средства управления [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , электронную документацию по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , среду [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]и другие общие компоненты. Чтобы установить компоненты программы распределенного воспроизведения, укажите следующие параметры:  
  
|Компонент|Параметр|  
|---------------|---------------|  
|Контроллер распределенного воспроизведения|**DREPLAY_CTLR**|  
|Клиент распределенного воспроизведения|**DREPLAY_CLT**|  
|Средство администрирования|**Инструменты**|  
  
> [!IMPORTANT]  
>  После установки компонентов распределенного воспроизведения необходимо создать правила брандмауэра на компьютерах контроллера и клиента и предоставить каждому из клиентских компьютеров разрешения на целевом сервере. Дополнительные сведения см. в статье [Выполнение действий после установки](../../tools/distributed-replay/complete-the-post-installation-steps.md).  
  
 При разработке скриптов установки из командной строки можно использовать параметры, приведенные в следующей таблице.  
  
|Параметр|Description|Поддерживаемые значения|  
|---------------|-----------------|----------------------|  
|/CTLRSVCACCOUNT<br /><br /> **Необязательно**|Учетная запись службы контроллера распределенного воспроизведения.|Проверяет учетную запись и пароль|  
|/CTLRSVCPASSWORD<br /><br /> **Необязательно**|Пароль учетной записи службы контроллера распределенного воспроизведения.|Проверяет учетную запись и пароль|  
|/CTLRSTARTUPTYPE<br /><br /> **Необязательно**|Тип запуска службы контроллера распределенного воспроизведения.|Автоматически<br /><br /> Выключено<br /><br /> Вручную|  
|/CTLRUSERS<br /><br /> **Необязательно**|Укажите, какие пользователи имеют разрешения на службу контроллера распределенного воспроизведения.|Строка, содержащая коллекцию учетных записей пользователей, использующая в качестве разделителя пробел<br /><br /> **Важно**! При настройке службы контроллера распределенного воспроизведения можно указать одну или несколько учетных записей, которые будут использоваться для запуска служб клиента распределенного воспроизведения. Далее представлен список поддерживаемых учетных записей.<br /><br /> Доменная учетная запись пользователя<br /><br /> Пользователь, который создал учетную запись локального пользователя<br /><br /> Администратор<br /><br /> Администратор<br /><br /> Виртуальная учетная запись и управляемая учетная запись службы (MSA)<br /><br /> Сетевые службы, локальные службы и система<br /><br /> <br /><br /> Примечание. Учетные записи групп (локальные или доменные) и другие встроенные учетные записи (например, "Все") не принимаются.|  
|/CLTSVCACCOUNT<br /><br /> **Необязательно**|Учетная запись службы клиента распределенного воспроизведения.|Проверяет учетную запись и пароль|  
|/CLTSVCPASSWORD<br /><br /> **Необязательно**|Пароль учетной записи службы клиента распределенного воспроизведения.|Проверяет учетную запись и пароль|  
|/CLTSTARTUPTYPE<br /><br /> **Необязательно**|Тип запуска службы клиента распределенного воспроизведения.|Автоматически<br /><br /> Выключено<br /><br /> Вручную|  
|/CLTCTLRNAME<br /><br /> **Необязательно**|Введите имя компьютера, с которым взаимодействует клиент с помощью службы контроллера распределенного воспроизведения.||  
|/CLTWORKINGDIR<br /><br /> **Необязательно**|Рабочий каталог для службы клиента распределенного воспроизведения.|Верный путь|  
|/CLTRESULTDIR<br /><br /> **Необязательно**|Каталог результатов для службы клиента распределенного воспроизведения.|Верный путь|  
  
### <a name="sample-syntax"></a>Образец синтаксиса  
 **Установка контроллера распределенного воспроизведения**  
  
```  
setup /q /ACTION=Install /FEATURES=DREPLAY_CTLR /IAcceptSQLServerLicenseTerms /CTLRUSERS="domain\user1" "domain\user2" /CTLRSVCACCOUNT="domain\svcuser" /CTLRSVCPASSWORD="password" /CTLRSTARTUPTYPE=Automatic  
```  
  
 **Установка клиента распределенного воспроизведения**  
  
```  
setup /q /ACTION=Install /FEATURES=DREPLAY_CLT /IAcceptSQLServerLicenseTerms /CLTSVCACCOUNT="domain\svcuser" /CLTSVCPASSWORD="password" /CLTSTARTUPTYPE=Automatic /CLTCTLRNAME=ControllerMachineName /CLTWORKINGDIR="C:\WorkingDir" /CLTRESULTDIR="C:\ResultDir  
```  
  
##  <a name="bkmk_configuration_file"></a> Установка компонентов распределенного воспроизведения с помощью файла конфигурации  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] дает возможность создать файл конфигурации на основе данных пользователя и значений системы по умолчанию. Если необходимо установить средства управления, можно использовать файл конфигурации для развертывания трех компонентов распределенного воспроизведения (средство администрирования, контроллер распределенного воспроизведения и клиент распределенного воспроизведения). Поддерживает установку, восстановление и удаление компонентов распределенного воспроизведения.  
  
 Программа установки поддерживает использование файлов конфигурации только через командную строку. Порядок обработки параметров при использовании файла конфигурации описывается ниже.  
  
-   Файл конфигурации перезаписывает значения по умолчанию в пакете.  
  
-   Значения командной строки перезаписывают значения в файле конфигурации.  
  
 Дополнительные сведения см. в статье [Установка SQL Server 2016 с помощью файла конфигурации](../../database-engine/install-windows/install-sql-server-2016-using-a-configuration-file.md).  
  
> [!IMPORTANT]  
>  После установки компонентов распределенного воспроизведения необходимо создать правила брандмауэра на компьютерах контроллера и клиента и предоставить каждому из клиентских компьютеров разрешения на целевом сервере. Дополнительные сведения см. в статье [Выполнение действий после установки](../../tools/distributed-replay/complete-the-post-installation-steps.md).  
  
#### <a name="to-generate-a-configuration-file"></a>Создание файла конфигурации  
  
1.  Следуйте указаниям мастера установки до страницы **Все готово для установки** . Путь к файлу конфигурации указывается на странице **Все готово для установки** в разделе пути файла конфигурации.  
  
2.  Отмените установку, не завершая ее, чтобы создать INI-файл.  
  
#### <a name="to-install-distributed-replay-using-the-configuration-file"></a>Установка компонентов распределенного воспроизведения с помощью файла конфигурации  
  
-   Запустите установку из командной строки и укажите файл ConfigurationFile.ini в параметре ConfigurationFile.  
  
 **Образец синтаксиса**  
  
 Далее приведен пример указания файла конфигурации в командной строке.  
  
```  
Setup.exe /CTLRSVCPASSWORD="ctlrsvcpswd" /CLTSVCPASSWORD="cltsvcpswd" / ConfigurationFile=ConfigurationFile.INI\  
```  
  
> [!NOTE]  
>  Необходимо указать оба пароля в командной строке, так как их нельзя задать в файле конфигурации.  
  
## <a name="see-also"></a>См. также:  
 [Возможности, поддерживаемые различными выпусками SQL Server 2016](~/sql-server/editions-and-supported-features-for-sql-server-2016.md)   
 [Распределенное воспроизведение SQL Server](../../tools/distributed-replay/sql-server-distributed-replay.md)   
 [Distributed Replay Requirements](../../tools/distributed-replay/distributed-replay-requirements.md)   
 [Параметры командной строки средства администрирования (программа распределенного воспроизведения)](../../tools/distributed-replay/administration-tool-command-line-options-distributed-replay-utility.md)   
 [Настройка распределенного воспроизведения](../../tools/distributed-replay/configure-distributed-replay.md)  
  
  
