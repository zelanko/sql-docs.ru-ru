---
title: Флаги трассировки (Transact-SQL) | Документы Майкрософт
ms.custom: ''
ms.date: 01/08/2018
ms.prod: sql
ms.prod_service: sql-database
ms.service: ''
ms.component: t-sql|database-console-commands
ms.reviewer: ''
ms.suite: sql
ms.technology:
- database-engine
ms.tgt_pltfrm: ''
ms.topic: language-reference
dev_langs:
- TSQL
helpviewer_keywords:
- trace flags [SQL Server], about trace flags
- trace flags [SQL Server]
- global trace flags [SQL Server]
- flags [SQL Server]
- session trace flags [SQL Server]
- performance [SQL Server], trace
- debugging [SQL Server], trace flags
ms.assetid: b971b540-1ac2-435b-b191-24399eb88265
caps.latest.revision: 171
author: pmasl
ms.author: pelopes
manager: craigg
ms.workload: Active
ms.openlocfilehash: 1b0500c39e158f07c7371f853be7262ee9b82930
ms.sourcegitcommit: beaad940c348ab22d4b4a279ced3137ad30c658a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2018
---
# <a name="dbcc-traceon---trace-flags-transact-sql"></a>DBCC TRACEON — флаги трассировки (Transact-SQL)
[!INCLUDE[tsql-appliesto-ss2012-xxxx-xxxx-xxx-md](../../includes/tsql-appliesto-ss2012-xxxx-xxxx-xxx-md.md)]

Флаги трассировки используются для временной установки определенных характеристик сервера или отключения определенного режима. Например, если флаг трассировки 3205 установлен при запуске экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], то отключается режим аппаратного сжатия для ленточных накопителей. Флаги трассировки часто используются для диагностики проблем, связанных с производительностью, отладки хранимых процедур или сложных компьютерных систем.
  
В следующей таблице перечислены и описаны флаги трассировки, доступные в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
 
> [!NOTE]
> Некоторые флаги трассировки были представлены в определенных версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Дополнительные сведения о соответствующей версии см. в статье службы поддержки Майкрософт о конкретном флаге трассировки.

> [!IMPORTANT]
> Поведение флага трассировки может не поддерживаться в следующих версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. 

  
|Флаг трассировки|Description|  
|---|---|
|**139**| Исправляет семантику преобразования в области команд проверки DBCC, например [DBCC CHECKDB](../../t-sql/database-console-commands/dbcc-checkdb-transact-sql.md), [DBCC CHECKTABLE](../../t-sql/database-console-commands/dbcc-checktable-transact-sql.md) и [DBCC CHECKCONSTRAINTS](../../t-sql/database-console-commands/dbcc-checkconstraints-transact-sql.md), при анализе улучшенной логики точности и преобразования с уровнем совместимости 130 для определенного типа данных в базе данных с более низким уровнем совместимости. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/help/4010261).<br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM с накопительным пакетом обновления 3 (CU3), [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] пакетом обновления 1 (SP1) и более поздней версии сборки.<br /><br />**Предупреждение.** Флаг трассировки 139 не должен быть постоянно включен в рабочей среде. Используйте его исключительно для проверки базы данных, как описано в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/help/4010261). Отключите его сразу после завершения проверки.<br /><br />**Область**: только глобальная|
|**174**|Увеличивает число контейнеров в кэше планов [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] с 40 009 до 160 001 в 64-разрядных системах. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3026083).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: только глобальная|
|**176**|Включает исправление ошибок адреса при перестроении секций в сети для таблиц, содержащих вычисляемый столбец секционирования. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3213683).<br /><br />**Область**: глобальная или сеанс|
|**205**|Вносит запись в журнал ошибок при повторной компиляции хранимой процедуры, зависящей от статистики, в результате автоматического обновления статистики. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/195565).<br /><br />**Область**: только глобальная|
|**260**|Выводит сведения о версиях динамически загружаемых библиотек (DLL) расширенных хранимых процедур. Дополнительные сведения о **GetXpVersion()** см. в статье [Создание расширенных хранимых процедур](../../relational-databases/extended-stored-procedures-programming/creating-extended-stored-procedures.md).<br /><br />**Область:** глобальная или сеанс|
|**272**|Отключает предварительное распределение идентификаторов во избежание пропусков значений столбца идентификаторов в случаях, когда сервер неожиданно перезапускается или выполняет обработку отказа на сервер-получатель. Обратите внимание, что кэширование идентификаторов используется для повышения производительности инструкции INSERT в таблицах со столбцами идентификаторов.<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] для выполнения этой задачи на уровне базы данных см. описание параметра IDENTITY_CACHE в разделе [ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md).<br /><br />**Область**: только глобальная|
|**610**|Управляет вставками с минимальным протоколированием в индексированные таблицы. Этот флаг трассировки необязателен начиная с версии SQL Server 2016, поскольку минимальное протоколирование для индексированных таблиц включено по умолчанию. В SQL Server 2016, когда операция массовой загрузки вызывает выделение новой страницы, все строки, последовательно заполняющие эту новую страницу, имеют минимальное протоколирование, если выполняются остальные необходимые условия для минимального протоколирования. Строки, вставляемые в существующие страницы (без выделения новой страницы) для сохранения порядка индексов, по-прежнему протоколируются полностью, как и строки, перемещенные в результате разбиения страницы во время загрузки. Параметр ALLOW_PAGE_LOCKS должен иметь значение ON для индексов (указано по умолчанию), чтобы операция минимального протоколирования выполнялась, поскольку при выделении устанавливаются блокировки страниц, и протоколируются только выделения страниц или экстентов. Дополнительные сведения см. в разделе [Руководство по производительности загрузки данных](https://msdn.microsoft.com/library/dd425070.aspx).<br /><br />**Область**: глобальная или сеанс|
|**634**|Отключает фоновую задачу сжатия columnstore. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] периодически выполняет фоновую задачу переноса кортежей, которая сжимает группы строк индекса columnstore с несжатыми данными, по одной такой группе строк за раз.<br /><br />Сжатие columnstore позволяет повысить производительность запросов, но при этом потребляются ресурсы системы. Время выполнения сжатия columnstore можно задавать вручную путем отключения фоновой задачи сжатия с помощью флага трассировки 634 с последующим явным вызовом ALTER INDEX...REORGANIZE или ALTER INDEX...REBUILD в нужное время.<br /><br />**Область:** только глобальная|
|**652**|Отключение проверок при предзагрузке страниц. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область**: глобальная или сеанс|
|**661**|Отключает процесс удаления фантомных записей. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область**: только глобальная|
|**692**|Отключает быстрые операции вставки при массовой загрузке данных в кучу или кластеризованный индекс. Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] быстрые операции вставки включены по умолчанию с минимальным протоколированием, когда база данных находится в простой модели восстановления или в модели восстановления с неполным протоколированием для оптимизации производительности вставки записей в новые страницы. С помощью быстрой вставки каждый пакет массовой загрузки получает новый экстент или экстенты в обход поиска распределения существующего экстента в доступном свободном пространстве для оптимизации производительности операции вставки.<br /><br /> При использовании операций быстрой вставки массовая загрузка с пакетом небольшого размера может привести к увеличению неиспользуемого пространства, занимаемого объектами, поэтому рекомендуется использовать пакеты большого размера для полного заполнения экстента. Если увеличить размер пакета невозможно, этот флаг трассировки поможет сократить неиспользуемое пространство, зарезервированное в ущерб производительности. <br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM и более поздней версии сборки.<br /><br />**Область**: глобальная или сеанс|
|**715**|Включает блокировку таблицы для операций массовой загрузки в кучу без некластеризованных индексов. Если этот флаг трассировки включен, операции массовой загрузки получают блокировку массового обновления при выполнении массового копирования данных в таблицу. Блокировка массового обновления (BU) позволяет поддерживать несколько одновременных потоков массовой загрузки данных в одну и ту же таблицу и при этом запрещать доступ к таблице любым другим процессам, отличным от массовой загрузки данных.<br /><br />Это поведение аналогично тому, которое происходит при явном указании TABLOCK при выполнении массовой загрузки или при включении блокировки таблицы на массовую загрузку sp_tableoption для данной таблицы. Но если этот флаг трассировки включен, это становится поведением по умолчанию без изменения запроса или базы данных.<br /><br />**Область:** глобальная или сеанс|
|**834**|Использует распределения больших страниц Microsoft Windows для буферного пула. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3210239).<br /><br />**Примечание.** Если вы используете компонент индекса Columnstore [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] для [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], не рекомендуем включать флаг трассировки 834.<br /><br />**Область**: только глобальная|
|**845**|Включает заблокированные страницы на стандартных номерах SKU [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], если в учетной записи службы для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] включено разрешение на блокировку страниц в памяти. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/970070) и на странице документации в [параметрах конфигурации памяти сервера](../../database-engine/configure-windows/server-memory-server-configuration-options.md#lock-pages-in-memory-lpim).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] эта реакция включена по умолчанию для стандартных SKU, и флаг трассировки 845 не нужно использовать.<br /><br />**Область**: только глобальная|
|**902**|Пропускает выполнение скрипта обновления базы данных при установке накопительного пакета обновления или пакета обновления. Если в режиме обновления скрипта возникает ошибка, обратитесь в службу поддержки Microsoft SQL. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2163980).<br /><br />**Предупреждение.** Этот флаг трассировки предназначен для устранения сбоя обновлений в режиме обновления скрипта и не должен всегда быть включен в рабочей среде. Скрипты обновления базы данных должны успешно выполняться для полной установки накопительных пакетов обновлений и пакетов обновления. В противном случае в экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] могут возникнуть неожиданные ошибки.<br /><br />**Область**: только глобальная|
|**1117**|Если файл в файловой группе удовлетворяет требованиям порога автоматического увеличения, все файлы в файловой группе увеличиваются.<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется параметром AUTOGROW_SINGLE_FILE и AUTOGROW_ALL_FILES инструкции ALTER DATABASE, при этом флаг трассировки 1117 не оказывает никакого влияния. Дополнительные сведения см. в разделе [Параметры инструкции ALTER DATABASE (Transact-SQL) для файлов и файловых групп](../../t-sql/statements/alter-database-transact-sql-file-and-filegroup-options.md).<br /><br />**Область:** только глобальная|
|**1118**|Удаляет большинство одиночных размещений страниц на сервере, уменьшая вероятность конфликтов блокировок на странице SGAM. При создании нового объекта по умолчанию выделяются первые восемь страниц из различных экстентов (смешанные экстенты). Затем в случае возникновения необходимости увеличения страниц они выделяются из этого же экстента (однородный экстент). Страница SGAM используется для отслеживания таких смешанных экстентов, так как это может быстро стать узким местом, если происходят многочисленные размещения смешанных страниц. Данный флаг трассировки размещает при создании новых объектов все восемь страниц из одного и того же экстента, что сводит к минимуму необходимость сканирования страницы SGAM. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/328551).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется параметром SET MIXED_PAGE_ALLOCATION инструкции ALTER DATABASE, при этом флаг трассировки 1118 не оказывает никакого влияния. Дополнительные сведения см. в разделе [Параметры ALTER DATABASE SET (Transact-SQL)](../../t-sql/statements/alter-database-transact-sql-set-options.md).<br /><br />**Область:** только глобальная|  
|**1204**|Возвращает ресурсы и типы блокировки, участвующие во взаимоблокировке и текущую команду, на которую влияет взаимоблокировка. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/832524).<br /><br />**Область:** только глобальная|  
|**1211**|Отключает укрупнение блокировки, основанное на слишком активном использовании памяти или на количестве блокировок. Компонент [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] не будет повышать уровень блокировки с блокировки строки или страницы до блокировки таблицы.<br /><br />При использовании этого флага трассировки может быть создано излишнее количество блокировок. Это может привести к снижению производительности компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] или вызвать ошибки 1204 (невозможность выделить блокированный ресурс) из-за недостатка памяти.<br /><br />Если установлены оба флага трассировки 1211 и 1224, то флаг 1211 имеет более высокий приоритет. Однако, так как флаг трассировки 1211 препятствует укрупнению во всех случаях, даже при слишком активном использовании памяти, рекомендуется использовать флаг 1224. Это помогает избежать ошибок «отсутствия блокировок» при использовании большого числа блокировок.<br /><br />**Область**: глобальная или сеанс|  
|**1222**|Возвращает ресурсы и типы блокировок, участвующих во взаимоблокировке, а также текущую команду, на которую влияет взаимоблокировка, в формате XML, не соответствующем ни одной XSD-схеме.<br /><br />**Область**: только глобальная|  
|**1224**|Отключает укрупнение блокировок на основе количества блокировок. Однако слишком активное использование памяти может включить укрупнение блокировок. Компонент [!INCLUDE[ssDE](../../includes/ssde-md.md)] укрупняет блокировки строк или страниц до блокировок таблиц (или секций), если объем памяти, используемый блокированными объектами, превышает одно из следующих условий.<br /><br />— Сорок процентов памяти, которая используется компонентом [!INCLUDE[ssDE](../../includes/ssde-md.md)]. Применимо только в случае, если параметр **locks** процедуры sp_configure имеет значение 0.<br />— Сорок процентов памяти блокировки, настроенной на использование параметра **locks** процедуры sp_configure. Дополнительные сведения см. в разделе [Параметры конфигурации сервера (SQL Server)](../../database-engine/configure-windows/server-configuration-options-sql-server.md).<br /><br />Если установлены оба флага трассировки 1211 и 1224, то флаг 1211 имеет более высокий приоритет. Однако, так как флаг трассировки 1211 препятствует укрупнению во всех случаях, даже при слишком активном использовании памяти, рекомендуется использовать флаг 1224. Это помогает избежать ошибок «отсутствия блокировок» при использовании большого числа блокировок.<br /><br />**Примечание.** Укрупнением блокировки до уровня гранулярности таблицы или HoBT можно также управлять с помощью параметра LOCK_ESCALATION инструкции [ALTER TABLE](../../t-sql/statements/alter-table-transact-sql.md).<br /><br />**Область:** глобальная или сеанс|
|**1236**|Включает секционирование блокировок базы данных. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2926217).<br /><br />**Примечание.** Начиная с [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] с пакетом обновления 3 (SP3) и [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 1 (SP1) эта реакция управляется подсистемой, и флаг трассировки 1236 не оказывает влияния.<br /><br />**Область**: только глобальная|
|**1237**|Позволяет инструкции ALTER PARTITION FUNCTION соблюдать приоритет определяемой пользователем взаимоблокировки текущего сеанса, а не быть жертвой взаимоблокировки по умолчанию. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/help/4025261).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQLv14](../../includes/sssqlv14-md.md)] и базы данных с [уровнем совместимости](../../t-sql/statements/alter-database-transact-sql-compatibility-level.md) 140 эта реакция определена по умолчанию, и флаг трассировки 1237 не оказывает влияния.<br /><br />**Область**: глобальная, сеанс или запрос|
|**1260**|Отключение дампов монитора планировщика.<br /><br />**Область**: только глобальная|   
|**1448**|Разрешает средству чтения журнала репликации перемещаться вперед даже в том случае, если асинхронные вторичные реплики не подтвердили получение изменения. Средство чтения журнала всегда ожидает синхронные вторичные реплики, даже если установлен флаг трассировки. Средство чтения журнала не будет превышать минимальное время ожидания для синхронных вторичных реплик. Флаг трассировки применяется к экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], а не только к группе доступности, базе данных доступности или экземпляру средства чтения журнала. Вступает в силу немедленно без перезагрузки. Этот флаг трассировки не может быть активирован раньше времени или при сбое асинхронной вторичной реплики. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/937041).<br /><br />**Область**: только глобальная|   
|**1462**|Отключает сжатие потока журналов для асинхронных групп доступности. В асинхронных группах доступности эта функция включена по умолчанию для оптимизации пропускной способности сети. Дополнительные сведения см. в разделе [Tune compression for availability group](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)(Настройка сжатия для группы доступности).<br /><br />**Область**: только глобальная| 
|**1800**|Включает оптимизацию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], когда для первичной и вторичной реплики используются диски с разными размерами сектора в средах [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] AlwaysOn и доставки журналов. Этот флаг трассировки необходимо включать только для экземпляров SQL Server с файлом журнала транзакций, которые находятся на диске с размером сектора 512 байт. **Не** включайте его на диске с размером сектора 4 КБ. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3009974).<br /><br />**Область:** только глобальная|
|**2301**|Включает оптимизацию расширенной поддержки принятия решений. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область:** глобальная, сеанс и запрос|
|**2312**|Позволяет указывать модель оценки кратности оптимизатора запросов в версиях с [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] по [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] в зависимости от уровня совместимости базы данных. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2801413).<br /><br />Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'FORCE_DEFAULT_CARDINALITY_ESTIMATION' вместо этого флага трассировки.<br /><br />**Область**: глобальная, сеанс или запрос| 
|**2335**|Заставляет [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предположить, что во время оптимизации запросов доступен фиксированный объем памяти. Не ограничивает объем памяти, который [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставляет для выполнения запроса. Память, настроенная для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], будет по-прежнему использоваться кэшем данных, выполнением запросов и другими объектами-получателями. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2413549).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: глобальная, сеанс или запрос|
|**2340**|Заставляет [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не использовать операцию сортировки (сортировки пакетов) для оптимизации соединений вложенного цикла при формировании плана. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2009160).<br /><br />Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'DISABLE_OPTIMIZED_NESTED_LOOP' вместо этого флага трассировки.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: глобальная, сеанс или запрос|
|**2371**|Изменяет порог фиксированного автоматического обновления статистики на порог динамического автоматического обновления статистики. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2754171).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] и при [уровне совместимости базы данных](../../relational-databases/databases/view-or-change-the-compatibility-level-of-a-database.md) 130 эта реакция управляется подсистемой, и флаг трассировки 2371 не оказывает влияния.<br /><br />**Область**: только глобальная|
|**2389**|Включает автоматическое создание быстрой статистики для ключей, сортированных по возрастанию (поправка для гистограммы). Если флаг трассировки 2389 включен и начальный столбец статистики упорядочен по возрастанию, гистограмма, используемая для оценки кратности, будет скорректирована во время компиляции запроса. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2801413).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Примечание.** Этот флаг трассировки не применяется CE версии 120 или более поздней версии. Вместо него используйте флаг трассировки 4139.<br /><br />**Область**: глобальная, сеанс или запрос|
|**2390**|Включает автоматическое создание быстрой статистики для ключей, сортированных по возрастанию, или неизвестных ключей (поправка для гистограммы). Если флаг трассировки 2390 включен и начальный столбец статистики упорядочен по возрастанию или помечен как неизвестный, гистограмма, используемая для оценки кратности, будет скорректирована во время компиляции запроса. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2801413).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Примечание.** Этот флаг трассировки не применяется CE версии 120 или более поздней версии. Вместо него используйте флаг трассировки 4139.<br /><br />**Область**: глобальная, сеанс или запрос|
|**2422**|Позволяет [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] прервать запрос, если превышено максимальное время, заданное конфигурацией REQUEST_MAX_CPU_TIME_SEC. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/help/4038419).<br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] с накопительным пакетом обновления 3 (CU3) и более поздней версии сборки.<br /><br />**Область**: глобальная|
|**2430**|Включает альтернативную очистку класса блокировки. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2754301).<br /><br />**Область**: только глобальная| 
|**2453**|Позволяет табличной переменной вызывать перекомпиляцию после изменения достаточного числа строк. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2952444).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: глобальная, сеанс или запрос|
|**2469**|Позволяет заменить `INSERT INTO ... SELECT` на секционированный индекс columnstore. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3204769).<br /><br />**Область**: глобальная, сеанс или запрос|
|**2528**|Отключает параллельную проверку объектов с помощью инструкций DBCC CHECKDB, DBCC CHECKFILEGROUP и DBCC CHECKTABLE. По умолчанию степень параллелизма определяется обработчиком запросов автоматически. Максимальная степень параллелизма настраивается так же, как и параллельные запросы. Дополнительные сведения см. в разделе [Настройка параметра конфигурации сервера max degree of parallelism](../../database-engine/configure-windows/configure-the-max-degree-of-parallelism-server-configuration-option.md).<br /><br />**Примечание.** Должны быть включены параллельные проверки DBCC (по умолчанию). Обработчик запросов повторно оценивает и автоматически корректирует параллелизм в каждой таблице или пакете таблиц, которые проверяет DBCC CHECKDB.<br /><br />Типичное применение — когда системный администратор знает, что до завершения инструкции DBCC CHECKDB увеличится нагрузка на сервер, и решает вручную уменьшить или отключить параллелизм, чтобы увеличить параллелизм с рабочей нагрузкой других пользователей. Однако если параллельные проверки в DBCC CHECKDB отключены, операция может занимать больше времени.<br /><br />**Примечание.** Если DBCC CHECKDB выполняется при помощи параметра TABLOCK, а параллелизм отключен, таблицы могут дольше оставаться заблокированными.<br /><br />**Примечание.** Начиная с [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 2 (SP2) параметр MAXDOP может переопределять параметр максимальной степени параллелизма хранимой процедуры sp_configure для инструкции.<br /><br />**Область**: глобальная или сеанс|
|**2549**|Выполняет инструкцию DBCC CHECKDB с предположением, что каждый файл базы данных находится на уникальном диске. Команда DBCC CHECKDB создает внутренний список страниц для чтения для каждого уникального диска для всех файлов базы данных. Эта логика определяет уникальные диски по букве диска в имени физического файла.<br /><br />**Примечание.** Не используйте этот флаг трассировки, если не уверены, что каждый файл находится на уникальном физическом диске.<br /><br />**Примечание.** Хотя этот флаг трассировки повышает производительность команд DBCC CHECKDB, направленных на использование параметра PHYSICAL_ONLY, некоторые пользователи могут не заметить улучшение. Хотя этот флаг трассировки улучшает использование ресурсов дискового ввода-вывода, базовая производительность дисковых ресурсов может ограничивать общую производительность команды DBCC CHECKDB. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2634571).<br /><br />**Область**: только глобальная| 
|**2562**|Выполняет команду DBCC CHECKDB в едином "пакете" независимо от количества индексов в базе данных. По умолчанию инструкция DBCC CHECKDB пытается свести к минимуму ресурсы базы данных tempdb, ограничивая количество индексов или "фактов", которые она создает, используя концепцию "пакетов". Этот флаг трассировки принудительно сводит всю обработку в один пакет.<br /><br />Одно из последствий использования этого флага трассировки — возможное увеличение необходимого пространства для tempdb. База данных tempdb может увеличиваться на 5 % или более по сравнению с пользовательской базой данных, которая обрабатывается с помощью команды DBCC CHECKDB.<br /><br />**Примечание.** Хотя этот флаг трассировки повышает производительность команд DBCC CHECKDB, направленных на использование параметра PHYSICAL_ONLY, некоторые пользователи могут не заметить улучшение. Хотя этот флаг трассировки улучшает использование ресурсов дискового ввода-вывода, базовая производительность дисковых ресурсов может ограничивать общую производительность команды DBCC CHECKDB. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2634571).<br /><br />**Область**: только глобальная|
|**2566**|Выполняет команду DBCC CHECKDB без проверки чистоты данных, если не указан параметр DATA_PURITY.<br /><br />**Примечание.** Проверки целостности значений столбцов включены по умолчанию, и для них не требуется указывать параметр DATA_PURITY. Для баз данных, обновленных с предыдущих версий SQL Server, проверка значений данных в столбцах по умолчанию не будет включена, пока в базе данных хотя бы однажды не будет выполнена без ошибок инструкция DBCC CHECKDB с параметром DATA_PURITY. После этого инструкция DBCC CHECKDB проверяет целостность данных в столбцах по умолчанию. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/945770).<br /><br />**Область**: только глобальная|
|**3023**|Включает параметр CHECKSUM по умолчанию для команды BACKUP. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2656988).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] эта реакция управляется параметром конфигурации **резервной контрольной суммы по умолчанию**. Дополнительные сведения см. в разделе [Параметры конфигурации сервера (SQL Server)](../../database-engine/configure-windows/server-configuration-options-sql-server.md).<br /><br />**Область:** глобальная и сеанс|
|**3042**|Обходит используемый по умолчанию алгоритм сжатия резервных копий с предварительным выделением места на диске, чтобы файл резервной копии увеличивался до своего конечного размера по мере необходимости. Этот флаг трассировки полезен для экономии пространства, так как выделяется только фактическое пространство, необходимое для резервной копии со сжатием. Но при этом его использование может немного снизить производительность (повысится продолжительность операции резервного копирования). Дополнительные сведения об алгоритме предварительного выделения см. в разделе [Сжатие резервной копии (SQL Server)](../../relational-databases/backup-restore/backup-compression-sql-server.md).<br /><br />**Область**: только глобальная|
|**3051**|Включает внесение записей о резервном копировании в SQL Server по URL-адресу в определенный файл журнала ошибок. Дополнительные сведения см. в разделе [Резервное копирование в SQL Server по URL-адресу — рекомендации и устранение неполадок](../../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md).<br /><br />**Область**: только глобальная|  
|**3205**|По умолчанию инструкция DUMP или BACKUP использует аппаратное сжатие для накопителей на магнитной ленте, поддерживающих этот режим. С помощью этого флага трассировки можно отменить аппаратное сжатие для накопителей на магнитной ленте. Это полезно, если нужно обмениваться лентами с другими рабочими местами или накопителями на магнитной ленте.<br /><br />**Область**: глобальная или сеанс|  
|**3226**|По умолчанию каждая успешная операция резервного копирования добавляет запись в журнал ошибок служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и в журнал системных событий. При частом выполнении резервного копирования журнала такие сообщения об успешном выполнении быстро накапливаются, в результате чего создаются огромные журналы ошибок, в которых трудно найти другие сообщения.<br /><br />С помощью этого флага трассировки можно подавить такие записи журнала. Это может быть полезным при частом выполнении резервного копирования журнала и в случае, если ни один из используемых скриптов не зависит от этих записей.<br /><br />**Область**: только глобальная|   
|**3427**|Позволяет решить проблему в ситуации, когда много последовательных транзакций, вставляющих данные во временные таблицы в [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] или [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)], потребляют больше ресурсов ЦП, чем в [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/help/3216543)<br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) и накопительным пакетом обновления 2 (CU2) и более поздней версии сборки. Начиная с версии [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] с накопительным пакетом обновления 4 (CU4), этот флаг трассировки не действует.<br /><br />**Область**: только глобальная|  
|**3459**|Отключает параллельные повторы действий. Дополнительные сведения см. в [этой](http://support.microsoft.com/help/3200975) и [этой](http://support.microsoft.com/help/4101554) статьях службы поддержки Майкрософт.<br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] и [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)].<br /><br />**Область**: только глобальная| 
|**3608**|Запрещает автоматический запуск [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и восстановление любых баз данных, кроме базы данных **master**. Если инициируются действия, для которых требуется **tempdb**, то **модель** восстанавливается, и создается **tempdb**. Другие базы данных будут запущены и восстановлены при открытии. Могут не работать некоторые функции, например изоляция моментального снимка и изоляция зафиксированной операции чтения с моментальным снимком. Используйте для [перемещения системных баз данных](../../relational-databases/databases/move-system-databases.md) и [перемещения пользовательских баз данных](../../relational-databases/databases/move-user-databases.md).<br /><br />**Примечание.** Не используйте при обычной работе.<br /><br />**Область**: только глобальная|   
|**3625**|Ограничивает объем сведений, возвращаемый пользователям, которые не являются членами предопределенной роли сервера sysadmin, маскируя параметры некоторых сообщений об ошибках символами '\*\*\*\*\*\*'. Это поможет предотвратить раскрытие конфиденциальных сведений.<br /><br />**Область**: только глобальная|  
|**4136**|Отключает сканирование параметров, если не используется OPTION(RECOMPILE), WITH RECOMPILE или OPTIMIZE FOR \<value>. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/980653). Чтобы выполнить эту задачу на уровне база данных, см. описание параметра PARAMETER_SNIFFING в разделе [ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md). Для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) OPTIMIZE FOR UNKNOWN. Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) существует второй вариант выполнения этой задачи на уровне запроса — добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'PARAMETER_SNIFFING' вместо этого флага трассировки.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: глобальная или сеанс|  
|**4137**|Побуждает [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создать план, используя минимальную избирательность, при оценке предикатов AND для фильтров с поправкой на корреляцию в рамках модели оценки кратности оптимизатора запросов [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и более ранних версий. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2658214).<br /><br />Начиная с [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES' вместо использования этого флага трассировки в CE предыдущих версий.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Примечание.** Этот флаг трассировки не применяется CE версии 120 или более поздней версии. Вместо него используйте флаг трассировки 9471.<br /><br />**Область**: глобальная, сеанс или запрос| 
|**4138**|Побуждает [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создать план без использования корректировок цели строки с запросами, содержащими ключевые слова TOP, OPTION (FAST N), IN или EXISTS. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2667211).<br /><br />Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'DISABLE_OPTIMIZER_ROWGOAL' вместо этого флага трассировки.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: глобальная, сеанс или запрос| 
|**4139**|Включает автоматическое создание быстрой статистики (поправка для гистограммы) независимо от состояния ключевого столбца. Если флаг трассировки 4139 включен, независимо от состояния начального столбца статистики (по возрастанию, по убыванию, стационарный), гистограмма, используемая для оценки кратности, будет скорректирована во время компиляции запроса. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2952101).<br /><br />Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'ENABLE_HIST_AMENDMENT_FOR_ASC_KEYS' вместо этого флага трассировки.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Примечание.** Этот флаг трассировки не применяется в CE версии 70. Вместо этого используйте флаги трассировки 2389 и 2390.<br /><br />**Область**: глобальная, сеанс или запрос|
|**4199**|<a name="4199"></a>Включает изменения в оптимизаторе запросов, выпущенные в накопительных пакетах обновления и пакетах обновления [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].<br /><br />Изменения в оптимизаторе запросов, внесенные в предыдущих версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], включены по умолчанию при последнем [уровне совместимости](../../t-sql/statements/alter-database-transact-sql-compatibility-level.md) базы данных в определенном выпуске продукта без включенного флага трассировки 4199.<br /><br />В следующей таблице приводится сводка реакций на события при использовании определенных уровней совместимости базы данных и флага трассировки 4199. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/974006).<br /><br /><table border="1" frame="void" width="550"><tr valign="middle" align="center"><td>**Уровень совместимости базы данных**</td><td>**TF 4199**</td><td>**Изменения в оптимизаторе запросов из предыдущих уровней совместимости базы данных**</td><td>**Изменения в оптимизаторе запросов для текущей версии после RTM**</td></tr><tr valign="middle" align="center"><td rowspan="2">**100–120**</td><td>Выкл.</td><td>Выключено</td><td>Выключено</td></tr><tr valign="middle" align="center"><td>Вкл.</td><td>Активировано</td><td>Активировано</td></tr><tr valign="middle" align="center"><td rowspan="2">**130**</td><td>Выкл.</td><td>Активировано</td><td>Выключено</td></tr><tr valign="middle" align="center"><td>Вкл.</td><td>Активировано</td><td>Активировано</td></tr><tr valign="middle" align="center"><td rowspan="2">**140**</td><td>Выкл.</td><td>Активировано</td><td>Выключено</td></tr><tr valign="middle" align="center"><td>Вкл.</td><td>Активировано</td><td>Активировано</td></tr></table><br /><br />Чтобы выполнить эту задачу на уровне базы данных, см. описание параметра QUERY_OPTIMIZER_HOTFIXES в разделе [ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md).<br /><br />Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'ENABLE_QUERY_OPTIMIZER_HOTFIXES' вместо этого флага трассировки.<br /><br />**Область**: глобальная, сеанс или запрос|
|**4610**|Увеличивает размер хэш-таблицы, в которой хранятся записи кэша, в 8 раз. При использовании вместе с флагом трассировки 4618 увеличивает количество записей в хранилище кэша TokenAndPermUserStore до 8192. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/959823).<br /><br />**Область:** только глобальная|
|**4616**|Делает метаданные уровня сервера видимыми ролям приложений. В [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] роль приложения не может получать доступ к метаданным за пределами собственной базы данных, так как роли приложений не связаны с участником уровня сервера. Это поведение было изменено по сравнению с предыдущими версиями [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Установка этого глобального флага отключает новые ограничения и позволяет ролям приложений получать доступ к метаданным уровня сервера.<br /><br />**Область**: только глобальная|
|**4618**|Ограничивает число записей в хранилище кэша TokenAndPermUserStore до 1024. При использовании вместе с флагом трассировки 4610 увеличивает количество записей в хранилище кэша TokenAndPermUserStore до 8192. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/959823).<br /><br />**Область:** только глобальная|
|**5004**|Приостанавливает проверку шифрования TDE и принуждает рабочую роль сканирования шифрования выйти без выполнения действий. База данных останется в зашифрованном состоянии (в состоянии выполнения шифрования). Чтобы возобновить проверку повторного шифрования, отключите флаг 5004 и выполните ALTER DATABASE <database_name> SET ENCRYPTION ON. <br /><br />**Область:** только глобальная|
|**6498**|Предоставляет нескольким компиляциям больших запросов доступ к большому шлюзу, если памяти недостаточно. Он основан на 80 процентах целевой памяти SQL Server и допускает одну компиляцию большого запроса на 25 гигабайт (ГБ) памяти. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3024815).<br /><br />**Примечание.** Начиная с [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 2 (SP2) и [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется подсистемой, и флаг трассировки 6498 не оказывает влияния.<br /><br />**Область**: только глобальная|
|**6527**|Отключается создание дампа памяти при первом возникновении исключения «Нехватка памяти» при интеграции со средой CLR. По умолчанию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создает небольшой дамп памяти при первом возникновении исключения "Нехватка памяти" в CLR. Режим работы флага трассировки следующий.<br /><br />— Если используется как флаг трассировки при запуске, то дамп памяти никогда не создается. Однако если используются другие флаги трассировки, то дамп памяти может быть создан.<br />— Если этот флаг трассировки включен на запущенном сервере, то дамп памяти будет автоматически создан, начиная с этой точки. Однако если дамп памяти был уже создан из-за возникновения исключения, связанного с нехваткой памяти, в CLR, то этот флаг трассировки никак не повлияет на работу системы.<br /><br />**Область**: только глобальная|
|**6532**|Включает улучшение производительности операций запросов с пространственными типами данных в [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]. Увеличение производительности зависит от конфигурации, типов запросов и объектов. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3107399).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется подсистемой, и флаг трассировки 6532 не оказывает влияния.<br /><br />**Область:** глобальная и сеанс|
|**6533**|Включает улучшение производительности операций запросов с пространственными типами данных в [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]. Увеличение производительности зависит от конфигурации, типов запросов и объектов. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3107399).<br /><br />**Примечание.** Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется подсистемой, и флаг трассировки 6533 не оказывает влияния.<br /><br />**Область:** глобальная и сеанс| 
|**6534**|Включает улучшение производительности операций запросов с пространственными типами данных в [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] и [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)]. Увеличение производительности зависит от конфигурации, типов запросов и объектов. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3107399).<br /><br />**Область:** глобальная и сеанс|
|**7314**|Обеспечивает обработку значений NUMBER с неизвестной точностью или масштабом как двойных значений в поставщике OLE DB. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3051993).<br /><br />**Область:** глобальная и сеанс|  
|**7412**|Включает инфраструктуру профилирования статистики выполнения упрощенных запросов. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3170113).<br /><br />**Область**: только глобальная|
|**7471**|Включает выполнение нескольких инструкций [UPDATE STATISTICS](../../t-sql/statements/update-statistics-transact-sql.md) для разных статистик в одной таблице одновременно. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3156157).<br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 1 (SP1) и более поздней версии сборки.<br /><br />**Область**: только глобальная|
|**7745**|Запрещает хранилищу запросов записывать данные на диск при завершении работы базы данных.<br /><br />**Примечание.** Использование этой трассировки может привести к утере ранее не записанных на диск данных хранилища запросов в случае завершения работы. В случае завершения работы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] используйте вместо этого флага трассировки команду SHUTDOWN WITH NOWAIT, чтобы запустить немедленное завершение работы.<br /><br />**Область**: только глобальная|
|**7752**|Включает асинхронную загрузку хранилища запросов.<br /><br />**Примечание.** Используйте этот флаг трассировки, если у [!INCLUDE[ssNoVersion](../../includes/ssNoVersion-md.md)] большое число ожиданий QDS_LOADDB, связанных с синхронной загрузкой хранилища запросов (реакция по умолчанию).<br /><br />**Область**: только глобальная|
|**7806**|Включает применение выделенных административных соединений (DAC) в [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]. По умолчанию ресурсы приложения уровня данных не зарезервированы в [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]. Дополнительные сведения см. в разделе [Диагностическое соединение для администраторов баз данных](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).<br /><br />**Область**: только глобальная|  
|**8011**|Отключает кольцевой буфер для монитора ресурсов. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область:** глобальная и сеанс|
|**8012**|Отключает кольцевой буфер для планировщиков. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область**: только глобальная|
|**8015**|Отключает автоматическое обнаружение и установку NUMA. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2813214).<br /><br />**Область**: только глобальная|
|**8018**|Отключает кольцевой буфер исключений. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область**: только глобальная|
|**8019**|Отключает сбор стеков для кольцевого буфера исключений. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область**: только глобальная|
|**8020**|Отключает мониторинг рабочего набора. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Область**: только глобальная|
|**8032**|Восстанавливает параметры предела кэша до значения в RTM-версии [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], что обычно позволяет увеличить размер кэша. Используйте этот параметр, если часто используемые повторно элементы кэша не помещаются в кэш и в [optimize for ad hoc workloads Server Configuration Option](../../database-engine/configure-windows/optimize-for-ad-hoc-workloads-server-configuration-option.md) не удалось разрешить эту проблему с помощью кэша планов.<br /><br />**ПРЕДУПРЕЖДЕНИЕ.** Применение флага трассировки 8032 может привести к снижению производительности, если увеличение кэша приводит к уменьшению объема памяти, доступной для других потребителей памяти, например для буферного пула.<br /><br />**Область**: только глобальная|   
|**8048**|Преобразует объекты памяти, секционированные по NUMA, в секционированные по ЦП. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2809338).<br /><br />**Примечание.** Начиная с [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 2 (SP2) и [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется подсистемой, и флаг трассировки 8048 не оказывает влияния.<br /><br />**Область**: только глобальная|  
|**8075**|Снижает степень фрагментации [виртуального адресного пространства](../../relational-databases/memory-management-architecture-guide.md#changes-to-memory-management-starting-with-includesssql11includessssql11-mdmd) при получении ошибок выделения страниц в памяти в 64-разрядной среде [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3074434).<br /><br />**Примечание.** Этот флаг трассировки применяется к [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] RTM с накопительным пакетом обновления 10 (CU10), а также к версии [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 1 (SP1) и накопительным пакетом обновления 3 (CU3). Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется подсистемой, и флаг трассировки 8075 не оказывает влияния.<br /><br />**Область**: только глобальная|
|**8079**|Позволяет [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 2 (SP2) запрашивать структуру оборудования и автоматически настраивать Soft-NUMA в системах с 8 или более ЦП на одном узле NUMA. Автоматическая реализация Soft-NUMA учитывает многопоточность (потоки/логические процессоры). Секционирование и создание дополнительных узлов позволяет масштабировать фоновую обработку за счет увеличения числа прослушивателей и масштаба вычислений, а также расширения возможностей сети и шифрования.<br /><br />**Примечание.**  Этот флаг трассировки применяется к [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 2 (SP2). Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] эта реакция управляется подсистемой, и флаг трассировки 8048 не оказывает влияния.<br /><br />**Область**: только глобальная| 
|**8207**|Включает одноэлементные обновления для репликации транзакций. Обновления для подписчиков можно реплицировать как пары инструкций DELETE и INSERT. Это может не удовлетворять бизнес-правилам, например для срабатывания триггера UPDATE. С флагом трассировки 8207 обновление в уникальном столбце, затрагивающее только одну строку (одноэлементное обновление), реплицируется как инструкция UPDATE, а не как пара инструкций DELETE или INSERT. Если обновление затрагивает столбец, для которого существует ограничение уникальности, или если обновление затрагивает несколько строк, то обновление будет реплицировано как пара инструкций DELETE или INSERT. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/302341).<br /><br />**Область**: только глобальная|
|**8721**|Делает запись в журнале ошибок при выполнении автоматического обновления статистики. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/195565).<br /><br />**Область**: только глобальная|
|**8744**|Отключает предварительное получение для оператора вложенного цикла. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/920093).<br /><br />**Примечание.** Неправильное использование этого флага трассировки может привести к дополнительным физическим операциям чтения, когда [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняет планы, содержащие оператор вложенных циклов.<br /><br />**Область:** глобальная и сеанс|
|**9024**|Преобразует объект памяти пула глобального журнала в объект памяти, секционированный по узлу NUMA. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2809338).<br /><br />**Примечание.** Начиная с [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] с пакетом обновления 3 (SP3) и [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] с пакетом обновления 1 (SP1) эта реакция управляется подсистемой, и флаг трассировки 9024 не оказывает влияния.<br /><br />**Область**: только глобальная|
|**9347**|Отключает пакетный режим для оператора sort. [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] вводит новый оператор sort в пакетном режиме, который повышает производительность для многих аналитических запросов. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3172787).<br /><br />**Область**: глобальная, сеанс или запрос|
|**9349**|Отключает пакетный режим для оператора top N sort. [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] вводит новый оператор top sort в пакетном режиме, который повышает производительность для многих аналитических запросов.<br /><br />**Область**: глобальная, сеанс или запрос|
|**9389**|Включает динамический временно предоставляемый буфер памяти для операторов пакетного режима. Если запрос не получает всю необходимую память, он передает данные в базу данных tempdb, что приводит к дополнительным операциям ввода-вывода и может повлиять на производительность запроса. Если включен флаг трассировки для динамического временно предоставляемого буфера памяти, оператор пакетного режима может запросить дополнительную память и избежать переноса данных в tempdb, если дополнительная память доступна.<br /><br />**Область**: глобальная или сеанс| 
|**9398**|Отключает оператор [Adaptive Join](../../relational-databases/performance/adaptive-query-processing.md#batch-mode-adaptive-joins), который позволяет отложить выбор метода [хэш-соединения или соединения вложенными циклами](../../relational-databases/performance/joins.md) до завершения сканирования первых входных данных, как было представлено в [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)]. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/4099126).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область:** глобальная, сеанс и запрос|
|**9453**|Отключает выполнение в пакетном режиме. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/help/4016902).<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область:** глобальная, сеанс и запрос|
|**9471**|Побуждает [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создать план с минимальной избирательностью для однотабличных фильтров в модели оценки кратности оптимизатора запросов версий с [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] по [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].<br /><br />Начиная с [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES' вместо использования этого флага трассировки.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Примечание.** Этот флаг трассировки не применяется в CE версии 70. Вместо него используйте флаг трассировки 4137.<br /><br />**Область**: глобальная, сеанс или запрос| 
|**9476**|Побуждает [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создать план с допущением простого вложения вместо допущения базового вложения по умолчанию в модели оценки кратности оптимизатора запросов версий с [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] по [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3189675).<br /><br />Начиная с [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'ASSUME_JOIN_PREDICATE_DEPENDS_ON_FILTERS' вместо использования этого флага трассировки.<br /><br />**Примечание.** Тщательно протестируйте этот параметр, прежде чем развертывать его в рабочей среде.<br /><br />**Область**: глобальная, сеанс или запрос| 
|**9481**|Позволяет указывать модель оценки кратности оптимизатора запросов в версии [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и более ранних версиях независимо от уровня совместимости базы данных. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/2801413). Чтобы выполнить эту задачу на уровне базы данных, см. описание параметра LEGACY_CARDINALITY_ESTIMATION в разделе [ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md).<br /><br />Начиная с версии [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] с пакетом обновления 1 (SP1) для выполнения этой задачи на уровне запроса добавьте [указание запроса](../../t-sql/queries/hints-transact-sql-query.md) USE HINT 'FORCE_LEGACY_CARDINALITY_ESTIMATION' вместо этого флага трассировки.<br /><br />**Область**: глобальная, сеанс или запрос|  
|**9485**|Запрет разрешения SELECT для DBCC SHOW_STATISTICS.<br /><br />**Область**: только глобальная|
|**9488**|Устанавливает для фиксированной оценки функций с табличным значением значение по умолчанию 1 (соответствующее значению по умолчанию в модели оценки кратности оптимизатора запросов в [!INCLUDE[ssKilimanjaro](../../includes/ssKilimanjaro-md.md)] и более ранних версиях) при использовании модели оценки кратности оптимизатора запросов версий с [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] по [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].<br /><br />**Область**: глобальная, сеанс или запрос|
|**9495**|Отключает параллелизм во время вставки для операций INSERT...SELECT и применяется к пользовательским и временным таблицам. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3180087)<br /><br />**Область**: глобальная или сеанс| 
|**9567**|Включает сжатие потока данных для групп доступности AlwaysOn во время автоматического заполнения. Во время автоматического заполнения сжатие может значительно сократить время передачи и увеличит загрузку ЦП. Дополнительные сведения см. в разделах [Автоматическая инициализация группы доступности AlwaysOn](../../database-engine/availability-groups/windows/automatically-initialize-always-on-availability-group.md) и [Настройка сжатия для группы доступности](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md).<br /><br />**Область**: глобальная или сеанс|
|**9591**|Отключает сжатие блока журнала в группах доступности AlwaysOn. Сжатие блока журнала является реакцией по умолчанию, используемой с синхронными и асинхронными репликами в [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]. В [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] сжатие используется только с асинхронной репликой. <br /><br />**Область**: глобальная или сеанс|
|**9592**|Включает сжатие потока журналов для синхронных групп доступности. В синхронных группах доступности эта функция отключена по умолчанию, поскольку сжатие приводит к увеличению задержки. Дополнительные сведения см. в разделе [Tune compression for availability group](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)(Настройка сжатия для группы доступности).<br /><br />**Область**: глобальная или сеанс| 
|**9929**|Сокращает файлы контрольных точек в памяти до 1 МБ для каждого файла. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/3147012).<br /><br />**Область**: только глобальная|  
|**9939**|Включает параллельные планы и параллельное сканирование таблиц, оптимизированных для памяти, и табличных переменных в операциях DML, которые ссылаются на таблицы, оптимизированные для памяти, или табличные переменные, при условии, что они не являются целевым объектом операции DML в [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)]. Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/4013877).<br /><br />**Примечание.** Флаг трассировки 9939 не требуется, если флаг трассировки 4199 явным образом включен.<br /><br />**Область**: глобальная, сеанс или запрос|   
|**10204**|Отключает слияние и повторное сжатие во время реорганизации индекса columnstore. В [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] при реорганизации индекса columnstore можно использовать новую функцию, которая автоматически объединяет малые сжатые группы строк в большие сжатые группы строк, а также повторно сжимает группы строк с большим количеством удаленных строк.<br /><br />**Примечание.** Флаг трассировки 10204 не применяется к индексам columnstore, которые создаются в таблицах, оптимизированных для памяти.<br /><br />**Область**: глобальная или сеанс|   
|**10316**|Включает создание дополнительных индексов во [внутренних промежуточных темпоральных таблицах, оптимизированных для памяти](../../relational-databases/tables/system-versioned-temporal-tables-with-memory-optimized-tables.md), помимо индекса по умолчанию. Если у вас есть определенный шаблон запроса, включающий в себя столбцы, к которым не относится индекс по умолчанию, вы можете добавить дополнительные индексы.<br /><br />**Примечание.** Темпоральные таблицы с системным управлением версиями для таблиц, оптимизированных для памяти, призваны обеспечить высокую скорость обработки транзакций. Имейте в виду, что создание дополнительных индексов может привести к издержкам для операций DML, которые обновляют или удаляют строки в текущей таблице. Используя дополнительные индексы, постарайтесь найти баланс между производительностью темпоральных запросов и дополнительными издержками DML.<br /><br />**Область**: глобальная или сеанс|
|**11023**|Отключает использование последней сохраненной частоты выборки для всех последующих обновлений статистики, где частота выборки не указана явно в инструкции [UPDATE STATISTICS](../../t-sql/statements/update-statistics-transact-sql.md). Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/4039284).<br /><br />**Область**: глобальная или сеанс|    
|**11024**|Включает запуск автоматического обновления статистики, когда число изменений любого раздела превышает локальное [пороговое значение](../../relational-databases/statistics/statistics.md#AutoUpdateStats). Дополнительные сведения см. в этой [статье службы поддержки Майкрософт](http://support.microsoft.com/kb/4041811).<br /><br />**Область**: глобальная или сеанс| 
  
## <a name="remarks"></a>Remarks  
 В [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] существует три типа флагов трассировки: для запроса, для сеанса и глобальные. Флаги трассировки для запроса активны в контексте конкретного запроса. Флаги трассировки сеанса действуют во время данного соединения и доступны только для этого соединения. Глобальные флаги трассировки устанавливаются на уровне сервера и доступны для каждого соединения с этим сервером. Некоторые флаги могут быть включены только как глобальные, а некоторые и как глобальные, и как для сеанса.  
  
 Применяются следующие правила.  
-   Глобальный флаг трассировки должен быть включен глобально. В противном случае, флаг трассировки не повлияет на работу сервера. Мы рекомендуем вам активировать глобальные флаги трассировки при запуске, используя параметр командной строки **-T**. Таким образом, флаг трассировки останется активным после перезапуска сервера.  
-   Если флаг трассировки может использоваться в глобальной области или в области сеанса или запроса, его нужно включить в соответствующей области. Флаг трассировки, включенный на уровне сеанса, никогда не влияет на другой сеанс, и действие флага трассировки прекращается, если SPID, открывший сеанс, выполняет выход.  
  
Флаги трассировки устанавливаются и снимаются с помощью любого из следующих методов:
-   Использование команд DBCC TRACEON и DBCC TRACEOFF.  
     Например, чтобы включить флаг трассировки 2528 глобально, используйте [DBCC TRACEON](../../t-sql/database-console-commands/dbcc-traceon-transact-sql.md) с аргументом –1: `DBCC TRACEON (2528, -1)`. Эффект включения глобального флага трассировки с помощью DBCC TRACEON утрачивается при перезапуске сервера. Чтобы отключить флаг глобальной трассировки, используйте команду [DBCC TRACEOFF](../../t-sql/database-console-commands/dbcc-traceoff-transact-sql.md) с аргументом –1.  
-   Используйте параметр запуска **-T** для определения, что флаг трассировки будет настроен во время запуска.  
     Параметр запуска **-T** повсеместно активирует флаг трассировки. Невозможно включить флаг трассировки уровня сеанса с помощью параметра запуска. Таким образом, флаг трассировки останется активным после перезапуска сервера. Дополнительные сведения о параметрах запуска см. в разделе [Параметры запуска службы Database Engine](../../database-engine/configure-windows/database-engine-service-startup-options.md).
-   На уровне запроса используйте [указание запроса](http://support.microsoft.com/kb/2801413) QUERYTRACEON.
  
Использование команды `DBCC TRACESTATUS` для определения активных в данный момент флагов трассировки.
  
## <a name="examples"></a>Примеры  
 В следующем примере флаг трассировки 3205 включается для всех сеансов на уровне сервера с помощью команды DBCC TRACEON.  
  
```sql  
DBCC TRACEON (3205,-1);  
```

Можно включить все исправления, влияющие на план, которыми управляют флаги трассировки 4199 и 4137 для конкретного запроса.
  
```sql
SELECT x FROM correlated WHERE f1 = 0 AND f2 = 1 OPTION (QUERYTRACEON 4199, QUERYTRACEON 4137)
``` 
 
## <a name="see-also"></a>См. также:  
[Типы данных (Transact-SQL)](../../t-sql/data-types/data-types-transact-sql.md)  
[DBCC INPUTBUFFER (Transact-SQL)](../../t-sql/database-console-commands/dbcc-inputbuffer-transact-sql.md)  
[DBCC OUTPUTBUFFER (Transact-SQL)](../../t-sql/database-console-commands/dbcc-outputbuffer-transact-sql.md)  
[DBCC TRACEOFF (Transact-SQL)](../../t-sql/database-console-commands/dbcc-traceoff-transact-sql.md)  
[DBCC TRACEON (Transact-SQL)](../../t-sql/database-console-commands/dbcc-traceon-transact-sql.md)  
[DBCC TRACESTATUS (Transact-SQL)](../../t-sql/database-console-commands/dbcc-tracestatus-transact-sql.md)  
[EXECUTE (Transact-SQL)](../../t-sql/language-elements/execute-transact-sql.md)  
[SELECT (Transact-SQL)](../../t-sql/queries/select-transact-sql.md)  
[SET NOCOUNT (Transact-SQL)](../../t-sql/statements/set-nocount-transact-sql.md)  
[Параметры ALTER DATABASE SET &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-set-options.md)  
[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)  
[Указания запросов (Transact-SQL)](../../t-sql/queries/hints-transact-sql-query.md)

