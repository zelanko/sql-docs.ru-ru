---
title: Основные сведения об уровнях изоляции | Документация Майкрософт
ms.custom: ''
ms.date: 07/11/2018
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.suite: sql
ms.technology: connectivity
ms.tgt_pltfrm: ''
ms.topic: conceptual
ms.assetid: 2c41e23a-da6c-4650-b5fc-b5fe53ba65c3
caps.latest.revision: 17
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: 270ccbea5a7c12e8f7188cc4ad125e346a3eddd1
ms.sourcegitcommit: 6fa72c52c6d2256c5539cc16c407e1ea2eee9c95
ms.translationtype: MTE75
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2018
ms.locfileid: "39278656"
---
# <a name="understanding-isolation-levels"></a>Основные сведения об уровнях изоляции
[!INCLUDE[Driver_JDBC_Download](../../includes/driver_jdbc_download.md)]

  Транзакции указывают уровень изоляции, который определяет степень, до которой одна транзакция должна быть изолирована от изменений ресурса или данных, произведенных другими транзакциями. Уровни изоляции описаны с точки зрения того, какие из побочных эффектов параллелизма разрешены (например, чтение фантомных файлов или чтение недействительных данных).  
  
 Уровни изоляции транзакций используются для управления следующими настройками:  
  
-   Применение и типы блокировки при чтении данных.  
  
-   Время удержания блокировок чтения.  
  
-   Использование операции чтения ссылок на строки, измененные другой транзакцией.  
  
    -   Блокировка до освобождения монопольной блокировки строки.  
  
    -   Извлечение фиксированной версии строки, существующей в момент запуска инструкции или транзакции.  
  
    -   Чтение нефиксированных изменений данных.  
  
 Выбор уровня изоляции транзакции не влияет на блокировки, полученные для защиты изменений данных. Транзакция всегда вызывает монопольную блокировку любых данных, которые она изменяет, и удерживает блокировку до тех пор, пока транзакция не завершится, независимо от уровня изоляции, установленного для транзакции. Для операций чтения уровни изоляции транзакций, в основном, определяют уровень защиты от эффектов изменений, сделанных другими транзакциями.  
  
 Низкие уровни изоляции увеличивают возможность воспользоваться одновременным доступом к данным для нескольких пользователей, но также увеличивают и количество возможных побочных эффектов параллелизма (например, чтение «грязных» данных или потери обновлений). С другой стороны, более высокий уровень изоляции позволяет уменьшить количество возможных побочных эффектов параллелизма, но требует большего количества системных ресурсов и повышает вероятность блокировки транзакции другой транзакцией. Выбор соответствующего уровня изоляции зависит от баланса между требованиями к целостности данных приложения и издержек каждого уровня изоляции. Самый высокий уровень изоляции — изоляция упорядочиваемых транзакций — гарантирует, что транзакция получит в точности те же данные при каждой операции чтения, но достигается это применением уровня блокировки, при котором очень вероятно влияние на других пользователей в многопользовательских системах. Самый низкий уровень изоляции, незафиксированная операция чтения, может использоваться для извлечения измененных данных, изменения которых не были зафиксированы другими транзакциями. Возникновение всех побочных эффектов параллелизма возможно в незафиксированных операциях чтения, но при этом не поддерживается блокировка чтения или управление версиями, за счет чего сокращаются дополнительные временные затраты.  
  
## <a name="remarks"></a>Remarks  
 В следующей таблице перечислены побочные эффекты параллелизма, допустимые для различных уровней изоляции.  
  
|Уровень изоляции|Чтение «грязных» файлов|Операции чтения без возможности повторения|Фантомный|  
|---------------------|----------------|-------------------------|-------------|  
|Уровень изоляции read uncommitted|Да|Да|Да|  
|Уровень изоляции read committed|нет|Да|Да|  
|Уровень изоляции repeatable read|нет|нет|Да|  
|Snapshot|нет|нет|нет|  
|Упорядочиваемый уровень изоляции|нет|нет|нет|  
  
 Транзакции могут быть запущены, начиная с уровня изоляции операции чтения с возможностью повторения, что позволит предотвратить потери обновления, которые могут произойти при извлечении одной строки двумя транзакциями, и дальнейшего обновления строки с использованием исходных извлеченных значений. Если две транзакции обновляют строки с использованием одной инструкции UPDATE и не используют при обновлении полученные ранее значения, то на уровне изоляции read committed, который задан по умолчанию, возможны потери обновлений.  
  
 Чтобы задать уровень изоляции транзакции, можно использовать метод [setTransactionIsolation](../../connect/jdbc/reference/settransactionisolation-method-sqlserverconnection.md) класса [SQLServerConnection](../../connect/jdbc/reference/sqlserverconnection-class.md). Этот метод принимает значение **int** в качестве аргумента, который в качестве основы использует одну из констант соединения, как описано ниже.  
  
```java
con.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);  
```  
  
 Чтобы использовать новый уровень изоляции моментального снимка [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)], можно применить одну из констант SQLServerConnection:  
  
```java
con.setTransactionIsolation(SQLServerConnection.TRANSACTION_SNAPSHOT);  
```  
  
 или можно использовать:  
  
```java
con.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED + 4094);  
```  
  
 Дополнительные сведения об уровнях изоляции [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] см. в разделе "Уровни изоляции в компоненте [!INCLUDE[ssDE](../../includes/ssde_md.md)]" электронной документации [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].  
  
## <a name="see-also"></a>См. также:  
 [Выполнение транзакций с помощью драйвера JDBC](../../connect/jdbc/performing-transactions-with-the-jdbc-driver.md)  
  
  
