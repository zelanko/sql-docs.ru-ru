---
title: "Управление событиями | Документация Майкрософт"
ms.custom: 
ms.date: 01/19/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology:
- tools-ssms
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- event forwarding servers [SQL Server]
- events [SQL Server], forwarding
- event-triggered jobs [SQL Server]
- forwarding events [SQL Server]
- alerts [SQL Server], forwarded events
- alerts [SQL Server], management servers
- SQL Server Agent alerts, management servers
ms.assetid: 8f4ee7f5-80df-49fd-b2b8-d020e04b6e1b
caps.latest.revision: 5
author: stevestein
ms.author: sstein
manager: jhubbard
translationtype: Human Translation
ms.sourcegitcommit: 2edcce51c6822a89151c3c3c76fbaacb5edd54f4
ms.openlocfilehash: 86ffe880e225a5673d35be3f7c42d862d145274c
ms.lasthandoff: 04/11/2017

---
# <a name="manage-events"></a>Управление событиями
Все сообщения об ошибках, удовлетворяющие заданному уровню серьезности либо превышающие его, могут быть перенаправлены экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] . Данное действие называется *пересылкой событий*. Сервер пересылки является выделенным сервером, который может также являться главным. Пересылка событий может быть использована для централизации управления предупреждениями в группе серверов, что позволяет снизить рабочую нагрузку на сильно загруженные серверы.  
  
Сервер, предназначенный для получения событий на всю группу серверов, называется *сервером управления предупреждениями*. В многосерверной среде сервером управления предупреждениями должен быть главный сервер.  
  
## <a name="advantages-of-using-an-alerts-management-server"></a>Преимущества использования сервера управления предупреждениями  
Преимущества настройки сервера управления предупреждениями.  
  
-   **Централизация**. Централизованное управление и обобщенное представление событий нескольких экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] с одиночного сервера.  
  
-   **Масштабируемость**. Представление совокупности отдельных серверов в виде одного логического сервера. При необходимости в указанную группу можно добавлять и удалять физические серверы.  
  
-   **Эффективность**. Требуется меньшее количество времени для конфигурирования, так как настройка предупреждений и операторов производится только один раз.  
  
## <a name="disadvantages-of-using-an-alerts-management-server"></a>Недостатки использования сервера управления предупреждениями  
Недостатки настройки сервера управления предупреждениями.  
  
-   **Увеличение трафика**. Пересылка событий на сервер управления предупреждениями может привести к увеличению сетевого трафика. Чтобы избежать этого, необходимо ограничить количество пересылаемых событий. При этом будут пересылаться только события, уровень серьезности которых превышает заданный.  
  
-   **Единственная точка сбоя**. Другие серверы группы не получают уведомления в случае отключения сервера управления предупреждениями.  
  
-   **Загруженность сервера**. Управление предупреждениями о перенаправленных событиях повышает загруженность сервера управления предупреждениями.  
  
## <a name="guidelines-for-using-an-alerts-management-server"></a>Инструкции по использованию сервера управления предупреждениями  
При настройке сервера управления предупреждениями необходимо следовать представленным ниже инструкциям.  
  
-   Для получения перенаправленных событий сервер управления предупреждениями должен быть экземпляром SQL Server по умолчанию.  
  
-   Не следует запускать ресурсоемкие приложения на сервере управления предупреждениями.  
  
-   Необходимо строго отслеживать вовлечение сетевого трафика при использовании общего сервера управления предупреждениями. При чрезмерном увеличении нагрузки необходимо уменьшить количество серверов, использующих данный сервер управления предупреждениями.  
  
    Серверы, зарегистрированные в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull_md.md)] , могут быть использованы ею в качестве серверов пересылки предупреждений.  
  
-   Локальные предупреждения предпочтительнее задавать внутри локального экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] . Не рекомендуется пересылать их на сервер управления предупреждениями.  
  
    Ответы сервера управления предупреждениями одинаковы для всех серверов, пересылающих ему предупреждения. Например, ответы сервера управления предупреждениями на события с кодом 605, поступившие от серверов А и Б, совпадают.  
  
-   После настройки системы предупреждений необходимо периодически просматривать события агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] в журнале приложений Windows.  
  
    Сбои, обнаруженные ядром предупреждений, записываются в журнал приложений Windows, при этом в качестве имени источника указывается «Агент SQL Server». Например, если агенту [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] не удается отправить уведомление по электронной почте, то указанное событие записывается в журнал приложений.  
  
Если локально заданное предупреждение неактивно, то при возникновении соответствующего ему события оно будет перенаправлено на сервер управления предупреждениями (в случае, если выполняется условие пересылки). Такой способ пересылки позволяет включать и выключать переопределение предупреждений по требованию пользователя локального веб-сайта (для случаев, когда предупреждения заданы и локально, и на сервере управления предупреждениями). Также можно задать, чтобы события пересылались в любом случае, даже если они связаны с предупреждениями, заданными локально.  
  
Ниже представлен список наиболее типичных задач, используемых для управления событиями в многосерверной среде.  
  
**Назначение сервера управления предупреждениями**  
  
-   [SQL Server Management Studio](../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md)  
  
**Определение ответа на предупреждение**  
  
-   [SQL Server Management Studio](../../ssms/agent/define-the-response-to-an-alert-sql-server-management-studio.md)  
  
-   [Transact-SQL](http://msdn.microsoft.com/en-us/0525e0a2-ed0b-4e69-8a4c-a9e3e3622fbd)  
  
## <a name="running-event-triggered-jobs"></a>Выполнение заданий, запускаемых событиями  
Можно определить задание, выполняемое при получении предупреждения. Например, в качестве такого задания можно указать операцию, которая проводит диагностику или исправление проблемы, выдавшей предупреждение.  
  
> [!NOTE]  
> Так как в результате выполнения задания может возникнуть событие, необходимо строго следить за тем, чтобы не образовался рекурсивный цикл, выдающий предупреждение.  
  
## <a name="see-also"></a>См. также:  
[sp_add_notification (Transact-SQL)](http://msdn.microsoft.com/en-us/44bee7d9-7517-4071-99be-8b36f979c7cc)  
  

