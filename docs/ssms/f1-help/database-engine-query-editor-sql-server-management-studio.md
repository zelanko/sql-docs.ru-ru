---
title: Редактор запросов компонента Database Engine
ms.prod: sql
ms.prod_service: sql-tools
ms.technology: ssms
ms.topic: conceptual
f1_keywords:
- sql13.swb.tsqlquery.f1
dev_langs:
- TSQL
helpviewer_keywords:
- Query Editor [Database Engine]
- Transact-SQL Editor See Query Editor [Database Engine]
- Database Engine Query Editor See Query Editor [Database Engine]
- Query Editor [Database Engine], Toolbar
- editors [SQL Server Management Studio], Database Engine Query Editor
- Query Editor [Database Engine], Features
- SQL Server Management Studio [SQL Server], Database Engine Query Editor
ms.assetid: 05cfae9b-96d5-4a35-a098-0bc3a548bcfc
author: markingmyname
ms.author: maghan
ms.reviewer: ''
ms.custom: seo-lt-2019
ms.date: 03/03/2020
monikerRange: '>=aps-pdw-2016||=azuresqldb-current||=azure-sqldw-latest||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current'
ms.openlocfilehash: cef5bdc57a5fb5f0a2cbeed6be3356aade1ba491
ms.sourcegitcommit: 85b26bc1abbd8d8e2795ab96532ac7a7e01a954f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "78335765"
---
# <a name="ssms-query-editor"></a>Редактор запросов SSMS

[!INCLUDE[appliesto-ss-asdb-asdw-xxx-md.md](../../includes/appliesto-ss-asdb-asdw-xxx-md.md)]

Редактор запросов к ядру СУБД — один из четырех редакторов, реализованных в SQL Server Management Studio (SSMS).

Редактор запросов позволяет создавать и выполнять скрипты, содержащие инструкции Transact-SQL. Этот редактор также поддерживает запуск скриптов, содержащих команды **sqlcmd** .

Описание функциональных возможностей, реализованных в редакторе запросов, и основных задач, которые можно выполнять с помощью этого редактора, см. в статье [Редакторы запросов и текста (SQL Server Management Studio)](../scripting/query-and-text-editors-sql-server-management-studio.md).

![Создать запрос](media/database-engine-query-editor-sql-server-management-studio/new-query.png)

## <a name="transact-sql-f1-help"></a>Справка F1 по Transact-SQL

При нажатии клавиши F1 редактор запросов открывает раздел справки по нужной вам инструкции Transact-SQL. Чтобы сделать это, выделите имя инструкции Transact-SQL и нажмите клавишу F1. После этого поисковая система справки выполнит поиск раздела, имеющего атрибут справки F1, соответствующий выделенной строке.

Если поисковой системе справки не удастся найти раздел с ключевым словом справки F1, точно соответствующим выделенной строке, будет отображен этот раздел. В этом случае есть два способа поиска нужной информации:

- Скопируйте и вставьте из буфера редактора строку, выделенную на вкладке поиска электронной документации по SQL Server, и воспользоваться функцией поиска.

- Выделите только ту часть инструкции Transact-SQL, которая вероятнее всего совпадет с ключевым словом справки F1, относящимся к разделу, и повторно нажмите клавишу F1. Поисковой системе необходимо полное соответствие между выделенной строкой и ключевым словом справки F1, назначенным для раздела. Если выделенная строка содержит элементы, уникальные для вашей среды, например имена столбцов или параметров, поисковая система не сможет найти совпадение. Примерами строк для выделения могут служить следующие:

  - Имя инструкции Transact-SQL, такое как SELECT, CREATE DATABASE или BEGIN TRANSACTION.

  - Имя встроенной функции, например SERVERPROPERTY или @@VERSION.

  - Имя системной хранимой процедуры, таблицы или представления, такое как sys.data_spaces или sp_tableoption.

## <a name="sql-editor-toolbar"></a>Панель инструментов редактора SQL

Если открыт редактор запросов, отображается панель инструментов редактора SQL со следующими кнопками.

Можно также добавить панель инструментов редактора SQL, выбрав меню **Вид** , **Панели инструментов**, а затем выбрав **Редактор SQL**. Если добавить панель инструментов редактора SQL, когда окно редактора запросов не открыто, все кнопки будут недоступны.

![Панель инструментов редактора](media/database-engine-query-editor-sql-server-management-studio/editor-toolbar.png)

### <a name="connect-using-the-editor-toolbar"></a>Кнопка "Подключиться" на панели инструментов редактора

Открывает диалоговое окно **[Соединение с сервером](connect-to-server-database-engine.md)** . Используйте это диалоговое окно, чтобы установить соединение с сервером.

Подключиться к базе данных можно также с помощью [контекстного меню](#connection-using-the-context-menu).

### <a name="change-connection-using-the-editor-toolbar"></a>Кнопка "Изменить подключение" на панели инструментов редактора

Открывает диалоговое окно **Соединение с сервером** . Используйте это диалоговое окно, чтобы установить [соединение с другим сервером](f1-help-for-server-connections-sql-server-management-studio.md).

Изменить подключение можно также с помощью [контекстного меню](#connection-using-the-context-menu).

### <a name="available-databases-using-the-editor-toolbar"></a>Кнопка "Доступные базы данных" на панели инструментов редактора

Изменяет подключение и соединяет с другой базой данных того же сервера.

### <a name="execute-using-the-editor-toolbar"></a>Кнопка "Выполнить" на панели инструментов редактора

Выполняет выбранный код или, если код не выбран, выполняет весь код в редакторе запросов.

Запрос можно **выполнить** также с помощью клавиши F5 или [контекстного меню](#execute-using-the-context-menu).

### <a name="cancel-executing-query-using-the-editor-toolbar"></a>Кнопка "Отменить выполнение запроса" на панели инструментов редактора

Отправляет на сервер запрос отмены. Отмена выполнения некоторых запросов занимает некоторое время, так как необходимо дождаться подходящих условий отмены. После отмены транзакций могут происходить задержки на время отката транзакций.

Отменить выполнение запроса можно также с помощью клавиш ALT+BREAK.

### <a name="parse-using-the-editor-toolbar"></a>Кнопка "Анализ" на панели инструментов редактора

Проверяет синтаксис выбранного кода. Если код не выбран, проверяется синтаксис всего кода в окне редактора запросов.

Проверить код в редакторе запросов можно также с помощью клавиш CTRL+F5.

### <a name="display-estimated-execution-plan-using-the-editor-toolbar"></a>Кнопка "Показать предполагаемый план выполнения" на панели инструментов редактора

Запрашивает план выполнения запроса у обработчика запросов, не выполняя этот запрос, и выводит план в окне **План выполнения** . Этот план использует статистику индексов в качестве оценки ожидаемого числа строк, возвращаемых на каждом этапе выполнения запроса. Фактически используемый план запроса может отличаться от предполагаемого плана выполнения. Это может происходить, если количество возвращаемых строк существенно расходится с оценкой, поэтому обработчик запросов вносит изменения в план в целях повышения его эффективности.

Отобразить предполагаемый план выполнения можно также с помощью клавиш CTRL+L или [контекстного меню](#display-estimated-execution-plan-using-the-context-menu).

### <a name="query-options-using-the-editor-toolbar"></a>Кнопка "Параметры запроса" на панели инструментов редактора

Открывает диалоговое окно **Параметры запроса** . С помощью этого диалоговое окно можно настроить параметры по умолчанию для выполнения запроса и для получения результатов запроса.

Открыть окно **Параметры запроса** можно также с помощью [контекстного меню](#query-options-using-the-context-menu).

### <a name="intellisense-enabled-using-the-editor-toolbar"></a>Кнопка "Функция Intellisense включена" на панели инструментов редактора

Указывает, доступны ли функциональные возможности технологии IntelliSense в редакторе запросов компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] . По умолчанию этот параметр активирован.

Вызвать команду **Функция Intellisense включена** можно также с помощью клавиш CTRL+B > CTRL+I или [контекстного меню](#intellisense-enabled-using-the-context-menu).

### <a name="include-actual-execution-plan-using-the-editor-toolbar"></a>Кнопка "Включить действительный план выполнения" на панели инструментов редактора

Выполняет запрос, возвращает результаты запроса и план выполнения, который использовался для запроса. Эти сведения отображаются в виде графического плана запроса в окне **План выполнения** .

Вызвать команду **Включить действительный план выполнения** можно также с помощью клавиш CTRL+M или [контекстного меню](#include-actual-execution-plan-using-the-context-menu).

### <a name="include-live-query-statistics-using-the-editor-toolbar"></a>Кнопка "Включить статистику активных запросов" на панели инструментов редактора

Позволяет анализировать процесс выполнения запроса в режиме реального времени по мере передачи управления от одного оператора плана запроса другому.

Вызвать команду **Включить статистику активных запросов** можно также с помощью [контекстного меню](#include-live-query-statistics-using-the-context-menu).

### <a name="include-client-statistics-using-the-editor-toolbar"></a>Кнопка "Включить статистику клиента" на панели инструментов редактора

Включает окно **Статистика клиента** , содержащее статистические данные по запросу и сетевым пакетам, а также по времени выполнения запроса.

Вызвать команду **Включить статистику активных запросов** можно также с помощью клавиш SHIFT+ALT+S или [контекстного меню](#include-client-statistics-using-the-context-menu).

### <a name="results-to-text-using-the-editor-toolbar"></a>Кнопка "Результаты в текст" на панели инструментов редактора

Возвращает результаты запроса в текстовом виде в окне **Результаты** .

Вывести результаты в текст можно также с помощью клавиш CTRL+T или [контекстного меню](#results-using-the-context-menu).

### <a name="results-to-grid-using-the-editor-toolbar"></a>Кнопка "Результаты в сетку" на панели инструментов редактора

Возвращает результаты запроса в виде одной или нескольких сеток в окне **Результаты** . Обычно этот параметр активирован по умолчанию.

Вывести результаты в сетку можно также с помощью клавиш CTRL+D или [контекстного меню](#results-using-the-context-menu).

### <a name="results-to-file-using-the-editor-toolbar"></a>Кнопка "Результаты в виде файла" на панели инструментов редактора

По завершении выполнения запроса открывается диалоговое окно **Сохранить результаты** . В поле **Сохранить в**выберите папку, в которой необходимо сохранить файл. В поле **Имя файла** введите имя файла, а затем нажмите кнопку **Сохранить**, чтобы сохранить результаты запроса в файл **отчета** с расширением RPT. Для настройки дополнительных параметров щелкните стрелку вниз на кнопке **Сохранить** и выберите пункт **Выбор кодировки для сохранения**.

Вывести результаты в текст можно также с помощью клавиш CTRL+SHIFT+F или [контекстного меню](#results-using-the-context-menu).

### <a name="comment-out-the-selected-lines-using-the-editor-toolbar"></a>Кнопка "Закомментировать выделенные строки" на панели инструментов редактора

Преобразует текущую строку в комментарий, добавляя оператор комментария (--) в начало строки.

Закомментировать строку можно также с помощью клавиш CTRL+K > CTRL+C.

### <a name="uncomment-the-selected-lines-using-the-editor-toolbar"></a>Кнопка "Раскомментировать выделенные строки" на панели инструментов редактора

Преобразует текущую строку в активную инструкцию исходного кода, удаляя оператор комментария (--) в начале строки.

Раскомментировать строку можно также с помощью клавиш CTRL+K > CTRL+U.

### <a name="decrease-indent-using-the-editor-toolbar"></a>Кнопка "Уменьшить отступ" на панели инструментов редактора

Перемещает текст строки влево, удаляя пробелы в начале строки.

### <a name="increase-line-indent-using-the-editor-toolbar"></a>Кнопка "Увеличить отступ строки" на панели инструментов редактора

Перемещает текст строки вправо, добавляя пробелы в начале строки.

### <a name="specify-values-for-template-parameters-using-the-editor-toolbar"></a>Кнопка "Задание значений для параметров шаблона" на панели инструментов редактора

Открывает диалоговое окно, которое можно использовать, чтобы задать значения параметров в хранимых процедурах и функциях.

## <a name="context-menu"></a>Контекстное меню

Чтобы вызвать контекстное меню, *щелкните правой кнопкой мыши* любую область редактора запросов. В контекстном меню отображаются те же команды, что и на панели инструментов редактора SQL. В контекстном меню, помимо тех же команд, например **Подключиться** и **Выполнить**, отображаются и другие команды, например **Вставить фрагмент кода** и **Заключить в**.

![Команды контекстного меню](media/database-engine-query-editor-sql-server-management-studio/context-menu.png)

### <a name="insert-snippet-using-the-context-menu"></a>Команда "Вставить фрагмент кода" в контекстном меню

Фрагмент кода Transact-SQL — это шаблон, который можно использовать в качестве отправной точки при написании новых инструкций Transact-SQL в редакторе запросов.

### <a name="surround-with-using-the-context-menu"></a>Команда "Заключить в" в контекстном меню

Фрагмент кода, который можно использовать в качестве отправной точки при включении набора инструкций Transact-SQL в блок BEGIN, IF или WHILE.

### <a name="connection-using-the-context-menu"></a>Команда "Подключиться" в контекстном меню

![Команды контекстного меню](media/database-engine-query-editor-sql-server-management-studio/context-menu-connections.png)

В отличие от панели инструментов SSMS в контекстном меню есть больше вариантов **подключения**.

- **Подключиться** — открывает диалоговое окно "Соединение с сервером". Используйте это диалоговое окно, чтобы установить соединение с сервером.

- **Отключить** — отключает текущее окно редактора запросов от сервера.

- **Отключить все запросы** — отключает все соединения запросов.

- **Изменить соединение** — открывает диалоговое окно "Соединение с сервером". Используйте это диалоговое окно, чтобы установить соединение с другим сервером.

### <a name="open-server-in-object-explorer-using-the-context-menu"></a>Команда "Открыть сервер в обозревателе объектов" в контекстном меню

В обозревателе объектов представлен иерархический пользовательский интерфейс для просмотра и управления объектами в каждом экземпляре SQL Server. Панель сведений обозревателя объектов предлагает табличное представление объектов экземпляра и возможность поиска указанных объектов. Возможности обозревателя объектов могут незначительно различаться в зависимости от типа сервера, но в общем случае включают функции разработки для баз данных, а также функции управления для всех типов серверов.

### <a name="execute-using-the-context-menu"></a>Команда "Выполнить" в контекстном меню

Выполняет выбранный код или, если код не выбран, выполняет весь код в редакторе запросов.

### <a name="display-estimated-execution-plan-using-the-context-menu"></a>Команда "Показать предполагаемый план выполнения" в контекстном меню

Запрашивает план выполнения запроса у обработчика запросов, не выполняя этот запрос, и выводит план в окне **План выполнения** . Этот план использует статистику индексов в качестве оценки ожидаемого числа строк, возвращаемых на каждом этапе выполнения запроса. Фактически используемый план запроса может отличаться от предполагаемого плана выполнения. Это может происходить, если количество возвращаемых строк существенно расходится с оценкой, поэтому обработчик запросов вносит изменения в план в целях повышения его эффективности.

### <a name="intellisense-enabled-using-the-context-menu"></a>Команда "Функция Intellisense включена" в контекстном меню

Указывает, доступны ли функциональные возможности технологии IntelliSense в редакторе запросов компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] . По умолчанию этот параметр активирован.

### <a name="trace-query-in-sql-server-profiler-using-the-context-menu"></a>Команда "Трассировка запроса в приложении SQL Server Profiler" в контекстном меню

SQL Server Profiler — это интерфейс для создания трассировок и управления ими, а также для анализа и воспроизведения полученных результатов. События сохраняются в файле трассировки, который затем может быть проанализирован или использован для воспроизведения определенных последовательностей шагов для выявления возникших проблем.

### <a name="analyze-query-in-database-engine-tuning-advisor-using-the-context-menu"></a>Команда "Анализ запроса в помощнике по настройке ядра СУБД" в контекстном меню

Помощник по настройке ядра СУБД (Майкрософт) анализирует базы данных и составляет рекомендации по оптимизации производительности запросов. Помощник по настройке ядра СУБД можно использовать для выбора и создания оптимальных наборов индексов, индексированных представлений и секций таблицы, не обладая экспертным уровнем понимания структуры баз данных или внутренних процессов SQL Server. Помощник по настройке ядра СУБД позволяет выполнять следующие задачи.

### <a name="design-query-in-editor-using-the-context-menu"></a>Команда "Создать запрос в редакторе" в контекстном меню

Конструктор запросов и представлений открывается при открытии определения представления, показе результатов запроса или представления, при создании или открытии запроса.

### <a name="include-actual-execution-plan-using-the-context-menu"></a>Команда "Включить действительный план выполнения" в контекстном меню

Выполняет запрос, возвращает результаты запроса и план выполнения, который использовался для запроса. Эти сведения отображаются в виде графического плана запроса в окне **План выполнения** .

### <a name="include-live-query-statistics-using-the-context-menu"></a>Команда "Включить статистику активных запросов" в контекстном меню

Позволяет анализировать процесс выполнения запроса в режиме реального времени по мере передачи управления от одного оператора плана запроса другому.

### <a name="include-client-statistics-using-the-context-menu"></a>Команда "Включить статистику клиента" в контекстном меню

Включает окно **Статистика клиента** , содержащее статистические данные по запросу и сетевым пакетам, а также по времени выполнения запроса.

### <a name="results-using-the-context-menu"></a>Команды для вывода результатов в контекстном меню

![Варианты вывода результатов](media/database-engine-query-editor-sql-server-management-studio/context-menu-results.png)

В контекстном меню можно выбрать любой вариант вывода *результатов*.

- **Результаты в текст** — отображает результаты запроса в текстовом виде в окне **Результаты**.

- **Результаты в сетку** — отображает результаты запроса в виде одной или нескольких сеток в окне **Результаты**.

- **Результаты в виде файла** — после выполнения запроса открывается диалоговое окно **Сохранить результаты**. В поле **Сохранить в**выберите папку, в которой необходимо сохранить файл. В поле **Имя файла** введите имя файла, а затем нажмите кнопку **Сохранить**, чтобы сохранить результаты запроса в файл **отчета** с расширением RPT. Для настройки дополнительных параметров щелкните стрелку вниз на кнопке **Сохранить** и выберите пункт **Выбор кодировки для сохранения**.

### <a name="properties-window-using-the-context-menu"></a>Команда "Окно свойств" в контекстном меню

[Окно свойств](../menu-help/properties-window-f1-help-management-studio.md) описывает состояние элемента в SQL Server Management Studio, например подключение или оператор Showplan, и сведения об объектах базы данных, таких как таблицы, представления и конструкторы.

Окно свойств можно использовать для просмотра свойств текущего соединения. Многие свойства в окне свойств доступны только для чтения, однако могут быть изменены другими средствами Management Studio. Например, свойство запроса "База данных" в окне свойств доступно только для чтения, но может изменяться на панели инструментов.

### <a name="query-options-using-the-context-menu"></a>Команда "Параметры запроса" в контекстном меню

Открывает диалоговое окно **Параметры запроса** . С помощью этого диалоговое окно можно настроить параметры по умолчанию для выполнения запроса и для получения результатов запроса.

## <a name="see-also"></a>См. также раздел

- [Настройка меню и сочетаний клавиш](../customize-menus-and-shortcut-keys.md)

- [Сочетания клавиш среды SQL Server Management Studio](../../ssms/sql-server-management-studio-keyboard-shortcuts.md)