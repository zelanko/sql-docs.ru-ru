---
title: Высокий уровень доступности и аварийное восстановление для Master Data Services | Документы Майкрософт
ms.custom: ''
ms.date: 07/28/2017
ms.prod: sql
ms.prod_service: mds
ms.reviewer: ''
ms.suite: sql
ms.technology: high-availability
ms.tgt_pltfrm: ''
ms.topic: conceptual
ms.assetid: ''
caps.latest.revision: ''
author: leolimsft
ms.author: lle
manager: craigg
ms.openlocfilehash: 3c9fe744ddf5bd21fc6d2fffa5c92b41e3ca935f
ms.sourcegitcommit: de5e726db2f287bb32b7910831a0c4649ccf3c4c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/12/2018
ms.locfileid: "35329218"
---
# <a name="high-availability-and-disaster-recovery-for-master-data-services"></a>Высокий уровень доступности и аварийное восстановление для Master Data Services

[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]


**Аннотация:** в этой статье описывается решение с Master Data Service (MDS), размещенное в конфигурации группы доступности AlwaysOn. В статье рассказывается, как установить и настроить SQL 2016 Master Data Services в группе доступности SQL 2016 AlwaysOn. Основная цель этого решения — обеспечить более высокий уровень доступности и улучшить аварийное восстановление для серверных данных MDS, размещенных в базе данных SQL Server.

## <a name="introduction"></a>Введение


Эта статья описывает решение для Master Data Service (MDS), размещенное в конфигурации группы доступности AlwaysOn. Статья описывает, как установить и настроить SQL 2016 MDS в группе доступности AlwaysOn SQL 2016. Основная цель этого решения — обеспечить более высокий уровень доступности и улучшить аварийное восстановление для серверных данных MDS, размещенных в базе данных SQL Server.

Для реализации данного решения следует выполнить указанные ниже задачи, описанные в этой статье.

1.  [Установка и настройка отказоустойчивого кластера Windows Server (WSFC)](#windows-server-failover-cluster-wsfc).

2.  [Настройка группы доступности AlwaysOn](#sql-server-alwayson-availability-group).

3.  [Настройка MDS для работы на узле WSFC](#configure-mds-to-run-on-an-wsfc-node).

Перечисленные выше разделы содержат краткое описание технологий и инструкции. Подробные сведения о технологиях см. в документах, на которые ссылается каждый из этих разделов.

Решение, описанное в этой статье, основано на группе доступности AlwaysOn SQL Server, в которой каждая база данных имеет несколько синхронных или асинхронных реплик. Только одна из реплик принимает транзакции (запросы пользователей) — это первичная реплика.

Каждая реплика имеет собственное хранилище, поэтому в данном решении нет единого, централизованного хранилища. При сбое программного обеспечения или оборудования, затрагивающем первичную реплику, для первичной реплики может быть выполнена автоматическая или ручная отработка отказа на синхронную или асинхронную реплику — в зависимости от конфигурации и конкретных обстоятельств. Это гарантирует высокий уровень доступности базы данных с минимальными сбоями в работе для пользователей.

Обычно асинхронные реплики размещаются в центре обработки данных, удаленном от центра обработки данных первичной реплики. В случае аварии можно выполнить отработку отказа первичной реплики в другой центр обработки данных. Это обеспечивает аварийное восстановление базы данных.

В целях демонстрации описанное в этой статье решение использует указанные ниже версии программного обеспечения. Более старые версии должны работать так же, хотя возможны незначительные отличия.

-   Windows Server 2012 R2 с отказоустойчивым кластером

-   SQL Server 2016 с компонентом Master Data Services

Кроме того, в решении используются две виртуальные машины, **MDS-HA1** и **MDS-HA2**, где размещаются две реплики. Так как группа доступности AlwaysOn SQL Server поддерживает MDS, он не ограничивает доступное вам количество реплик.

В этой статье предполагается, что у вас уже есть базовые знания о Windows Server, отказоустойчивом кластере Windows Server, SQL Server AlwaysOn и SQL Server MDS.

## <a name="what-is-not-covered"></a>Не рассматриваемые темы

В этом документе не рассматриваются следующие темы:

-   Создание IIS — веб-сервера с пользовательским интерфейсом Master Data Services, который отличается высоким уровнем доступности и может быть восстановлен после аварии. MDS не предъявляет к IIS особых требований, поэтому здесь будут работать стандартные способы обеспечения высокой доступности служб IIS и балансировки нагрузки.

-   Использование отказоустойчивого кластера AlwaysOn SQL Server (FCI) для поддержания высокого уровня доступности на внутреннем сервере MDS. Отказоустойчивая кластеризация SQL Server представляет собой отдельное решение высокой доступности, официально поддерживается SQL Server и работает с MDS.

-   Использование гибридного решения отказоустойчивого кластера SQL Server (FCI) и группы доступности AlwaysOn для поддержания высокой доступности на внутреннем сервере MDS. Гибридное решение работает с MDS.

## <a name="design-consideration"></a>Вопросы проектирования

На рис. 1 показана типовая конфигурация, используемая в группах доступности AlwaysOn. В первичном центре обработки данных имеются две реплики, связанные отношениями синхронной фиксации, обе из которых обладают привилегией VOTE. В основном такая конфигурация используется для повышения уровня доступности в случае сбоя первичной реплики.

В центре обработки данных аварийного восстановления есть вторичная реплика, связанная с первичной репликой отношениями асинхронной фиксации. Обычно этот центр обработки данных размещается отдельно от первичного центра обработки данных, в другом географическом регионе. Вторичная реплика не имеет привилегии VOTE.

Такая конфигурация используется для восстановления в случае аварии в первичном центре обработки данных, например пожара, наводнения и т. д. Эта конфигурация обеспечивает высокий уровень доступности и аварийное восстановление при относительно низких затратах.

![Типовая конфигурация для группы доступности AlwaysOn](media/Fig1_TypicalConfig.png)

Рис. 1. Типовая конфигурация для группы доступности AlwaysOn

Если аварийное восстановление не требуется, необязательна и реплика во втором центре обработки данных. Если уровень доступности необходимо повысить, можно создать дополнительные синхронные реплики в том же первичном центре обработки данных.

Вот почему нужно учитывать конкретные требования и обстоятельства и соответственно подбирать необходимое количество синхронных и асинхронных реплик, а также центр обработки данных для их размещения.

## <a name="windows-server-failover-cluster-wsfc"></a>Отказоустойчивый кластер Windows Server (WSFC)

В этом разделе рассматриваются следующие задачи:

1.  [Установка компонента отказоустойчивого кластера Windows](#install-failover-cluster-feature).

2.  [Создание отказоустойчивого кластера Windows Server](#create-a-windows-server-failover-cluster).

Как показано на рис. 1 в предыдущем разделе, описываемое здесь решение включает в себя отказоустойчивый кластер Windows Server (WSFC). WSFC нужно настроить, так как он требуется SQL AlwaysOn для обнаружения сбоев и отработки отказа.

WSFC — это компонент, повышающий уровень доступности приложений и служб. Он состоит из группы независимых экземпляров Windows Server, в которых выполняется служба отказоустойчивого кластера (Майкрософт). Экземпляры Windows Server (или узлы, как их иногда называют) соединены, что позволяет им взаимодействовать друг с другом и выявлять сбои. WSFC обеспечивает выявление сбоев и отработку отказа. Если на каком-либо узле или в какой-либо службе кластера произойдет сбой, он будет обнаружен, и другой узел автоматически или вручную переключается на предоставление служб, находящихся на отказавшем узле. В результате пользователи не заметят практически никаких перебоев в работе, а доступность служб повысится.  

### <a name="prerequisites"></a>предварительные требования

Операционная система Windows Server устанавливается на всех экземплярах со всеми исправлениями.

>[!NOTE] 
>Во избежание проблем совместимости **настоятельно рекомендуется** устанавливать на все экземпляры одну и ту же версию Windows.

### <a name="install-failover-cluster-feature"></a>Установка компонента отказоустойчивого кластера

Чтобы установить WSFC на каждом из экземпляров Windows Server, выполните на каждом из них указанные ниже действия. Необходимо иметь разрешения администратора.

1.  Откройте **диспетчер сервера** в Windows Server и нажмите в правой области элемент **Добавить роли и компоненты**. Открывается **мастер добавления ролей и компонентов**.

2.  Нажмите кнопку **Далее** несколько раз, пока не дойдете до страницы **Компоненты**.

3.  Установите флажок **Отказоустойчивая кластеризация** и нажмите кнопку **Далее**, чтобы завершить установку. См. рис. 2.

    Если появляется запрос **Добавить компоненты, необходимые для отказоустойчивой кластеризации**, нажмите кнопку **Добавить компоненты**. См. рис. 3.

    ![Мастер добавления ролей и компонентов, отказоустойчивая кластеризация](media/Fig2_SelectFeatures.png)

    Рис. 2

    ![Мастер добавления ролей и компонентов, требуется для отказоустойчивой кластеризации](media/Fig3_RequiredFeaturesFailover.png)

    Рис. 3

4.  На странице **Подтверждение** нажмите кнопку **Установить**, чтобы установить компонент отказоустойчивой кластеризации.

5.  На странице **Результат** убедитесь, что все успешно установлено без ошибок и предупреждений.

### <a name="create-a-windows-server-failover-cluster"></a>Создание отказоустойчивого кластера Windows Server

После того как WSFC будет установлен на всех экземплярах, его можно настроить. Это достаточно сделать только на одном узле.

1.  Откройте **диспетчер сервера** в Windows Server и щелкните элемент **Диспетчер отказоустойчивости кластеров** в меню **Сервис** в правом верхнем углу экрана, чтобы запустить диспетчер.

2.  В **диспетчере отказоустойчивости кластеров** нажмите кнопку **Проверить конфигурацию** в правой области. См. рис. 4.

    ![Диспетчер отказоустойчивости кластеров, проверка конфигурации](media/Fig4_ValidateConfig.png)

    Рис. 4

3.  В **мастере** **проверки конфигурации** нажмите кнопку **Далее**.

4.  В диалоговом окне **Выбор серверов или кластера** добавьте имена серверов, на которых размещается SQL Server, и нажмите кнопку **Далее**. См. рис. 5.

    В этом примере мы добавили два экземпляра, MDS-HA1 и MDS-HA2.

    ![Мастер проверки конфигурации, страница выбора серверов или кластера](media/Fig5_AddServer.png)

    Рис. 5

5.  На странице **Параметры тестирования** нажмите кнопку **Выполнить все тесты**, а затем кнопку **Далее**.

6.  Нажмите кнопку **Далее**, чтобы завершить проверку.

    На странице **Проверка** отображается ход выполнения, а на странице **Сводка** — сводные данные проверки. См. рис. 6 и 7.

7.  На странице **Сводка** проверьте наличие сообщений об ошибках или предупреждений.

    Если ошибки присутствуют, их нужно исправить. Предупреждения, в свою очередь, могут не иметь большого значения. Предупреждение означает, что проверенный элемент, возможно, соответствует требованиям, но нужно кое-что проверить. Например, на рис. 7 показано предупреждение "Проверка задержки доступа к диску", которое может быть связано с тем, что диск временно занят выполнением других задач. Такое предупреждение можно пропустить. Дополнительные сведения обо всех предупреждениях и сообщениях об ошибках см. в онлайн-документации. См. рис. 7.
 
    ![Мастер проверки конфигурации, страница проверки](media/Fig6_ValidationTests.png)

    Рис. 6

    ![Мастер проверки конфигурации, страница сводки](media/Fig7_ValidationSummary.png)

    Рис. 7

8.  На странице **Сводка** убедитесь, что флажок **Создать кластер, используя проверенные узлы** установлен, и нажмите кнопку **Готово**, чтобы запустить **мастер** **создания кластеров**.

9.  В **мастере** **создания кластеров** нажмите кнопку **Далее**.

10. На странице **Точка доступа для администрирования кластера** введите имя кластера WSFC и нажмите кнопку **Далее**. В этом примере используется имя кластера MDS-HA. См. рис. 8.

    ![Ввод имени кластера](media/Fig8_EnterClusterName.png)

    Рис. 8

11. Нажимайте кнопку **Далее**, пока не завершите создание кластера. В разделе **Сводка по кластеру MDS-HA** отображаются сведения о кластере. См. рис. 9.

    ![Просмотр сводных данных по кластеру](media/Fig9_ClusterSummary.png)

    Рис. 9

    Если вам потребуется добавить узел позднее, выберите действие **Добавить узел** на правой панели **диспетчера отказоустойчивости кластеров**.

Примечания.

-   Компонент WSFC может быть доступен не во всех выпусках Windows Server. Убедитесь, что в вашем выпуске этот компонент есть.

-   Убедитесь, что у вас есть подходящие разрешения для настройки WSFC в Active Directory. Если возникают проблемы, см. раздел [Пошаговое руководство по отказоустойчивому кластеру: настройка учетных записей в Active Directory](https://technet.microsoft.com/library/cc731002(v=ws.10).aspx).

Более подробные сведения о WSFC см. в статье [Отказоустойчивые кластеры](https://technet.microsoft.com/library/cc732488(v=ws.10).aspx).

## <a name="sql-server-alwayson-availability-group"></a>Группа доступности Always On SQL Server

В этом разделе рассматриваются следующие задачи:

1.  [Включение группы доступности AlwaysOn SQL Server](#enable-sql-server-alwayson-availability-group-on-every-sql-server-instance).

2.  [Создание группы доступности](#create-an-availability-group).

3.  [Проверка и тестирование группы доступности](#validation-and-test-the-availability-group).

Решения AlwaysOn SQL Server обеспечивают высокий уровень доступности и аварийное восстановление для баз данных SQL Server. AlwaysOn имеет два возможных решения.
Оба устанавливаются поверх WSFC.

-   Группы доступности AlwaysOn

-   Экземпляры отказоустойчивых кластеров (режим AlwaysOn)

Группы доступности повышают доступность на уровне баз данных. Группы доступности (набор пользовательских баз данных) и их имя виртуальной сети регистрируются в WSFC как ресурсы.

Экземпляр отказоустойчивого кластера повышает доступность на уровне экземпляров. Служба SQL Server и связанные с ней службы регистрируются в WSFC как ресурсы. Кроме того, экземпляру отказоустойчивого кластера требуется симметричное общее дисковое хранилище, например общий файловый ресурс SMB или SAN, которое должно быть доступно всем узлам в кластере WSFC.


### <a name="prerequisites"></a>предварительные требования

-   Установите SQL Server на всех узлах. Дополнительные сведения см. в статье [Установка SQL Server 2016](https://docs.microsoft.com/sql/database-engine/install-windows/install-sql-server).

-   Установите на каждом узле одинаковые наборы и версии компонентов SQL Server (рекомендуется). В частности, требуется установить MDS.

-   Используйте на каждом из экземпляров SQL Server одну и ту же конфигурацию (рекомендуется). В частности, на всех экземплярах SQL Server нужно задать одинаковые параметры сортировки сервера.

-   Запускайте все экземпляры SQL Server с использованием одной и той же учетной записи (рекомендуется). Если это невозможно, предоставьте необходимое разрешение на каждом экземпляре SQL Server, чтобы эти экземпляры могли взаимодействовать друг с другом.

-   Убедитесь в том, что параметры брандмауэра Windows разрешают экземплярам SQL Server взаимодействовать друг с другом.

### <a name="enable-sql-server-alwayson-availability-group-on-every-sql-server-instance"></a>Включение группы доступности AlwaysOn SQL Server на каждом экземпляре SQL Server

1.  В левой области **диспетчера конфигурации SQL Server** выберите пункт **Служба SQL Server**, щелкните правой кнопкой мыши элемент **SQL Server** на правой панели и выберите пункт **Свойства**. См. рис. 10.

    ![Окно свойств SQL Server](media/Fig10_SQLServerProperties.png)

    Рис. 10

2.  В диалоговом окне **Свойства** **SQL Server (MSSQLSERVER)** откройте вкладку **Высокий уровень доступности AlwaysOn** и установите флажок **Включить группы доступности AlwaysOn**. Когда в текстовом поле **Имя отказоустойчивого кластера Windows** отобразится значение, нажмите кнопку **ОК**, чтобы продолжить. См. рис. 11.

    ![Параметр включения групп доступности AlwaysOn](media/Fig11_EnableAlwaysOn.png)

    Рис. 11

3.  Когда откроется страница предупреждения, нажмите кнопку **ОК**, чтобы продолжить. См. рис. 12.

    ![Подтверждение остановки и перезапуска службы](media/Fig12_WarningServiceStopStart.png)

    Рис. 12

4.  Нажмите кнопку **Перезапустить**, чтобы перезапустить службу **SQL Server** и применить внесенные изменения. См. рис. 10.

>[!NOTE] 
>Учетную запись, под которой выполняется служба SQL Server, можно изменить с помощью **диспетчера конфигурации SQL Server**. В диалоговом окне **Свойства** **SQL Server (MSSQLSERVER)** откройте вкладку **Вход**. См. рис. 11.

### <a name="create-an-availability-group"></a>Создание группы доступности

Включив функцию AlwaysOn во всех экземплярах SQL Server, создайте на одном узле группу доступности, содержащую базу данных MDS.

Группы доступности можно создавать только в существующих базах данных. Поэтому либо создайте базу данных MDS на одном узле, либо создайте временную базу данных, а затем удалите ее. В этом примере мы создадим базу данных emptyMDS, а затем группу доступности в ней.

1.  Запустите на одном из узлов **SQL Server Management Studio** (**SSMS**) и подключитесь к локальному экземпляру SQL Server с помощью соответствующих учетных данных.

2.  В SSMS откройте окно **создания запроса** и выполните следующий скрипт, чтобы создать пустую базу данных. Вместо C:\\temp укажите расположение, которое требуется использовать для выполнения полного резервного копирования.

    ```
    CREATE DATABASE MDS\_Sample
    GO
    BACKUP DATABASE MDS\_Sample TO DISK='C:\\temp'
    GO
    ```

    >[!NOTE] 
    >Полное резервное копирование требуется для создания группы доступности в этой базе данных.

3.  В **обозревателе объектов** разверните папку **Высокий уровень доступности AlwaysOn** и выберите **Мастер создания группы доступности**, чтобы запустить **Мастер создания группы доступности**. См. рис. 13.

    ![Запуск мастера создания группы доступности](media/Fig13_AvailabilityGroupsFolder.png)

    Рис. 13

4.  В мастере **Создание группы доступности** нажмите кнопку **Далее**, чтобы отобразить страницу **Укажите имя**. Введите имя для группы доступности и нажмите кнопку **Далее**. См. рис. 14.

    ![Указание имени для группы доступности](media/Fig14_AvailabilityGroupName.png)

    Рис. 14

5.  Щелкните базу данных, созданную на странице **Выбор базы данных**, и нажмите кнопку **Далее**. См. рис. 15.

    ![Выбор базы данных](media/Fig15_AvailabilityGroupSelectDatabase.png)

    Рис. 15

6.  На странице **Указание реплик** добавьте еще одну реплику, щелкнув кнопку **Добавить реплику**. На этой странице в качестве реплики уже указан имеющийся локальный экземпляр SQL Server. См. рис. 16.

7.  В диалоговом окне **Подключение к серверу** добавьте соответствующие учетные данные и нажмите кнопку **Подключиться**.

    ![Подключение к экземпляру SQL Server](media/Fig16_AddReplicaConnectServer.png)

    Рис. 16

    Теперь в списке должно быть две реплики. Повторите этот шаг, чтобы добавить в качестве реплик другие узлы. См. рис. 17.

    ![Просмотр списка реплик](media/Fig17_AvailabilityGroupSQLReplicas.png)

    Рис. 17

    Для каждой реплики задайте параметры **Синхронная фиксация**, **Автоматический переход на другой ресурс** и **Вторичная реплика для чтения**. См. рис.
17.

    **Синхронная фиксация**: гарантирует, что в случае, если транзакция фиксируется в первичной реплике базы данных, она также фиксируется во всех остальных синхронных репликах. Асинхронная фиксация это не гарантирует, поэтому вторичная реплика может отставать от первичной.

    Обычно синхронную фиксацию включают только в том случае, если два узла находятся в одном центре обработки данных. Если они находятся в разных центрах обработки данных, синхронная фиксация может снизить производительность базы данных.

    Если этот флажок не установлен, используется асинхронная фиксация.

    **Автоматический переход на другой ресурс:** если выбрана автоматическая отработка отказа, то в случае сбоя первичной реплики для группы доступности автоматически выполняется отработка отказа на вторичную реплику. Этот параметр можно включить только для реплик с синхронной фиксацией.

    **Вторичная реплика для чтения:** по умолчанию пользователи не могут подключаться к вторичным репликам. Этот параметр позволяет пользователям подключиться к вторичной реплике с доступом только для чтения.

8.  На странице **Выбор реплик** откройте вкладку **Прослушиватель** и выполните указанные ниже действия. См. рис. 18.

    A.  Установите флажок **Создать прослушиватель группы доступности**, чтобы настроить прослушиватель группы доступности для подключения к базе данных MDS.

    Б.  Введите **DNS-имя прослушивателя**, например MDSSQLServer.

    в.  Введите порт SQL по умолчанию 1433 в текстовом поле **Порт**.

    г.  Введите DHCP в текстовом поле **Режим сети** и нажмите кнопку **Далее**, чтобы продолжить.

    >[!NOTE] 
    >При необходимости выберите в поле **Режим сети** параметр "Статический IP-адрес" и введите статический IP-адрес. Вместо 1433 можно ввести другой номер порта. 

    ![Настройка прослушивателя](media/Fig18_AvailabilityGroupCreateListener.png)

    Рис. 18

9.  На странице **Выбор синхронизации данных** установите флажок **Полная** и укажите общую сетевую папку, доступную для каждого узла. Чтобы продолжить, нажмите кнопку **Далее** . См. рис. 19.

    В этой общей папке будет храниться резервная копия базы данных для создания вторичных реплик. Если в вашей организации она недоступна, выберите другую настройку синхронизации данных. Сведения об использовании других параметров для создания вторичных реплик см. в статье [Группа доступности AlwaysOn SQL Server 2016](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server). На рис. 17 также указаны другие параметры.

    ![Настройка синхронизации данных](media/Fig19_AvailabilityGroupDataSync.png)

    Рис. 19 

10. На странице **Проверка** убедитесь, что все проверки успешно пройдены, и исправьте все ошибки. Чтобы продолжить, нажмите кнопку **Далее** .

11. На странице **Сводка** просмотрите все параметры конфигурации и нажмите кнопку **Готово**. Это позволит создать и настроить группу доступности.

12. На странице **Результат** убедитесь, что все необходимые действия были выполнены.

### <a name="validation-and-test-the-availability-group"></a>Проверка и тестирование группы доступности

1.  Откройте SSMS и подключитесь к прослушивателю, DNS-имя которого вы указали в разделе [Создание группы доступности](#create-an-availability-group). В данном примере это MDSSQLServer.

2.  В **обозревателе объектов** разверните папку **Высокий уровень доступности AlwaysOn**, щелкните группу доступности, созданную в разделе [Создание группы доступности](#create-an-availability-group), правой кнопкой мыши и выберите пункт **Показать панель мониторинга**. См. рис. 20. Отображается состояние новой группы доступности, а также ее реплики.

    ![Просмотр панели мониторинга](media/Fig20_ShowDashboard.png)

    Рис. 20 

3.  Выберите пункт **Отработка отказа**, чтобы выполнить отработку отказа в синхронную и асинхронную реплику. Это позволит обеспечить правильную отработку отказа без каких-либо проблем.

 Настройка AlwaysOn завершена.

Дополнительные сведения о группе доступности AlwaysOn см. в статье [Группа доступности AlwaysOn SQL Server 2016](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server).

## <a name="configure-mds-to-run-on-an-wsfc-node"></a>Настройка MDS для работы на узле WSFC

Решение, представленное в этой статье, требует только серверную базу данных MDS, работающую в WSFC. Другие части MDS, такие как веб-приложения и диспетчер конфигураций MDS, могут выполняться либо на узле в WSFC, либо вне WSFC, если MDS может подключаться к группе доступности.

1.  Откройте **диспетчер конфигураций Master Data Service** на одном узле, щелкните элемент **Конфигурация базы данных**, а затем **Создать базу данных**, чтобы запустить **Мастер создания базы данных**.

2.  На странице **Сервер баз данных** введите DNS-имя прослушивателя группы доступности в текстовом поле **Экземпляр SQL Server** и нажмите кнопку **Проверить подключение**, а затем **Далее**. См. рис. 21.

    ![Настройка сервера базы данных с помощью прослушивателя группы доступности](media/Fig21_MDSDatabaseServerListener.png)

    Рис. 21

3.  На странице **База данных** введите имя базы данных, созданной в разделе [Создание группы доступности](#create-an-availability-group), и нажмите кнопку **Далее**. См. рис. 22.

    ![Создание и настройка базы данных](media/Fig22_MDSCreateDatabase.png)

    Рис. 22

4.  Завершите работу **мастера** **создания базы данных**. Дополнительные сведения см. в статье [Установка и настройка служб Master Data Services](https://docs.microsoft.com/sql/master-data-services/master-data-services-installation-and-configuration).

5.  Выберите **Веб-приложения** в **диспетчере конфигурации Master Data Service**, чтобы настроить веб-приложение, и нажмите кнопку **Применить**, чтобы применить параметры к MDS. См. рис. 23. Дополнительные сведения см. в статье [Установка и настройка служб Master Data Services](https://docs.microsoft.com/sql/master-data-services/master-data-services-installation-and-configuration).

    ![Настройка веб-приложения](media/Fig23_MDSWebApplication.png)

    Рис. 23

    Настройка MDS завершена. Вы можете повторить описанные выше действия для настройки MDS на всех узлах. В одной группе доступности должна использоваться одна и та же серверная база данных.

6.  Если ранее вы создали временную базу данных (см. раздел [Создание группы доступности](#create-an-availability-group)) для создания группы доступности AlwaysOn, ее нужно удалить.

    Дополнительные сведения о службах Master Data Service см. в статье [Службы Master Data Service](https://docs.microsoft.com/sql/master-data-services/master-data-services-overview-mds).

## <a name="conclusion"></a>Заключение

В этом документе мы показали, как установить и настроить серверную базу данных Master Data Services на основе группы доступности AlwaysOn SQL Server. Такая конфигурация обеспечивает высокий уровень доступности и аварийное восстановление в серверной базе данных Master Data Services. Чтобы реализовать эту конфигурацию, нужно установить и настроить отказоустойчивый кластер Windows Server, группу доступности AlwaysOn SQL Server и службы Master Data Services.

## <a name="feedback"></a>Отзывы

Был ли этот документ вам полезен? Чтобы оставить отзыв, щелкните ссылку **Комментарии** в верхней части статьи. 

Ваши отзывы помогут нам в будущем повысить качество наших технических документов. 

