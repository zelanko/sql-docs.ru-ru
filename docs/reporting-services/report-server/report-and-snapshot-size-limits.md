---
title: Максимальные размеры отчетов и моментальных снимков | Документы Майкрософт
ms.date: 03/14/2017
ms.prod: reporting-services
ms.prod_service: reporting-services-sharepoint, reporting-services-native
ms.technology: report-server
ms.topic: conceptual
helpviewer_keywords:
- large reports
- maximum report size
- size [SQL Server], reports
- report size [Reporting Services]
- reports [Reporting Services], size
- denial of service attacks [Reporting Services]
ms.assetid: 1e3be259-d453-4802-b2f5-6b81ef607edf
author: markingmyname
ms.author: maghan
ms.openlocfilehash: 2803e8d4ed2e0246c27dae775e864e81e10d91eb
ms.sourcegitcommit: 706f3a89fdb98e84569973f35a3032f324a92771
ms.translationtype: MTE75
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2019
ms.locfileid: "58658138"
---
# <a name="report-and-snapshot-size-limits"></a>Максимальные размеры отчетов и моментальных снимков
  Администраторы, которые управляют развертыванием служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , могут использовать этот раздел, чтобы получить основные сведения об ограничениях максимального размера отчета при публикации на сервере отчетов, о подготовке к просмотру во время выполнения и сохранении в файловой системе. В этом разделе содержатся практические рекомендации по определению размера базы данных сервера отчетов, а также описывается влияние размера моментальных снимков на производительность сервера.  
  
## <a name="maximum-size-for-published-reports"></a>Максимальный размер опубликованных отчетов  
 Размер отчета и модели определяется размером файлов определения отчета (RDL) и моделей отчетов (SMDL), которые публикуются на сервере отчетов. Сервер отчетов не ограничивает размер публикуемого отчета. Однако [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[vstecasp](../../includes/vstecasp-md.md)] налагает ограничения на максимальный размер элементов, отправляемых на сервер. По умолчанию это ограничение — 4 мегабайта (МБ). Если передается или публикуется на сервере отчетов файл, превышающий этот предел, будет получено HTTP-исключение. В этом случае можно изменить значение по умолчанию, увеличив значение элемента **maxRequestLength** в файле Machine.config.  
  
 Хотя модель отчета может иметь очень большой размер, определения отчетов редко превышают 4 МБ. Их обычный размер определяется килобайтами (КБ). Однако если включаются встроенные изображения, кодирование этих изображений может привести к большому размеру определений отчетов, превышающему значение по умолчанию в 4 МБ.  
  
 [!INCLUDE[vstecasp](../../includes/vstecasp-md.md)] налагает максимальное ограничение на отправляемые файлы, чтобы уменьшить угрозу атак типа "отказ в обслуживании" на сервер. Увеличение значения верхнего ограничения снимает часть защиты, которую это ограничение обеспечивает. Увеличивайте значение, только если уверены, что выгода перевешивает любой дополнительный риск безопасности.  
  
 Помните, что значение, заданное для элемента **maxRequestLength** , должно быть больше, чем предельные размеры, которые фактически требуется обеспечить. Необходимо задать более высокое значение с учетом неизбежного увеличения размера HTTP-запроса после инкапсуляции всех параметров в SOAP и применения кодировки Base64. Кодировка Base64 увеличивает размер исходных данных примерно на 33 %. Поэтому значение, заданное для элемента **maxRequestLength** , должно быть примерно на 33 % больше фактического размера элемента. Например, если указано значение 64 МБ для **maxRequestLength**, то вполне можно ожидать, что максимальный объем файлов отчетов, созданных на сервере отчетов, будет составлять примерно 48 МБ.  
  
## <a name="report-size-in-memory"></a>Размер отчета в памяти  
 При запуске какого-либо отчета максимальный размер равен величине данных, которые возвращаются в отчет, плюс размер выходного потока. [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] не накладывает ограничений на максимальный размер отчета, готового для просмотра. Верхнюю границу размера определяет объем памяти в системе (по умолчанию сервер отчетов использует всю доступную выделенную память при подготовке отчета), однако для установки пороговых значений для памяти и политики управления памятью можно задать параметры конфигурации. Дополнительные сведения см. в разделе [Настройка доступной памяти для приложений сервера отчетов](../../reporting-services/report-server/configure-available-memory-for-report-server-applications.md).  
  
 Размер отчета значительно зависит от количества данных, содержащихся в отчете, а также от формата их представления. Параметризованный отчет может быть больше или меньше в зависимости от того, как значения параметров повлияли на результаты запроса. Выходной формат отчета влияет на размер отчета следующим образом.  
  
-   Для формата HTML отчет обрабатывается постранично. Так как обработка выполняется меньшими по размеру блоками, для обработки конкретного фрагмента данных требуется меньше памяти.  
  
-   Для форматов PDF, TIFF, XML и CSV перед отображением отчета весь запрос обрабатывается в памяти.  
  
 Размер отчета, готового для просмотра, можно посмотреть в журнале выполнения отчетов. Дополнительные сведения см. в разделе [Журнал выполнения сервера отчетов и представление ExecutionLog3](../../reporting-services/report-server/report-server-executionlog-and-the-executionlog3-view.md).  
  
 Чтобы рассчитать занимаемый на диске размер отчета, готового для просмотра, можно выполнить экспорт, а затем сохранить отчет в файловую систему (сохраненный файл содержит данные и сведения о форматировании отчета).  
  
 Единственное неизменное ограничение на размер отчета накладывается при подготовке отчета в формате Excel. Листы не могут иметь более 65536 строк и 256 столбцов. Другие форматы представления не имеют этих ограничений, поэтому размер отчета ограничен количеством ресурсов сервера.  
  
> [!NOTE]  
>  Обработка и подготовка отчета к просмотру происходят в памяти. При работе с большими отчетами или с большим количеством пользователей нужно убедиться, что ресурсы сервера отчетов развернуты на уровне, который удовлетворяет пользователей. Дополнительные сведения о средствах и рекомендациях см. в следующих публикациях MSDN: [Планирование масштабируемости и производительности служб Reporting Services](/previous-versions/sql/sql-server-2005/administrator/cc966418(v=technet.10)) (на английском языке) и [Тестирование загрузки сервера отчетов служб Reporting Services SQL Server 2005 в среде Visual Studio 2005](https://go.microsoft.com/fwlink/?LinkID=77519)(на английском языке).  
  
## <a name="measuring-snapshot-storage"></a>Определение размера хранилища моментальных снимков  
 Размер любого моментального снимка прямо пропорционален количеству данных, содержащихся в отчете. Обычно размер моментального снимка значительно превосходит размеры других элементов, хранящихся на сервере отчетов. Размер моментального снимка обычно находится в диапазоне от нескольких мегабайтов до нескольких десятков мегабайтов. Если отчет имеет очень большой размер, то можно ожидать, что размер моментального снимка также будет большим. В зависимости от того, как часто используются моментальные снимки и как настроен журнал отчета, размер места на диске, необходимый базе данных сервера отчетов, может быстро увеличиться в течение короткого периода времени.  
  
 По умолчанию базы данных **reportserver** и **reportservertempdb** настраиваются на автоматическое расширение. Хотя размер базы данных может увеличиваться автоматически, но автоматически уменьшаться он не может. Если база данных **reportserver** имеет избыточный размер из-за удаления моментального снимка, то необходимо уменьшить ее размер вручную, что приведет к освобождению места на диске. Аналогичным образом, если база данных **reportservertempdb** увеличилась, чтобы вместить необыкновенно большой объем интерактивных отчетов, выделенное место на диске останется на этом уровне до тех пор, пока не будет уменьшено вручную.  
  
 Для определения размера баз данных сервера отчетов можно выполнить следующие команды [!INCLUDE[tsql](../../includes/tsql-md.md)] . Периодический подсчет общего размера базы данных может со временем помочь рационально выделять место на диске для базы данных сервера отчетов. Следующие инструкции измеряют объем используемого в текущее время пространства (при применении инструкций предполагается, что используются имена баз данных по умолчанию):  
  
```  
USE ReportServer  
EXEC sp_spaceused  
```  
  
## <a name="snapshot-size-and-report-server-performance"></a>Размер моментальных снимков и производительность сервера отчетов  
 Размер моментального снимка влияет на производительность сервера во время обработки отчета и подготовки его к просмотру. На производительность сервера в наибольшей степени влияют операции подготовки отчетов к просмотру, поэтому, если моментальный снимок имеет большой размер, возможна некоторая задержка при запросе отчета пользователями. В зависимости от числа пользователей задержка может быть заметной уже при размере моментального снимка 100 МБ.  
  
 Чтобы уменьшить задержки выполнения из-за моментального снимка большого размера, можно сделать следующее:  
  
-   развернуть сервер отчетов и [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] на разных компьютерах;  
  
-   увеличить объем системной памяти.  
  
-   Ознакомьтесь с описанием настройки сервера отчетов для его оптимальной работы в масштабах предприятия в документе «Планирование масштабируемости и производительности служб Reporting Services», расположенном на веб-сайте MSDN.  
  
 Размер моментального снимка, который хранится в базе данных сервера отчетов, сам по себе не является фактором, определяющим производительность системы. Можно хранить большое число моментальных снимков без влияния на производительность сервера. Можно сохранить неограниченное количество моментальных снимков. Однако нужно иметь в виду, что журнал отчетов можно настраивать. Если администратор сервера отчетов уменьшит объем журнала отчетов, то можно потерять журналы отчетов, которые планировалось сохранить. Если удалить отчет, то все журналы отчета будут удалены вместе с ним.  
  
## <a name="see-also"></a>См. также:  
 [Установка свойств обработки отчетов](../../reporting-services/report-server/set-report-processing-properties.md)   
 [База данных сервера отчетов (службы Reporting Services в собственном режиме)](../../reporting-services/report-server/report-server-database-ssrs-native-mode.md)   
 [Обработка больших отчетов](../../reporting-services/report-server/process-large-reports.md)  
  
  
