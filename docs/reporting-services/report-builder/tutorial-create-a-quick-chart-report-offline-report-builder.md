---
title: "Учебник. Создание стандартного отчета с диаграммой в режиме &quot;вне сети&quot; (построитель отчетов) | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "reporting-services-sharepoint"
  - "reporting-services-native"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "Отчеты, создание"
  - "Учебники, приступая к работе"
  - "создание отчетов"
ms.assetid: 6b1db67a-cf75-494c-b70c-09f1e6a8d414
caps.latest.revision: 31
author: "maggiesMSFT"
ms.author: "maggies"
manager: "erikre"
caps.handback.revision: 27
---
# Учебник. Создание стандартного отчета с диаграммой в режиме &quot;вне сети&quot; (построитель отчетов)
  В этом руководстве с помощью мастера будет создана круговая диаграмма в отчете с разбивкой на страницы [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в [!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)]. Затем вы добавите значения в процентах и немного измените круговую диаграмму. 
  
Задания этого учебника вы можете выполнить двумя различными способами. При использовании любого из этих методов будет получен один и тот же результат — круговая диаграмма, похожая на изображенную на рисунке.  
  
 ![Report Builder New Chart Run](../../reporting-services/report-builder/media/rb-newchartrun.png "Report Builder New Chart Run")  
  
## Предварительные требования  
 Независимо от используемого метода (XML-данные или запрос [!INCLUDE[tsql](../../includes/tsql-md.md)] ), требуется доступ к [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)][!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)]. Можно запустить [!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)] из сервера отчетов [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в собственном режиме или режиме интеграции с SharePoint, а также можно загрузить [!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)] из центра загрузки Майкрософт. Дополнительные сведения см. в разделе [Install Report Builder](../../reporting-services/install-windows/install-report-builder.md).  
  
##  <a name="TwoWays"></a> Два способа выполнить задания этого учебника  
  
-   [Создание круговой диаграммы с использованием XML-данных](#CreatePieChartXML)  
  
-   [Создание круговой диаграммы с помощью запроса Transact\-SQL, содержащего данные](#CreatePieQueryData)  
  
### Использование XML-данных при работе с этим учебником  
 Можно использовать XML-данные, скопированные из этого раздела и вставленные в мастер. При этом не требуется соединение с сервером отчетов [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в собственном режиме или режиме интеграции с SharePoint и не нужен доступ к экземпляру [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].  
  
 [Создание круговой диаграммы с использованием XML-данных](#CreatePieChartXML)  
  
### Использование запроса [!INCLUDE[tsql](../../includes/tsql-md.md)] , содержащего данные, при работе с этим учебником  
 Можно скопировать запрос с данными, которые содержатся в нем, из этого раздела и вставить в мастер. Вам понадобится имя экземпляра [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] и учетные данные, необходимые для доступа к базе данных в режиме только для чтения. В запросе набора данных в этом учебнике используются данные литералов, но запрос должен обрабатываться экземпляром [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] для возвращения метаданных, необходимых для набора данных отчета.  
  
 Преимущество использования запроса [!INCLUDE[tsql](../../includes/tsql-md.md)] заключается в том, что во всех учебниках [!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)] используется один и тот же метод, поэтому при выполнении других учебников этот метод будет уже знаком.  
  
 Для выполнения запроса [!INCLUDE[tsql](../../includes/tsql-md.md)] существует несколько других предварительных условий. Дополнительные сведения см. в разделе [Предварительные условия для использования учебников (построитель отчетов)](../../reporting-services/prerequisites-for-tutorials-report-builder.md).  
  
 [Создание круговой диаграммы с помощью запроса Transact\-SQL, содержащего данные](#CreatePieQueryData)  
  
##  <a name="CreatePieChartXML"></a> Создание круговой диаграммы с XML-данными  
  
1.  [Запустите построитель отчетов](../../reporting-services/report-builder/start-report-builder.md) с веб-портала [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], сервера отчетов в режиме интеграции с SharePoint или компьютера.  
  
     Откроется диалоговое окно **Приступая к работе** .  
  
     ![Report Builder Get Started](../../reporting-services/media/rb-getstarted.png "Report Builder Get Started")  
  
     Если диалоговое окно **Приступая к работе** не отображается, щелкните **Файл** \>**Создать**. Диалоговое окно **Создать отчет или набор данных** содержит большую часть того же содержимого, что и диалоговое окно **Приступая к работе** .  
  
2.  Убедитесь, что на левой панели выбран **Новый отчет** .  
  
3.  На правой панели нажмите **Мастер диаграмм**, а затем щелкните **Создать**.  
  
4.  На странице **Выбор набора данных** нажмите кнопку **Создать набор данных**, а затем **Далее**.  
  
5.  На странице **Выбор соединения с источником данных** нажмите кнопку **Создать**.  
  
     Откроется диалоговое окно **Свойства источника данных** .  
  
6.  Источник данных можно назвать произвольным образом. В поле **Имя** введите **MyPieChart**.  
  
7.  В диалоговом окне **Выбор типа соединения** выберите **XML**.  
  
8.  Перейдите на вкладку **Учетные данные** и выберите параметр **Использовать текущего пользователя Windows. Может потребоваться делегирование Kerberos**. Затем нажмите кнопку **ОК**.  
  
9. На странице **Выбор соединения с источником данных** выберите **Моя круговая диаграмма**, затем нажмите кнопку **Далее**.  
  
10. Скопируйте следующий текст и включите его в большое поле вверху страницы **Создание запроса** .  
  
    ```  
    <Query>  
    <ElementPath>Root /S  {@Sales (Integer)} /C {@FullName} </ElementPath>  
    <XmlData>  
    <Root>  
    <S Sales="150">  
      <C FullName="Jae Pak" />  
    </S>  
    <S Sales="350">  
      <C FullName="Jillian  Carson" />  
    </S>  
    <S Sales="250">  
      <C FullName="Linda C Mitchell" />  
    </S>  
    <S Sales="500">  
      <C FullName="Michael Blythe" />  
    </S>  
    <S Sales="450">  
      <C FullName="Ranjit Varkey" />  
    </S>  
    </Root>  
    </XmlData>  
    </Query>  
    ```  
  
11. \((Необязательно) Нажмите кнопку **Выполнить**\(**\!**\), чтобы просмотреть данные, на основе которых будет создана диаграмма.  
  
     ![Report Builder Design Query](../../reporting-services/report-builder/media/rb-designquery.png "Report Builder Design Query")  
  
12. Нажмите кнопку **Далее**.  
  
13. На странице **Выбор типа диаграммы** выберите **Круговая диаграмма**и нажмите кнопку **Далее**.  
  
14. На странице **Расположение полей диаграммы** дважды щелкните поле **Продажи** в окне **Доступные поля**.  
  
     Обратите внимание на то, что оно автоматически перемещается в поле **Значения** , так как это числовое значение.  
  
     ![Report Builder Wizard Arrange Fields](../../reporting-services/report-builder/media/rb-wizarrangefields.png "Report Builder Wizard Arrange Fields")  
  
15. Перетащите поле **FullName** из окна **Доступные поля** в окно **Категории** \(или дважды щелкните его (оно переместится в окно **Категории**\)), а затем нажмите кнопку **Далее**.  
  
     На странице предварительного просмотра отобразится новая круговая диаграмма с репрезентативными данными. В условных обозначениях указываются «Полное имя 1», «Полное имя 2» и т. д., а не имена менеджеров по продажам. Кроме того, размер секторов круговой диаграммы неточен. Это изображение дает лишь общее представление о том, как будет выглядеть отчет.  
  
     ![Report Builder New Chart Preview](../../reporting-services/report-builder/media/rb-newchartpreview.png "Report Builder New Chart Preview")  
  
16. Нажмите кнопку **Готово**.  
  
     Вы увидите новый отчет с круговой диаграммой в конструкторе, все еще с репрезентативными данными.  
  
     ![Report Builder New Pie in Design View](../../reporting-services/report-builder/media/rb-newpiedesign.png "Report Builder New Pie in Design View")  
  
17. Чтобы просмотреть настоящую круговую диаграмму, нажмите кнопку **Выполнить** на вкладке **Главная** ленты.  
  
     ![Report Builder New Chart Run](../../reporting-services/report-builder/media/rb-newchartrun.png "Report Builder New Chart Run")  
  
18. Чтобы продолжить изменение круговой диаграммы, перейдите к [После завершения работы мастера](#AfterWizard) в этой статье.  
  
##  <a name="CreatePieQueryData"></a> Создание круговой диаграммы с помощью запроса [!INCLUDE[tsql](../../includes/tsql-md.md)]  
  
1.  [Запустите построитель отчетов](../../reporting-services/report-builder/start-report-builder.md) с веб-портала [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], сервера отчетов в режиме интеграции с SharePoint или компьютера.  
  
     Откроется диалоговое окно **Приступая к работе** .  
  
    > [!NOTE]  
    >  Если диалоговое окно **Приступая к работе** не отображается, щелкните **Файл** \>**Создать**. Диалоговое окно **Создать отчет или набор данных** содержит большую часть того же содержимого, что и диалоговое окно **Приступая к работе** .  
  
2.  Убедитесь, что на левой панели выбран **Новый отчет** .  
  
3.  На правой панели нажмите **Мастер диаграмм**, а затем щелкните **Создать**.  
  
4.  На странице **Выбор набора данных** нажмите кнопку **Создать набор данных**, а затем **Далее**.  
  
5.  На странице **Выбор соединения с источником данных** выберите существующий источник данных или перейдите к серверу отчетов и выберите источник данных, а затем выберите **Далее**. Может потребоваться указать имя пользователя и пароль.  
  
    > [!NOTE]  
    >  При наличии необходимых разрешений выбор источника данных не имеет существенного значения. Этот источник данных не будет использоваться для получения данных. Дополнительные сведения см. в разделе [Предварительные условия для использования учебников (построитель отчетов)](../../reporting-services/prerequisites-for-tutorials-report-builder.md).  
  
6.  На странице **Проектирование запроса** нажмите кнопку **Изменить как текст**.  
  
7.  На панель запроса вставьте следующий запрос:  
  
    ```  
    SELECT 150 AS Sales, 'Jae Pak' AS FullName   
    UNION SELECT 350 AS Sales, 'Jillian Carson' AS FullName   
    UNION SELECT 250 AS Sales, 'Linda C Mitchell' AS FullName   
    UNION SELECT 500 AS Sales, 'Michael Blythe' AS FullName   
    UNION SELECT 450 AS Sales, 'Ranjit Varkey' AS FullName   
    ```  
  
8.  \((Необязательно) Нажмите кнопку Выполнить\(**\!**\), чтобы просмотреть данные, на основе которых будет создана диаграмма.  
  
9. Нажмите кнопку **Далее**.  
  
10. На странице **Выбор типа диаграммы** выберите **Круговая диаграмма**и нажмите кнопку **Далее**.  
  
11. На странице **Расположение полей диаграммы** дважды щелкните поле **Продажи** в окне **Доступные поля**.  
  
     Обратите внимание на то, что оно автоматически перемещается в поле **Значение** , так как это числовое значение.  
  
12. Перетащите поле **FullName** из окна **Доступные поля** в окно **Категории** \(или дважды щелкните его (оно переместится в окно **Категории**\)), а затем нажмите кнопку **Далее**.  
  
13. Нажмите кнопку **Готово**.  
  
     Теперь в области конструктора отображается новый отчет с круговой диаграммой. Это стандартное представление. В условных обозначениях указываются «Полное имя 1», «Полное имя 2» и т. д., а не имена менеджеров по продажам. Кроме того, размер секторов круговой диаграммы неточен. Это изображение дает лишь общее представление о том, как будет выглядеть отчет.  
  
15. Чтобы просмотреть настоящую круговую диаграмму, нажмите кнопку **Выполнить** на вкладке **Главная** ленты.  
 
##  <a name="AfterWizard"></a> После завершения работы мастера  
 После получения отчета с круговой диаграммой его можно изменить. На вкладке **Выполнение** ленты выберите **Проектирование**, чтобы продолжить изменение отчета.  
  
## Увеличение диаграммы  
 Может возникнуть необходимость в увеличении размера круговой диаграммы. 
 
*  Для изменения размера диаграммы щелкните ее (но не ее элементы), чтобы выделить ее и перетащить нижний правый угол.  

Обратите внимание, что рабочая область конструирования увеличивается при перетаскивании.
  
## Добавление заголовка отчета  
1. В верхней части диаграммы выберите слова **Заголовок диаграммы** , а затем введите заголовок, например, **Круговая диаграмма продаж**.  
2. Указав заголовок, выберите на панели свойств **черный** **цвет** и **шрифт** размера **12 пт**.
  
## Добавление процентных показателей  
 
1.  Щелкните правой кнопкой мыши круговую диаграмму и выберите пункт **Отобразить метки данных**. Метки данных должны появиться в каждом срезе круговой диаграммы.  
  
2.  Щелкните правой кнопкой мыши метки и выберите пункт **Свойства метки ряда**. Появится диалоговое окно **Свойства метки ряда** .  
  
3.  В поле **Данные метки** введите **\#PERCENT{P0}**.  
  
     Значение **{P0}** дает процент без десятичных разрядов. Если просто ввести **\#PERCENT**, числа будут иметь два десятичных разряда. **\#PERCENT** — это ключевое слово, с помощью которого выполняются вычисления; доступны и другие ключевые слова.  
     
4. Щелкните **Да**, чтобы подтвердить присвоение параметру **UseValueAsLabel** значения **False**.

5. Выберите **полужирный** **шрифт** и **белый** **цвет**.

Нажмите кнопку **ОК**.     
  
 Дополнительные сведения о настройке меток диаграммы и условные обозначения см. в разделе [Отображение процентных значений на круговой диаграмме (построитель отчетов и службы SSRS)](../../reporting-services/report-design/display-percentage-values-on-a-pie-chart-report-builder-and-ssrs.md) и [Изменение текста элемента условных обозначений (построитель отчетов и службы SSRS)](../../reporting-services/report-design/change-the-text-of-a-legend-item-report-builder-and-ssrs.md).  
  
##  <a name="WhatsNext"></a> Дальнейшая работа  
 Теперь после создания первого отчета в [!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)]можно ознакомиться с другими учебниками и начать создавать отчеты на основе собственных данных. Для запуска [!INCLUDE[ssRBnoversion](../../includes/ssrbnoversion-md.md)]понадобятся разрешения для доступа к источникам данных, например к базам данных, и *строка подключения*, которая устанавливает соединение с источником данных. У системного администратора имеются эти данные, и он может установить соответствующие разрешения.  
  
 Для работы с другими руководствами вам понадобится имя экземпляра [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] и учетные данные, необходимые для доступа к базе данных в режиме только для чтения. Системный администратор также может предоставить такой доступ.  
  
 Наконец, чтобы сохранять отчеты в сервере отчетов или на сайте SharePoint, интегрированном с сервером отчетов, необходимы URL-адрес и разрешения. Можно выполнять любой отчет, создаваемый непосредственно на компьютере, но если отчеты запускаются с сервера отчетов или из сайта SharePoint, они обладают более широкими функциональными возможностями. Для запуска опубликованных отчетов с сервера отчетов или из сайта SharePoint необходимы разрешения. Для получения соответствующих прав доступа можно также обратиться к системному администратору.  
  
 Перед началом работы он может помочь в ознакомлении с некоторыми основными понятиями и терминами. См. раздел [Основные понятия о разработке отчетов (построитель отчетов и службы SSRS)](../../reporting-services/report-design/report-authoring-concepts-report-builder-and-ssrs.md). Кроме того, перед созданием первого отчета необходимо затратить некоторое время на планирование. Это время не будет затрачено впустую. См. раздел [Планирование отчета (построитель отчетов)](../../reporting-services/report-design/planning-a-report-report-builder.md).  
   
## См. также:  
 [Учебники по построителю отчетов](../../reporting-services/report-builder-tutorials.md)   
 [Построитель отчетов в SQL Server 2016](../../reporting-services/report-builder/report-builder-in-sql-server-2016.md)  
  
  