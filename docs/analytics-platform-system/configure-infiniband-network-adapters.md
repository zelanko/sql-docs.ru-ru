---
title: Настройка InfiniBand - Analytics Platform System | Документация Майкрософт
description: В этой статье описывается настройка сетевых адаптеров InfiniBand на сервере не является специализированным клиента для подключения к узлу в Parallel Data Warehouse (PDW). Используйте эти инструкции для базовых параметров подключения и высокую доступность, таким образом, загрузка, резервного копирования и другие процессы автоматически подключиться к активной сети InfiniBand.
author: mzaman1
manager: craigg
ms.prod: sql
ms.technology: data-warehouse
ms.topic: conceptual
ms.date: 04/17/2018
ms.author: murshedz
ms.reviewer: martinle
ms.openlocfilehash: 9e52e3962fa1928d7f7680a750d6c1efe5201c6f
ms.sourcegitcommit: 8bc5d85bd157f9cfd52245d23062d150b76066ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/07/2019
ms.locfileid: "57579404"
---
# <a name="configure-infiniband-network-adapters-for-analytics-platform-system"></a>Настройка сетевых адаптеров InfiniBand для Analytics Platform System
В этой статье описывается настройка сетевых адаптеров InfiniBand на сервере не является специализированным клиента для подключения к узлу в Parallel Data Warehouse (PDW). Используйте эти инструкции для базовых параметров подключения и высокую доступность, таким образом, загрузка, резервного копирования и другие процессы автоматически подключиться к активной сети InfiniBand.  
  
## <a name="Basics"></a>Описание  
Эти инструкции показано, как найти и затем задать правильный InfiniBand IP-адреса и маски подсети на сервере, подключенного к InfiniBand. Они также описывается настройка сервера для использования устройства APS DNS таким образом, разрешается подключение к активной сети InfiniBand.  
  
Для обеспечения высокой доступности APS имеет две сети InfiniBand — активный и пассивный один. В каждой сети InfiniBand имеется другой IP-адрес для узла элемента управления. Если active сети InfiniBand выходит из строя, пассивный сети InfiniBand становится active сети. В этом случае скрипта или процесса автоматически подключается к сети InfiniBand active без изменения параметров сценария.  
  
В частности в этой статье:  
  
1.  Найти InfiniBand IP-адреса APS DNS-серверы (appliance_domain AD01 и appliance_domain *-AD02). Для этого можно войти на серверы AD01 и AD02 и получить IP-адреса для каждой сети InfiniBand. InfiniBand IP-адреса на узле AD являются DNS IP-адреса.  
  
2.  Настройте каждый сетевой адаптер для использования доступных IP-адреса в сетях APS InfiniBand.  
  
    1.  Если у вас есть два сетевых адаптера InfiniBand, доступных IP-адрес в первой сети InfiniBand, который называется TeamIB1 и других адаптер доступных IP-адрес в второй сети InfiniBand, который называется TeamIB2 настраивается один адаптер. Используйте TeamIB1 appliance_domain AD01 IP-адрес как основной DNS-сервер и TeamIB1 appliance_domain AD02 IP-адрес альтернативного DNS-сервера для TeamIB1 сетевого адаптера. Используйте TeamIB2 appliance_domain AD01 IP-адрес как основной DNS-сервер и TeamIB2 appliance_domain AD02 IP-адрес альтернативного DNS-сервера для TeamIB2 сетевого адаптера.  
  
    2.  Если имеется только один сетевой адаптер с поддержкой InfiniBand, настройте адаптер с IP-адресом доступны из одного из сети InfiniBand. Затем настройте основной и Альтернативный DNS-серверы, на этот адаптер с помощью TeamIB1 appliance_domain AD01 и TeamIB1 appliance_domain AD02 или TeamIB2 appliance_domain AD01 и TeamIB2 appliance_domain AD02 наступит на том же сети настроенный адаптер как основной и Альтернативный DNS-серверов соответственно.  
  
3.  Настройка сетевого адаптера InfiniBand, используемый APS DNS-серверы для разрешения подключения к активной сети InfiniBand.  
  
    1.  Чтобы настроить эту возможность использовать дополнительные параметры TCP/IP, добавляемый в начало списка DNS-суффиксов DNS-суффикс домена устройства на сервере клиентского. Это действие необходимо настроить на одном из сетевых адаптеров; параметр применяется к обоим адаптерам.  
  
После настройки сетевых адаптеров InfiniBand, клиентских процессов можно подключиться к узлу в сети InfiniBand с помощью `PDW_region-SQLCTL01` для адреса сервера. Сервер добавляется суффикс DNS системы платформы аналитики, или ввести полный адрес, который является `PDW_region-SQLCTL01.appliance_domain.pdw.local`.  
  
Если ваше имя региона PDW — MyPDW, имя устройства является MyAPS спецификации dwloader сервера для загрузки данных является одним из следующих:  
  
-   `dwloader -S MYPDW-SQLCTL01.MyAPS.pdw.local`  
  
-   `dwloader -S MYPDW-SQLCTL01`  
  
## <a name="BeforeBegin"></a>Перед началом  
  
### <a name="requirements"></a>Требования  
Требуется APS устройство доменной учетной записи для входа на узел AD01. Например, F12345 * \Administrator.  
  
Потребуется учетная запись Windows на сервере клиента, имеющую разрешение на настройки сетевых адаптеров.  
  
### <a name="prerequisites"></a>предварительные требования  
Эти инструкции предполагают клиент-сервер уже распаковали и подключено к сети InfiniBand устройство источнику. Отслеживание и подключению кабелей инструкции, см. в разделе [приобретение и настройка сервера, загрузка](acquire-and-configure-loading-server.md).  
  
### <a name="general-remarks"></a>Общие замечания  
С помощью SQLCTL01, системы DNS платформы Analytics к серверу клиента управляющий узел с помощью active сети InfiniBand. Это относится только к подключение к сети; Если сеть InfiniBand перестает работать во время загрузки или резервное копирование, необходимо перезапустить процесс.  
  
В соответствии с собственными бизнес-требованиями, можно также объединить клиент-сервер не является специализированным рабочей группы или домена Windows.  
  
## <a name="Sec1"></a>Шаг 1. Получить модуль InfiniBand сетевые параметры  
*Чтобы получить модуль параметры сети InfiniBand*  
  
1.  Войдите в модуль AD01 узел с помощью учетной записи appliance_domain\Administrator.  
  
2.  На узле AD01 устройство откройте панель управления, выберите сеть и Интернет, выберите сеть и Sharing Center * и выберите Изменение параметров адаптера.  
  
3.  В окне «Сетевые подключения» щелкните правой кнопкой мыши на IB1 группы и выберите свойства.  
  
    ![Соединения InfiniBand на узле управления](media/network-teamib.png "соединения InfiniBand на узле управления")  
  
4.  Из окна свойств Internet Protocol версии 4 (TCP/IPv4), запишите значения для **IP-адрес** и **маска подсети**.  IP-адрес  **_устройство\_домена_-AD01** узел является IP-адрес сервера DNS системы платформы аналитики.  
  
5.  Повторите шаги 1 – 5 выше для адаптера TeamIB1 на  **_устройство\_домена_-AD02** сервера.  
  
    ![Свойства InfiniBand 1 узла управления PDW](media/network-ip1-properties.png "свойства InfiniBand 1 узла управления PDW")  
  
6.  Нажмите кнопку "Отмена", чтобы закрыть окно.  
  
7.  Найдите неиспользуемый IP-адрес в сети TeamIB1 и запишите его.  
  
    Чтобы найти неиспользуемый IP-адрес, откройте командное окно и попробуйте проверить связь с IP-адреса в диапазоне адресов для вашего устройства. В этом примере IP-адрес сети TeamIB1 — 172.16.14.30. Найти IP-адресом, который начинается с 172.16.14, который не используется. Например в командной строке введите «проверить связь с 172.16.14.254». Если запрос проверки связи завершилась неудачно, IP-адрес доступен.  
  
8.  Сделать то же самое для TeamIB2. В * сетевых подключений, щелкните правой кнопкой мыши на IB2 группы и выберите пункт Свойства.  
  
9. Из окна свойств Internet Protocol версии 4 (TCP/IPv4) запишите значения для IP-адрес и маску подсети для TeamIB2.  
  
10. Повторите шаги 8 – 9 выше для TeamIB2 адаптера на сервере appliance_domain AD02.  
  
    ![Свойства для TeamIB2](media/network-ip2-properties.png "свойства для TeamIB2")  
  
11. Найти на неиспользуемый адрес **TeamIB2** сети и запишите его.  
  
    Чтобы найти неиспользуемый IP-адрес, откройте командное окно и попробуйте проверить связь с IP-адреса в диапазоне адресов для вашего устройства. В этом примере IP-адрес сети TeamIB2 — 172.16.18.30. Найти IP-адресом, который начинается с 172.16.18, который не используется. Например в командной строке введите «проверить связь с 172.16.18.254». Если запрос проверки связи завершилась неудачно, IP-адрес доступен.  
  
## <a name="Sec2"></a>Шаг 2. Настройка параметров InfiniBand сетевого адаптера на сервере клиента  

### <a name="notes"></a>Примечания  
  
-   Ниже показано, как зарегистрировать сервер в APS DNS-серверы.  
  
-   Для удовлетворения потребностей сети, можно также объединить клиент-сервер не является специализированным рабочей группы или домена Windows.  
  
-   На этапе инструкции по настройке два сетевых адаптера на каждом сервере.  Если у вас только один сетевой адаптер, выберите одну из сетей, чтобы настроить в сетевом адаптере, а затем добавьте второй IP-адрес DNS-адрес как альтернативный DNS-сервер.  
  
### <a name="to-configure-the-infiniband-network-adapter-settings-on-your-client-server"></a>Чтобы настроить параметры сетевого адаптера InfiniBand на сервере клиента  
  
1.  Войдите от имени администратора Windows на вашей загрузки, резервного копирования или другой клиент-сервер на устройстве сети InfiniBand.  
  
2.  Откройте панель управления *, выберите центр управления сетями и выберите Изменение параметров адаптера.  
  
### <a name="to-configure-the-first-network-adapter"></a>Чтобы настроить первый сетевой адаптер  
  
1.  В окне «Сетевые подключения» щелкните правой кнопкой мыши на одном из слотов Неопознанная сеть для адаптера Mellanox и выберите свойства.  
  
    ![Выберите сети InfiniBand](media/network-connections.png "выберите сети InfiniBand")  
  
2.  В окне «Свойства»  
  
    1.  На вкладке «Общие» задайте IP-адрес в IP-адрес, вы убедились, как свободную теста проверки связи для TeamIB1. Пример значений, используемых в этой статье можно ввести 172.16.14.254.  
  
    2.  Значение маски подсети маску подсети, записанные для TeamIB1.  
  
    3.  Задайте основной DNS-сервер для IP-адрес TeamIB1, который вы записали ранее из appliance_domain *-AD01 узла.  
  
    4.  Задать альтернативный DNS-сервер для IP-адрес TeamIB1, который вы записали ранее из appliance_domain *-AD02 узла.  
  
        ![Свойства адаптера InfiniBand 1 сеть](media/network-ib1-properties.png "SQL_Server_PDW_Network_IB1_properties")  
  
    5.  Нажмите кнопку ОК, чтобы применить изменения.  
  
### <a name="to-configure-the-second-network-adapter"></a>Чтобы настроить второй сетевой адаптер  
  
1.  Этот раздел можно пропустите, если имеется только один сетевой адаптер.  
  
2.  В окне «Сетевые подключения» щелкните правой кнопкой мыши на второй слот Неопознанная сеть для адаптера Mellanox и выберите свойства.  
  
    ![Выберите сети InfiniBand](media/network-connections.png "выберите сети InfiniBand")  
  
3.  В окне «Свойства»  
  
    1.  На вкладке «Общие» задайте IP-адрес в IP-адрес, вы убедились, как свободную теста проверки связи для TeamIB2. Пример значений, используемых в этой статье можно ввести 172.16.18.254.  
  
    2.  Значение маски подсети маску подсети, записанные для TeamIB2.  
  
    3.  Задайте основной DNS-сервер для IP-адрес TeamIB2, который вы записали ранее из appliance_domain *-AD01 узла.  
  
    4.  Задать альтернативный DNS-сервер для IP-адрес TeamIB2, который вы записали ранее из appliance_domain *-AD02 узла.  
  
        > [!NOTE]  
        > Если у вас только один сетевой адаптер, настроить основной и Альтернативный DNS-серверы, помощью устройство AD01 TeamIB1 и устройство AD02 TeamIB1 соответственно как основной и Альтернативный DNS-серверы или использовать модуль AD01 TeamIB2 и устройство AD02 TeamIB2 как основной и Альтернативный DNS-серверы в зависимости от того, если отработка отказа виртуальной машины AD.  
  
        ![Свойства адаптера InfiniBand 1 сеть](media/network-ib1-properties.png "свойства адаптера InfiniBand 1 сеть")  
  
    5.  Нажмите кнопку ОК, чтобы применить изменения.  
  
### <a name="to-configure-the-dns-suffix"></a>Чтобы настроить DNS-суффикс  
  
1.  В окне «Сетевые подключения» щелкните правой кнопкой мыши на одном из слотов сетевого адаптера Mellanox и выберите свойства.  
  
2.  Нажмите кнопку Дополнительно ….  
  
3.  В окне Дополнительные параметры TCP/IP, если добавления DNS-суффиксов (по порядку) этот параметр не неактивна, флажок, поле называется Дописывать следующие суффиксы DNS (в порядке): выберите суффикс домена устройство и щелкните "Добавить"... Суффикс домена устройства `appliance_domain.local`  
  
4.  Если Дописывать следующие DNS-суффиксы (по порядку): параметр выделен серым, вы можете добавить домен APS с этим сервером, изменив ключ реестра HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\DNSClient.  
  
    ![Параметры TCP/IP](media/network-tcpip.png "параметры TCP/IP")  
  
5.  Для разрешения адресов быстрее мы рекомендуем перемещение суффикс устройство в верхней части списка.  
  
6.  Нажмите кнопку «ОК».  
  
7.  Теперь, подключаются к сети Infiniband устройства с помощью `PDW_region-SQLCTL01.appliance_domain.local`, или просто `appliance_domain-SQLCTL01`. Соединение может быть установлен быстрее, если подключение выполняется с полным именем и DNS-суффикс.  
  
    Примеры для устройства с именем MyAPS с регионом MyPDW PDW:  
  
    -   MyPDW-SQLCTL01.MyAPS.local  
  
    -   MyPDW-SQLCTL01  
  
## <a name="see-also"></a>См. также  
[Приобретение и настройка сервера для загрузки](acquire-and-configure-loading-server.md)  
  
