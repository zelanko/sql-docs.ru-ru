---
description: Правила преобразования
title: Правила для преобразований | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- numeric data type [ODBC], literals
- conversions with numeric literals [ODBC]
- numeric literals [ODBC]
- literals [ODBC], numeric
ms.assetid: 89f846a3-001d-496a-9843-ac9c38dc1762
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: 8e3d9a931a960ce1bd404b6616b4a6e4f0d37c4a
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "88424956"
---
# <a name="rules-for-conversions"></a>Правила преобразования
Правила в этом разделе применяются для преобразований, включающих числовые литералы. В целях этих правил определены следующие термины.  
  
-   *Назначение хранилища:* При отправке данных в столбец таблицы в базе данных. Это происходит во время вызовов **SQLExecute**, **SQLExecDirect**и **SQLSetPos**. Во время назначения хранилища "цель" относится к столбцу базы данных, а "источник" — к данным в буферах приложений.  
  
-   *Назначение извлечения:* При извлечении данных из базы данных в буферы приложений. Это происходит во время вызовов **SQLFetch**, **SQLGetData**, **SQLFetchScroll**и **SQLSetPos**. Во время извлечения значение "цель" относится к буферам приложений, а "источник" — к столбцу базы данных.  
  
-   *CS:* Значение в источнике символов.  
  
-   *NT:* Значение в числовом целевом объекте.  
  
-   *Ns:* Значение в числовом источнике.  
  
-   *CT:* Значение в символьном объекте.  
  
-   Точность точного числового литерала: количество содержащихся в нем разрядов.  
  
-   Масштаб точного числового литерала: количество цифр справа от выраженного или подразумеваемого периода.  
  
-   Точность приблизительного числового литерала: точность его мантиссаа.  
  
## <a name="character-source-to-numeric-target"></a>Символьный источник в числовой целевой объект  
 Ниже приведены правила преобразования источника символов (CS) в числовой целевой объект (NT).  
  
1.  Замените CS значением, полученным путем удаления всех начальных и конечных пробелов в CS. Если параметр CS не является допустимым *числовым литералом*, то возвращается значение SQLSTATE 22018 (недопустимое символ для спецификации приведения).  
  
2.  Замените CS значением, полученным путем удаления начальных нулей перед десятичной запятой, замыкающих нулей после десятичной запятой или и того и другого.  
  
3.  Преобразуйте CS в NT. Если преобразование приводит к утере значащих цифр, то возвращается значение SQLSTATE 22003 (числовое значения за пределами диапазона). Если преобразование приводит к утере незначащих цифр, возвращается значение SQLSTATE 01S07 (усечение дробной части).  
  
## <a name="numeric-source-to-character-target"></a>Числовой источник для символьного назначения  
 Ниже приведены правила преобразования из числового источника (NS) в символьный объект (CT):  
  
1.  В параметре LT должно быть выбрано значение длины в символах CT. Для присваивания извлечения значение LT равно длине буфера в символах минус число байтов в символе завершения null для данной кодировки.  
  
2.  Случаях  
  
    -   Если NS является точным числовым типом, то Let ИП равно самой короткой символьной строке, которая соответствует определению *точных числовых литералов* , таким образом, что масштаб ИП совпадает с масштабом NS, а интерпретируемое значение ИП — абсолютное значение NS.  
  
    -   Если тип NS является приблизительным числовым типом, позвольте ИП быть символьной строкой следующим образом:  
  
         Регистр:  
  
         Если значение NS равно 0, то ИП имеет значение 0.  
  
         Пусть ИСН является самой короткой строкой символов, которая соответствует определению точных*числовых литералов* , а интерпретированное значение является абсолютным значением NS. Если длина ИСН меньше, чем (*точность* + 1) типа данных NS, то Let ИП равно ИСН.  
  
         В противном случае ИП — это Краткая строка символов, которая соответствует определению *приблизительного числового литерала* , интерпретируемое значение которого является абсолютным значением NS, а *мантисса* состоит из одной *цифры* , которая не равна 0, за которой следуют *точка* и *целое число без знака*.  
  
3.  Регистр:  
  
    -   Если значение NS меньше 0, то параметр Y должен быть результатом:  
  
         "-"  &#124;&#124; ИП  
  
         где "&#124;&#124;" является оператором объединения строк.  
  
         В противном случае позвольте Y равняться ИП.  
  
4.  Пусть LY имеет длину в символах Y.  
  
5.  Регистр:  
  
    -   Если LY равняется LT, то для CT устанавливается значение Y.  
  
    -   Если LY меньше LT, то для CT устанавливается значение Y, расширенное справа от соответствующего количества пробелов.  
  
         В противном случае (LY > LT) скопируйте первые LT символов из Y в CT.  
  
         Регистр:  
  
         Если это назначение хранилища, возвратите ошибку SQLSTATE 22001 (строковые данные, которые были усечены справа).  
  
         Если это назначение извлечения, возвращается предупреждение 01004 (строковые данные, которые были усечены справа). Когда копирование приводит к потере дробных разрядов (кроме конечных нулей), оно определяется драйвером, если происходит одно из следующих условий:  
  
         (1) драйвер усекает строку в Y до соответствующего масштаба (что может равняться нулю) и записывает результат в CT.  
  
         (2) драйвер округляет строку в Y до соответствующего масштаба (что может равняться нулю) и записывает результат в CT.  
  
         (3) драйвер не усекается и не округляет, но просто копирует первые LT символов из Y в CT.
