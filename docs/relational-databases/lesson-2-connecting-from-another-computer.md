---
title: "Занятие 2. Соединение с другого компьютера | Microsoft Docs"
ms.custom: ""
ms.date: "03/08/2016"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "database-engine"
ms.tgt_pltfrm: ""
ms.topic: "article"
applies_to: 
  - "SQL Server 2016"
ms.assetid: fd4ddeb8-0cb6-441b-9704-03575c07020f
caps.latest.revision: 22
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 22
---
# Занятие 2. Соединение с другого компьютера
В целях повышения безопасности к компоненту [!INCLUDE[ssDE](../includes/ssde-md.md)] выпусков [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Developer Edition, Express Edition и Evaluation Edition нельзя получить доступ с другого компьютера при первоначальной установке. В этом занятии показано, как включить протоколы, настроить порты и брандмауэр Windows для соединения, используя другие компьютеры.  
  
Это занятие содержит следующие задачи.  
  
-   [Включение протоколов](#protocols)  
  
-   [Настройка фиксированного порта](#port)  
  
-   [Открытие портов в брандмауэре](#firewall)  
  
-   [Соединение с компонентом Database Engine с другого компьютера](#otherComp)  
  
-   [Соединение с помощью службы обозревателя SQL Server](#browser)  
  
## <a name="protocols"></a>Включение протоколов  
Для повышения безопасности выпуски [!INCLUDE[ssExpress](../includes/ssexpress-md.md)]Developer и Evaluation устанавливаются с ограниченными возможностями подключения к сети. Соединяться с компонентом [!INCLUDE[ssDE](../includes/ssde-md.md)] можно с помощью средств, которые выполняются на том же компьютере, но не с других компьютеров. Если разработка будет выполняться на том же компьютере, где установлен компонент [!INCLUDE[ssDE](../includes/ssde-md.md)], то дополнительные протоколы включать не нужно. [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] подключится к компоненту [!INCLUDE[ssDE](../includes/ssde-md.md)] с помощью протокола общей памяти. Этот протокол уже включен.  
  
Если нужно соединяться с компонентом [!INCLUDE[ssDE](../includes/ssde-md.md)] с другого компьютера, следует включить какой-либо другой протокол, например TCP/IP.  
  
#### Разрешение соединений по протоколу TCP/IP с других компьютеров  
  
1.  В меню **Пуск** последовательно укажите пункты **Все программы**, [!INCLUDE[ssCurrentUI](../includes/sscurrentui-md.md)], **Средства настройки**и выберите пункт **Диспетчер конфигурации SQL Server**.  
  
    > [!NOTE]  
    > Могут быть доступны и 32-разрядные и 64-разрядные версии.  
  
    > [!NOTE]  
    > Поскольку диспетчер конфигурации [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] является оснасткой консоли управления ([!INCLUDE[msCoName](../includes/msconame-md.md)]), а не изолированной программой, при работе в более новых версиях Windows диспетчер конфигурации [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] не отображается как приложение. Имя файла содержит число, представляющее номер версии [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]. Чтобы открыть диспетчер конфигурации с помощью команды "Выполнить", воспользуйтесь одним из приведенных ниже путей для последних четырех версий (предполагается, что система Windows установлена на диске C).  
  
    |||  
    |-|-|  
    |[!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2016|C:\Windows\SysWOW64\SQLServerManager13.msc|  
    |[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]|C:\Windows\SysWOW64\SQLServerManager12.msc|  
    |[!INCLUDE[ssSQL11](../includes/sssql11-md.md)]|C:\Windows\SysWOW64\SQLServerManager11.msc|  
    |[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)]|C:\Windows\SysWOW64\SQLServerManager10.msc|  
  
2.  В **диспетчере конфигурации SQL Server** разверните раздел **Сетевая конфигурация SQL Server** и щелкните элемент **Протоколы для** *<InstanceName>*.  
  
    Экземпляр по умолчанию (неименованный экземпляр) указан в списке под именем **MSSQLSERVER**. Если был установлен именованный экземпляр, то в списке будет приведено заданное ему имя. [!INCLUDE[ssExpressEd11](../includes/ssexpressed11-md.md)] устанавливается как **SQLEXPRESS**, если это имя не было изменено при установке.  
  
3.  В списке протоколов щелкните правой кнопкой мыши протокол, который необходимо включить (**TCP/IP**), и выберите команду **Включить**.  
  
    > [!NOTE]  
    > После внесения изменений в сетевые протоколы необходимо перезапустить службу [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]; однако это выполняется в следующей задаче.  
  
## <a name="port"></a>Настройка фиксированного порта  
В целях повышения безопасности в таких системах, как Windows Server 2008, [!INCLUDE[wiprlhlong](../includes/wiprlhlong-md.md)]и Windows 7, включен брандмауэр Windows. При подключении к этому экземпляру из другого компьютера необходимо открыть порт соединения в брандмауэре. Экземпляр компонента [!INCLUDE[ssDE](../includes/ssde-md.md)] , запускаемый по умолчанию, прослушивает порт 1433, поэтому нет необходимости настраивать фиксированный порт. Однако именованные экземпляры, включая [!INCLUDE[ssExpress](../includes/ssexpress-md.md)] , принимают соединения через динамически назначаемые порты. Прежде чем появится возможность открыть порт в брандмауэре, необходимо предварительно настроить компонент [!INCLUDE[ssDE](../includes/ssde-md.md)] для прослушивания конкретного порта, известного как постоянный порт или статический порт; в противном случае компонент [!INCLUDE[ssDE](../includes/ssde-md.md)] может прослушивать другой порт после каждого запуска. Дополнительные сведения о брандмауэрах, настройках брандмауэра Windows по умолчанию и описание портов TCP, влияющих на ядро СУБД, службы Analysis Services, службы Reporting Services и службы Integration Services, см. в разделе [Настройка брандмауэра Windows для разрешения доступа к SQL Server](../sql-server/install/configure-the-windows-firewall-to-allow-sql-server-access.md).  
  
> [!NOTE]  
> Присваиванием номеров портов управляет Комитет по цифровым адресам в Интернете, а списки этих номеров находятся по адресу [http://www.iana.org](http://go.microsoft.com/fwlink/?LinkId=48844). Портам должны назначаться номера от 49152 до 65535.  
  
#### Настройка SQL Server для подключения через определенный порт  
  
1.  В диспетчере конфигурации [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] раскройте узел **Сетевая конфигурация SQL Server**и щелкните экземпляр сервера, который надо настроить.  
  
2.  На правой панели дважды щелкните **TCP/IP**.  
  
3.  В диалоговом окне **Свойства TCP/IP** перейдите на вкладку **IP-адреса**.  
  
4.  Введите доступный номер порта в поле **TCP-порт** раздела **IPAll** . В данном учебнике используется порт **49172**.  
  
5.  Нажмите кнопку **ОК** , чтобы закрыть диалоговое окно, и кнопку **ОК** в предупреждении о необходимости перезагрузки службы.  
  
6.  На левой панели щелкните **Службы SQL Server**.  
  
7.  На правой панели щелкните экземпляр [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] правой кнопкой мыши и выберите пункт **Перезапустить**. После перезапуска компонент [!INCLUDE[ssDE](../includes/ssde-md.md)] будет принимать соединения через порт **49172**.  
  
## <a name="firewall"></a>Открытие портов в брандмауэре  
Системы брандмауэров предотвращают несанкционированный доступ к ресурсам компьютера. Для подключения к [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] с другого компьютера при включенном брандмауэре в брандмауэре необходимо открыть порт.  
  
> [!IMPORTANT]  
> Открытие портов на брандмауэре может привести к незащищенности сервера от вредоносных атак. Поэтому для открытия портов требуется понимание работы систем брандмауэров. Дополнительные сведения см. в разделе [Security Considerations for a SQL Server Installation](../sql-server/install/security-considerations-for-a-sql-server-installation.md).  
  
После настройки компонента [!INCLUDE[ssDE](../includes/ssde-md.md)] на использование фиксированного порта следуйте приведенным ниже инструкциям, чтобы открыть в брандмауэре Windows нужный порт. (Нет необходимости настраивать фиксированный порт для экземпляра по умолчанию, потому что он уже настроен на подключение к TCP-порту 1433.)  
  
#### Открытие порта в брандмауэре Windows для доступа по TCP (Windows 7)  
  
1.  В меню **Пуск** выберите команду **Выполнить**, введите **WF.msc**и нажмите кнопку **ОК**.  
  
2.  На левой панели **Брандмауэр Windows в режиме повышенной безопасности** щелкните правой кнопкой мыши раздел **Правила для входящих подключений** и выберите на панели действий пункт **Создать правило**.  
  
3.  В диалоговом окне **Тип правила** выберите **Порт**и нажмите кнопку **Далее**.  
  
4.  В диалоговом окне **Протокол и порты** выберите протокол **TCP**. Выберите **Определенные локальные порты**и введите номер порта экземпляра компонента [!INCLUDE[ssDE](../includes/ssde-md.md)]. Для экземпляра по умолчанию введите 1433. Если в предыдущей задаче был настроен фиксированный порт, а сейчас настраивается именованный экземпляр, введите **49172** . Нажмите кнопку **Далее**.  
  
5.  В диалоговом окне **Действие** выберите **Разрешить соединение**и нажмите кнопку **Далее**.  
  
6.  В диалоговом окне **Профиль** выберите профили, описывающие среду соединения компьютеров, который нужно подключить к компоненту [!INCLUDE[ssDE](../includes/ssde-md.md)], и нажмите кнопку **Далее**.  
  
7.  В диалоговом окне **Имя** введите имя и описание для этого правила, а затем нажмите кнопку **Готово**.  
  
Дополнительные сведения о настройке брандмауэра, включая инструкции для [!INCLUDE[wiprlhlong](../includes/wiprlhlong-md.md)], см. в разделе [Настройка брандмауэра Windows для доступа к компоненту Database Engine](../database-engine/configure-windows/configure-a-windows-firewall-for-database-engine-access.md). Дополнительные сведения о настройках брандмауэра Windows по умолчанию и описание портов TCP, влияющих на компонент Database Engine, службы Analysis Services, службы Reporting Services и службы Integration Services, см. в разделе [Настройка брандмауэра Windows для разрешения доступа к SQL Server](../sql-server/install/configure-the-windows-firewall-to-allow-sql-server-access.md).  
  
## <a name="otherComp"></a>Соединение с компонентом Database Engine с другого компьютера  
После настройки компонента [!INCLUDE[ssDE](../includes/ssde-md.md)] на прослушивание определенного порта и открытия порта в брандмауэре можно подключиться к [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] с другого компьютера.  
  
Если служба браузера [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] на сервере запущена и в брандмауэре открыт порт UDP 1434, то подключение можно установить, используя имя компьютера и имя экземпляра. В целях повышения безопасности в нашем примере не используется служба браузера [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .  
  
#### Соединение с ядром СУБД с другого компьютера  
  
1.  На втором компьютере, содержащем клиентские средства [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , войдите под учетной записью, для которой разрешено подключение к [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], и откройте среду [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)].  
  
2.  В диалоговом окне **Соединение с сервером** выберите **Компонент Database Engine** в списке **Тип сервера** .  
  
3.  В поле **Имя сервера** введите **tcp:** , чтобы указать протокол, за которым должны следовать имя компьютера, запятая и номер порта. При подключении к экземпляру по умолчанию подразумевается номер порта 1433. Этот номер можно опустить, поэтому введите **tcp:***\<имя_компьютера>*. В этом примере для именованного экземпляра введите **tcp:***\<имя_компьютера>***,49172**.  
  
    > [!NOTE]  
    > Если не указать **tcp:** в поле **Имя сервера**, то клиент попытается использовать все включенные протоколы в порядке, указанном в конфигурации клиента.  
  
4.  В поле **Проверка подлинности** подтвердите значение **Проверка подлинности Window**, а затем нажмите **Подключиться**.  
  
## <a name="browser"></a>Соединение с помощью службы обозревателя SQL Server  
Служба браузера [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] прослушивает входящие запросы на ресурсы [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] и предоставляет сведения об экземплярах [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , установленных на компьютере. Когда служба браузера [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] запущена, пользователи могут подключаться к именованным экземплярам, указывая имя компьютера и имя экземпляра вместо номера порта. Поскольку служба браузера [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] принимает UDP-запросы без проверки подлинности, во время установки она включается не всегда. Описание службы и объяснение того, когда она включается, см. в разделе [Служба обозревателя SQL Server (компонент Database Engine и SSAS)](../database-engine/configure-windows/sql-server-browser-service-database-engine-and-ssas.md).  
  
Чтобы использовать браузер [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , выполните те же шаги, что и ранее, чтобы открыть UDP-порт 1434 в брандмауэре.  
  
На этом краткий учебник по базовым возможностям подключения связи заканчивается.  
  
## Возвращение к порталу учебников  
[Учебник. Приступая к работе с компонентом Database Engine](../relational-databases/tutorial-getting-started-with-the-database-engine.md)  
  
