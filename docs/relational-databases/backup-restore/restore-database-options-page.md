---
title: Восстановление базы данных (страница "Параметры") | Документация Майкрософт
description: При восстановлении базы данных в SQL Server страница "Параметры" диалогового окна "Восстановление базы данных" используется для изменения поведения и результата операции восстановления.
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: backup-restore
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql13.swb.restoredb.options.f1
ms.assetid: 9a75d48b-c25f-40f3-8ea1-32cfa8211754
author: cawrites
ms.author: chadam
ms.openlocfilehash: 244b815a0e670cd0e697c037c62d66cc78159d81
ms.sourcegitcommit: 5a1ed81749800c33059dac91b0e18bd8bb3081b1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2020
ms.locfileid: "96129103"
---
# <a name="restore-database-options-page"></a>Восстановление базы данных (страница «Параметры»)
 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]
  Страница **Параметры** диалогового окна **Восстановление базы данных** используется для изменения поведения и результата операции восстановления.  
  
 **Восстановление резервной копии базы данных с помощью среды SQL Server Management Studio**  
  
-   [RESTORE (Transact-SQL)](../../t-sql/statements/restore-statements-transact-sql.md)  
  
-   [Определение логического устройства резервного копирования для ленточного накопителя (SQL Server)](../../relational-databases/backup-restore/define-a-logical-backup-device-for-a-tape-drive-sql-server.md)  
  
> [!NOTE]  
>  При указании задачи восстановления с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]можно создать соответствующий скрипт на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] , содержащий инструкции RESTORE для этой задачи восстановления. Для создания скрипта нажмите кнопку **Скрипт** и выберите для него назначение. Дополнительные сведения о синтаксисе инструкции RESTORE см. в разделе [RESTORE (Transact-SQL)](../../t-sql/statements/restore-statements-transact-sql.md).  
  
## <a name="options"></a>Параметры  
  
### <a name="restore-options"></a>Параметры восстановления  
 Для изменения поведения операции восстановления используются параметры панели **Параметры восстановления** .  
  
 **Перезаписать существующую базу данных [WITH REPLACE]**  
 Указывает, что операция восстановления перезапишет файлы любой базы данных, в настоящее время использующей имя, которое указано в поле **Восстановить в** на странице [Общие](../../relational-databases/backup-restore/restore-database-general-page.md) диалогового окна **Восстановление базы данных** . Файлы существующей базы данных будут перезаписаны, даже если восстанавливается резервная копия из другой базы данных в существующую базу данных. Выбор этого параметра равнозначен использованию параметра REPLACE инструкции [RESTORE](../../t-sql/statements/restore-statements-arguments-transact-sql.md) ([!INCLUDE[tsql](../../includes/tsql-md.md)]).  
  
> [!CAUTION]  
>  Данный параметр рекомендуется использовать только после тщательного анализа последствий. Дополнительные сведения см. в разделе [Аргументы инструкции RESTORE (Transact-SQL)](../../t-sql/statements/restore-statements-arguments-transact-sql.md).  
  
 **Сохранить параметры репликации [WITH KEEP_REPLICATION]**  
 Сохраняет настройки репликации при восстановлении опубликованной базы данных на сервере, отличном от сервера, на котором была создана база данных. Этот параметр имеет значение, только если во время создания резервной копии проводилась репликация базы данных.  
  
 Этот параметр доступен только с параметром **Оставить базу данных готовой к использованию, выполнив откат незавершенных транзакций** (описанным ниже в данной таблице), который эквивалентен восстановлению резервной копии с помощью параметра RECOVERY.  
  
 Выбор этого параметра равнозначен использованию параметра KEEP_REPLICATION в инструкции [RESTORE](../../t-sql/statements/restore-statements-transact-sql.md) .  
  
 Дополнительные сведения см. в разделе [Резервное копирование и восстановление реплицируемых баз данных](../../relational-databases/replication/administration/back-up-and-restore-replicated-databases.md).  
  
 **Ограничить доступ к восстановленной базе данных [WITH RESTRICTED_USER]**  
 Доступ к восстановленной базе данных будет только у пользователей **db_owner**, **dbcreator** или **sysadmin**.  
  
 Выбор этой функции равнозначен использованию параметра RESTRICTED_USER инструкции RESTORE.  
  
### <a name="recovery-state"></a>Состояние восстановления  
 Чтобы определить состояние базы данных после операции восстановления, необходимо выбрать один из параметров на панели **Состояние восстановления** .  
  
 **RESTORE WITH RECOVERY**  
 Восстанавливает базу данных после восстановления последней резервной копии, отмеченной в сетке **Восстанавливаемые резервные наборы данных** на странице [Общие](../../relational-databases/backup-restore/restore-database-general-page.md). Этот параметр применяется по умолчанию и равнозначен указанию предложения WITH RECOVERY в инструкции [RESTORE](../../t-sql/statements/restore-statements-arguments-transact-sql.md) ([!INCLUDE[tsql](../../includes/tsql-md.md)]).  
  
> [!NOTE]  
>  В модели полного восстановления и модели восстановления с неполным протоколированием этот параметр нужно выбирать только при немедленном восстановлении из копии всех файлов журнала.  
  
 **RESTORE WITH NORECOVERY**  
 Оставляет базу данных в состоянии восстановления. Это позволяет восстановить дополнительные резервные копии в текущем пути восстановления. Чтобы восстановить базу данных, необходимо выполнить операцию восстановления с параметром RESTORE WITH RECOVERY (см. предыдущий параметр).  
  
 Этот параметр равнозначен указанию предложения WITH NORECOVERY в инструкции RESTORE.  
  
 Если выбран этот параметр, то параметр **Сохранить настройки репликации** недоступен.  
  
 **RESTORE WITH STANDBY**  
 Оставляет базу данных в состоянии резерва, в котором база данных доступна в ограниченном режиме только для чтения. Этот параметр равнозначен указанию предложения WITH STANDBY в инструкции RESTORE.  
  
 При выборе этого параметра необходимо указать имя резервного файла в текстовом поле **Резервный файл** . Резервный файл позволяет отменить результаты восстановления.  
  
 **Резервный файл**  
 Указывает резервный файл. Резервный файл можно выбрать или ввести полный путь к нему непосредственно в текстовое поле.  
  
### <a name="tail-log-backup"></a>Резервная копия заключительного фрагмента журнала  
 Позволяет задать создание резервной копии заключительного фрагмента журнала вместе с восстановлением базы данных.  
  
 **Создание резервной копии заключительного фрагмента журнала перед восстановлением**  
 Установите этот флажок, чтобы задать создание резервной копии заключительного фрагмента журнала.  
  
> [!NOTE]  
>  Если для точки во времени, выбранной в диалоговом окне [Временная шкала резервного копирования](../../relational-databases/backup-restore/backup-timeline.md) требуется резервная копия заключительного фрагмента журнала, этот флажок будет установлен и снять его будет нельзя.  
  
 **Файл резервной копии**  
 Указывает файл резервной копии для заключительного фрагмента журнала. Файл резервной копии можно выбрать, либо ввести его имя непосредственно в текстовое поле.  
  
### <a name="server-connections"></a>Подключения к серверу  
 Позволяет закрыть существующие подключения к базам данных.  
  
 **Закрыть существующие соединения**  
 Если имеются активные соединения с базой данных, то операция восстановления может завершиться ошибкой. Проверьте окно **Закрыть существующие соединения** и убедитесь, что все активные соединения между [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] и базой данных закрыты. Этот параметр переводит базу данных в однопользовательский режим перед началом выполнения процедуры восстановления, а затем возвращает в многопользовательский режим после ее завершения.  
  
### <a name="prompt"></a>prompt  
 **Выдавать приглашение перед восстановлением каждой резервной копии**  
 Указывает, что после восстановления каждой резервной копии будет выводиться диалоговое окно **Продолжение восстановления** с вопросом, нужно ли продолжать последовательность восстановления. В этом окне отображается имя следующего набора носителей (если оно известно), имя следующего резервного набора данных и его описание.  
  
 Этот параметр позволяет приостанавливать последовательность восстановления после восстановления каждой резервной копии. Он особенно полезен, когда нужно поменять ленты в устройстве, например если на сервере имеется только одно ленточное устройство. Если все готово для продолжения, нажмите кнопку **ОК**.  
  
 Можно прервать последовательность восстановления, нажав кнопку **Нет**. При этом база данных остается в состоянии восстановления из копии. При желании позже можно продолжить последовательность восстановления, начав с последней резервной копии, отображенной в диалоговом окне **Продолжение восстановления** . Процедура восстановления зависит от того, содержит ли следующая резервная копия данные или журнал транзакций.  
  
-   Если очередная резервная копия представляет собой полную или разностную резервную копию, следует вновь использовать задачу **Восстановление базы данных** .  
  
-   Если очередная резервная копия является резервной копией файлов, используйте задачу **Восстановление файлов и файловых групп**. Дополнительные сведения см. в статье [Восстановление файлов и файловых групп (SQL Server)](../../relational-databases/backup-restore/restore-files-and-filegroups-sql-server.md).  
  
-   Если очередная резервная копия представляет собой резервную копию журнала, следует использовать задачу **Восстановление журнала транзакций** . Сведения о возобновлении последовательности восстановления из копии с журнала транзакций см. в разделе [Восстановление резервной копии журнала транзакций (SQL Server)](../../relational-databases/backup-restore/restore-a-transaction-log-backup-sql-server.md).  
  
## <a name="see-also"></a>См. также:  
 [RESTORE (Transact-SQL)](../../t-sql/statements/restore-statements-transact-sql.md)   
 [Восстановление резервной копии с устройства (SQL Server)](../../relational-databases/backup-restore/restore-a-backup-from-a-device-sql-server.md)   
 [Восстановление резервной копии журнала транзакций (SQL Server)](../../relational-databases/backup-restore/restore-a-transaction-log-backup-sql-server.md)   
 [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](../../relational-databases/backup-restore/media-sets-media-families-and-backup-sets-sql-server.md)   
 [Применение резервных копий журналов транзакций (SQL Server)](../../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md)   
 [Восстановление базы данных (страница "Общие")](../../relational-databases/backup-restore/restore-database-general-page.md)  
  
  
