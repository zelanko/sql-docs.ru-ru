---
title: Создание полной резервной копии базы данных (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql
ms.prod_service: backup-restore
ms.reviewer: ''
ms.suite: sql
ms.technology: backup-restore
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- backing up databases [SQL Server], full backups
- backing up databases [SQL Server], SQL Server Management Studio
- backups [SQL Server], creating
- database backups [SQL Server], SQL Server Management Studio
ms.assetid: 586561fc-dfbb-4842-84f8-204a9100a534
caps.latest.revision: 63
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: 9a9f8f115dd24f27f1c140677775ba9e29dd7468
ms.sourcegitcommit: c7a98ef59b3bc46245b8c3f5643fad85a082debe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2018
ms.locfileid: "38982896"
---
# <a name="create-a-full-database-backup-sql-server"></a>Создание полной резервной копии базы данных (SQL Server)
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
 > При использовании SQL Server 2014 перейдите к разделу [Создание полной резервной копии базы данных (SQL Server)](https://msdn.microsoft.com/library/ms187510(SQL.120).aspx).

  В этом разделе описывается создание полной резервной копии базы данных в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]или PowerShell.  
  
>  Сведения о резервном копировании SQL Server в службу хранилища BLOB-объектов Azure см. в разделах [Резервное копирование и восстановление SQL Server с помощью службы хранилища BLOB-объектов Microsoft Azure](../../relational-databases/backup-restore/sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) и [Резервное копирование SQL Server по URL-адресу](../../relational-databases/backup-restore/sql-server-backup-to-url.md).  
  
##  <a name="BeforeYouBegin"></a> Перед началом! 
  
###  <a name="Restrictions"></a> Ограничения  
  
-   Инструкция BACKUP не разрешена в явных и неявных транзакциях.  
  
-   Резервные копии, созданные более поздними версиями [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , не могут быть восстановлены в более ранних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
-   Чтобы получить обзорные и более подробные сведения о понятиях и задачах, связанных с резервным копированием, перед началом работы изучите раздел [Общие сведения о резервном копировании (SQL Server)](../../relational-databases/backup-restore/backup-overview-sql-server.md) .  
  
###  <a name="Recommendations"></a> Рекомендации  
  
-   По мере увеличения размера базы данных полное резервное копирование занимает больше времени и требует больше дискового пространства. Для больших баз данных может потребоваться, кроме полных резервных копий, создавать также и [разностные резервные копии баз данных](../../relational-databases/backup-restore/differential-backups-sql-server.md). Дополнительные сведения см. в разделе [SQL Server Backup to URL](../../relational-databases/backup-restore/sql-server-backup-to-url.md).  
  
-   Размер полной резервной копии базы данных вы можете вычислить с помощью системной хранимой процедуры [sp_spaceused](../../relational-databases/system-stored-procedures/sp-spaceused-transact-sql.md) .  
  
-   По умолчанию каждая успешная операция резервного копирования добавляет запись в журнал ошибок служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и в журнал системных событий. Если резервное копирование выполняется часто, сообщения об успешном завершении операций накапливаются быстро, что приводит к стремительному увеличению журналов ошибок! Это может осложнить поиск других сообщений. Если работа существующих скриптов не зависит от записей журнала резервного копирования, то их можно отключить с помощью флага трассировки 3226. Дополнительные сведения см. в разделе [Флаги трассировки (Transact-SQL)](../../t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql.md).  
  
###  <a name="Security"></a> безопасность  
 Для резервной копии базы данных свойству TRUSTWORTHY присваивается значение OFF. Дополнительные сведения о том, как задать для параметра TRUSTWORTHY значение ON, см. в разделе [Параметры ALTER DATABASE SET (Transact-SQL)](../../t-sql/statements/alter-database-transact-sql-set-options.md).  
  
 Начиная с [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] , параметры **PASSWORD** и **MEDIAPASSWORD** не поддерживаются при создании резервных копий. Все еще вы можете восстанавливать резервные копии, созданные с паролями.  
  
####  <a name="Permissions"></a> Permissions  
 Разрешения BACKUP DATABASE и BACKUP LOG назначены по умолчанию членам предопределенной роли сервера **sysadmin** и предопределенным ролям базы данных **db_owner** и **db_backupoperator** .  
  
 Проблемы, связанные с владельцем и разрешениями у физических файлов на устройстве резервного копирования, могут помешать операции резервного копирования. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен иметь возможность считывать и записывать данные на устройстве; учетная запись, от имени которой выполняется служба [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , **должна** иметь разрешения на запись. Однако процедура [sp_addumpdevice](../../relational-databases/system-stored-procedures/sp-addumpdevice-transact-sql.md), добавляющая запись для устройства резервного копирования в системные таблицы, не проверяет разрешения на доступ к файлу. Проблемы физического файла устройства резервного копирования могут не проявляться до момента доступа к физическому ресурсу во время операции резервного копирования или восстановления.  
  
##  <a name="SSMSProcedure"></a> Использование среды SQL Server Management Studio  
  
>  При создании задания резервного копирования с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]вы можете сформировать соответствующий скрипт [!INCLUDE[tsql](../../includes/tsql-md.md)] [BACKUP](../../t-sql/statements/backup-transact-sql.md) , нажав кнопку **Скрипт** и выбрав назначение скрипта.  
  
### <a name="back-up-a-database"></a>Резервное копирование базы данных  
  
1.  После подключения к соответствующему экземпляру [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] **в обозревателе объектов**разверните дерево сервера, щелкнув его имя.  
  
2.  Разверните узел **Базы данных**и выберите пользовательскую базу данных или разверните узел **Системные базы данных** и выберите системную базу данных.  
  
3.  Щелкните правой кнопкой мыши базу данных, выберите пункт **Задачи**, а затем команду **Создать резервную копию**. Откроется диалоговое окно **Резервное копирование базы данных** .  

  #### <a name="general-page"></a>**Страница «Общие»**
  
4.  В раскрывающемся списке **База данных** проверьте имя базы данных. При необходимости можно выбрать другую базу данных из списка.  
  
5.  Текстовое поле **Модель восстановления** предназначено только для справки.  Резервное копирование базы данных можно выполнять для любой модели восстановления (**FULL**, **BULK_LOGGED**или **SIMPLE**).  
  
6.  В раскрывающемся списке **Тип резервной копии** выберите **Полный**.  
  
     Обратите внимание на то, что при создании полной резервной копии базы данных можно создавать разностные резервные копии; дополнительные сведения см. в разделе [Создание разностной резервной копии базы данных (SQL Server)](../../relational-databases/backup-restore/create-a-differential-database-backup-sql-server.md).  
  
7.  Также можно установить флажок **Архивная копия только для копирования** , чтобы создать резервную копию только для копирования. *Резервная копия только для копирования* — это резервная копия [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], которая не зависит от обычной последовательности создания традиционных резервных копий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Дополнительные сведения см. в разделе [Резервные копии только для копирования (SQL Server)](../../relational-databases/backup-restore/copy-only-backups-sql-server.md).  Резервная копия только для копирования недоступна для типа резервной копии **Разностная**.  

8.  Для параметра **Компонент резервного копирования**выберите переключатель **База данных** .  
  
9. В разделе **Назначения** воспользуйтесь раскрывающимся списком **Создать резервную копию на** для выбора назначения резервного копирования. Нажмите кнопку **Добавить** , чтобы добавить дополнительные назначения и/или объекты резервного копирования.
  
     Чтобы удалить носитель резервной копии, выберите его и нажмите кнопку **Удалить**. Чтобы просмотреть содержимое существующего назначения резервного копирования, выберите его и щелкните **Содержимое**.  

  #### <a name="media-options-page"></a>**Страница "Параметры носителя"**  
10. Для просмотра или выбора параметров носителя нажмите кнопку **Параметры носителя** на панели **Выбор страницы** .   
    
11. Выберите параметр **Переписать носитель** , указав один из следующих вариантов: 

    > [!IMPORTANT]  
    >  Параметр **Перезапись носителя** отключается, если в качества назначения резервного копирования на странице **Общее** выбран параметр **URL-адрес**. Дополнительные сведения см. в разделе [Резервное копирование базы данных (страница "Параметры носителя")](../../relational-databases/backup-restore/back-up-database-media-options-page.md).  


  -   **Создать резервную копию в существующем наборе носителей**  
  
      > [!IMPORTANT]  
      >  Не выбирайте этот параметр, если планируете использовать шифрование. Если выбран данный вариант, параметры шифрования на странице **Параметры резервного копирования** будут отключены. При присоединении к существующему резервному набору данных шифрование не поддерживается.  
  
         Для этого параметра выберите вариант **Добавить в существующий резервный набор данных** или **Перезаписать все существующие резервные наборы данных**. Дополнительные сведения см. в разделах [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](../../relational-databases/backup-restore/media-sets-media-families-and-backup-sets-sql-server.md).  
  
         При необходимости выберите **Проверить имя набора носителей и срок действия резервного набора данных** , чтобы при выполнении операции резервного копирования производилась проверка срока действия набора носителей и резервного набора данных.  
  
         При необходимости введите имя в текстовое поле **Имя набора носителей** . Если имя не указано, создается набор носителей с пустым именем. Если имя набора носителей указано, то для носителя (ленточного или дискового) проверяется совпадение введенного и существующего имени.  
  
-   **Создать резервную копию в новом наборе носителей и удалить все существующие резервные наборы данных**  
  
    Для этого параметра введите имя в текстовом поле **Имя нового набора носителей** и при необходимости введите описание набора носителей в текстовое поле **Описание нового набора носителей** .  
  
14. В разделе **Надежность** можно также установить флажки:  
  
    -   **Проверить резервную копию после завершения**.  
  
    -   **Рассчитать контрольную сумму перед записью на носитель**.  Дополнительные сведения см. в разделе [Возможные ошибки носителей во время резервного копирования и восстановления (SQL Server)](../../relational-databases/backup-restore/possible-media-errors-during-backup-and-restore-sql-server.md).  
    
    -   **Продолжить при возникновении ошибки**. 

15. Раздел **Журнал транзакций** доступен, только если создается резервная копия журнала транзакций (это можно указать в разделе **Тип резервной копии** вкладки **Общие** ).  
      
16. При резервном копировании на накопитель на магнитной ленте (как указано в разделе **Назначение** страницы **Общие** ) в разделе **Ленточный накопитель** активен параметр **Выгрузить ленту после резервного копирования** . Щелкните этот параметр, чтобы активировать параметр **Перемотать ленту перед выгрузкой** .   

  #### <a name="backup-options-page"></a>**Страница "Параметры резервного копирования"**  

17. Для просмотра или выбора параметров резервного копирования нажмите кнопку **Параметры резервного копирования** на панели **Выбор страницы** .  
  
18. в текстовом поле **Имя** оставьте имя резервного набора данных по умолчанию или введите другое имя резервного набора данных.  
  
19. При необходимости можно ввести описание резервного набора данных в текстовом поле **Описание** .  
  
20. Укажите, когда закончится срок действия резервного набора данных и когда этот набор может быть перезаписан без явного пропуска проверки на истечение срока.  
  
    -   Чтобы задать срок действия резервного набора данных, выберите пункт **После** (параметр по умолчанию) и введите срок действия набора в днях с момента его создания. Это значение может быть задано в диапазоне от 0 до 99 999 дней. Значение 0 означает, что срок действия резервного набора данных не ограничен.  
  
         Значение по умолчанию задается в параметре **Срок хранения носителей резервных копий по умолчанию (дней):** диалогового окна **Свойства сервера** (страница "Параметры базы данных"). Чтобы получить доступ к этому параметру, щелкните правой кнопкой мыши имя сервера в обозревателе объектов и выберите пункт "Свойства", а затем выберите страницу **Настройки базы данных** .  
  
    -   Чтобы указать дату истечения срока действия резервного набора данных, выберите пункт **На**и введите дату истечения срока действия резервного набора данных.  
  
         Дополнительные сведения о дате истечения срока действия резервных копий см. в разделе [BACKUP (Transact-SQL)](../../t-sql/statements/backup-transact-sql.md).  
  
21. В разделе **Сжатие** воспользуйтесь раскрывающимся списком **Сжимать резервные копии** , чтобы выбрать нужный уровень сжатия.  [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] и более поздние версии поддерживают [сжатие резервных копий](../../relational-databases/backup-restore/backup-compression-sql-server.md). По умолчанию сжатие резервных копий зависит от значения параметра конфигурации сервера **backup-compression default** . Однако независимо от текущего значения по умолчанию на уровне сервера можно сжать резервные копии, установив параметр **Сжимать резервные копии**, или отказаться от сжатия резервных копий, установив параметр **Не сжимать резервные копии**.  
  
     Дополнительные сведения о параметрах сжатия резервных копий см. в статье [Просмотр или настройка параметра сжатия резервных копий по умолчанию в конфигурации сервера](../../database-engine/configure-windows/view-or-configure-the-backup-compression-default-server-configuration-option.md).  
  
22. В разделе **Шифрование** установите флажок **Зашифровать резервную копию** , чтобы определить, следует ли использовать шифрование для резервной копии. Используйте раскрывающийся список **Алгоритм** для выбора алгоритма шифрования.  Используйте раскрывающийся список **Сертификат или асимметричный ключ** , чтобы выбрать существующий сертификат или асимметричный ключ. Шифрование поддерживается в SQL Server 2014 и более поздних версиях. Дополнительные сведения об этом параметре шифрования см. в разделе [Резервное копирование базы данных (страница "Параметры резервного копирования")](../../relational-databases/backup-restore/back-up-database-backup-options-page.md).  
  
  
Также для создания резервных копий баз данных можно использовать [мастер планов обслуживания базы данных](../maintenance-plans/use-the-maintenance-plan-wizard.md) . 

### <a name="examples"></a>Примеры  
#### <a name="a--full-back-up-to-disk-to-default-location"></a>**А.  Полное резервное копирование на диск в расположение по умолчанию**
В этом примере база данных `Sales` будет заархивирована на диск в папку резервных копий по умолчанию.  Резервное копирование `Sales` никогда не выполнялось.
1.  В **обозревателе объектов**подключитесь к экземпляру компонента SQL Server Database Engine и разверните его.

2.  Разверните узел **Базы данных**, щелкните правой кнопкой `Sales`, укажите на пункт **Задачи**и выберите **Создать резервную копию...**

3.  Нажмите кнопку **ОК**.

#### <a name="b--full-back-up-to-disk-to-non-default-location"></a>**Б.  Полное резервное копирование на диск в нестандартное расположение**
В этом примере база данных `Sales` будет заархивирована на диск в папку `E:\MSSQL\BAK`.  Ранее резервные копии `Sales` уже создавались.
1.  В **обозревателе объектов**подключитесь к экземпляру компонента SQL Server Database Engine и разверните его.

2.  Разверните узел **Базы данных**, щелкните правой кнопкой `Sales`, укажите на пункт **Задачи**и выберите **Создать резервную копию...**

3.  На странице **Общие** в разделе **Назначение** выберите **Диск** в раскрывающемся списке **Создать резервную копию на:** .

4.  Щелкайте элемент **Удалить** , пока не будут удалены все существующие файлы резервных копий.

5.  Нажмите кнопку **Добавить** , чтобы открыть диалоговое окно **Выбор места расположения резервной копии** .

6.  Введите `E:\MSSQL\BAK\Sales_20160801.bak` в текстовом поле **имя файла** .

7.  Нажмите кнопку **ОК**.

8.  Нажмите кнопку **ОК**.

#### <a name="c--create-an-encrypted-backup"></a>**В.  Создание зашифрованной резервной копии**
В этом примере база данных `Sales` будет заархивирована с шифрованием в папку резервных копий по умолчанию.  [**Главный ключ базы данных**](../../relational-databases/security/encryption/create-a-database-master-key.md) уже создан.  Уже был создан  [**сертификат**](../../t-sql/statements/create-certificate-transact-sql.md) с именем `MyCertificate`. Пример создания **главного ключа базы данных** и **сертификата** на языке T-SQL можно просмотреть на разделе [Создание зашифрованной резервной копии](../../relational-databases/backup-restore/create-an-encrypted-backup.md).  
1.  В **обозревателе объектов**подключитесь к экземпляру компонента SQL Server Database Engine и разверните его.

2.  Разверните узел **Базы данных**, щелкните правой кнопкой `Sales`, укажите на пункт **Задачи**и выберите **Создать резервную копию...**

3.  На странице **Параметры носителя** в разделе **Перезапись носителя** выберите **Создать резервную копию в новом наборе носителей и удалить все существующие резервные наборы данных**.

4.  На странице **Параметры резервного копирования** в разделе **Шифрование** установите флажок **Зашифровать резервную копию** .

5.  В раскрывающемся списке **Алгоритм** выберите **AES 256**.

6.  В раскрывающемся списке **Сертификат или асимметричный ключ** выберите `MyCertificate`.

7.  Нажмите кнопку **ОК**.

#### <a name="d--back-up-to-the-azure-blob-storage-service"></a>**Г.  Резервное копирование в службу хранилища BLOB-объектов Azure**
#### <a name="common-steps"></a>**Общие шаги**  
В следующих трех примера выполняется полное резервное копирование базы данных `Sales` в службу хранилища больших двоичных объектов Microsoft Azure.  Имя учетной записи хранилища — `mystorageaccount`.  Контейнер называется `myfirstcontainer`.  Для краткости первые четыре шага перечислены здесь однократно, а все примеры начинаются с **шага 5**.
1.  В **обозревателе объектов**подключитесь к экземпляру компонента SQL Server Database Engine и разверните его.

2.  Разверните узел **Базы данных**, щелкните правой кнопкой `Sales`, укажите на пункт **Задачи**и выберите **Создать резервную копию...**

3.  На странице **Общие** в разделе **Назначение** выберите **URL-адрес** в раскрывающемся списке **Создать резервную копию на:** .

4.  Нажмите кнопку **Добавить** , чтобы открыть диалоговое окно **Выбор места расположения резервной копии** .

    **D1.  Чередующееся резервное копирование с использованием уже существующих URL-адреса и учетных данных SQL Server**  
Хранимая политика доступа была создана с правами на чтение, запись и составление списков.  Учетные данные SQL Server, `https://mystorageaccount.blob.core.windows.net/myfirstcontainer`, были созданы с использованием подписанного URL-адреса, который связан с хранимой политикой доступа.  
*
    5.  Выберите `https://mystorageaccount.blob.core.windows.net/myfirstcontainer` из текстового поля **Контейнер хранилища Azure:**

    6.  В текстовом поле **Файл резервной копии:** введите `Sales_stripe1of2_20160601.bak`.

    7.  Нажмите кнопку **ОК**.

    8.  Повторите шаги **4** и **5**.

    9.  В текстовом поле **Файл резервной копии:** введите `Sales_stripe2of2_20160601.bak`.

    10.  Нажмите кнопку **ОК**.

    11.   Нажмите кнопку **ОК**.

    **D2.  Подписанный URL-адрес уже существует, а учетные данные SQL Server — нет**
  5.    Введите `https://mystorageaccount.blob.core.windows.net/myfirstcontainer` в текстовом поле **Контейнер хранилища Azure:**
  
  6.    Введите подписанный URL-адрес в текстовом поле **Политика подписанных URL-адресов:** .
  
  7.    Нажмите кнопку **ОК**.
  
  8.    Нажмите кнопку **ОК**.

    **D3.  Подписанный URL-адрес не существует**
  5.    Щелкните **Создать контейнер** , чтобы открыть диалоговое окно **Соединение с подпиской Microsoft** .  
  
  6.    Выполните все действия в диалоговом окне **Соединение с подпиской Microsoft** и нажмите кнопку **ОК** , чтобы вернуться в диалоговое окно **Выбор места назначения резервной копии** .  См. дополнительные сведения в разделе [Соединение с подпиской Microsoft Azure](../../relational-databases/backup-restore/connect-to-a-microsoft-azure-subscription.md) .
  
  7.    Нажмите кнопку **ОК** в диалоговом окне **Выбор места назначения резервной копии** .
  
  8.    Нажмите кнопку **ОК**.

  
##  <a name="TsqlProcedure"></a> Использование Transact-SQL  
  
### <a name="create-a-full-database-backup"></a>Создание полной резервной копии базы данных  
  
1.  Выполните инструкцию BACKUP DATABASE для создания полной резервной копии базы данных, указав следующее:  
  
    -   имя базы данных для создания резервной копии;  
  
    -   устройство резервного копирования, на которое записывается полная резервная копия базы данных.  
  
     Базовая структура синтаксиса [!INCLUDE[tsql](../../includes/tsql-md.md)] для полного резервного копирования базы данных:  
  
     BACKUP DATABASE *database*  
  
     TO *backup_device* [ **,**...*n* ]  
  
     [ WITH *with_options* [ **,**...*o* ] ] ;  
  
    |Параметр|Описание|  
    |------------|-----------------|  
    |*database*|База данных для резервного копирования.|  
    |*backup_device* [ **,**...*n* ]|Указывает список от 1 до 64 устройств резервного копирования, используемых для создания резервной копии. Можно указать как физическое устройство резервного копирования, так и соответствующее логическое устройство, если оно уже определено. Для указания физического устройства резервного копирования используйте параметр DISK или TAPE.<br /><br /> { DISK &#124; TAPE } **=***имя_физического_устройства_резервного_копирования*<br /><br /> Дополнительные сведения см. в разделе [Устройства резервного копирования (SQL Server)](../../relational-databases/backup-restore/backup-devices-sql-server.md).|  
    |WITH *with_options* [ **,**...*o* ]|При необходимости можно указать один или несколько дополнительных параметров, *o*. Сведения о некоторых основных параметрах см. в пункте 2.|  
  
2.  При необходимости укажите один или несколько параметров WITH. Здесь описываются некоторые основные параметры WITH. Сведения обо всех параметрах WITH см. в разделе [BACKUP (Transact-SQL)](../../t-sql/statements/backup-transact-sql.md).  
  
    -   Основные параметры WITH резервного набора данных:  
  
         { COMPRESSION | NO_COMPRESSION }  
         Только в версии [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] и выше указано, выполняется ли команда [backup compression](../../relational-databases/backup-restore/backup-compression-sql-server.md) для этой резервной копии, переопределяя значение по умолчанию на уровне сервера.  
  
         ШИФРОВАНИЕ (АЛГОРИТМ, СЕРТИФИКАТ СЕРВЕРА |АСИММЕТРИЧНЫЙ КЛЮЧ)  
         Только для SQL Server 2014 и выше укажите используемый алгоритм шифрования, а также сертификат или асимметричный ключ для шифрования.  
  
         DESCRIPTION **=** { **'***текст***'** | **@***текстовая_переменная* }  
         Задает произвольное текстовое описание резервного набора данных. В этой строке может содержаться до 255 символов.  
  
         NAME **=** { *имя_резервного_набора_данных* | **@***переменная_имени_резервного_набора_данных* }  
         Указывает имя резервного набора данных. Длина имени не может превышать 128 символов. Если параметр NAME не указан, то имя является пустым.  
  
    -   Основные параметры WITH резервного набора данных:  
  
         По умолчанию команда BACKUP добавляет резервную копию в существующий набор носителей, сохраняя существующие резервные наборы данных. Чтобы явно указать это, используйте параметр NOINIT. Сведения о присоединении к существующим резервным наборам данных см. в разделе [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](../../relational-databases/backup-restore/media-sets-media-families-and-backup-sets-sql-server.md).  
  
         Чтобы отформатировать носитель резервной копии используется параметр FORMAT:  
  
         FORMAT [ **,** MEDIANAME**=** { *имя_носителя* | **@***переменная_имени_носителя* } ] [ **,** MEDIADESCRIPTION **=** { *текст* | **@***текстовая_переменная* } ]  
         Используйте предложение FORMAT при первом использовании носителя или при необходимости перезаписать существующие данные. При необходимости назначьте новому носителю имя и описание.  
  
        > [!IMPORTANT]  
        >  Будьте предельно осторожны, используя предложение FORMAT инструкции BACKUP, так как оно удаляет все резервные копии, сохраненные ранее на носителе резервных копий.  
  
###  <a name="TsqlExample"></a> Примеры (Transact-SQL)  
  
#### <a name="a-back-up-to-a-disk-device"></a>**А. Резервное копирование на дисковое устройство**  
 В следующем примере производится резервное копирование всей базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] на диск и создание нового набора носителей с помощью параметра `FORMAT` .  
  
```sql  
USE AdventureWorks2012;  
GO  
BACKUP DATABASE AdventureWorks2012  
TO DISK = 'Z:\SQLServerBackups\AdventureWorks2012.Bak'  
   WITH FORMAT,  
      MEDIANAME = 'Z_SQLServerBackups',  
      NAME = 'Full Backup of AdventureWorks2012';  
GO  
```  
  
#### <a name="b-back-up-to-a-tape-device"></a>**Б. Резервное копирование на ленточное устройство**  
 В следующем примере создается полная резервная копия базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] на ленте в дополнение к предыдущим резервными копиям.  
  
```sql  
USE AdventureWorks2012;  
GO  
BACKUP DATABASE AdventureWorks2012  
   TO TAPE = '\\.\Tape0'  
   WITH NOINIT,  
      NAME = 'Full Backup of AdventureWorks2012';  
GO  
```  
  
#### <a name="c-back-up-to-a-logical-tape-device"></a>**В. Резервное копирование на логическое ленточное устройство**  
 В следующем примере создается логическое устройство резервного копирования для ленточного накопителя. Затем показано, как производится полное резервное копирование базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] на этот накопитель.  
  
```sql  
-- Create a logical backup device,   
-- AdventureWorks2012_Bak_Tape, for tape device \\.\tape0.  
USE master;  
GO  
EXEC sp_addumpdevice 'tape', 'AdventureWorks2012_Bak_Tape', '\\.\tape0'; USE AdventureWorks2012;  
GO  
BACKUP DATABASE AdventureWorks2012  
   TO AdventureWorks2012_Bak_Tape  
   WITH FORMAT,  
      MEDIANAME = 'AdventureWorks2012_Bak_Tape',  
      MEDIADESCRIPTION = '\\.\tape0',   
      NAME = 'Full Backup of AdventureWorks2012';  
GO  
```  
  
##  <a name="PowerShellProcedure"></a> Использование PowerShell  
Используйте командлет **Backup-SqlDatabase** . Чтобы явно указать, что это полная резервная копия базы данных, задайте параметр **-BackupAction**  со значением по умолчанию **Database**. Данный параметр является необязательным для полных резервных копий баз данных.  

### <a name="examples"></a>Примеры
#### <a name="a--full-local-backup"></a>**А.  Полная локальная резервная копия**  
В следующем примере создается полная резервная копия базы данных `MyDB` в заданном по умолчанию расположении резервного копирования на экземпляре сервера `Computer\Instance`. Дополнительно в этом примере указывается параметр **-BackupAction Database**.  
```powershell 
Backup-SqlDatabase -ServerInstance Computer\Instance -Database MyDB -BackupAction Database  
```
 
#### <a name="b--full-backup-to-microsoft-azure"></a>**Б.  Полная резервная копия в Microsoft Azure**  
В следующем примере создается полная резервная копия базы данных `Sales` в экземпляре `MyServer` службы хранилища больших двоичных объектов Microsoft Azure.  Хранимая политика доступа была создана с правами на чтение, запись и составление списков.  Учетные данные SQL Server, `https://mystorageaccount.blob.core.windows.net/myfirstcontainer`, были созданы с использованием подписанного URL-адреса, который связан с хранимой политикой доступа.  Команда PowerShell использует параметр **BackupFile** для указания расположения (URL-адреса) и имени файла резервной копии.

```powershell  
import-module sqlps;
$container = 'https://mystorageaccount.blob.core.windows.net/myfirstcontainer';
$FileName = 'Sales.bak';
$database = 'Sales';
$BackupFile = $container + '/' + $FileName ;
  
Backup-SqlDatabase -ServerInstance "MyServer" –Database $database -BackupFile $BackupFile;
```
 
 **Настройка и использование поставщика SQL Server PowerShell**  
  
-   [Поставщик SQL Server PowerShell](../../relational-databases/scripting/sql-server-powershell-provider.md)  
  
##  <a name="RelatedTasks"></a> Связанные задачи  
  
-   [Резервное копирование базы данных (SQL Server)](../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md)  
  
-   [Создание разностной резервной копии базы данных (SQL Server)](../../relational-databases/backup-restore/create-a-differential-database-backup-sql-server.md)  
  
-   [Restore a Database Backup Using SSMS](../../relational-databases/backup-restore/restore-a-database-backup-using-ssms.md)  
  
-   [Восстановление резервной копии базы данных в простой модели восстановления (Transact-SQL)](../../relational-databases/backup-restore/restore-a-database-backup-under-the-simple-recovery-model-transact-sql.md)  
  
-   [Восстановление базы данных до точки сбоя в модели полного восстановления (Transact-SQL)](../../relational-databases/backup-restore/restore-database-to-point-of-failure-full-recovery.md)  
  
-   [Восстановление базы данных в новом расположении (SQL Server)](../../relational-databases/backup-restore/restore-a-database-to-a-new-location-sql-server.md)  
  
-   [Использование мастера планов обслуживания](../../relational-databases/maintenance-plans/use-the-maintenance-plan-wizard.md)  
  
## <a name="see-also"></a>См. также раздел  
**[Устранение неполадок операций резервного копирования и восстановления SQL Server](https://support.microsoft.com/en-us/kb/224071)**          
[Общие сведения о резервном копировании (SQL Server)](../../relational-databases/backup-restore/backup-overview-sql-server.md)   
 [Резервные копии журналов транзакций (SQL Server)](../../relational-databases/backup-restore/transaction-log-backups-sql-server.md)   
 [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](../../relational-databases/backup-restore/media-sets-media-families-and-backup-sets-sql-server.md)   
 [sp_addumpdevice (Transact-SQL)](../../relational-databases/system-stored-procedures/sp-addumpdevice-transact-sql.md)   
 [BACKUP (Transact-SQL)](../../t-sql/statements/backup-transact-sql.md)   
 [Резервное копирование базы данных (страница "Общие")](../../relational-databases/backup-restore/back-up-database-general-page.md)   
 [Резервное копирование базы данных (страница "Параметры резервного копирования")](../../relational-databases/backup-restore/back-up-database-backup-options-page.md)   
 [Разностные резервные копии (SQL Server)](../../relational-databases/backup-restore/differential-backups-sql-server.md)   
 [Полные резервные копии баз данных (SQL Server)](../../relational-databases/backup-restore/full-database-backups-sql-server.md)  
  
  
