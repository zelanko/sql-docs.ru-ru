---
title: Отчеты о наборе элементов сбора системных данных | Документация Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- data collector [SQL Server], server activity
- server activity [SQL Server]
- reports [SQL Server], data collection
- reports [SQL Server], disk usage
- collection sets [SQL Server], reports
- data collector [SQL Server], reports
- reports [SQL Server], query statistics
- query statistics reports [SQL Server]
- disk usage reports [SQL Server]
ms.assetid: 0b126b8d-4fe7-443d-8a9a-c266350181e5
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d171085f34e2a20f9e4b1db809327d078ce08436
ms.sourcegitcommit: b2464064c0566590e486a3aafae6d67ce2645cef
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "67990588"
---
# <a name="system-data-collection-set-reports"></a>Отчеты наборов элементов сбора системных данных
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  Сборщик данных предоставляет отчет с предысторией для каждого набора элементов сбора системных данных. Каждый из следующих отчетов использует данные, содержащиеся в хранилище данных управления.  
  
-   [Сводка по использованию дискового пространства.](#Disk)  
  
-   [Журнал статистики запросов.](#Query)  
  
-   [Журнал активности сервера.](#Server)  
  
 Эти отчеты можно использовать для получения сведений о наблюдаемой системе и устранения неполадок в ее производительности.  
  
##  <a name="Disk"></a> Отчет «Сводка по использованию дискового пространства»  
 Отчет «Сводка по использованию дискового пространства» содержит сведения об использовании места на диске для всех баз данных в экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Данные, представленные в этих отчетах, получены с помощью набора элементов сбора "Использование места на диске", который использует тип сборщика "Универсальный запрос T-SQL".  
  
 Доступ к отчету «Сводка по использованию дискового пространства» можно получить через обозреватель объектов. Чтобы просмотреть отчет, раскройте папку **Управление** , щелкните правой кнопкой мыши **Наборы сбора данных**, последовательно укажите **Отчеты**и **Хранилище данных управления**, а затем выберите пункт **Сводка по использованию дискового пространства**. Дополнительные сведения см. в статье [View a Collection Set Report &#40;SQL Server Management Studio&#41;](../../relational-databases/data-collection/view-a-collection-set-report-sql-server-management-studio.md).  
  
### <a name="disk-usage-collection-set-report"></a>Отчет набора сбора «Занято места на диске»  
 Отчет набора элементов сбора «Занято места на диске» содержит общие сведения об использовании дискового пространства всеми базами данных на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], а также сведения о тренде увеличения файлов данных и журналов для каждой из этих баз данных.  
  
-   Сводная таблица отображает начальный и текущий размер (в мегабайтах) для всех баз данных, установленных на сервере, за которым наблюдает сборщик данных.  
  
-   Сведения о тренде и среднем увеличении отображаются в графическом и числовом виде для файлов данных и журнала.  
  
#### <a name="disk-usage-collection-set---database-databasename-subreport"></a>Вложенный отчет «Занято места на диске — база данных: <имя_базы_данных>»  
 Чтобы отобразить вложенный отчет "Набор элементов сбора "Использование места на диске" — база данных: *<имя_базы_данных>* ", щелкните линию тренда определенного файла базы данных или журнала в сводной таблице отчета "Набор элементов сбора "Использование места на диске"". В этом отчете представлено графическое представление роста трендов в использовании места на диске за период отчета. Сведения об использовании дискового пространства включают следующие значения: для файлов данных — занято, занято данными, занято индексом, не распределено; для файлов журналов — занято и свободно.  
  
 В таблице под графиком содержатся сведения о времени сбора данных и использовании данных.  
  
#### <a name="disk-usage-for-database-databasename-subreport"></a>Вложенный отчет «Занято места на диске под базу данных: <имя_базы_данных>»  
 Вложенный отчет **Использование места на диске для базы данных:** _<имя_базы_данных>_ отображается, если щелкнуть имя базы данных в сводной таблице отчета "Набор элементов сбора "Использование места на диске"". Этот отчет содержит числовое и графическое распределение места, занятого файлами данных и журналов транзакций базы данных. Использование дискового пространства характеризуется процентными значениями места, выделенного для страниц индекса, страниц данных, нераспределенного и неиспользуемого пространства. Эти категории описаны ниже.  
  
|Категория|Определение|  
|--------------|----------------|  
|Индекс|Место на диске, занятое для хранения страниц индекса.|  
|Не выделено|Место на диске, доступное базе данных, но не выделенное ни одному из объектов.|  
|Данные|Место на диске, занятое для страниц данных.|  
|Не используется|Место на диске, выделенное для одного или более объектов, но пока не занятое.|  
  
 Использование места на диске для файла журнала транзакций характеризуется следующими значениями: занято и свободно.  
  
 События автоувеличения и автосжатия отражаются в отчете для файлов данных и файлов журнала, если они происходят в базе данных. Отчет содержит время начала и продолжительность каждого события и изменение размера файла.  
  
 В отчет включается место на диске, занятое каждым из файлов данных в базе данных. Зарезервированное место – это сумма занятого места и места, выделенного файлу, но еще не занятого. Занятое место — это фактический объем места на диске, занятый в текущий момент файлом, за исключением выделенного.  
  
##  <a name="Query"></a> Отчет «Журнал статистики запросов»  
 Отчет «Журнал статистики запросов» содержит статистику выполнения запросов. Содержащиеся в этом отчете данные получены при помощи набора сбора «Статистика запросов», который использует тип сборщика «Активность запросов».  
  
 Доступ к отчету «Журнал статистики запросов» можно получить из обозревателя объектов. Чтобы просмотреть отчет, раскройте папку **Управление** , щелкните правой кнопкой мыши **Наборы сбора данных**, укажите **Отчеты**и **Хранилище данных управления**, а затем выберите пункт **Журнал статистики запросов**. Дополнительные сведения см. в статье [Просмотр отчета о наборе элементов сбора (среда SQL Server Management Studio)](../../relational-databases/data-collection/view-a-collection-set-report-sql-server-management-studio.md).  
  
### <a name="selecting-data-to-include-in-the-report"></a>Выбор данных для включения в отчет  
 Отчет включает статистику выполнения запросов за весь период сбора данных. Существует два способа перемещения по временной шкале сбора данных для выбора сегмента данных для просмотра.  
  
 **Элемент управления «Временная шкала» и кнопки перехода**  
  
 Для перехода по шкале или выбора диапазона дат воспользуйтесь элементом управления «Временная шкала» или кнопками перехода. Кнопки со стрелками обеспечивают прокрутку влево и вправо, что позволяет перемещаться по временной шкале. По умолчанию шаг перехода по временной шкале при помощи кнопок со стрелками составляет 4 часа. С помощью кнопок масштабирования можно развернуть или свернуть приращение времени до одного из следующих значений: 15 минут, 1 час, 4 часа, 12 часов или 24 часа. Выбранный диапазон времени показан выделенной частью временной шкалы и отображается в виде текста под ней. Эти значения, как и данные в отчете, обновляются при изменении временной шкалы и при нажатии кнопок навигации.  
  
 **Кнопка календаря**  
  
 Кнопка «Календарь» дает возможность задать дату и время начала, а также продолжительность периода, за который необходимо подготовить отчет.  
  
#### <a name="query-statistics-history-report"></a>Отчет «Журнал статистики запросов»  
 График «Запросы с наибольшим общим временем ЦП» показывает относительный расход для каждого запроса в выбранном временном диапазоне по совокупному использованию процессора. Чтобы отобразить другое представление относительных затрат на запрос, щелкните одну из гиперссылок, расположенных под диаграммой: **Продолжительность**, **Общее число операций ввода-вывода**, **Число физических операций чтения** или **Число логических операций записи**.  
  
 Таблица под графиком содержит дополнительные данные запроса. Для каждого запроса в ней содержится текст, отображаемый в графике вместе с подробными статистическими сведениями. Обратите внимание, что столбцы диаграммы являются активными ссылками на запросы, содержащиеся в таблице. Эти ссылки открывают вложенный отчет «Сведения о запросе».  
  
#### <a name="query-details-subreport"></a>Вложенный отчет «Сведения о запросе»  
 Вложенный отчет «Сведения о запросе» содержит полный текст запроса. Рядом с текстом запроса находится гиперссылка **Изменить текст запроса** . Щелкнув ее, можно открыть запрос в редакторе запросов. В таблице под запросом содержится статистика его выполнения, например средняя продолжительность выполнения запроса.  
  
 Отображается график планов запроса и средняя продолжительность выполнения. Чтобы отобразить другое представление относительных затрат для каждого из планов запросов, щелкните одну из гиперссылок, отображенных под диаграммой: **Продолжительность**, **Число физических операций чтения** или **Число логических операций записи**. Линия графика является активной, поэтому можно открыть вложенный отчет «Сведения о плане запроса», щелкнув любую из точек.  
  
 В таблице, расположенной под диаграммой, отображены 10 самых затратных планов запроса по степени загрузки ЦП на их выполнение. Каждое значение в столбце **Номер плана** является активной ссылкой, которую можно щелкнуть, чтобы открыть вложенный отчет "Сведения о плане запроса".  
  
#### <a name="query-plan-details-subreport"></a>Вложенный отчет «Сведения о плане запроса»  
 Этот отчет отображает сведения о плане запроса. Помимо возможности изменения запроса и просмотра статистики выполнения, отчет предоставляет подробные сведения о плане запроса. Гиперссылка **Графический план выполнения** открывает графическое представление плана выполнения текущего запроса.  
  
## <a name="server-activity-history-report"></a>Отчет «Журнал активности сервера»  
 Отчет «Журнал активности сервера» содержит сведения о потреблении ресурсов и работе сервера, предназначенные этому серверу и экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Данные в этом отчете собираются набором элементов сбора "Активность сервера", который использует тип сборщика "Универсальный запрос T-SQL" и "Счетчики производительности".  
  
 Доступ к отчету «Журнал активности сервера» осуществляется из обозревателя объектов. Для просмотра отчета разверните папку **Управление** , правой кнопкой мыши щелкните **Сбор данных**, последовательно укажите **Отчеты**, **Хранилище данных управления**и щелкните **Журнал активности сервера**. Дополнительные сведения см. в статье [Просмотр отчета о наборе элементов сбора (среда SQL Server Management Studio)](../../relational-databases/data-collection/view-a-collection-set-report-sql-server-management-studio.md).  
  
### <a name="selecting-data-to-include-in-the-report"></a>Выбор данных для включения в отчет  
 Отчет содержит сведения об активности сервера за весь период сбора данных. Существует два способа перемещения по временной шкале сбора данных для выбора сегмента данных для просмотра.  
  
 **Элемент управления «Временная шкала» и кнопки перехода**  
  
 Для перехода по шкале или выбора диапазона дат воспользуйтесь элементом управления «Временная шкала» или кнопками перехода. Кнопки со стрелками обеспечивают прокрутку влево и вправо, что позволяет перемещаться по временной шкале. По умолчанию шаг перехода по временной шкале при помощи кнопок со стрелками составляет 4 часа. С помощью кнопок масштабирования можно развернуть или свернуть приращение времени до одного из следующих значений: 15 минут, 1 час, 4 часа, 12 часов или 24 часа. Выбранный диапазон времени показан выделенной частью временной шкалы и отображается в виде текста под ней. Эти значения, а также данные в отчете обновляются при каждом щелчке по временной шкале или нажатии кнопок навигации.  
  
 **Кнопка календаря**  
  
 Кнопка «Календарь» дает возможность задать дату и время начала, а также продолжительность периода, за который необходимо подготовить отчет.  
  
###  <a name="Server"></a> Отчет «Журнал активности сервера»  
 В отчете «Журнал активности сервера» показано исходное представление активности сервера для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и операционной системы узла.  
  
 В следующей таблице описаны графики, показывающие в отчете активность [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и системы, и подробно изложены сведения о вложенных отчетах, доступ к которым можно получить посредством графиков.  
  
|График|Описание отчета|  
|-----------|------------------------|  
|% ЦП|Доступ к этим вложенным отчетам можно получить, щелкнув любую точку на линиях графика [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или системы в графиках % ЦП.<br /><br /> **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** : Отчет «Журнал статистики запросов» содержит график наиболее ресурсоемких запросов в экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. В таблице под графиком перечислены запросы и указаны статистические данные для каждого запроса. Для получения дополнительных сведений можно щелкнуть запрос.<br /><br /> **Система**: Отчет «Использование системой ЦП» предоставляет график процента загрузки каждого процессора и статистические данные для каждого процесса в табличном формате.|  
|Использование памяти|Доступ к этим вложенным отчетам можно получить, щелкнув любую точку на линиях графика [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или системы в графиках использования памяти.<br /><br /> **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** : Отчет использования памяти [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставляет графики для использования памяти процессом [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , для счетчиков памяти, для использования внутренней памяти с градацией по типам, а также таблицу с данными о среднем использовании памяти разными типами компонентов.<br /><br /> **Система**: Отчет «Использование системой памяти» предоставляет графики использования памяти, коэффициенты попадания в кэш и на страницы и таблицу с информацией о рабочем множестве и закрытых байтах для каждого процесса.|  
|Использование ресурсов дискового ввода-вывода|Доступ к этим вложенным отчетам можно получить, щелкнув любую точку на линиях графика [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или системы в графике «Использование ресурсов дискового ввода-вывода».<br /><br /> **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** : Отчет «Использование ресурсов дискового ввода-вывода» [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставляет графики времени ответа диска и скорости обмена данными с диском. Дополнительная таблица предоставляет статистику виртуальных файлов, отсортированную по дискам, базам данных и файлам.<br /><br /> **Система**: Отчет «Использование системой дисков» предоставляет графики времени ответа диска, средней длины очереди к диску, скорости обмена данными с диском и таблицу с информацией об операциях ввода-вывода (записи и чтения) для каждого процесса.|  
|Использование сети|Дополнительных отчетов нет.|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Случаи ожидания|График ожиданий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] отображает данные о числе ожиданий, зафиксированных потоками, выполняющимися в каждой категории ожидания. Чтобы получить подробный отчет, достаточно щелкнуть сегмент на графике. Дополнительно к данной графической статистике случаев ожидания [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] за узкий период времени этот отчет предоставляет сведения о категориях ожиданий в формате таблицы. Для каждой категории, например категории «Процессор» и ее подкатегорий, в таблице приведено количество случаев ожидания, время ожидания и процент общего времени ожидания.|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Действие|По графику активности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно получить различные сведения об активности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Ниже перечислены отчеты, которые можно получить с помощью щелчка в точке линейного графика «Число компиляций SQL-кода в секунду»:<br /><br /> <br /><br /> Соединения и сеансы<br /><br /> Запросы<br /><br /> Коэффициент попадания в кэш планов<br /><br /> Характеристики базы данных tempdb|  
  
## <a name="see-also"></a>См. также:  
 [Наборы сбора данных](../../relational-databases/data-collection/data-collection.md)   
 [Просмотр отчета о наборе элементов сбора (среда SQL Server Management Studio)](../../relational-databases/data-collection/view-a-collection-set-report-sql-server-management-studio.md)  
  
  
