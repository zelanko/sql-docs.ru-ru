---
title: Администрирование агента репликации | Документация Майкрософт
ms.custom: ''
ms.date: 08/24/2016
ms.prod: sql
ms.prod_service: database-engine
ms.component: replication
ms.reviewer: ''
ms.suite: sql
ms.technology:
- replication
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- Snapshot Agent, administering
- Log Reader Agent, administering
- Queue Reader Agent, administering
- shared agents [SQL Server replication]
- Merge Agent, administering
- Distribution Agent, administering
- agents [SQL Server replication], administering
- replication cleanup jobs [SQL Server]
- administering replication, agents
- replication [SQL Server], administering
- independent agents [SQL Server replication]
ms.assetid: f27186b8-b1b2-4da0-8b2b-91f632c2ab7e
caps.latest.revision: 48
author: MashaMSFT
ms.author: mathoma
manager: craigg
ms.openlocfilehash: b2607af48ae1f542ce314a0aebca1ec3463921fe
ms.sourcegitcommit: 1740f3090b168c0e809611a7aa6fd514075616bf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
ms.locfileid: "32956719"
---
# <a name="replication-agent-administration"></a>Администрирование агента репликации
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  Агенты репликации выполняют многие задачи, связанные с репликацией, включая создание копий схемы и данных, обнаружение обновлений на издателе или подписчике и распространение изменений между серверами. По умолчанию агенты репликации выполняются в рамках отдельных шагов задания агента [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] . Агенты являются обычными исполняемыми приложениями, поэтому их можно вызывать непосредственно из командной строки или пакетных скриптов. Каждый агент репликации поддерживает набор параметров исполнения, используемых для управления его работой. Эти параметры задаются в профиле агента или в командной строке.  
  
> [!IMPORTANT]  
>  Служба агента [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] по умолчанию отключается при установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , если только во время установки не будет явно выбран режим автоматического запуска.  
  
 Файлы агента репликации находятся в папке [!INCLUDE[ssInstallPathVar](../../../includes/ssinstallpathvar-md.md)]\COM. В следующей таблице перечислены имена исполняемых объектов и файлов. Щелкните ссылку для соответствующего агента, чтобы просмотреть информацию о его параметрах.  
  
|Исполняемый объект агента|Имя файла|  
|----------------------|---------------|  
|[Агент моментальных снимков репликации](../../../relational-databases/replication/agents/replication-snapshot-agent.md)|snapshot.exe|  
|[Replication Distribution Agent](../../../relational-databases/replication/agents/replication-distribution-agent.md)|distrib.exe|  
|[Агент чтения журнала репликации](../../../relational-databases/replication/agents/replication-log-reader-agent.md)|logread.exe|  
|[Агент чтения очереди репликации](../../../relational-databases/replication/agents/replication-queue-reader-agent.md)|qrdrsvc.exe|  
|[Replication Merge Agent](../../../relational-databases/replication/agents/replication-merge-agent.md)|replmerg.exe|  
  
 Кроме агентов репликации, для репликации существует ряд заданий, выполняющих обслуживание по расписанию и по требованию.  
  
 **Запуск агентов и задания обслуживания**  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] и монитор репликации: [Запуск и остановка агента репликации (среда SQL Server Management Studio)](../../../relational-databases/replication/agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).  
  
-   Программирование репликации: [Основные понятия исполняемых файлов агента репликации](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md).  
  
## <a name="agent-profiles"></a>Профили агентов  
 При настройке репликации на распространителе устанавливается набор профилей агентов. Профиль агента содержит набор параметров, используемых при каждом запуске агента: каждый агент регистрируется на распространителе во время запуска и запрашивает параметры в своем профиле. Служба репликации предоставляет каждому агенту профиль по умолчанию и набор дополнительных предопределенных профилей для агента чтения журнала, агента распространителя и агента слияния. Кроме предоставляемых профилей можно создать профили в соответствии с требованиями приложений. Дополнительные сведения см. в статье [Replication Agent Profiles](../../../relational-databases/replication/agents/replication-agent-profiles.md).  
  
 Дополнительные сведения о прямом указании параметров командной строки см. в статье [Основные понятия исполняемых файлов агента репликации](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md).  
  
## <a name="monitoring-replication-agents"></a>Наблюдение за агентами репликации  
 Монитор репликации позволяет просматривать сведения и выполнять задачи, связанные с каждым из агентов репликации. В приведенном ниже списке перечислены все агенты, для которых существуют вкладки в мониторе репликации, а также дается ссылка на раздел, где описывается порядок доступа к этим вкладкам.  
  
-   С публикациями в мониторе репликации связаны следующие агенты.  
  
    -   агент моментальных снимков  
  
    -   Агент чтения журнала.  
  
    -   Агент чтения очереди.  
  
     Получить доступ к сведениям и задачам, связанным с этими агентами, можно на вкладке **Агенты** . Дополнительные сведения см. в статье [Просмотр сведений и выполнение задач для агентов, связанных с публикацией (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-publication-agents.md).  
  
-   С подписками в мониторе репликации связаны следующие агенты:  
  
    -   Агент распространителя  
  
    -   Агент слияния.  
  
     Получить доступ к сведениям и задачам, связанным с этими агентами, можно на следующих вкладках: **Список наблюдения за подписками** (доступна для каждого издателя) или **Все подписки** (доступна для каждой публикации). Дополнительные сведения см. в статье [Просмотр сведений и выполнение задач для агентов, связанных с подпиской (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-subscription-agents.md).  
  
## <a name="independent-and-shared-agents"></a>Независимые и общие агенты  
 Независимым является агент, обслуживающий одну подписку. Общий агент обслуживает несколько подписок. Если подпискам, обслуживаемым одним и тем же общим агентом, требуется синхронизация, они по умолчанию ожидают в очереди, пока общий агент обслуживает их по одной. При использовании независимых агентов снижается задержка, поскольку агент находится в состоянии готовности в любой момент, когда требуется синхронизация подписки. В репликациях слиянием всегда используются независимые агенты, в репликациях транзакций независимые агенты используются по умолчанию для публикаций, созданных с помощью мастера создания публикаций (в предыдущих версиях [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]в репликациях транзакций по умолчанию использовались общие агенты).  
  
## <a name="replication-maintenance-jobs"></a>Задания обслуживания репликации  
 Следующие задания используются службой репликаций для выполнения обслуживания по расписанию или обслуживания по требованию.  
  
|Задание очистки|Description|Расписание по умолчанию|  
|------------------|-----------------|----------------------|  
|Очистка журнала агента: распространитель|Удаляется журнал агента репликации из базы данных распространителя.|Запускается каждые десять минут|  
|Очистка распространения: распространитель|Удаляются реплицированные транзакции из базы данных распространителя. |Запускается каждые десять минут|  
|Очистка истекшей подписки|Обнаруживаются и удаляются подписки с истекшим сроком из баз данных публикации. В распространителе отключаются подписки, которые не были синхронизированы в течение максимального срока хранения распространения.|Запускается каждый день в 1:00.| 
|Повторная инициализация подписок, имеющих сбои при выполнении проверки данных|Обнаруживаются все подписки со сбоями при выполнении проверки данных, и они помечаются для повторной инициализации. При следующем запуске агента слияния или агента распространителя к подписчикам применяется новый моментальный снимок.|Нет расписания по умолчанию (по умолчанию отключено).|  
|Проверка агентов репликации|Обнаруживаются агенты репликации, которые не регистрируют свои действия в журнале. В журнале событий [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows делается запись, если при выполнении шага задания происходит сбой.|Запускается каждые десять минут.|  
|Обновитель наблюдения репликации для распространения|Обновляет кэшированные запросы, используемые монитором репликации.|Выполняется постоянно.|  
  
## <a name="see-also"></a>См. также:  
 [Наблюдение за репликацией](../../../relational-databases/replication/monitor/monitoring-replication-overview.md)  
  
  
