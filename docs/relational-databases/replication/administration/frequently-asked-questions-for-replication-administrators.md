---
title: Вопросы, часто задаваемые администраторам репликации | Документация Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: database-engine
ms.component: replication
ms.reviewer: ''
ms.suite: sql
ms.technology: replication
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- administering replication, frequently asked questions
- replication [SQL Server], administering
ms.assetid: 5a9e4ddf-3cb1-4baf-94d6-b80acca24f64
caps.latest.revision: 59
author: MashaMSFT
ms.author: mathoma
manager: craigg
ms.openlocfilehash: e561ca691e503e8bcadbfa7f98bf422e7b25f478
ms.sourcegitcommit: 022d67cfbc4fdadaa65b499aa7a6a8a942bc502d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2018
ms.locfileid: "37358866"
---
# <a name="frequently-asked-questions-for-replication-administrators"></a>Вопросы, часто задаваемые администраторам репликации
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  Нижеприведенные вопросы и ответы входят в руководство по выполнению разнообразных задач администраторами реплицируемых баз данных.  
  
## <a name="configuring-replication"></a>Настройка репликации  
  
### <a name="does-activity-need-to-be-stopped-on-a-database-when-it-is-published"></a>Необходимо ли останавливать операции в базе данных при ее публикации?  
 Нет. При создании публикации операции в базе данных могут продолжать выполняться. Необходимо помнить, что создание моментального снимка может потребовать большого количества ресурсов, поэтому лучше создавать моментальные снимки в периоды низкой загруженности базы данных (по умолчанию моментальный снимок создается после завершения выполнения мастера создания публикаций).  
  
### <a name="are-tables-locked-during-snapshot-generation"></a>Заблокированы ли таблицы во время создания моментального снимка?  
 Продолжительность времени блокировки зависит от используемого типа репликации:  
  
-   Для публикаций слиянием агент моментальных снимков не устанавливает никаких блокировок.  
  
-   Для публикаций транзакций по умолчанию агент моментальных снимков осуществляет блокировку только во время первоначальной фазы создания моментального снимка.  
  
-   Для публикаций моментальных снимков агент моментальных снимков осуществляет блокировку в течение всего процесса создания моментального снимка.  
  
 Поскольку блокировка не дает другим пользователям обновлять таблицы, необходимо создать расписание запусков агента моментальных снимков во время периодов низкой загруженности базы данных, особенно для публикаций моментальных снимков.  
  
### <a name="when-is-a-subscription-available-when-can-the-subscription-database-be-used"></a>Когда доступна подписка? Когда можно использовать базу данных подписки?  
 Подписка доступна после применения моментального снимка в базе данных подписки. Несмотря на то, что база данных подписки доступна и до этого, эту базу данных не следует использовать до тех пор, пока не применен моментальный снимок. Для проверки состояния создания и применения моментального снимка нужно использовать монитор репликации.  
  
-   Моментальный снимок создается агентом моментальных снимков. Просмотреть состояние процесса создания моментального снимка для публикации можно на вкладке **Агенты** в мониторе репликации. Дополнительные сведения см. в статье [Просмотр сведений и выполнение задач для агентов, связанных с публикацией (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-publication-agents.md).  
  
-   Моментальный снимок применяется агентом распространителя или агентом слияния. Просмотреть состояние применения моментального снимка можно на странице **Агент распространителя** или **Агент слияния** монитора репликации. Дополнительные сведения см. в статье [Просмотр сведений и выполнение задач для агентов, связанных с подпиской (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-subscription-agents.md).  
  
### <a name="what-happens-if-the-snapshot-agent-has-not-completed-when-the-distribution-or-merge-agent-starts"></a>Что происходит, если выполнение агента моментальных снимков не завершено в момент запуска агента распространителя или агента слияния?  
 Если агент распространителя или агент слияния запускается одновременно с агентом моментальных снимков, то это не приведет к ошибке. Однако необходимо помнить о следующем:  
  
-   Если агент распространителя или агент слияния настроен на непрерывную работу, то этот агент применяет моментальный снимок автоматически после завершения работы агента моментальных снимков.  
  
-   Если агент распространителя или агент слияния настроен на запуск по расписанию или по требованию, и при запуске агента моментальный снимок недоступен, то агент завершит работу, выдав сообщение о том, что моментальный снимок еще не доступен. Для применения моментального снимка агент необходимо запустить вновь после завершения работы агента моментальных снимков. Дополнительные сведения о запуске агентов см. в статьях о [синхронизации принудительной подписки](../../../relational-databases/replication/synchronize-a-push-subscription.md), [синхронизации подписки по запросу](../../../relational-databases/replication/synchronize-a-pull-subscription.md) и [основных понятиях исполняемых файлов агента репликации](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md).  
  
### <a name="should-i-script-my-replication-configuration"></a>Необходимо ли создавать скрипты конфигурации репликации?  
 Да. Создание сценариев конфигурации репликации является ключевой частью любого плана восстановления в аварийных ситуациях для топологии репликации. Дополнительные сведения о создании сценариев см. в разделе [Scripting Replication](../../../relational-databases/replication/scripting-replication.md).  
  
### <a name="what-recovery-model-is-required-on-a-replicated-database"></a>Какая модель восстановления необходима для реплицируемой базы данных?  
 Репликация функционирует надлежащим образом при использовании любой модели восстановления: простой, с неполным протоколированием или модели полного восстановления. Репликация слиянием отслеживает изменения, сохраняя сведения в таблицах метаданных. Репликация транзакций отслеживает изменения, внося отметки в журнал транзакций, но модель восстановления не влияет на этот процесс внесения отметок.  
  
### <a name="why-does-replication-add-a-column-to-replicated-tables-will-it-be-removed-if-the-table-isnt-published"></a>Почему при репликации к реплицируемым таблицам добавляется столбец? Будет ли он удален, если таблица не публикуется?  
 Для отслеживания изменений репликация слиянием и репликация транзакций с подписками, обновляемыми посредством очередей, должны быть способны уникально идентифицировать каждую строку в каждой публикуемой таблице. Для этого:  
  
-   Репликация слиянием добавляет к каждой таблице столбец **rowguid** , если только таблица уже не содержит столбец данных типа **uniqueidentifier** с установленным свойством **ROWGUIDCOL** (в этом случае используется этот столбец). Если таблица удалена из публикации, столбец **rowguid** удаляется; если существующий столбец был использован для слежения, столбец не удаляется.  
  
-   Если публикация транзакций поддерживает подписки, обновляемые посредством очередей, то репликация добавляет к каждой таблице столбец **msrepl_tran_version** . Если таблица удаляется из публикации, то столбец **msrepl_tran_version** не удаляется.  
  
-   Фильтр не должен включать столбец **rowguidcol** , который используется в процессе репликации для идентификации строк. По умолчанию этот столбец добавляется в момент настройки репликации слиянием и называется **rowguid**.  
  
### <a name="how-do-i-manage-constraints-on-published-tables"></a>Как управлять ограничениями на публикуемые таблицы?  
 В отношении ограничений на публикуемые таблицы существует ряд вопросов, которые необходимо рассмотреть:  
  
-   Для репликации транзакций необходимо ограничение первичного ключа по каждой публикуемой таблице. Для репликации слиянием первичный ключ не нужен, но при его наличии его необходимо реплицировать. Для репликации моментальных снимков первичный ключ не нужен.  
  
-   По умолчанию ограничения с первичными ключами, индексы и проверочные ограничения реплицируются на подписчиках.  
  
-   Параметр NOT FOR REPLICATION по умолчанию задается для ограничений внешнего ключа и проверочных ограничений. Ограничения используются для пользовательских операций, но не для операций агентов.  
  
 Сведения об установке параметров схемы, которые управляют репликацией ограничений, см. в разделе [Specify Schema Options](../../../relational-databases/replication/publish/specify-schema-options.md).  
  
### <a name="how-do-i-manage-identity-columns"></a>Как управлять столбцами идентификаторов?  
 Репликация обеспечивает автоматическое управление диапазонами идентификаторов для топологий репликации, включающих обновления на подписчике. Дополнительные сведения см. в статье [Репликация столбцов идентификаторов](../../../relational-databases/replication/publish/replicate-identity-columns.md).  
  
### <a name="can-the-same-objects-be-published-in-different-publications"></a>Могут ли одни и те же объекты публиковаться в разных публикациях?  
 Да, но с некоторыми ограничениями. Дополнительные сведения см. в разделе "Публикация таблиц в нескольких публикациях" статьи [Публикация данных и объектов базы данных](../../../relational-databases/replication/publish/publish-data-and-database-objects.md).  
  
### <a name="can-multiple-publications-use-the-same-distribution-database"></a>Могут ли несколько публикаций использовать одну и ту же базу данных распространителя?  
 Да. Ограничение на количество или типы публикаций, которые могут использовать одну и ту же базу данных распространителя, отсутствует. Все публикации одного издателя должны использовать одного и того же распространителя и базу данных распространителя.  
  
 При наличии нескольких публикаций на распространителе можно настроить несколько баз данных распространителя для гарантии того, что данные, проходящие через каждую базу данных распространителя, идут из одной публикации. Для добавления базы данных распространителя нужно использовать диалоговое окно **Свойства распространителя** или процедуру [sp_adddistributiondb (Transact-SQL)](../../../relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql.md). Дополнительные сведения о доступе к этому диалоговому окну см. в статье [View and Modify Distributor and Publisher Properties](../../../relational-databases/replication/view-and-modify-distributor-and-publisher-properties.md) (Просмотр и изменение свойств издателя и распространителя).  
  
### <a name="how-do-i-find-information-on-the-distributor-and-publisher-such-as-which-objects-in-a-database-are-published"></a>Как искать сведения о распространителе и издателе (например, какие объекты в базе данных являются публикуемыми)?  
 Эти сведения можно получить в среде [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]и через вызов некоторых хранимых процедур репликации. Дополнительные сведения см. в статье [Distributor and Publisher Information Script](../../../relational-databases/replication/administration/distributor-and-publisher-information-script.md).  
  
### <a name="does-replication-encrypt-data"></a>Шифруются ли данные при репликации?  
 Нет. При репликации данные, которые хранятся в базе данных или передаются по сети, не шифруются. Дополнительные сведения см. в разделе "Шифрование" статьи [Security Overview (Replication)](../../../relational-databases/replication/security/security-overview-replication.md) (Общие сведения о безопасности (репликация)).  
  
### <a name="how-do-i-replicate-data-over-the-internet"></a>Как реплицировать данные через Интернет?  
 Репликация данных через Интернет:  
  
-   Виртуальная частная сеть. Дополнительные сведения см. в статье [Публикация данных через Интернет с помощью виртуальных частных сетей](../../../relational-databases/replication/publish-data-over-the-internet-using-vpn.md).  
  
-   Параметр веб-синхронизации для репликации слиянием. Дополнительные сведения см. в статье [Web Synchronization for Merge Replication](../../../relational-databases/replication/web-synchronization-for-merge-replication.md).  
  
 Репликации [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] всех типов могут реплицировать данные через виртуальную частную сеть, но для репликации слиянием необходимо предусмотреть веб-синхронизацию.  
  
### <a name="does-replication-resume-if-a-connection-is-dropped"></a>Возобновляется ли репликация при разрыве соединения?  
 Да. Обработка репликации возобновляется с места, на котором она остановилась при разрыве соединения. При использовании репликации слиянием в сети с низкой надежностью стоит рассмотреть использование логических записей, гарантирующих, что соответствующие изменения будут обрабатываться в виде блока. Дополнительные сведения см. в статье [Группирование изменений в связанных строках с помощью логических записей](../../../relational-databases/replication/merge/group-changes-to-related-rows-with-logical-records.md).  
  
### <a name="does-replication-work-over-low-bandwidth-connections-does-it-use-compression"></a>Работает ли репликация по соединениям с малой полосой пропускания? Используется ли сжатие?  
 Да, репликация работает по соединениям с малой полосой пропускания. Для соединений по TCP/IP-протоколу используется сжатие, предоставляемое протоколом, но дополнительное сжатие отсутствует. Для соединений веб-синхронизации по HTTPS-протоколу используется сжатие, предоставляемое протоколом, и дополнительное сжатие XML-файлов, используемых для репликации изменений.  
  
## <a name="logins-and-object-ownership"></a>Имена входа и принадлежность объектов  
  
### <a name="are-logins-and-passwords-replicated"></a>Осуществляется ли репликация имен входа и паролей?  
 Нет. Можно создать пакет служб DTS для передачи имен входа и паролей с издателя на одного или нескольких подписчиков.  
  
### <a name="what-are-schemas-and-how-are-they-replicated"></a>Что такое схемы и как они реплицируются?  
 Начиная с [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], *схема* имеет два значения.  
  
-   Определение объекта, например инструкция CREATE TABLE. По умолчанию репликация копирует определения всех реплицируемых объектов на подписчик.  
  
-   Пространство имен, в пределах которого создается объект: \<база_данных>.\<схема>.\<объект>. Схемы определяются с использованием инструкции CREATE SCHEMA.  
  
-   Репликации свойственно следующее поведение по умолчанию в мастере создания публикаций, касающееся схем и принадлежности объектов:  
  
-   Для статей в публикациях слиянием с уровнем совместимости 90 или выше, публикациях моментальных снимков и публикациях транзакций: по умолчанию владелец объекта на подписчике идентичен владельцу соответствующего объекта на издателе. Если на подписчике не существует схем, владеющих объектами, они создаются автоматически.  
  
-   Для статей в публикациях слиянием с уровнем совместимости менее 90: по умолчанию владелец не указывается, а в процессе создания объекта на подписчике владельцем назначается **dbo** .  
  
-   Для статей в публикациях Oracle: по умолчанию владельцем назначается **dbo**.  
  
-   Для статей в публикациях, в которых используются моментальные снимки в текстовом режиме (используются для подписчиков, отличных от подписчиков[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , и подписчиков [!INCLUDE[ssEW](../../../includes/ssew-md.md)] ): по умолчанию владелец не указывается. Владельцем по умолчанию является владелец, указанный в учетной записи, используемой агентом распространителя или агентом слияния для соединения с подписчиком.  
  
 Владельца объекта можно изменить с помощью диалогового окна **Свойства статьи — \<***статья***>** и следующих хранимых процедур: **sp_addarticle**, **sp_addmergearticle**, **sp_changearticle** и **sp_changemergearticle**. Дополнительные сведения см. в статье [Просмотр и изменение свойств публикации](../../../relational-databases/replication/publish/view-and-modify-publication-properties.md), [Определение статьи](../../../relational-databases/replication/publish/define-an-article.md) и [Просмотр и изменение свойств статьи](../../../relational-databases/replication/publish/view-and-modify-article-properties.md).  
  
### <a name="how-can-grants-on-the-subscription-database-be-configured-to-match-grants-on-the-publication-database"></a>Как можно настроить предоставление прав в базе данных подписки для соответствия предоставлению прав в базе данных публикации?  
 По умолчанию репликация не выполняет инструкции GRANT в базе данных подписки. Если необходимо, чтобы разрешения в базе данных подписки соответствовали разрешениям в базе данных публикации, то нужно использовать один из следующих методов:  
  
-   Непосредственно выполнить инструкции GRANT в базе данных подписки.  
  
-   Использовать скрипт, выполняемый после моментального снимка, для выполнения этих инструкций. Дополнительные сведения см. в статье [Выполнение скриптов до и после применения моментального снимка](../../../relational-databases/replication/execute-scripts-before-and-after-the-snapshot-is-applied.md).  
  
-   Хранимая процедура [sp_addscriptexec](../../../relational-databases/system-stored-procedures/sp-addscriptexec-transact-sql.md) используется для запуска инструкций.  
  
### <a name="what-happens-to-permissions-granted-in-a-subscription-database-if-a-subscription-is-reinitialized"></a>Что происходит с разрешениями, предоставленными в базе данных подписки при повторной инициализации подписки?  
 По умолчанию при повторной инициализации подписки объекты на подписчике удаляются и создаются повторно, что приводит к удалению всех предоставленных разрешений на эти объекты. Для обработки этого существует два способа:  
  
-   Повторное предоставление разрешений после повторной инициализации с использованием методик, описанных в предыдущем разделе.  
  
-   Задание того, что при повторной инициализации подписки объекты не должны удаляться. Перед повторной инициализацией либо:  
  
    -   Выполните хранимую процедуру [sp_changearticle](../../../relational-databases/system-stored-procedures/sp-changearticle-transact-sql.md) или [sp_changemergearticle](../../../relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql.md). Задайте значение «pre_creation_command» (хранимая процедура**sp_changearticle**) или значение «pre_creation_command» (хранимая процедура**sp_changemergearticle**) для параметра **@property** и значение «none», «delete» или «truncate» для параметра **@value**.  
  
    -   В диалоговом окне **Свойства статьи — \<статья>** в разделе **Целевой объект** выберите значение **Не изменять существующий объект**, **Удалить данные. Если статья имеет фильтр строк, удалить только данные, соответствующие критерию фильтра.** либо **Выполнить усечение всех данных в существующем объекте** для параметра **Действие, если имя уже используется**. Дополнительные сведения о доступе к этому диалоговому окну см. в статье [Просмотр и изменение свойств публикации](../../../relational-databases/replication/publish/view-and-modify-publication-properties.md).  
  
## <a name="database-maintenance"></a>Обслуживание базы данных  
  
### <a name="why-cant-i-run-truncate-table-on-a-published-table"></a>Почему нельзя запускать операцию TRUNCATE TABLE на публикуемой таблице?  
 TRUNCATE TABLE — это инструкция на языке DDL, которая не записывает в журнал отдельные операции удаления строк и не вызывает срабатывание триггеров DML. Она недопустима, так как репликация не может отследить вносимые ею изменения: репликация транзакций отслеживает изменения посредством журнала транзакций, а репликация слиянием — посредством триггеров DML в публикуемых таблицах.  
  
### <a name="what-is-the-effect-of-running-a-bulk-insert-command-on-a-replicated-database"></a>Каков эффект выполнения команды массовой вставки в реплицированной базе данных?  
 В случае репликации транзакций отслеживание и репликация массовой вставки производится аналогично другим вставкам. В случае репликации слиянием необходимо гарантировать надлежащее обновление метаданных отслеживания изменений.  
  
### <a name="are-there-any-replication-considerations-for-backup-and-restore"></a>Есть ли факторы, которые необходимо принимать во внимание в отношении репликации при резервном копировании и восстановлении?  
 Да. Существует несколько специальных факторов, которые необходимо принимать во внимание для баз данных, участвующих в репликации. Дополнительные сведения см. в разделе [Резервное копирование и восстановление реплицируемых баз данных](../../../relational-databases/replication/administration/back-up-and-restore-replicated-databases.md).  
  
### <a name="does-replication-affect-the-size-of-the-transaction-log"></a>Влияет ли репликация на размер журнала транзакций?  
 Репликация слиянием и репликация моментальных снимков не влияют на размер журнала транзакций, в отличие от репликации транзакций. Если база данных содержит одну или несколько публикаций транзакций, журнал не может быть усечен, пока все транзакции, относящиеся к публикациям, не будут доставлены в базу данных распространителя. Если журнал транзакций становится слишком большим, а агент чтения журнала запускается по расписанию, необходимо рассмотреть возможность сокращения интервала между его запусками. Либо переведите его в непрерывный режим. Если он установлен в непрерывном режиме (по умолчанию), необходимо убедиться в том, что он работает. Дополнительные сведения о проверке состояния агента чтения журнала см. в статье [Просмотр сведений и выполнение задач для агентов, связанных с публикацией (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-publication-agents.md).  
  
 Кроме этого, если в базе данных публикации или распространителя установлен параметр «sync with backup», то журнал транзакций не усекается до тех пор, пока не будет осуществлено резервное копирование всех транзакций. Если журнал транзакций становится слишком большим и этот параметр установлен, то необходимо рассмотреть сокращение интервалов резервного копирования журнала транзакций. Дополнительные сведения об архивации и восстановлении баз данных, участвующих в репликации транзакций, см. в статье [Strategies for Backing Up and Restoring Snapshot and Transactional Replication](../../../relational-databases/replication/administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) (Стратегии архивации и восстановления из копии репликации моментальных снимков и репликации транзакций).  
  
### <a name="how-do-i-rebuild-indexes-or-tables-in-replicated-databases"></a>Как воссоздать индексы или таблицы в реплицируемых базах данных?  
 Существует несколько механизмов перестроения индексов. Для репликации можно использовать все эти механизмы без особых предосторожностей, за исключением следующего: в публикациях транзакций в таблицах необходимы первичные ключи, поэтому невозможно удалять и перестраивать первичные ключи в этих таблицах.  
  
### <a name="how-do-i-add-or-change-indexes-on-publication-and-subscription-databases"></a>Как добавить или изменить индексы в базах данных публикации или подписки?  
 Индексы можно добавлять на издателе или подписчиках без особых предосторожностей в отношении репликации (не следует забывать, что индексы влияют на производительность). CREATE INDEX и ALTER INDEX не реплицируются, поэтому при добавлении или изменении индекса, например на издателе, необходимо создать или изменить его и на подписчике, чтобы он отразился и там.  
  
### <a name="how-do-i-move-or-rename-files-for-databases-involved-in-replication"></a>Как переместить или переименовать файлы баз данных, участвующих в репликации?  
 В предыдущих версиях [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , предшествующих [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], перемещение или переименование файлов баз данных требовало отсоединения и повторного присоединения базы данных. Поскольку реплицируемую базу данных отсоединить нельзя, необходимо было вначале удалить репликацию из этих баз данных. Начиная с версии [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], можно перемещать или переименовывать файлы без отсоединения и повторного присоединения базы данных, не влияя при этом на репликацию. Дополнительные сведения о перемещении и переименовании файлов см. в статье [ALTER DATABASE (Transact-SQL)](../../../t-sql/statements/alter-database-transact-sql.md).  
  
### <a name="how-do-i-drop-a-table-that-is-being-replicated"></a>Как удалить реплицируемую таблицу?  
 Вначале удалите статью из публикации с помощью хранимых процедур [sp_droparticle](../../../relational-databases/system-stored-procedures/sp-droparticle-transact-sql.md), [sp_dropmergearticle](../../../relational-databases/system-stored-procedures/sp-dropmergearticle-transact-sql.md) или диалогового окна **Свойства публикации — \<публикация>**, а затем удалите ее из базы данных с помощью инструкции `DROP <Object>`. После добавления подписок невозможно удалить статьи из моментального снимка или публикаций транзакций; вначале следует удалить подписки. Дополнительные сведения см. в статье [Добавление и удаление статей в существующих публикациях](../../../relational-databases/replication/publish/add-articles-to-and-drop-articles-from-existing-publications.md).  
  
### <a name="how-do-i-add-or-drop-columns-on-a-published-table"></a>Как добавить или удалить столбцы в публикуемой таблице?  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] поддерживает разнообразные изменения схем для публикуемых объектов, включая добавление и удаление столбцов. Например, при выполнении инструкции ALTER TABLE … DROP COLUMN на издателе эта инструкция будет реплицирована на подписчиках, а затем выполнена для удаления столбца. Подписчики, использующие версии [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , предшествующие [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] , поддерживают добавление и удаление столбцов с помощью хранимых процедур [sp_repladdcolumn](../../../relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql.md) и [sp_repldropcolumn](../../../relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql.md). Дополнительные сведения см. в статье [Внесение изменений в схемы баз данных публикации](../../../relational-databases/replication/publish/make-schema-changes-on-publication-databases.md).  
  
## <a name="replication-maintenance"></a>Обслуживание репликации  
  
### <a name="how-do-i-determine-if-the-data-at-subscribers-is-synchronized-with-data-at-the-publisher"></a>Как определить, синхронизированы ли данные на подписчиках с данными на издателе?  
 Используйте проверку. Проверка сообщает, синхронизирован ли заданный подписчик с издателем. Дополнительные сведения см. в статье [Проверка реплицированных данных](../../../relational-databases/replication/validate-replicated-data.md). Проверка не предоставляет сведений о конкретных строках, которые не были правильно синхронизированы (если таковые имеются), но [программа tablediff](../../../tools/tablediff-utility.md) предоставляет такие сведения.  
  
### <a name="how-do-i-add-a-table-to-an-existing-publication"></a>Как добавить таблицу к существующей публикации?  
 Для добавления таблицы (или другого объекта) к базе данных публикации или подписки не обязательно останавливать операции в ней. Добавьте таблицу в публикацию в диалоговом окне **Свойства публикации — \<публикация>** или с помощью хранимых процедур [sp_addarticle](../../../relational-databases/system-stored-procedures/sp-addarticle-transact-sql.md) и [sp_addmergearticle](../../../relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql.md). Дополнительные сведения см. в статье [Добавление и удаление статей в существующих публикациях](../../../relational-databases/replication/publish/add-articles-to-and-drop-articles-from-existing-publications.md).  
  
### <a name="how-do-i-remove-a-table-from-a-publication"></a>Как удалить таблицу из публикации?  
 Удалите статью из публикации с помощью хранимых процедур [sp_droparticle](../../../relational-databases/system-stored-procedures/sp-droparticle-transact-sql.md), [sp_dropmergearticle](../../../relational-databases/system-stored-procedures/sp-dropmergearticle-transact-sql.md) или диалогового окна **Свойства публикации — \<публикация>**. После добавления подписок невозможно удалить статьи из моментального снимка или публикаций транзакций; вначале следует удалить подписки. Дополнительные сведения см. в статье [Добавление и удаление статей в существующих публикациях](../../../relational-databases/replication/publish/add-articles-to-and-drop-articles-from-existing-publications.md).  
  
### <a name="what-actions-require-subscriptions-to-be-reinitialized"></a>Какие действия требуют повторной инициализации подписок?  
 Существует несколько видов изменений статей и публикаций, которые требуют повторной инициализации подписок. Дополнительные сведения см. в статье [Изменение свойств публикации и статьи](../../../relational-databases/replication/publish/change-publication-and-article-properties.md).  
  
### <a name="what-actions-cause-snapshots-to-be-invalidated"></a>Какие действия приводят к тому, что моментальные снимки становятся недействительными?  
 Существует несколько видов изменений статей и публикаций, которые приводят к тому, что моментальные снимки становятся недействительными, следовательно, требуется создание нового моментального снимка. Дополнительные сведения см. в статье [Изменение свойств публикации и статьи](../../../relational-databases/replication/publish/change-publication-and-article-properties.md).  
  
### <a name="how-do-i-remove-replication"></a>Как удалить репликацию?  
 Действия, необходимые для удаления репликации из базы данных, зависят от того, служила ли база данных в качестве базы данных публикации, базы данных подписки или в качестве обеих баз данных.  
  
### <a name="how-do-i-determine-whether-there-are-transactions-or-rows-to-be-replicated"></a>Как определить наличие транзакций или строк, подлежащих репликации?  
 Для репликации транзакций используйте хранимые процедуры или вкладку **Нераспределенные команды** в мониторе репликации. Дополнительные сведения см. в статьях [Просмотр реплицированных команд и другой информации в базе данных распространителя (программирование репликации на языке Transact-SQL)](../../../relational-databases/replication/monitor/view-replicated-commands-and-information-in-distribution-database.md) и [Просмотр сведений и выполнение задач для агентов, связанных с подпиской (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-subscription-agents.md).  
  
 Для репликации слиянием используйте хранимую процедуру **sp_showpendingchanges**. Дополнительные сведения см. в статье [sp_showpendingchanges (Transact-SQL)](../../../relational-databases/system-stored-procedures/sp-showpendingchanges-transact-sql.md).  
  
### <a name="how-far-behind-is-the-distribution-agent-should-i-reinitialize"></a>Насколько запаздывает агент распространителя? Необходима ли повторная инициализация?  
 Используйте хранимую процедуру **sp_replmonitorsubscriptionpendingcmds** или вкладку **Нераспределенные команды** в мониторе репликации. Сведения, выводимые хранимой процедурой или вкладкой:  
  
-   Количество команд в базе данных распространителя, которые не были доставлены выбранному подписчику. Команда состоит из одной инструкции языка обработки данных (DML) или одной инструкции языка определения данных (DDL) языка Transact-SQL.  
  
-   Примерное количество времени, необходимое для доставки команд на подписчик. Если это значение превышает количество времени, требуемое для создания и применения моментального снимка на подписчике, рассмотрите возможность повторной инициализации подписчика. Дополнительные сведения см. в статье [Повторная инициализация подписок](../../../relational-databases/replication/reinitialize-subscriptions.md).  
  
 Дополнительные сведения см. в статьях [sp_replmonitorsubscriptionpendingcmds (Transact-SQL)](../../../relational-databases/system-stored-procedures/sp-replmonitorsubscriptionpendingcmds-transact-sql.md) и [Просмотр сведений и выполнение задач для агентов, связанных с подпиской (монитор репликации)](../../../relational-databases/replication/monitor/view-information-and-perform-tasks-for-subscription-agents.md).  
  
## <a name="replication-and-other-database-features"></a>Репликация и другие возможности базы данных  
  
### <a name="does-replication-work-in-conjunction-with-log-shipping-and-database-mirroring"></a>Работает ли репликация вместе с зеркальным отображением базы данных и доставкой журналов?  
 Да. Дополнительные сведения см. в статьях [Log Shipping and Replication (SQL Server)](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md) (Репликация и доставка журналов (SQL Server)) и [Database Mirroring and Replication (SQL Server)](../../../database-engine/database-mirroring/database-mirroring-and-replication-sql-server.md) (Зеркальное отображение и репликация баз данных (SQL Server)).  
  
### <a name="does-replication-work-in-conjunction-with-clustering"></a>Работает ли репликация совместно с кластеризацией?  
 Да. Никаких особых действий предпринимать не нужно, поскольку все данные хранятся на одном наборе дисков в кластере.  
  
## <a name="see-also"></a>См. также:  
 [Администрирование (репликация)](../../../relational-databases/replication/administration/administration-replication.md)   
 [Best Practices for Replication Administration](../../../relational-databases/replication/administration/best-practices-for-replication-administration.md)  
  
  
