---
title: "MSSQLSERVER_1418 | Документация Майкрософт"
ms.custom: 
ms.date: 04/04/2017
ms.prod: sql-non-specified
ms.prod_service: database-engine
ms.service: 
ms.component: errors-events
ms.reviewer: 
ms.suite: sql
ms.technology:
- database-engine
ms.tgt_pltfrm: 
ms.topic: language-reference
helpviewer_keywords:
- 1418 (Database Engine error)
ms.assetid: 6e9c7241-0201-44e0-9f8b-b3c4e293f0f6
caps.latest.revision: 24
author: edmacauley
ms.author: edmaca
manager: cguyer
ms.workload: Inactive
ms.translationtype: Human Translation
ms.sourcegitcommit: 2edcce51c6822a89151c3c3c76fbaacb5edd54f4
ms.openlocfilehash: 80c8305668508f5091c6782a964e946c34739b4a
ms.contentlocale: ru-ru
ms.lasthandoff: 06/22/2017

---
# <a name="mssqlserver1418"></a>MSSQLSERVER_1418
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  
## <a name="details"></a>Сведения  
  
|||  
|-|-|  
|Название продукта|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]|  
|Идентификатор события|1418|  
|Источник события|MSSQLSERVER|  
|Компонент|SQLEngine|  
|Символическое имя|DBM_PARTNERNOTFOUND|  
|Текст сообщения|Не удалось подключиться к сетевому адресу «%.*ls» сервера, или адрес не существует. Проверьте имя сетевого адреса и работоспособность портов для локальных и удаленных конечных точек.|  
  
## <a name="explanation"></a>Объяснение  
Сетевая конечная точка сервера не ответила, так как указанный сетевой адрес сервера недоступен или не существует.  
  
> [!NOTE]  
> По умолчанию операционная система [!INCLUDE[msCoName](../../includes/msconame-md.md)] блокирует все порты.  
  
## <a name="user-action"></a>Действие пользователя  
Проверьте имя сетевого адреса и повторите команду.  
  
Действия по исправлению могут потребоваться на обоих участниках. Например, если это сообщение об ошибке появилось при попытке выполнить инструкцию SET PARTNER на экземпляре основного сервера, то может подразумеваться, что действия по исправлению требуются только на экземпляре зеркального сервера. Однако на самом деле их нужно выполнить на обоих участниках.  
  
### <a name="additional-corrective-actions"></a>Дополнительные действия по исправлению  
  
-   Убедитесь, что зеркальная база данных готова к зеркальному отображению.  
  
-   Убедитесь, что имя и порт экземпляра зеркального сервера указаны правильно.  
  
-   Убедитесь, что целевой экземпляр зеркального сервера не защищен брандмауэром.  
  
-   Убедитесь, что экземпляр основного сервера не защищен брандмауэром.  
  
-   По столбцу **state** или **state_desc** представления каталога **sys.database_mirroring_endpoints** проверьте, запущены ли на участниках конечные точки. Если нет, то запустите их с помощью инструкции ALTER ENDPOINT.  
  
-   Убедитесь, что экземпляр основного сервера прослушивает порт, назначенный его конечной точке зеркального отображения базы данных, и что экземпляр зеркального сервера прослушивает свой порт. Дополнительные сведения см. в подразделе «Проверка доступности порта» далее в этом разделе. Если участник не прослушивает назначенный порт, перенастройте конечную точку зеркального отображения на другой порт.  
  
    > [!IMPORTANT]  
    > Неправильно настроенные параметры безопасности могут вызвать сообщение об общей ошибке установки. Обычно экземпляр сервера удаляет неверный запрос на соединение, не отвечая на него. Поэтому вызывающей стороне может показаться, что ошибка настройки безопасности вызвана какими-либо другими причинами (например, неверным состоянием зеркальной базы данных или ее отсутствием, недопустимыми разрешениями и т.д.).  
  
### <a name="using-the-error-log-file-for-diagnosis"></a>Диагностика при помощи журнала ошибок  
В некоторых случаях для изучения доступны только файлы журнала ошибок. В этих условиях следует проверить, содержится ли в журнале ошибок сообщение об ошибке 26023 для порта TCP конечной точки зеркального отображения базы данных. Данная ошибка, уровень серьезности которой равен 16, может указывать на то, что не запущена конечная точка зеркального отображения базы данных. Это сообщение может появиться даже в том случае, если представление каталога **sys.database_mirroring_endpoints** показывает, что конечная точка работает.  
  
После устранения всех проблем повторно выполните на основном сервере команду ALTER DATABASE *имя_базы_данных* SET PARTNER.  
  
### <a name="verifying-port-availability"></a>Проверка доступности порта  
При настройке сети для сеанса зеркального отображения базы данных убедитесь, что конечная точка зеркального отображения на каждом экземпляре сервера используется только процессом зеркального отображения. Если порт, назначенный зеркальному отображению базы данных, прослушивается другим процессом, то процессы зеркального отображения других экземпляров сервера не смогут подключиться к этой конечной точке.  
  
Для отображения всех портов, которые прослушивает сервер Windows, можно воспользоваться программой командной строки **netstat**. Синтаксис программы **netstat** зависит от версии операционной системы Windows. Дополнительные сведения см. в документации по операционной системе.  
  
#### <a name="windows-server-2003-service-pack-1-sp1"></a>Windows Server 2003 с пакетом обновления 1 (SP1)  
Для просмотра прослушиваемых портов и открывших их процессов введите в командной строке Windows следующую команду:  
  
**netstat -abn**  
  
#### <a name="windows-server-2003-pre-sp1"></a>Windows Server 2003 (до пакета обновления SP1)  
Для просмотра прослушиваемых портов и открывших их процессов выполните следующие действия.  
  
1.  Получите идентификатор процесса.  
  
    Чтобы получить идентификатор процесса для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], подключитесь к экземпляру и выполните следующую инструкцию [!INCLUDE[tsql](../../includes/tsql-md.md)].  
  
    ```  
    SELECT SERVERPROPERTY('ProcessID')   
    ```  
  
    Дополнительные сведения см. в разделе «SERVERPROPERTY (Transact-SQL)» электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
2.  Сопоставьте идентификатор процесса с данными, полученными командой **netstat**:  
  
    **netstat -ano**  
  
## <a name="see-also"></a>См. также:  
[ALTER ENDPOINT (Transact-SQL)](~/t-sql/statements/alter-endpoint-transact-sql.md)  
[Конечная точка зеркального отображения базы данных (SQL Server)](~/database-engine/database-mirroring/the-database-mirroring-endpoint-sql-server.md)  
[Подготовка зеркальной базы данных к зеркальному отображению (SQL Server)](~/database-engine/database-mirroring/prepare-a-mirror-database-for-mirroring-sql-server.md)  
[SERVERPROPERTY (Transact-SQL)](~/t-sql/functions/serverproperty-transact-sql.md)  
[Указание сетевого адреса сервера (зеркальное отображение базы данных)](~/database-engine/database-mirroring/specify-a-server-network-address-database-mirroring.md)  
[sys.database_mirroring_endpoints (Transact-SQL)](~/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql.md)  
[Устранение неполадок в конфигурации зеркального отображения базы данных (SQL Server)](~/database-engine/database-mirroring/troubleshoot-database-mirroring-configuration-sql-server.md)  
  

