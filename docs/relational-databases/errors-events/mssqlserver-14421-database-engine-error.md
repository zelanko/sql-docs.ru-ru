---
title: "MSSQLSERVER_14421 | Документация Майкрософт"
ms.custom: 
ms.date: 04/04/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology: database-engine
ms.tgt_pltfrm: 
ms.topic: language-reference
helpviewer_keywords: 14421 (Database Engine error)
ms.assetid: 03e76d4a-d463-4673-8843-08e4ecaefe27
caps.latest.revision: "23"
author: edmacauley
ms.author: edmaca
manager: cguyer
ms.workload: Inactive
ms.openlocfilehash: 5c1997078811628f8a7088f59f0d7d0fe7a414cc
ms.sourcegitcommit: 9678eba3c2d3100cef408c69bcfe76df49803d63
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2017
---
# <a name="mssqlserver14421"></a>MSSQLSERVER_14421
  
## <a name="details"></a>Сведения  
  
|||  
|-|-|  
|Название продукта|SQL Server|  
|Идентификатор события|14421|  
|Источник события|MSSQLSERVER|  
|Компонент|SQLEngine|  
|Символическое имя|SQLErrorNum14421|  
|Текст сообщения|Для базы данных-получателя в конфигурации доставки журналов %s.%s установлен порог резервного копирования %d минут, нарушена синхронизация.   Восстановление не проводилось в течение %d минут. Задержка восстановления равна %d минутам. Проверьте журнал агента и сведения монитора доставки журналов.|  
  
## <a name="explanation"></a>Объяснение  
Это сообщение указывает, что доставка журналов не синхронизирована за порогом восстановления. Порог восстановления определяется как число минут, которое может пройти между операциями восстановления до того, как будет сформировано сообщение.  
  
### <a name="possible-causes"></a>Возможные причины  
Это сообщение не обязательно свидетельствует о проблеме с доставкой журналов. Оно может указывать на одну из следующих неполадок.  
  
-   Задание восстановления не выполняется.  
  
    Возможные причины: служба агента SQL Server на экземпляре сервера-получателя не работает, задание отключено, или было изменено расписание задания.  
  
-   Ошибка задания восстановления.  
  
    Возможные причины: неправильный путь к папке восстановления, диск заполнен или любая другая причина, из-за которой инструкция RESTORE может завершиться неуспешно.  
  
## <a name="user-action"></a>Действие пользователя  
Чтобы устранить неполадку, выполните следующее.  
  
-   Удостоверьтесь, что служба «агент SQL Server» на экземпляре сервера-получателя работает, и что задание восстановления в базе данных-получателе включено и выполняется по расписанию с подходящей частотой.  
  
-   Возможно, произошла ошибка задания восстановления на сервере-получателе. В этом случае проверьте журнал заданий восстановления, чтобы попытаться найти ошибку.  
  
-   Заданию восстановления доставки журналов, выполняющемуся на экземпляре сервера-получателя, не удается подключиться к экземпляру сервера мониторинга для обновления таблицы **log_shipping_monitor_secondary**. Причиной этого может быть проблема проверки подлинности между экземпляром сервера мониторинга и экземпляром сервера-получателя.  
  
-   Неправильное пороговое значение предупреждения резервного копирования. В идеальном случае это значение должно быть минимум в три раза больше частоты запуска задания восстановления. Если частота запуска задания восстановления изменяется после настройки доставки журналов, когда она уже успешно работает, необходимо соответствующим образом обновить пороговое значение предупреждения резервного копирования.  
  
-   Когда экземпляр сервера мониторинга переходит в режим "вне сети", а затем снова в режим "в сети", в таблице **log_shipping_monitor_secondary** не отображаются текущие значения до тех пор, пока не будет выполнено задание предупреждения. Ошибка 14421 может произойти после успешного завершения задания восстановления с сообщением «Не удалось найти файл резервной копии журнала, который можно использовать для базы данных-получателя». В этом случае время восстановления не обновляется. Причиной ошибки в этом случае может быть проблема, связанная с заданием копирования.  
  
    Чтобы таблицы мониторинга получили новейшие данные из базы данных-получателя, выполните процедуру **sp_refresh_log_shipping_monitor** на экземпляре сервера-получателя.  
  
-   На экземпляре сервера-получателя или сервера мониторинга установлена неправильная дата или время. При этом также могут формироваться предупреждения. Вероятно, была изменена системная дата или время на одном из этих серверов.  
  
    > [!NOTE]  
    > Разные часовые пояса на двух экземплярах серверов не должны быть причиной проблемы.  
  
## <a name="see-also"></a>См. также:  
[log_shipping_monitor_secondary (Transact-SQL)](~/relational-databases/system-tables/log-shipping-monitor-secondary-transact-sql.md)  
[Сведения о доставке журналов (SQL Server)](~/database-engine/log-shipping/about-log-shipping-sql-server.md)  
[sp_help_log_shipping_monitor_secondary (Transact-SQL)](~/relational-databases/system-stored-procedures/sp-help-log-shipping-monitor-secondary-transact-sql.md)  
[sp_refresh_log_shipping_monitor (Transact-SQL)](~/relational-databases/system-stored-procedures/sp-help-log-shipping-monitor-transact-sql.md)  
[Сведения о доставке журналов (SQL Server)](~/database-engine/log-shipping/about-log-shipping-sql-server.md)  
  
