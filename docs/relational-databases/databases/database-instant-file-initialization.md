---
title: "Мгновенная инициализация файлов базы данных | Документация Майкрософт"
ms.custom: 
ms.date: 08/15/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- database-engine
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- initializing files [SQL Server]
- instant file initializations [SQL Server]
- fast file initialization (SQL Server)
- file initialization [SQL Server]
ms.assetid: 1ad468f5-4f75-480b-aac6-0b01b048bd67
caps.latest.revision: 33
author: BYHAM
ms.author: rickbyh
manager: jhubbard
ms.workload: Active
ms.translationtype: HT
ms.sourcegitcommit: 4d56a0bb3893d43943478c6d5addb719ea32bd10
ms.openlocfilehash: 8535e2dd63e3842d249c3cc4a90654a3648f51b3
ms.contentlocale: ru-ru
ms.lasthandoff: 08/16/2017

---
# <a name="database-instant-file-initialization"></a>Мгновенная инициализация файлов базы данных
  Файлы данных и журналов инициализируются, чтобы перезаписать все существующие данные на диске, оставшиеся после удаленных файлов. Файлы данных и журналов сначала инициализируются с помощью заполнения нулями при выполнении одной из следующих операций.  
  
-   Создание базы данных.  
  
-   Добавление файлов данных и журналов к существующей базе данных.  
  
-   Увеличение размера существующего файла (включая операции автоувеличения).  
  
-   Восстановление базы данных или файловой группы.  
  
 Вследствие инициализации файлов эти операции занимают больше времени. Однако, если данные записываются в файлы первый раз, операционной системе не требуется заполнять файлы нулями.  
  
## <a name="instant-file-initialization"></a>Мгновенная инициализация файлов  
 В [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]файлы данных могут быть инициализированы мгновенно. Мгновенная инициализация файлов позволяет быстро выполнять упомянутые ранее файловые операции. Мгновенная инициализация файлов освобождает место на диске, не заполняя пространство нулями. Вместо этого содержимое диска перезаписывается, поскольку в файлы записываются новые данные. Файлы журналов не могут быть инициализированы мгновенно.  
  
> [!NOTE]  
>  Мгновенная инициализация файлов доступна только в [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[winxppro](../../includes/winxppro-md.md)] , [!INCLUDE[winxpsvr](../../includes/winxpsvr-md.md)] или более поздних версиях.  
  
 Мгновенная инициализация файлов доступна, только если учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (MSSQLSERVER) предоставлено разрешение SE_MANAGE_VOLUME_NAME. Участники группы администраторов Windows обладают этим правом и могут предоставить его другим пользователям, добавив их в политику безопасности **Выполнение задач обслуживания томов** . Дополнительные сведения о назначении прав пользователей см. в документации по Windows.  
  
Некоторые условия, например прозрачное шифрование данных, могут не допускать мгновенной инициализации файлов.  
  
 Предоставление учетной записи разрешения `Perform volume maintenance tasks` .  
  
1.  На компьютере, где будет создан файл резервной копии, откройте приложение **Local Security Policy** (`secpol.msc`).  
  
2.  Разверните на левой панели узел **Локальные политики**, а затем щелкните пункт **Назначение прав пользователей**.  
  
3.  На правой панели дважды щелкните **Выполнение задач по обслуживанию томов**.  
  
4.  Щелкните кнопку **Добавить пользователя или группу** и добавьте любые учетные записи пользователя, которые использовались для резервного копирования.  
  
5.  Нажмите кнопку **Применить**и закройте все диалоговые окна **Локальная политика безопасности** .  
  
### <a name="security-considerations"></a>Вопросы безопасности  
 Поскольку удаленное содержимое диска перезаписывается только по мере записи новых данных в файлы, доступ к удаленному содержимому может получить неавторизованный участник. По мере подключения файла базы данных к экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]угроза раскрытия сведений уменьшается благодаря списку управления доступом на уровне пользователей (DACL) в файле. DACL разрешает доступ к файлу только учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и локальному администратору. Однако при отсоединении файла доступ к нему может получить пользователь или служба, не обладающие правом SE_MANAGE_VOLUME_NAME. Аналогичная угроза существует при резервном копировании базы данных. Если файл резервной копии не защищен с помощью соответствующего DACL, удаленное содержимое может стать доступным неавторизованному пользователю или службе.  
  
 Если вероятность раскрытия удаленного содержимого является серьезной проблемой, необходимо выполнить одно следующее действие или оба.  
  
-   Всегда проверяйте, что все отсоединенные файлы данных и резервные копии имеют ограничивающие DACL.  
  
-   Отключите мгновенную инициализацию файлов для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , отозвав право SE_MANAGE_VOLUME_NAME учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
> [!NOTE]  
>  Отключение мгновенной инициализации файлов влияет только на создаваемые или увеличивающиеся в размере файлы после отзыва прав пользователя.  
  
## <a name="see-also"></a>См. также:  
 [CREATE DATABASE (SQL Server Transact-SQL)](../../t-sql/statements/create-database-sql-server-transact-sql.md)  
  
  

