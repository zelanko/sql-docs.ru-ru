---
title: Анализ фактического плана выполнения | Документация Майкрософт
ms.custom: ''
ms.date: 10/11/2019
ms.prod: sql
ms.prod_service: database-engine, sql-database
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- analyzing execution plans
- analyzing actual execution plans
- execution plans [SQL Server], analyzing
ms.assetid: 9e583a18-5f4a-4054-bfe1-4b2a76630db6
author: pmasl
ms.author: pelopes
manager: amitban
ms.openlocfilehash: 089cc2fd9a2131ab18fea01262f9bc0d476355e4
ms.sourcegitcommit: da88320c474c1c9124574f90d549c50ee3387b4c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2020
ms.locfileid: "85773144"
---
# <a name="analyze-an-actual-execution-plan"></a>Анализ фактического плана выполнения

 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]

В этой статье описывается, как можно анализировать фактические графические планы выполнения с использованием функции анализа плана [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Эта функция доступна начиная с [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] версии 17.4. Обычно мы рекомендуем [установить последнюю версию SSMS](../../ssms/download-sql-server-management-studio-ssms.md).

> [!NOTE]
> Фактические планы выполнения создаются после выполнения запросов или пакетов [!INCLUDE[tsql](../../includes/tsql-md.md)]. Поэтому фактический план выполнения содержит сведения о времени выполнения, такие как фактическое число строк, фактические метрики использования ресурса и предупреждения времени выполнения (если они есть). Дополнительные сведения см. в статье [Отображение фактического плана выполнения](../../relational-databases/performance/display-an-actual-execution-plan.md).
  
Чтобы действительно находить и устранять основные причины возникновения проблем с производительностью запросов, требуется значительный опыт в области понимания планов выполнения и принципов обработки запросов.

[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] содержит возможность, которая в определенной степени позволяет автоматизировать задачу анализа фактического плана выполнения, что особенно полезно при работе с большими и сложными планами. Целью является упрощение поиска сценариев неточной [оценки кратности](../../relational-databases/performance/cardinality-estimation-sql-server.md) и получение рекомендаций, содержащих возможные варианты исправлений.

> [!IMPORTANT]
> Сначала необходимо должным образом проверить предложенные способы, и только после этого реализовывать их в рабочих средах.
  
## <a name="to-analyze-an-execution-plan-for-a-query"></a>Анализ плана выполнения для запроса  
  
1.  Откройте ранее сохраненный файл плана выполнения запроса (SQLPLAN) в меню **Файл**, **Открыть файл**, или перетащите файл плана в окно [!INCLUDE[ssManStudio](../../includes/ssManStudio-md.md)]. Кроме того, если вы только что выполнили запрос и выбрали показать его план выполнения, перейдите на вкладку **План выполнения** на панели результатов. 

2.  Щелкните правой кнопкой мыши в пустой области плана выполнения и выберите пункт **Анализировать фактический план выполнения**. 

    ![Анализ фактического плана выполнения щелчком правой кнопки](../../relational-databases/performance/media/plananalysismenuoption.png "Анализ фактического плана выполнения щелчком правой кнопки")   

3.  В нижней части откроется окно **Анализ Showplan**. Вкладка **Несколько операторов** полезна при анализе планов с несколькими операторами, поскольку позволяет анализировать правильную пару операторов.

4.  Перейдите на вкладку "Сценарии" для просмотра сведений о проблемах, обнаруженных для фактического плана выполнения. Для каждого оператора, указанного на левой панели, на правой панели отображаются сведения о сценарии по ссылке *Щелкните здесь, чтобы ближе познакомиться с этим сценарием.* , а также возможные причины, объясняющие этот сценарий.

    ![Результаты анализа плана выполнения](../../relational-databases/performance/media/plananalysis-scenarios.png "Результаты анализа плана выполнения") 
