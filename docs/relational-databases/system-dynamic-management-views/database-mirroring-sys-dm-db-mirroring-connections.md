---
title: sys.dm_db_mirroring_connections (Transact-SQL) | Документы Microsoft
ms.custom: ''
ms.date: 03/15/2017
ms.prod: sql
ms.prod_service: database-engine
ms.service: ''
ms.component: dmv's
ms.reviewer: ''
ms.suite: sql
ms.technology:
- database-engine
ms.tgt_pltfrm: ''
ms.topic: language-reference
f1_keywords:
- sys.dm_db_mirroring_connections
- dm_db_mirroring_connections
- sys.dm_db_mirroring_connections_TSQL
- dm_db_mirroring_connections_TSQL
dev_langs:
- TSQL
helpviewer_keywords:
- sys.dm_db_mirroring_connections dynamic management view
ms.assetid: e4df91b6-0240-45d0-ae22-cb2c0d52e0b3
caps.latest.revision: 41
author: stevestein
ms.author: sstein
manager: craigg
ms.openlocfilehash: a89678342234f6ff88ba67687f4b81900e7cf733
ms.sourcegitcommit: 2ddc0bfb3ce2f2b160e3638f1c2c237a898263f4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
---
# <a name="database-mirroring---sysdmdbmirroringconnections"></a>Зеркальное отображение — базы данных sys.dm_db_mirroring_connections
[!INCLUDE[tsql-appliesto-ss2008-xxxx-xxxx-xxx-md](../../includes/tsql-appliesto-ss2008-xxxx-xxxx-xxx-md.md)]

  Возвращает строку для каждого установленного соединения зеркального отображения базы данных.  
  
|Имя столбца|Тип данных|Описание|  
|-----------------|---------------|-----------------|  
|**connection_id**|**uniqueidentifier**|Идентификатор соединения.|  
|**transport_stream_id**|**uniqueidentifier**|Идентификатор [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] подключения сетевой интерфейс (SNI), используемый для этого подключения по протоколу TCP/IP.|  
|**state**|**smallint**|Текущее состояние соединения. Возможные значения:<br /><br /> 1 = NEW<br /><br /> 2 = CONNECTING<br /><br /> 3 = CONNECTED<br /><br /> 4 = LOGGED_IN<br /><br /> 5 = ЗАКРЫТ|  
|**state_desc**|**nvarchar(60)**|Текущее состояние соединения. Возможные значения:<br /><br /> NEW<br /><br /> CONNECTING<br /><br /> CONNECTED<br /><br /> LOGGED_IN<br /><br /> CLOSED|  
|**connect_time**|**datetime**|Дата и время открытия соединения.|  
|**login_time**|**datetime**|Дата и время успешного входа для соединения.|  
|**authentication_method**|**nvarchar(128)**|Имя метода проверки подлинности Windows (например, NTLM или KERBEROS). Значение берется из Windows.|  
|**principal_name**|**nvarchar(128)**|Имя входа, у которого были проверены разрешения на соединение. В случае проверки подлинности Windows это значение равно имени удаленного пользователя. Для проверки подлинности сертификата это владелец сертификата.|  
|**remote_user_name**|**nvarchar(128)**|Имя равноправного пользователя из другой базы данных, использованное службой проверки подлинности Windows.|  
|**last_activity_time**|**datetime**|Дата и время последней отправки или приема данных через это соединение.|  
|**is_accept**|**бит**|Указывает, исходит ли соединение с удаленной стороны.<br /><br /> 1 = соединение является запросом, принятым от удаленного экземпляра.<br /><br /> 0 = соединение было инициировано локальным экземпляром.|  
|**login_state**|**smallint**|Состояние процесса входа в систему для данного соединения. Возможные значения:<br /><br /> 0 = INITIAL<br /><br /> 1 = WAIT LOGIN NEGOTIATE<br /><br /> 2 = ONE ISC<br /><br /> 3 = ONE ASC<br /><br /> 4 = TWO ISC<br /><br /> 5 = TWO ASC<br /><br /> 6 = WAIT ISC Confirm<br /><br /> 7 = WAIT ASC Confirm<br /><br /> 8 = WAIT REJECT<br /><br /> 9 = WAIT PRE-MASTER SECRET<br /><br /> 10 = WAIT VALIDATION<br /><br /> 11 = WAIT ARBITRATION<br /><br /> 12 = ЧЕРЕЗ ИНТЕРНЕТ<br /><br /> 13 = ERROR|  
|**login_state_desc**|**nvarchar(60)**|Текущее состояние входа в систему с удаленного компьютера. Возможные значения:<br /><br /> Инициализируется подтверждение соединения.<br /><br /> Подтверждение соединения ожидает сообщения согласования входа.<br /><br /> Подтверждение соединения инициализировало и отправило контекст безопасности для проверки подлинности.<br /><br /> Подтверждение соединения получило и приняло контекст безопасности для проверки подлинности.<br /><br /> Подтверждение соединения инициализировало и отправило контекст безопасности для проверки подлинности. Существует дополнительный механизм для проверки подлинности сторон.<br /><br /> Подтверждение соединения получило и отправило принятый контекст безопасности для проверки подлинности. Существует дополнительный механизм для проверки подлинности сторон.<br /><br /> Подтверждение соединения ожидает сообщения инициализации подтверждения контекста безопасности.<br /><br /> Подтверждение соединения ожидает сообщения принятия подтверждения контекста безопасности.<br /><br /> Подтверждение соединения ожидает сообщения отклонения SSPI для ошибки проверки подлинности.<br /><br /> Подтверждение соединения ожидает сообщения предварительного главного секретного кода.<br /><br /> Подтверждение соединения ожидает сообщения проверки.<br /><br /> Подтверждение соединения ожидает сообщения разрешения конфликта.<br /><br /> Подтверждение соединения завершено и готово к обмену сообщениями.<br /><br /> Ошибка соединения.|  
|**peer_certificate_id**|**int**|Идентификатор локального объекта сертификата, который используется удаленным экземпляром для проверки подлинности. Владелец сертификата должен обладать разрешением CONNECT для доступа к конечной точке зеркального отображения базы данных.|  
|**encryption_algorithm**|**smallint**|Алгоритм шифрования, применяемый для данного соединения. Допускает значение NULL. Возможные значения:<br /><br /> **Значение:** 0<br /><br /> **Описание:** None<br /><br /> **Параметр DDL:** отключено<br /><br /> **Значение:** 1<br /><br /> **Описание:** RC4<br /><br /> **Параметр DDL:** {необходимые &#124; требуется алгоритм RC4}<br /><br /> **Значение:** 2<br /><br /> **Описание:** AES<br /><br /> **Параметр DDL:** требуется алгоритм AES<br /><br /> **Значение:** 3<br /><br /> **Описание:** None, RC4<br /><br /> **Параметр DDL:** {поддерживаемые &#124; поддерживается алгоритм RC4}<br /><br /> **Значение:** 4<br /><br /> **Описание:** none, AES<br /><br /> **Параметр DDL:** поддерживается алгоритм RC4<br /><br /> **Значение:** 5<br /><br /> **Описание:** RC4, AES<br /><br /> **Параметр DDL:** требуется алгоритм RC4 AES<br /><br /> **Значение:** 6<br /><br /> **Описание:** AES, RC4<br /><br /> **Параметр DDL:** требуется алгоритм AES RC4<br /><br /> **Значение:** 7<br /><br /> **Описание:** NONE, RC4, AES<br /><br /> **Параметр DDL:** поддерживается алгоритм RC4 AES<br /><br /> **Значение:** 8<br /><br /> **Описание:** NONE, AES, RC4<br /><br /> **Параметр DDL:** поддерживается алгоритм AES RC4<br /><br /> **Примечание:** алгоритм RC4 поддерживается только для обеспечения обратной совместимости. Когда база данных имеет уровень совместимости 90 или 100, новые материалы могут шифроваться только с помощью алгоритмов RC4 или RC4_128. (Не рекомендуется.) Используйте вместо этого более новые алгоритмы, например AES. В [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и более поздних версиях материалы, зашифрованные с помощью алгоритмов RC4 или RC4_128, могут быть расшифрованы на любом уровне совместимости.|  
|**encryption_algorithm_desc**|**nvarchar(60)**|Текстовое представление алгоритма шифрования. Допускает значение NULL. Возможные значения:<br /><br /> **Описание:** None<br /><br /> **Параметр DDL:** отключено<br /><br /> **Описание:** RC4<br /><br /> **Параметр DDL:** {необходимые &#124; требуется алгоритм RC4}<br /><br /> **Описание:** AES<br /><br /> **Параметр DDL:** требуется алгоритм AES<br /><br /> **Описание:** NONE, RC4<br /><br /> **Параметр DDL:** {поддерживается &#124; поддерживается алгоритм RC4}<br /><br /> **Описание:** NONE, AES<br /><br /> **Параметр DDL:** поддерживается алгоритм RC4<br /><br /> **Описание:** RC4, AES<br /><br /> **Параметр DDL:** требуется алгоритм RC4 AES<br /><br /> **Описание:** AES, RC4<br /><br /> **Параметр DDL:** требуется алгоритм AES RC4<br /><br /> **Описание:** NONE, RC4, AES<br /><br /> **Параметр DDL:** поддерживается алгоритм RC4 AES<br /><br /> **Описание:** NONE, AES, RC4<br /><br /> **Параметр DDL:** поддерживается алгоритм AES RC4|  
|**receives_posted**|**smallint**|Количество асинхронных сетевых операций приема, которые не завершены в данном соединении.|  
|**is_receive_flow_controlled**|**бит**|Показывает наличие сетевых операций приема, отсроченных элементами управления потоком из-за того, что сеть занята.<br /><br /> 1 = True|  
|**sends_posted**|**smallint**|Количество запрошенных, но незавершенных сетевых операций отправки для данного соединения.|  
|**is_send_flow_controlled**|**бит**|Показывает наличие операций отправки, отсроченных элементами управления потоком из-за того, что сеть занята.<br /><br /> 1 = True|  
|**total_bytes_sent**|**bigint**|Суммарное число байтов, переданных данным соединением.|  
|**total_bytes_received**|**bigint**|Суммарное число байтов, принятых данным соединением.|  
|**total_fragments_sent**|**bigint**|Общее количество фрагментов сообщений зеркального отображения базы данных, переданных данным соединением.|  
|**total_fragments_received**|**bigint**|Общее количество фрагментов сообщений зеркального отображения базы данных, принятых данным соединением.|  
|**total_sends**|**bigint**|Суммарное число сетевых запросов на передачу, сформированных данным соединением.|  
|**total_receives**|**bigint**|Суммарное число сетевых запросов на прием, сформированных данным соединением.|  
|**peer_arbitration_id**|**uniqueidentifier**|Внутренний идентификатор для конечной точки. Допускает значение NULL.|  
  
## <a name="permissions"></a>Разрешения  
 необходимо разрешение VIEW SERVER STATE на сервере.  
  
## <a name="physical-joins"></a>Физические соединения  
 ![соединение для sys.join_dm_db_mirroring_connections](../../relational-databases/system-dynamic-management-views/media/join-dm-db-mirroring-connections.gif "соединение для sys.join_dm_db_mirroring_connections")  
  
## <a name="relationship-cardinalities"></a>Количество элементов связей  
  
|От|Чтобы|Связь|  
|----------|--------|------------------|  
|**dm_db_mirroring_connections.connection_id**|**dm_exec_connections.connection_id**|Один к одному|  
  
## <a name="see-also"></a>См. также  
 [Динамические административные представления и функции (Transact-SQL)](~/relational-databases/system-dynamic-management-views/system-dynamic-management-views.md)   
 [Наблюдение за зеркальным отображением базы данных (SQL Server)](../../database-engine/database-mirroring/monitoring-database-mirroring-sql-server.md)  
  
  
