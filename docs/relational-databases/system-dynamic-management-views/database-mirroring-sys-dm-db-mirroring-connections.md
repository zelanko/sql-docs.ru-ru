---
title: sys. dm_db_mirroring_connections (Transact-SQL) | Документация Майкрософт
ms.custom: ''
ms.date: 03/15/2017
ms.prod: sql
ms.reviewer: ''
ms.technology: system-objects
ms.topic: language-reference
f1_keywords:
- sys.dm_db_mirroring_connections
- dm_db_mirroring_connections
- sys.dm_db_mirroring_connections_TSQL
- dm_db_mirroring_connections_TSQL
dev_langs:
- TSQL
helpviewer_keywords:
- sys.dm_db_mirroring_connections dynamic management view
ms.assetid: e4df91b6-0240-45d0-ae22-cb2c0d52e0b3
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 223b940f9568c764885ab214278fc97928cc1b7f
ms.sourcegitcommit: f7ac1976d4bfa224332edd9ef2f4377a4d55a2c9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85894709"
---
# <a name="database-mirroring---sysdm_db_mirroring_connections"></a>Зеркальное отображение базы данных — sys. dm_db_mirroring_connections
[!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]

  Возвращает строку для каждого установленного соединения зеркального отображения базы данных.  
  
|Имя столбца|Тип данных|Описание|  
|-----------------|---------------|-----------------|  
|**connection_id**|**uniqueidentifier**|Идентификатор соединения.|  
|**transport_stream_id**|**uniqueidentifier**|Идентификатор [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] подключения сетевого интерфейса (SNI), используемого этим подключением для обмена данными по протоколу TCP/IP.|  
|**state**|**smallint**|Текущее состояние соединения. Возможные значения:<br /><br /> 1 = NEW<br /><br /> 2 = CONNECTING<br /><br /> 3 = CONNECTED<br /><br /> 4 = LOGGED_IN<br /><br /> 5 = ЗАКРЫТО|  
|**state_desc**|**nvarchar(60)**|Текущее состояние соединения. Возможные значения:<br /><br /> NEW<br /><br /> CONNECTING<br /><br /> CONNECTED<br /><br /> LOGGED_IN<br /><br /> CLOSED|  
|**connect_time**|**datetime**|Дата и время открытия соединения.|  
|**login_time**|**datetime**|Дата и время успешного входа для соединения.|  
|**authentication_method**|**nvarchar(128)**|Имя метода проверки подлинности Windows (например, NTLM или KERBEROS). Значение берется из Windows.|  
|**principal_name**|**nvarchar(128)**|Имя входа, у которого были проверены разрешения на соединение. В случае проверки подлинности Windows это значение равно имени удаленного пользователя. Для проверки подлинности сертификата это владелец сертификата.|  
|**remote_user_name**|**nvarchar(128)**|Имя равноправного пользователя из другой базы данных, использованное службой проверки подлинности Windows.|  
|**last_activity_time**|**datetime**|Дата и время последней отправки или приема данных через это соединение.|  
|**is_accept**|**bit**|Указывает, исходит ли соединение с удаленной стороны.<br /><br /> 1 = соединение является запросом, принятым от удаленного экземпляра.<br /><br /> 0 = соединение было инициировано локальным экземпляром.|  
|**login_state**|**smallint**|Состояние процесса входа в систему для данного соединения. Возможные значения:<br /><br /> 0 = INITIAL<br /><br /> 1 = WAIT LOGIN NEGOTIATE<br /><br /> 2 = ONE ISC<br /><br /> 3 = ONE ASC<br /><br /> 4 = TWO ISC<br /><br /> 5 = TWO ASC<br /><br /> 6 = WAIT ISC Confirm<br /><br /> 7 = WAIT ASC Confirm<br /><br /> 8 = WAIT REJECT<br /><br /> 9 = WAIT PRE-MASTER SECRET<br /><br /> 10 = WAIT VALIDATION<br /><br /> 11 = WAIT ARBITRATION<br /><br /> 12 = В СЕТИ<br /><br /> 13 = ERROR|  
|**login_state_desc**|**nvarchar(60)**|Текущее состояние входа в систему с удаленного компьютера. Возможные значения:<br /><br /> Инициализируется подтверждение соединения.<br /><br /> Подтверждение соединения ожидает сообщения согласования входа.<br /><br /> Подтверждение соединения инициализировало и отправило контекст безопасности для проверки подлинности.<br /><br /> Подтверждение соединения получило и приняло контекст безопасности для проверки подлинности.<br /><br /> Подтверждение соединения инициализировало и отправило контекст безопасности для проверки подлинности. Существует дополнительный механизм для проверки подлинности сторон.<br /><br /> Подтверждение соединения получило и отправило принятый контекст безопасности для проверки подлинности. Существует дополнительный механизм для проверки подлинности сторон.<br /><br /> Подтверждение соединения ожидает сообщения инициализации подтверждения контекста безопасности.<br /><br /> Подтверждение соединения ожидает сообщения принятия подтверждения контекста безопасности.<br /><br /> Подтверждение соединения ожидает сообщения отклонения SSPI для ошибки проверки подлинности.<br /><br /> Подтверждение соединения ожидает сообщения предварительного главного секретного кода.<br /><br /> Подтверждение соединения ожидает сообщения проверки.<br /><br /> Подтверждение соединения ожидает сообщения разрешения конфликта.<br /><br /> Подтверждение соединения завершено и готово к обмену сообщениями.<br /><br /> Ошибка соединения.|  
|**peer_certificate_id**|**int**|Идентификатор локального объекта сертификата, который используется удаленным экземпляром для проверки подлинности. Владелец сертификата должен обладать разрешением CONNECT для доступа к конечной точке зеркального отображения базы данных.|  
|**encryption_algorithm**|**smallint**|Алгоритм шифрования, применяемый для данного соединения. Допускает значение NULL. Возможные значения:<br /><br /> **Значение:** 0<br /><br /> **Описание:** None<br /><br /> **Параметр DDL:** Доступ<br /><br /> **Значение:** 1<br /><br /> **Описание:** RC4<br /><br /> **Параметр DDL:** {Required &#124; требуемый алгоритм RC4}<br /><br /> **Значение:** 2<br /><br /> **Описание:** AES<br /><br /> **Параметр DDL:** Требуемый алгоритм AES<br /><br /> **Значение:** 3<br /><br /> **Описание:** Нет, RC4<br /><br /> **Параметр DDL:** {supported &#124; поддерживаемый алгоритм RC4}<br /><br /> **Значение:** 4<br /><br /> **Описание:** нет, AES<br /><br /> **Параметр DDL:** Поддерживаемый алгоритм RC4<br /><br /> **Значение:** 5<br /><br /> **Описание:** RC4, AES<br /><br /> **Параметр DDL:** Требуемый алгоритм RC4 AES<br /><br /> **Значение:** 6<br /><br /> **Описание:** AES, RC4<br /><br /> **Параметр DDL:** Требуемый алгоритм AES RC4<br /><br /> **Значение:** 7<br /><br /> **Описание:** NONE, RC4, AES<br /><br /> **Параметр DDL:** Поддерживаемый алгоритм RC4 AES<br /><br /> **Значение:** 8<br /><br /> **Описание:** НЕТ, AES, RC4<br /><br /> **Параметр DDL:** Поддерживаемый алгоритм AES RC4<br /><br /> **Примечание.** Алгоритм RC4 поддерживается только в целях обратной совместимости. Когда база данных имеет уровень совместимости 90 или 100, новые материалы могут шифроваться только с помощью алгоритмов RC4 или RC4_128. (Не рекомендуется.) Используйте вместо этого более новые алгоритмы, например AES. В [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и более поздних версиях материалы, зашифрованные с помощью алгоритмов RC4 или RC4_128, могут быть расшифрованы на любом уровне совместимости.|  
|**encryption_algorithm_desc**|**nvarchar(60)**|Текстовое представление алгоритма шифрования. Допускает значение NULL. Возможные значения:<br /><br /> **Описание:** None<br /><br /> **Параметр DDL:** Доступ<br /><br /> **Описание:** RC4<br /><br /> **Параметр DDL:** {Required &#124; требуемый алгоритм RC4}<br /><br /> **Описание:** AES<br /><br /> **Параметр DDL:** Требуемый алгоритм AES<br /><br /> **Описание:** НЕТ, RC4<br /><br /> **Параметр DDL:** {supported &#124; поддерживаемый алгоритм RC4}<br /><br /> **Описание:** НЕТ, AES<br /><br /> **Параметр DDL:** Поддерживаемый алгоритм RC4<br /><br /> **Описание:** RC4, AES<br /><br /> **Параметр DDL:** Требуемый алгоритм RC4 AES<br /><br /> **Описание:** AES, RC4<br /><br /> **Параметр DDL:** Требуемый алгоритм AES RC4<br /><br /> **Описание:** NONE, RC4, AES<br /><br /> **Параметр DDL:** Поддерживаемый алгоритм RC4 AES<br /><br /> **Описание:** НЕТ, AES, RC4<br /><br /> **Параметр DDL:** Поддерживаемый алгоритм AES RC4|  
|**receives_posted**|**smallint**|Количество асинхронных сетевых операций приема, которые не завершены в данном соединении.|  
|**is_receive_flow_controlled**|**bit**|Показывает наличие сетевых операций приема, отсроченных элементами управления потоком из-за того, что сеть занята.<br /><br /> 1 = истина|  
|**sends_posted**|**smallint**|Количество запрошенных, но незавершенных сетевых операций отправки для данного соединения.|  
|**is_send_flow_controlled**|**bit**|Показывает наличие операций отправки, отсроченных элементами управления потоком из-за того, что сеть занята.<br /><br /> 1 = истина|  
|**total_bytes_sent**|**bigint**|Суммарное число байтов, переданных данным соединением.|  
|**total_bytes_received**|**bigint**|Суммарное число байтов, принятых данным соединением.|  
|**total_fragments_sent**|**bigint**|Общее количество фрагментов сообщений зеркального отображения базы данных, переданных данным соединением.|  
|**total_fragments_received**|**bigint**|Общее количество фрагментов сообщений зеркального отображения базы данных, принятых данным соединением.|  
|**total_sends**|**bigint**|Суммарное число сетевых запросов на передачу, сформированных данным соединением.|  
|**total_receives**|**bigint**|Суммарное число сетевых запросов на прием, сформированных данным соединением.|  
|**peer_arbitration_id**|**uniqueidentifier**|Внутренний идентификатор для конечной точки. Допускает значение NULL.|  
  
## <a name="permissions"></a>Разрешения  
 необходимо разрешение VIEW SERVER STATE на сервере.  
  
## <a name="physical-joins"></a>Физические соединения  
 ![соединение для sys.join_dm_db_mirroring_connections](../../relational-databases/system-dynamic-management-views/media/join-dm-db-mirroring-connections.gif "соединение для sys.join_dm_db_mirroring_connections")  
  
## <a name="relationship-cardinalities"></a>Количество элементов связей  
  
|Исходный тип|Кому|Связь|  
|----------|--------|------------------|  
|**dm_db_mirroring_connections.connection_id**|**dm_exec_connections.connection_id**|Один к одному|  
  
## <a name="see-also"></a>См. также  
 [Динамические административные представления и функции &#40;&#41;Transact-SQL](~/relational-databases/system-dynamic-management-views/system-dynamic-management-views.md)   
 [Мониторинг зеркального отображения базы данных (SQL Server)](../../database-engine/database-mirroring/monitoring-database-mirroring-sql-server.md)  
  
  
