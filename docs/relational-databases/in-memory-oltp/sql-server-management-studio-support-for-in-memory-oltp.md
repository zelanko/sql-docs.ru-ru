---
title: Поддержка Management Studio для выполняющейся в памяти OLTP
ms.custom: seo-dt-2019
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: database-engine, sql-database
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: ee847b5f-6a1a-448e-a746-d61a023881ff
author: CarlRabeler
ms.author: carlrab
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: e9bd4cb0c2fff4259814f6e33a65777023a801fd
ms.sourcegitcommit: 58158eda0aa0d7f87f9d958ae349a14c0ba8a209
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2020
ms.locfileid: "74412528"
---
# <a name="sql-server-management-studio-support-for-in-memory-oltp"></a>Поддержка среды SQL Server Management Studio для In-Memory OLTP
[!INCLUDE[appliesto-ss-asdb-xxxx-xxx-md](../../includes/appliesto-ss-asdb-xxxx-xxx-md.md)]
  [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] — интегрированная среда для управления инфраструктурой [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] предоставляет средства для настройки, наблюдения и администрирования экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Дополнительные сведения см. в разделе [SQL Server Management Studio](https://msdn.microsoft.com/library/66a6b7b1-de6a-4161-82bd-98ded486947b).  
  
 Задачи в этом разделе показывают, как использовать среду [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] для управления оптимизированными для памяти таблицами, индексами в оптимизированных для памяти таблицах, изначально скомпилированными хранимыми процедурами и оптимизированными пользовательскими табличными типами.  
  
 Дополнительные сведения о способах программного создания оптимизированных для памяти таблиц см. в разделе [Создание таблиц, оптимизированных для памяти, и хранимых процедур, скомпилированных в собственном коде](../../relational-databases/in-memory-oltp/creating-a-memory-optimized-table-and-a-natively-compiled-stored-procedure.md).  
  
### <a name="to-create-a-database-with-a-memory-optimized-data-filegroup"></a>Создание базы данных с файловой группой данных с оптимизацией для памяти  
  
1.  В **обозревателе объектов**подключитесь к экземпляру компонента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Database Engine и разверните его.  
  
2.  Щелкните правой кнопкой мыши элемент **Базы данных**, а затем выберите пункт **Создать базу данных**.  
  
3.  Чтобы добавить новую файловую группу данных с оптимизацией для памяти, перейдите на страницу **Группы файлов** . В разделе **ОПТИМИЗИРОВАННЫЕ ДЛЯ ПАМЯТИ ДАННЫЕ**щелкните **Добавить файловую группу** и затем введите имя файловой группы данных, оптимизированной для памяти.  Столбец с меткой **Файлы FILESTREAM** представляет количество контейнеров в файловой группе. Контейнеры добавляются на странице **Общие** .  
  
4.  Чтобы добавить файл (контейнер) в файловую группу, перейдите на страницу **Общие** . В разделе **Файлы базы данных**нажмите кнопку **Добавить**. Выберите для параметра **Тип файла** значение **Данные FILESTREAM**, укажите логическое имя контейнера, выберите файловую группу, оптимизированную для памяти, и убедитесь в том, что параметр **Автоувеличение/максимальный размер** имеет значение **Без ограничения**.  

     Дополнительные сведения о создании базы данных с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]см. в разделе [Создание базы данных](../../relational-databases/databases/create-a-database.md).  
  
### <a name="to-create-a-memory-optimized-table"></a>Создание таблицы с оптимизацией для памяти  
  
1.  В **обозревателе объектов**щелкните правой кнопкой мыши узел **Таблицы** базы данных, выберите пункт **Создать**и щелкните **Оптимизированная для обработки в памяти таблица**.  
  
     Отобразится шаблон для создания таблицы, оптимизированной для памяти.  
  
2.  Для замены параметров шаблона щелкните **Указать значения для параметров шаблона** в меню **Запрос** .  
  
     Дополнительные сведения об использовании шаблонов см. в разделе [Template Explorer](../../ssms/template/template-explorer.md).  
  
3.  В **обозревателе объектов**таблицы будут упорядочены сначала по таблицам на диске, а затем по оптимизированным для памяти таблицам. Используйте **Сведения обозревателя объектов** , чтобы увидеть все таблицы, упорядоченные по имени.  
  
### <a name="to-create-a-natively-compiled-stored-procedure"></a>Создание скомпилированной в собственном коде хранимой процедуры  
  
1.  В **обозревателе объектов**щелкните правой кнопкой мыши узел базы данных **Хранимые процедуры** , выберите пункт **Создать**и щелкните **Хранимая процедура, компилируемая в собственном коде**.  
  
     Появится шаблон для создания скомпилированных в собственном коде хранимых процедур.  
  
2.  Для замены параметров шаблона щелкните **Указать значения для параметров шаблона** в меню **Запрос**.  
  
     Дополнительные сведения о создании хранимой процедуры см. в разделе [Create a Stored Procedure](../../relational-databases/stored-procedures/create-a-stored-procedure.md).  
  
### <a name="to-create-a-user-defined-memory-optimized-table-type"></a>Создание оптимизированных для памяти пользовательского табличного типа  
  
1.  В **обозревателе объектов**разверните узел **Типы** базы данных, щелкните правой кнопкой мыши узел **Определяемые пользователем табличные типы** , выберите пункт **Создать**и щелкните **Определяемый пользователем тип таблицы, оптимизированной для обработки в памяти**.  
  
     Будет показан шаблон для создания пользовательского табличного типа, оптимизированной для памяти.  
  
2.  Для замены параметров шаблона щелкните **Указать значения для параметров шаблона** в меню **Запрос** .  
  
     Дополнительные сведения о создании хранимой процедуры см. в разделе [CREATE TYPE (Transact-SQL)](../../t-sql/statements/create-type-transact-sql.md).  
  
## <a name="memory-monitoring"></a>Мониторинг памяти  
  
#### <a name="view-memory-usage-by-memory-optimized-objects-report"></a>Просмотр сведений об использовании памяти в отчете об объектах с оптимизацией для памяти  
  
-   В **обозревателе объектов**щелкните правой кнопкой мыши применяемую базу данных, выберите пункт **Отчеты**, щелкните **Стандартные отчеты**и выберите **Использование памяти оптимизированными для обработки в памяти объектами**.  
  
     Этот отчет предоставляет подробные данные об использовании памяти объектами с оптимизацией для памяти, расположенными в базе данных.  
  
#### <a name="view-properties-for-allocated-and-used-memory-for-a-table-database"></a>Просмотр свойств выделенной и использованной памяти для таблицы или базы данных  
  
1.  Получение сведений об использовании памяти:  
  
    -   В **обозревателе объектов**щелкните правой кнопкой оптимизированную для памяти таблицу, выберите пункт **Свойства**и перейдите на страницу **Хранилище** . Значение свойства **Пространство данных** обозначает объем памяти, используемой данными в таблице. Значение свойства **Пространство индексов** обозначает объем памяти, используемой индексами для таблицы.  
  
    -   В **обозревателе объектов**щелкните правой кнопкой мыши базу данных, выберите пункт **Свойства**и перейдите на страницу **Общие** . Значение свойства **Память, выделенная для оптимизированных для обработки в памяти объектов** обозначает объем памяти, выделенной оптимизированным для памяти объектам в базе данных. Значение свойства **Память, используемая оптимизированными для обработки в памяти объектами** обозначает объем памяти, используемой объектами, оптимизированными для памяти, в базе данных.  
  
## <a name="supported-features-in-ssmanstudiofull"></a>Поддерживаемые функции в [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]  
 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] поддерживает перечисленные ниже функции и операции, поддерживаемые компонентом Database Engine для баз данных с оптимизированной для памяти файловой группой, оптимизированными для памяти таблицами, индексами и скомпилированными в собственном коде хранимыми процедурами.  
  
 Для объектов баз данных, таблиц, хранимых процедур, пользовательского табличного типа и объектов индекса были обновлены и расширены следующие функции [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] для поддержки OLTP в памяти.  
  
-   обозревателе объектов  
  
    -   Контекстные меню  
  
    -   Настройки фильтра  
  
    -   Создать скрипт для  
  
    -   Задания  
  
    -   Отчеты  
  
    -   Свойства  
  
    -   Задачи базы данных:  
  
        -   Присоедините и отсоедините базу данных, содержащую таблицы, оптимизированные для памяти.  
  
             В пользовательском интерфейсе **Присоединение баз данных** не отображается файловая группа данных, оптимизированная для памяти. Тем не менее можно продолжить присоединение базы данных, и она будет правильно присоединена.  
  
            > [!NOTE]  
            >  Если вы собираетесь использовать [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] для присоединения базы данных с контейнером файловой группы данных, оптимизированным для памяти, и если этот контейнер был создан на другом компьютере, то расположение контейнера файловой группы данных должно быть одинаковым на обоих компьютерах. Если нужно, чтобы расположение контейнера файловой группы данных, оптимизированного для памяти, на новом компьютере было другим, то используйте для присоединения базы данных [!INCLUDE[tsql](../../includes/tsql-md.md)] . В следующем примере расположением контейнера файловой группы данных, оптимизированного для памяти, на новом компьютере будет C:\Folder2. Но при создании на первом компьютере этого контейнера файловой группы данных, оптимизированного для памяти, его расположением было C:\Folder1.  
            >   
            >  `CREATE DATABASE[imoltp] ON`  
            >   
            >  `(NAME =N'imoltp',FILENAME=N'C:\Folder2\imoltp.mdf'),`  
            >   
            >  `(NAME =N'imoltp_mod1',FILENAME=N'C:\Folder2\imoltp_mod1'),`  
            >   
            >  `(NAME =N'imoltp_log',FILENAME=N'C:\Folder2\imoltp_log.ldf')`  
            >   
            >  `FOR ATTACH`  
            >   
            >  `GO`  
  
        -   Создание скриптов.  
  
             В **мастере формирования и публикации скриптов**значением по умолчанию параметра написания скриптов **Проверьте наличие объекта** является FALSE. Если на экране мастера **Задание параметров скриптов** параметр написания скриптов **Проверьте наличие объекта** имеет значение TRUE, то создаваемый скрипт будет содержать "CREATE PROCEDURE <имя_процедуры> AS" и "ALTER PROCEDURE <имя_процедуры> <определение_процедуры>". При выполнении созданный скрипт вернет ошибку, так как инструкция ALTER PROCEDURE не поддерживается в скомпилированных в собственном коде хранимых процедурах.  
  
             Чтобы изменить созданный скрипт для каждой скомпилированной в собственном коде хранимой процедуры, выполните следующее.  
  
            1.  В "CREATE PROCEDURE <имя_процедуры> AS" замените AS на <определение_процедуры>.  
  
            2.  Удалите "ALTER PROCEDURE <имя_процедуры> <определение_процедуры>".  
  
        -   Копирование баз данных. Для баз данных с оптимизированными для памяти объектами в рамках транзакции база данных не будет создана на целевом сервере, а данные не будут переданы.  
  
        -   Импорт и экспорт данных. Используйте параметр **"Скопировать данные из одной или нескольких таблиц или представлений" мастера импорта и экспорта [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** . Если целевая таблица оптимизирована для памяти, которая не существует в целевой базе данных:  
  
            1.  В **мастере импорта и экспорта [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** в окне **Выбор копирования таблицы или запроса** выберите параметр **Скопировать данные из одной или нескольких таблиц или представлений**. Затем нажмите кнопку **Далее**.  
  
            2.  Нажмите кнопку **Изменить сопоставления**. Затем выберите параметр **Создать целевую таблицу** и нажмите кнопку **Изменить SQL**. Введите выражение CREATE TABLE для создания таблицы с оптимизацией для памяти в целевой базе данных. Нажмите кнопку **ОК** и выполните оставшиеся шаги в мастере.  
  
        -   Планы обслуживания. Задачи обслуживания, которые реорганизовывают индекс и перестраивают индекс, не поддерживаются для оптимизированных для памяти таблиц и их индексов. Поэтому при выполнении плана обслуживания для перестроения индекса и реорганизации индекса оптимизированные для памяти таблицы и их индексы в выбранных базах данных опускаются.  
  
             Задачи по обновлению статистики с выборкой данных не поддерживаются для оптимизированных для памяти таблиц и их индексов. Поэтому при выполнении плана обслуживания по обновлению статистики последняя для оптимизированных для памяти таблиц и их индексов всегда обновляется с параметром **WITH FULLSCAN, NORECOMPUTE**.  
  
-   Область сведений обозревателя объектов  
  
-   Template Explorer  
  
## <a name="unsupported-features-in-ssmanstudiofull"></a>Неподдерживаемые функции в [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]  
 Для объектов In-Memory OLTP [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] не поддерживает функции и операции, которые также не поддерживаются компонентом Database Engine.  
  
 Дополнительные сведения о неподдерживаемых функциях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в разделе [Неподдерживаемые функции SQL Server для выполняющейся в памяти OLTP](../../relational-databases/in-memory-oltp/unsupported-sql-server-features-for-in-memory-oltp.md).  
  
## <a name="see-also"></a>См. также:  
 [Поддержка SQL Server для In-Memory OLTP](../../relational-databases/in-memory-oltp/sql-server-support-for-in-memory-oltp.md)  
  
  
