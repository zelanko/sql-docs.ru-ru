---
title: Оценка уязвимостей SQL | Документация Майкрософт
ms.custom: ''
ms.date: 11/30/2017
ms.prod: sql
ms.prod_service: security, sql-database
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- SQL Vulnerability Assessment
author: yualan
ms.author: alayu
manager: craigg
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: 1630695fc7c8177600ca6a270274b4a1bcf7a15b
ms.sourcegitcommit: 32a55df1275ad169bb1457243dc8caa8b48b206f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2019
ms.locfileid: "55146992"
---
# <a name="sql-vulnerability-assessment"></a>Оценка уязвимостей SQL

[!INCLUDE[appliesto-ss-asdb-xxxx-xxx-md](../../includes/appliesto-ss-asdb-xxxx-xxx-md.md)]

Оценка уязвимостей SQL — это простой инструмент, который позволяет обнаруживать, отслеживать и устранять потенциальные уязвимости баз данных. Используйте его, чтобы с упреждением повышать безопасность своей базы данных.

Инструмент оценки уязвимостей поддерживается для **SQL Server 2012 и более поздних версий** и может запускаться в [Базе данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment).

## <a name="vulnerability-assessment-features"></a>Возможности службы оценки уязвимостей
Оценка уязвимостей SQL — это служба, которая дает представление о состоянии безопасности и предлагает практические действия для устранения проблем безопасности и повышения безопасности базы данных. Эта служба может помочь в выполнении следующих задач:
- соблюдение нормативных требований, требующих отчетов о проверке базы данных; 
- соблюдение стандартов конфиденциальности данных;
- мониторинг динамической среды базы данных, в которой сложно отслеживать изменения.

Служба оценки уязвимостей выполняет проверку прямо в базе данных. Эта служба использует базу знаний правил, содержащую правила, которые помечают уязвимости системы безопасности и указывают на отклонения от рекомендаций, в том числе на неправильные настройки, избыточные разрешения и незащищенные конфиденциальные данные. Правила основаны на рекомендациях корпорации Майкрософт и направлены на проблемы безопасности, представляющие наибольшую угрозу для базы данных и ее ценных данных. В этих правилах также представлены многие требования различных контролирующих органов, что позволяет соблюдать стандарты соответствия.

Результаты проверки включают в себя практические действия по устранению каждой проблемы, а также настроенные скрипты исправления, если их можно применить. Отчет об оценке можно настроить для своей среды, задав приемлемые базовые показатели для конфигураций разрешений, конфигураций функций и параметров базы данных. 

## <a name="prerequisites"></a>предварительные требования
Эта функция доступна только в SQL Server Management Studio (SSMS) 17.4 и более поздних версий. Убедитесь, что вы используете последнюю версию. Ее можно найти [здесь](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms).

## <a name="getting-started"></a>Начало работы
Чтобы запустить службу оценки уязвимостей в базе данных, выполните следующие действия.
   1.   Откройте **SQL Server Management Studio**.

   2.   Подключитесь к экземпляру ядра СУБД SQL Server или к узлу localhost.

   3.   Разверните узел **Базы данных**, щелкните правой кнопкой мыши имя базы данных, последовательно выберите **Задачи**, **Оценка уязвимостей** и **Проверка на уязвимости...**.

   4.   Можно запустить проверку на наличие проблем на уровне сервера, проверив одну из системных баз данных. Разверните узел **Системные базы данных**, щелкните правой кнопкой мыши базу данных **master**, наведите указатель мыши на пункт **Задачи**, выберите **Оценка уязвимостей** и щелкните **Проверка на уязвимости...**.

   ![get-started](media/sql-vulnerability-assessment/1-SSMSGetStarted.png)

## <a name="tutorial"></a>Учебник
Чтобы выполнять оценку уязвимостей и управлять ею, сделайте следующее.

### <a name="1-run-a-scan"></a>1. Выполнение проверки

В диалоговом окне "Проверка на уязвимости" можно указать расположение, где будут храниться результаты проверки. Вы можете оставить расположение по умолчанию или щелкнуть **Обзор...**, чтобы сохранить результаты проверки в другое расположение.

Если все готово для проверки, нажмите кнопку **ОК**, чтобы проверить базу данных на уязвимости.

  > [!NOTE]   
  > Проверка безопасна и не требует большого количества ресурсов. Она занимает несколько секунд и является исключительно операцией чтения. При проверке никакие изменения в базу данных не вносятся.

![Сохранение файла результатов проверки](media/sql-vulnerability-assessment/2-ssmssavescanfile.png)

### <a name="2-view-the-report"></a>2. Просмотр отчета

Когда проверка завершится, на основной панели SSMS автоматически появится отчет о проверке. В отчете представлен обзор состояния безопасности: количество обнаруженных проблем и уровень их серьезности. Результаты содержат предупреждения об отклонениях от рекомендаций, а также моментальный снимок параметров безопасности, например субъектов и ролей базы данных и соответствующих разрешений. Отчет о проверке также содержит карту конфиденциальных данных, обнаруженных в базе данных, и рекомендации по встроенным методам, доступным для их защиты.

![Результаты проверки](media/sql-vulnerability-assessment/3-ssmsscanresults.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Анализ результатов и устранение проблем

Просмотрите результаты и определите, какие проблемы в отчете действительно нарушают безопасность в вашей среде. Изучите подробные сведения о каждой проблеме, чтобы понять, как она влияет на безопасность, и о каждой проверке безопасности, завершившейся сбоем. Используйте практические рекомендации по исправлению, представленные в отчете, чтобы устранить проблему.

![Сведения о результатах](media/sql-vulnerability-assessment/4-ssmsresultdetails.png)

### <a name="4-set-your-baseline"></a>4. Настройка базовых показателей

При просмотре результатов оценки можно пометить определенные результаты как допустимые **базовые показатели** в своей среде. Базовые показатели — важные параметры, влияющие на содержимое отчета о проверке. При следующих проверках результаты, которые соответствуют базовым показателям, будут рассматриваться как прошедшие проверку. 

Когда вы установите состояние базовых показателей безопасности, служба оценки уязвимостей будет сообщать только об отклонениях от базовых показателей, и вы сможете сосредоточиться на важных проблемах.

![Настройка базовых показателей](media/sql-vulnerability-assessment/5-ssmssetbaseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Выполнение новой проверки для просмотра настраиваемого отчета об отслеживании

Завершив настройку **базовых показателей правила**, выполните новую проверку, чтобы просмотреть настраиваемый отчет. Теперь служба оценки уязвимостей сообщает о проблемах безопасности, которые связаны с отклонением от утвержденного состояния базовых показателей.

![Проверка пройдена в соответствии с базовыми показателями](media/sql-vulnerability-assessment/6-ssmspassperbaseline.png)

### <a name="6-open-a-previously-run-scan"></a>6. Открытие файла ранее проведенной проверки

Вы можете в любое время просмотреть результаты ранее проведенных оценок уязвимостей, открыв существующий файл с результатами проверки. Для этого щелкните правой кнопкой мыши имя базы данных, наведите указатель мыши на пункт **Задачи**, выберите **Оценка уязвимостей** и щелкните **Открыть имеющееся сканирование...**.  Выберите файл с результатами проверки, который нужно просмотреть, и нажмите кнопку **Открыть**. 

Этот файл также можно открыть, последовательно выбрав **Файл -> Открыть**. Выберите **Оценка уязвимостей...** и откройте каталог **scans**, чтобы найти файл с результатами проверки, который нужно просмотреть.

![Открытие существующего файла с результатами проверки](media/sql-vulnerability-assessment/7-ssmsopenexistingscan.png)

Теперь службу оценки уязвимостей можно использовать, чтобы постоянно отслеживать безопасность базы данных и обеспечивать высокий уровень безопасности, а также следить за соблюдением политик организации. Если требуются отчеты о соответствии, вам могут пригодиться отчеты службы оценки уязвимостей, чтобы упростить соответствие требованиям.

## <a name="manage-vulnerability-assessments-using-powershell"></a>Управление оценкой уязвимостей с помощью PowerShell
С помощью командлетов PowerShell можно управлять оценкой уязвимостей на серверах SQL Server программными средствами. Командлеты можно использовать для программного выполнения оценки, экспорта результатов и управления базовыми показателями.
Сначала скачайте последний [модуль PowerShell SqlServer](https://www.powershellgallery.com/packages/SqlServer/) с сайта коллекции PowerShell. Дополнительные сведения см. [здесь](https://blogs.msdn.microsoft.com/sqlsecurity/2018/07/05/powershell-cmdlets-for-managing-sql-vulnerability-assessments/).

## <a name="next-steps"></a>Следующие шаги
Дополнительные сведения о службе оценки уязвимостей SQL см. в следующих документах:
- [Оценка уязвимостей SQL](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment) 
- [Видео об использовании службы оценки уязвимостей на сайте Channel 9](https://channel9.msdn.com/Shows/Data-Exposed/Track-and-remediate-potential-database-vulnerabilities-with-SQL-Vulnerability-Assessment)


  
