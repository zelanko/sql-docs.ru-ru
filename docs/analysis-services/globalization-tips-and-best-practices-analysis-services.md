---
title: Глобализация советы и практические рекомендации (службы Analysis Services) | Документация Майкрософт
ms.date: 05/08/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: ''
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 57031c75e9433981b45419348ab2d5c0745edbfd
ms.sourcegitcommit: 6443f9a281904af93f0f5b78760b1c68901b7b8d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2018
ms.locfileid: "53202633"
---
# <a name="globalization-tips-and-best-practices-analysis-services"></a>Советы и рекомендации по глобализации (службы Analysis Services)
[!INCLUDE[ssas-appliesto-sqlas-aas](../includes/ssas-appliesto-sqlas-aas.md)]

  [!INCLUDE[applies](../includes/applies-md.md)] Только многомерные  
  
 Эти советы и рекомендации помогут улучшить переносимость решений для бизнес-аналитики и избежать ошибок, которые непосредственно связаны с языковыми параметрами и параметрами сортировки.  
  
##  <a name="bkmk_sameColl"></a> Использование одинаковых параметров сортировки во всем стеке  
 Если это возможно, попробуйте использовать те же параметры сортировки в [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , которые применяются для компонента Database Engine, чтобы добиться соответствия чувствительности к ширине, регистру и диакритическим знакам.  
  
 Каждая служба имеет свои собственные параметры сортировки. По умолчанию для ядра СУБД используется SQL_Latin1_General_CP1_CI_AS, а для Analysis Services — Latin1_General_AS. Значения по умолчанию совместимы с точки зрения чувствительности к регистру, ширине и диакритическим знакам. Помните, что, если изменить какие-либо параметры сортировки, могут возникнуть проблемы, если свойства параметров сортировки существенно отличаются.  
  
 Даже если параметры сортировки функционально эквивалентны, может возникнуть особый случай, где пустое место в любом месте строки интерпретируется каждой службой по-разному.  
  
 Символ пробела — это особый случай, так как он может быть представлен однобайтовым (SBCS) или двухбайтовым (DBCS) набором символов в кодировке Юникод. В реляционном механизме две составные строки, разделенные пробелом (одна из которых использует SBCS, а другая —DBCS), считаются идентичными. Во время обработки в службах Analysis Services те же составные строки не совпадают, а второй экземпляр будет отмечен как дубликат.  
  
 Дополнительные сведения и рекомендуемые пути устранения проблем см. в разделе [Пробелы в строке Юникода обрабатываются по-разному в зависимости от параметров сортировки](http://social.technet.microsoft.com/wiki/contents/articles/23979.ssas-processing-error-blanks-in-a-unicode-string-have-different-processing-outcomes-based-on-collation-and-character-set.aspx).  
  
##  <a name="bkmk_recos"></a> Общие рекомендации для параметров сортировки  
 В Analysis Services всегда представлен полный список всех доступных языков и параметров сортировки; список параметров сортировки не отфильтровывается в зависимости от выбранного языка. Обязательно выберите пригодное для работы сочетание.  
  
 Некоторые из наиболее часто используемых параметров сортировки перечислены в следующем списке.  
  
 Этот список следует считать основой для дальнейшей работы, но не окончательной рекомендацией, исключающей другие варианты. Может оказаться, что для ваших данных лучше всего подходят параметры сортировки, не рекомендованные явным образом. Тщательное тестирование является единственным способом проверить правильность сортировки и сравнения данных. При тестировании параметров сортировки всегда запускайте нагрузку по обработке и по запросам.  
  
-   Latin1_General_100_AS часто используется для приложений, использующих 26 букв [основного латинского алфавита ISO](http://en.wikipedia.org/wiki/ISO_basic_Latin_alphabet).  
  
-   В языках стран Северной Европы, где встречаются скандинавские буквы (например, ø), можно использовать Finnish_Swedish_100.  
  
-   В языках Восточной Европы, например в русском, часто используется Cyrillic_General_100.  
  
-   Китайский язык и параметры сортировки различаются в зависимости от региона, но чаще всего это либо китайский (упрощенное письмо), либо китайский (традиционное письмо).  
  
     В КНР и Сингапуре служба поддержки Майкрософт обычно применяет китайский (упрощенное письмо) и порядок сортировки пиньинь. Рекомендуемые параметры сортировки: Chinese_PRC (для SQL Server 2000), Chinese_PRC_90 (для SQL Server 2005) или Chinese_Simplified_Pinyin_100 (SQL Server 2008 и более поздних версий).  
  
     На Тайване чаще используется китайский (Тайвань), а рекомендуемый порядок сортировки основывается на количестве штрихов: Chinese_Taiwan_Stroke (для SQL Server 2000), Chinese_Taiwan_Stroke_90 (для SQL Server 2005) или Chinese_Traditional_Stroke_Count_100 (SQL Server 2008 и более поздних версий).  
  
     Для других регионов (например, Гонконг и Макао) используется китайский (традиционное письмо). Для сортировке в Гонконге часто используется Chinese_Hong_Kong_Stroke_90 (в SQL Server 2005). В Макао, САР довольно часто встречается Chinese_Traditional_Stroke_Count_100 (в SQL Server 2008 и более поздних версиях).  
  
-   Для японского языка наиболее часто используется Japanese_CI_AS. Japanese_XJIS_100 применяется в установках, поддерживающих [JIS2004](http://en.wikipedia.org/wiki/JIS_X_0213). Japanese_BIN2 обычно применяется в проектах миграции данных, где исходные данные получены с платформ, отличных от Windows, или из источников данных, отличных от реляционной СУБД SQL Server.  
  
     Japanese_Bushu_Kakusu_100 редко встречается на серверах с Analysis Services.  
  
-   Для корейского языка рекомендуется использовать Korean_100. В списке есть и Korean_Wansung_Unicode, но эта сортировка считается устаревшей.  
  
##  <a name="bkmk_objid"></a> Чувствительность к регистру идентификаторов объекта  
 Начиная с SQL Server 2012 SP2 учет регистра идентификаторов объектов применяется независимо от параметров сортировки, но поведение зависит от языка.  
  
|Набор знаков|Учет регистра букв|  
|---------------------|----------------------|  
|**Основной латинский алфавит**|Идентификаторы объектов, выраженные латинским алфавитом (любой из 26 английских символов верхнего или нижнего регистра), обрабатываются без учета регистра независимо от параметров сортировки. Например следующие идентификаторы объектов считаются идентичными: 54321**abcdef**, 54321**ABCDEF**, 54321**AbCdEf**. Службы Analysis Services обрабатывают символы в строке так, будто все они прописные, а затем выполняют простое побайтное сравнение, которое не зависит от языка.<br /><br /> Обратите внимание, что затрагиваются только 26 символов. У западноевропейских языков со скандинавскими символами дополнительные символы не будут в верхнем регистре.|  
|**Кириллица, греческий, коптский, армянский**|В идентификаторах объектов на языках с письмом, отличным от латинского, где строчные и заглавные буквы различаются, всегда учитывается регистр. Например, "Измерение" и "измерение" считаются различными значениями, хотя единственная разница — первая буква.|  
  
 **Влияния учета регистра в идентификаторах объектов**  
  
 Только к идентификаторам, а не именам объектов применяются типы поведения, описанные в таблице. Если вы заметите изменения в работе решения (после установки SQL Server 2012 SP2 или более поздней версии), то это изменение, по всей видимости, будет связано с обработкой. Идентификаторы объектов не влияют на запросы. Для обоих языков запросов (DAX и MDX) механизм обработки формул использует имя объекта (а не идентификатор).  
  
> [!NOTE]  
>  Изменения кода, связанные с учета регистра, были критическими изменениями для некоторых приложений. Дополнительные сведения см. в разделе [Критические изменения функций служб Analysis Services SQL Server 2016](../analysis-services/breaking-changes-to-analysis-services-features-in-sql-server-2016.md) .  
  
##  <a name="bkmk_test"></a> Тестирования языков с помощью Excel, SQL Server Profiler и SQL Server Management Studio  
 При тестировании переводов соединение должно указывать код языка перевода. Как указано в разделе [Получение другого языка из служб SSAS в Excel](http://extremeexperts.com/sql/Tips/ExcelDiffLocale.aspx), для тестирования переводов можно использовать Excel.  
  
 Это можно сделать вручную, добавив в ODC-файл свойство строки подключения кода языка. Попробуйте этот подход с примером многомерной базы данных Adventure Works.  
  
-   Найдите существующие ODC-файлы. Затем найдите файл для многомерной базы данных Adventure Works и щелкните правой кнопкой мыши файл, чтобы открыть его в программе "Блокнот".  
  
-   Добавьте `Locale Identifier=1036` в строку подключения. Сохраните файл и закройте его.  
  
-   Откройте Excel | Выберите **Данные** | **Существующие подключения**. Отфильтруйте список, чтобы показать только файлы подключений на этом компьютере. Найдите подключение для Adventure Works (внимательно посмотрите на имя, их может быть несколько). Откройте соединение.  
  
     Вы увидите переводы на французский из образца базы данных Adventure Works.  
  
     ![Сводная таблица Excel с переводами на французский](../analysis-services/media/ssas-localetest-excel.png "сводной таблицы Excel с переводами на французский")  
  
 Затем можно использовать приложение SQL Server Profiler для подтверждения кода языка. Щелкните событие `Session Initialize` , а затем найдите `<localeidentifier>1036</localeidentifier>`в текстовом поле под списком свойств.  
  
 В среде Management Studio можно указать код языка для соединения с сервером.  
  
-   В обозревателе объектов последовательно выберите **Подключения** | **Службы Analysis Services** | **Параметры**и откройте вкладку **Дополнительные параметры соединения** .  
  
-   Введите `Local Identifier=1036` и нажмите кнопку **Подключение**.  
  
-   Выполните MDX-запрос к базе данных Adventure Works. Результатами запроса должны быть переводы на французский.  
  
     ![Запрос многомерных Выражений с переводами на французский в SSMS](../analysis-services/media/ssas-localetest-ssms.png "запрос многомерных Выражений с переводами на французский в SSMS")  
  
##  <a name="bkmk_mdx"></a> Написание MDX-запросов в решении, содержащем переводы  
 Переводы предоставляют отображаемые сведения об именах объектов служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , однако идентификаторы тех же самых объектов не переводятся. По возможности для объектов служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] необходимо использовать идентификаторы и ключи, а не переведенные заголовки и имена. Например, для обеспечения мобильности в нескольких языках необходимо использовать ключи элементов, а не имена элементов для инструкций многомерных выражений и скриптов.  
  
> [!NOTE]  
>  Помните, что в именах табличных объектов регистр никогда не учитывается, независимо от параметров сортировки. В именах многомерных объектов, напротив, регистр учитывается таким же образом, как в параметрах сортировки. Поскольку регистр учитывается только в именах многомерных объектов, убедитесь, что все запросы MDX, ссылающиеся на многомерные объекты, имеют правильный регистр.  
  
##  <a name="bkmk_datetime"></a> Написание MDX-запросов, содержащих значения даты и времени  
 Следующие рекомендации помогут удобнее переносить запросы MDX на основе даты и времени на разные языки:  
  
1.  **Использование числовых частей для сравнения и операций**  
  
     При выполнении операций и сравнений месяцев и дней недели используйте числовые части даты и времени, а не строковые эквиваленты (например, используйте MonthNumberofYear вместо MonthName). Числовые значения в меньше степени затрагиваются различиями в переводах.  
  
2.  **Использование строковых эквивалентов в результирующем наборе**  
  
     При построении результирующих наборов, видимых конечным пользователям, используйте строки (например, MonthName), чтобы многоязычная аудитория могла пользоваться предоставленными переводами.  
  
3.  **Использование форматов даты ISO для получения универсальных сведений о дате и времени**  
  
     Один [служб Analysis Services специалист](http://geekswithblogs.net/darrengosbell/Default.aspx) дает следующую рекомендацию: "Я всегда использую формат даты ISO yyyy-mm-dd для всех строк дат, которые я передаю в запросах в SQL или MDX, поскольку этот формат однозначен и работает вне зависимости от региональных параметров сервера и клиента. Я соглашусь с тем, что сервер должен игнорировать свои региональные настройки при синтаксическом анализе неоднозначного формата даты, но я также думаю, если у вас есть вариант, интерпретируемый одинаково, лучше остановиться на нем".  
  
4.  **Воспользуйтесь функцией "Формат", чтобы принудительно использовать определенный формат, не учитывая установленные региональные настройки языка.**  
  
     В следующем запросе MDX, взятом из публикации на форуме, показано использование параметра Format для возврата данных в определенном формате вне зависимости от базовых региональных параметров.  
  

    ```  
    WITH MEMBER [LinkTimeAdd11Date_Manual] as Format(dateadd("d",15,"2014-12-11"), "mm/dd/yyyy")  
    member [LinkTimeAdd15Date_Manual] as Format(dateadd("d",11,"2014-12-13"), "mm/dd/yyyy")  
    SELECT  
    { [LinkTimeAdd11Date_Manual]  
    ,[LinkTimeAdd15Date_Manual]  
    }  
    ON COLUMNS   
    FROM [Adventure Works]  
  
    ```  
  
## <a name="see-also"></a>См. также  
 [Сценарии глобализации для служб Analysis Services](../analysis-services/globalization-scenarios-for-analysis-services.md)   
 [Написание инструкций Transact-SQL, адаптированных к международному использованию](../relational-databases/collations/write-international-transact-sql-statements.md)  
  
  
