---
title: Связи измерений | Документы Microsoft
ms.date: 05/02/2018
ms.prod: sql
ms.technology: analysis-services
ms.component: olap
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 884bfb6278a17c076a7a1252f94819aac1bda92d
ms.sourcegitcommit: 38f8824abb6760a9dc6953f10a6c91f97fa48432
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
---
# <a name="dimension-relationships"></a>Связи измерений
[!INCLUDE[ssas-appliesto-sqlas](../../includes/ssas-appliesto-sqlas.md)]
  Использование измерений определяет связи между измерением куба и группами мер в нем. Измерение куба представляет собой экземпляр измерения базы данных, используемый в конкретном кубе. Куб может содержать (и часто содержит) измерения, которые не связаны непосредственно с группой мер, но которые могут быть косвенно связаны с ней через другое измерение или группу мер. При добавлении базы данных измерения или группы мер в кубе, [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] попытаются определить использование измерения, анализируя связи между таблицами измерений и таблицами фактов в представлении источника данных куба, а также с помощью проверки связи между атрибутами в измерениях. Службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] автоматически устанавливают параметры использования измерений для связей, которые они смогли обнаружить.  
  
 Связь между измерением и группой мер состоит из таблиц измерений и фактов, участвующих в связи, и атрибута гранулярности, указывающего детализацию измерения в конкретной группе мер.  
  
## <a name="regular-dimension-relationships"></a>Связи обычного измерения  
 Связь обычного измерения между измерением куба и группой мер существует, когда ключевой столбец для измерения соединен непосредственно с таблицей фактов. Эта прямая связь основана на связи между первичным и внешним ключами в базовой реляционной базе данных, но также может быть основана на логической связи, определенной в представлении источника данных. Связь обычного измерения представляет связь между таблицами измерений и таблицей фактов в традиционной структуре схемы «звезда». Дополнительные сведения об обычных связях см. в разделе [определение обычной связи и свойств регулярные связи](../../analysis-services/multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md).  
  
## <a name="reference-dimension-relationships"></a>Связи ссылочного измерения  
 Связь ссылочного измерения между измерением куба и группой мер существует в том случае, когда ключевой столбец измерения косвенно соединен с таблицей фактов по ключу в другой таблице измерения, как показано на следующей схеме.  
  
 ![Логическая диаграмма, связь ссылочного измерения](../../analysis-services/multidimensional-models-olap-logical-cube-objects/media/as-refdimension1.gif "Логическая диаграмма, связь ссылочного измерения")  
  
 Связь ссылочного измерения представляет связь между таблицами измерений и таблицей фактов в структуре схемы «снежинка». Когда таблицы измерений связаны по схеме «снежинка», можно определить либо одно измерение с использованием столбцов из нескольких таблиц, либо определить отдельные измерения на основе отдельных таблиц измерений, а затем задать связь между ними при помощи параметров связи ссылочного измерения. На следующем рисунке показана одна таблица фактов **InternetSales**, и две таблицы измерений **клиента** и **Geography**, в схеме «снежинка».  
  
 ![Логическая схема, связь ссылочного измерения](../../analysis-services/multidimensional-models-olap-logical-cube-objects/media/as-refdim-schema1.gif "логическую схему, ссылочную связь измерений")  
  
 Можно создать измерение с **клиента** таблицу в качестве главной таблицы измерения и **Geography** включенной в качестве связанной таблицы. После этого определяется обычная связь между измерением и группой мер «Интернет-продажи».  
  
 Кроме того, можно создать два измерения, связанные с группой мер InternetSales: измерение, основанное на **клиента** таблицы и измерение, основанное на **Geography** таблицы. После этого можно связать измерение «География» с группой мер «Интернет-продажи», используя связь ссылочного измерения, в которую входит измерение «Заказчик». В этом случае, когда факты в группе мер «Интернет-продажи» измеряются измерением «География», факты измеряются по заказчикам и по географии. Если куб содержит вторую группу мер «Товарооборот посредников», то измерить факты в группе мер «Товарооборот посредников» по таблице Geography невозможно, поскольку связи между группой мер «Товарооборот посредников» и Geography не существует.  
  
 Ограничения на количество ссылочных измерений, которые могут быть соединены друг с другом, нет, как показано на следующей схеме.  
  
 ![Логическая диаграмма, связь ссылочного измерения](../../analysis-services/multidimensional-models-olap-logical-cube-objects/media/as-refdimension2.gif "Логическая диаграмма, связь ссылочного измерения")  
  
 Дополнительные сведения о ссылочных связях см. в разделе [определения ссылочной связи и свойств указанной связи](../../analysis-services/multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md).  
  
## <a name="fact-dimension-relationships"></a>Связи измерения фактов  
 Измерения фактов, обычно называемые вырожденными измерениями, представляют собой стандартные измерения, составленные из столбцов атрибутов в таблицах фактов, а не из столбцов атрибутов в таблицах измерений. Полезные данные измерений иногда хранятся в таблице фактов с целью снижения дублирования. Например, на следующей диаграмме приведена **FactResellerSales** таблицы фактов из [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] образца базы данных.  
  
 ![Столбцы в таблицы фактов, поддерживающие измерения](../../analysis-services/multidimensional-models-olap-logical-cube-objects/media/as-factdim.gif "столбцы в таблицы фактов, поддерживающие измерения")  
  
 Эта таблица содержит данные об атрибутах не только для каждой строки заказа, оформленного посредником, но и для самого заказа. Атрибуты, обведенные на предыдущей диаграмме, идентифицируют данные в **FactResellerSales** таблицы, которые могут быть использованы в качестве атрибутов в измерении. В этом случае два дополнительных элемента данных — сопроводительный номер перевозчика и номер заказа на покупку, оформленного посредником, представлены столбцами атрибутов CarrierTrackingNumber и CustomerPONumber. Это весьма полезные сведения. Например, пользователи определенно будут заинтересованы в просмотре статистических сведений (например суммарной стоимости продуктов) для всех заказов, поставляемых по одному сопроводительному номеру. Однако без измерения данные по этим двум атрибутам не могут быть ни организованы, ни статистически обработаны.  
  
 Теоретически можно создать таблицу измерения, использующую те же самые ключевые данные, что и таблица FactResellerSales, и переместить два остальных столбца атрибутов, CarrierTrackingNumber и CustomerPONumber, в эту таблицу измерения. Однако при этом произойдет дублирование значительной части данных, а также излишнее усложнение хранилища данных с целью представления всего двух атрибутов в отдельном измерении.  
  
> [!NOTE]  
>  Измерения фактов часто используются для поддержки операций детализации. Дополнительные сведения о действиях см. в разделе [Действия (службы Analysis Services — многомерные данные)](../../analysis-services/multidimensional-models/actions-analysis-services-multidimensional-data.md).  
  
> [!NOTE]  
>  Необходимо осуществлять добавочное обновление измерений фактов после каждого обновления группы мер, на которую ссылается связь фактов. Если измерение фактов является измерением ROLAP, то механизм обработки служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] очищает все кэши и осуществляет добавочную обработку группы мер.  
  
 Дополнительные сведения о связях фактов см. в разделе [Определение связей фактов и свойств связей фактов](../../analysis-services/multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md).  
  
## <a name="many-to-many-dimension-relationships"></a>Связи измерений «многие ко многим»  
 В большинстве измерений каждый факт соединяется с одним и только одним элементом измерения, а один элемент измерения может быть связан с несколькими фактами. В терминах реляционных баз данных такая связь имеет название «один ко многим». Однако часто полезно соединять один факт с несколькими элементами измерения. Например, клиент банка может иметь несколько счетов (чековый, сберегательный, кредитный и инвестиционный), в то время как счет также может иметь нескольких владельцев или совладельцев. Измерение «Клиент», построенное на основе таких связей, имело бы несколько элементов, относящихся к одной транзакции по счету.  
  
 ![Связь измерений логической схемы/многие ко многим](../../analysis-services/multidimensional-models-olap-logical-cube-objects/media/as-many-dimension1.gif "логической схемы/многие ко многим связь измерений")  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] позволяет определить связь «многие ко многим» между измерением и таблицей фактов.  
  
> [!NOTE]  
>  Для обеспечения поддержки связи измерений «многие ко многим» в представлении источника данных должна быть установлена связь по внешнему ключу между всеми участвующими таблицами, как показано на предыдущей диаграмме. В противном случае будет невозможно выбрать верную промежуточную группу мер при установке связи в **Использование измерений** конструктора измерений.  
  
 Дополнительные сведения о связях многие ко многим см. в разделе [определить многие ко многим отношение "и" многие ко многим свойств связи](../../analysis-services/multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).  
  
## <a name="see-also"></a>См. также  
 [Измерения & #40; Analysis Services — многомерные данные & #41;](../../analysis-services/multidimensional-models-olap-logical-dimension-objects/dimensions-analysis-services-multidimensional-data.md)  
  
  
