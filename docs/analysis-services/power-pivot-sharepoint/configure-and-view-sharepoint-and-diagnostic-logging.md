---
title: "Настройка и просмотр SharePoint и ведения журнала диагностики | Документы Microsoft"
ms.custom: 
ms.date: 03/14/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- analysis-services
- analysis-services/multidimensional-tabular
- analysis-services/data-mining
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 85f62d29-cdc6-45b3-be1f-ff1182939858
caps.latest.revision: 10
author: Minewiskan
ms.author: owend
manager: erikre
ms.workload: Active
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: 5e94ef1aeee4d633353964a6398bd12b89ef86cf
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="configure-and-view-sharepoint-and-diagnostic-logging"></a>Настройка и просмотр SharePoint и ведения журнала диагностики
  [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] регистрируются в файлах журнала SharePoint. Сведения, приведенные в этом разделе, помогут настроить уровни ведения журнала и просмотреть данные файла журнала. Можно выбирать, какие события сервера [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] заносятся в файл журнала. а также определять степень серьезности регистрируемых сообщений. Дополнительные сведения см. в разделе [Настройка сбора данных об использовании с PowerPivot для SharePoint](../../analysis-services/power-pivot-sharepoint/configure-usage-data-collection-for-power-pivot-for-sharepoint.md).  
  
 В этом разделе:  
  
-   [Расположение файлов журнала](#bkmk_filelocation)  
  
-   [Изменение уровней диагностического ведения журнала для отдельных категорий событий](#bkmk_modifyloglevels)  
  
-   [Как просмотреть файлы журнала SharePoint](#bkmk_how2viewlogfiles)  
  
##  <a name="bkmk_filelocation"></a> Расположение файлов журнала  
 По умолчанию файлы журнала SharePoint сохраняются в следующем расположении:  
  
 `C:\Program files\Common Files\Microsoft Shared\Web Server Extensions\14\LOGS`  
  
 Папка LOGS содержит файлы журнала (`.log`), файлы данных (`.txt`) и файлы использования (`.usage`). Для журналов трассировки SharePoint действует следующее соглашение об именах файлов: за именем сервера следует дата и отметка времени. Журналы трассировки SharePoint создаются с регулярным интервалом, а также при каждом запуске IISRESET. В течение 24-часового периода часто существует большое количество журналов трассировки.  
  
##  <a name="bkmk_modifyloglevels"></a> Изменение уровней диагностического ведения журнала для отдельных категорий событий  
 По умолчанию уровень ведения журнала ULS для событий [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] имеет значение *Средний*. Это новый параметр в SQL Server 2012. Если сервер обновлялся с предыдущего выпуска, то уровень ведения журнала может иметь значение *Подробный*, которое использовалось по умолчанию в SQL Server 2008 R2. Если журналы ULS использовались для получения сведений об использовании сервера [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] , то в результате этого изменения вы заметите, что журналы содержат меньше информации об операциях сервера [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] .  
  
 Кроме исключений, которые имеют тип *Высокий*, все сообщения [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] попадают в категорию "Подробные". Чтобы регистрировать записи для обычных операций сервера, например соединений, запросов или отчетов о запросах, необходимо изменить уровень ведения журнала на подробный.  
  
 Изменение уровней ведения журнала диагностики для отдельных категорий событий  
  
1.  В центре администрирования SharePoint щелкните **Наблюдение**.  
  
2.  Щелкните **Настройка журнала диагностики**.  
  
3.  Перейдите к элементу **Служба [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)]**.  
  
4.  Разверните категорию и выберите отдельные категории.  
  
     Раздел**Запрос страницы приложения** содержит события, вызываемые приложением службы при поиске расположения [!INCLUDE[ssGeminiSrv_md](../../includes/ssgeminisrv-md.md)] для загрузки источника данных [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] и обмена данными с другими серверами фермы.  
  
     Раздел**Обработка запросов** содержит события, возникающие при выполнении запросов к базе данных [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] , загруженной на сервер в ферме.  
  
     Раздел**Использование** содержит событие, относящееся к сбору данных об использовании [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] .  
  
5.  В поле «Событие наименьшей важности для занесения в журнал событий» выберите значение **Нет** , чтобы отключить регистрацию событий для категории, или значение **Ошибка** , чтобы регистрировались только ошибки.  
  
6.  Выберите уровень **Подробный** , чтобы записывать все события в журнал событий.  
  
7.  В поле «Событие наименьшей важности для занесения в журнал отслеживания» выберите значение **Нет** , чтобы отключить трассировку для категории, или значение **Ошибка** , чтобы трассировались только ошибки.  
  
8.  Выберите уровень **Подробный** , чтобы записывать все события в журнал трассировки.  
  
9. Нажмите кнопку **ОК**.  
  
##  <a name="bkmk_how2viewlogfiles"></a> Как просмотреть файлы журнала SharePoint  
 Файлы журнала имеют текстовый формат, и их можно открывать в любом текстовом редакторе. Также можно использовать приложения сторонних разработчиков для просмотра журналов.  
  
#### <a name="use-a-text-editor"></a>Использование текстового редактора  
 Если для устранения ошибок сервера [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] используется текстовый редактор, следующие советы помогут найти нужные данные в файле.  
  
-   В случае ошибок, связанных с публикацией, просмотром или обновлением книги [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] , ищите имя книги в файле журнала.  
  
-   В случае ошибок, для которых указан идентификатор корреляции, скопируйте этот идентификатор и используйте его в качестве условия поиска в файле журнала.  
  
-   Ищите состояние ошибки «Высокая» или «Исключение». Выполните поиск по запросу "Служба[!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] ".  
  
-   Если неизвестно, когда произошла ошибка, используйте данные о дате и времени, чтобы ограничить область записей для прокрутки.  
  
#### <a name="use-a-log-viewer-application"></a>Использование приложения для просмотра журнала  
 Для просмотра отдельных журналов трассировки можно использовать текстовый редактор, но приложение просмотра журнала, которое позволяет просматривать сразу несколько файлов, может оказаться намного полезнее. На сайте Codeplex доступно для загрузки несколько приложений сторонних разработчиков для просмотра журнала. Они поддерживают просмотр нескольких журналов трассировки в одной рабочей области.  
  
 В следующих инструкциях содержатся ссылки на популярные журналы «Stefan Gordon's SharePoint ULS Log Viewer», которые можно скачать с Codeplex.  
  
1.  Перейдите по ссылке [SharePoint LogViewer](http://sharepointlogviewer.codeplex.com) или [SharePoint ULS Log Viewer](http://go.microsoft.com/fwlink/?LinkId=150052) на сайт Codeplex.  
  
2.  Перейдите на вкладку **Downloads** .  
  
3.  Щелкните исполняемый файл. Файл будет называться **SharePointLogViewer.exe** или **ULS Viewer 2.0 Binary**.  
  
4.  Ознакомьтесь с условиями лицензии и примите их.  
  
5.  Нажмите кнопку **Сохранить** , чтобы загрузить программное обеспечение в локальную систему.  
  
     Если загружается «SharePoint ULS Log Viewer», сохраните файл ULSViewer.zip в папку «Загрузки».  
  
6.  В папке Downloads щелкните правой кнопкой мыши файл ULSViewer.zip и выберите команду **Извлечь все**.  
  
7.  Укажите папку назначения и нажмите кнопку **Extract**.  
  
8.  В папке, содержащей распакованные файлы программы, дважды щелкните файл **ULSViewer** и запустите приложение.  
  
9. Щелкните значок папки в левом верхнем углу окна приложения.  
  
10. Перейдите в папку «\Program files\Common Files\Microsoft Shared\Web Server Extensions\14\Logs».  
  
11. Выберите один или несколько журналов трассировки. По умолчанию имена файлов журнала трассировки содержат имя компьютера и данные о дате и времени. Типом файла является текстовый документ.  
  
12. Нажмите кнопку **Открыть** и дождитесь загрузки файлов.  
  
13. Используйте встроенные фильтры для выбора записей по серьезности, процессу, категории или определяемому пользователем текстовому фильтру. Также можно щелкнуть любой заголовок столбца, чтобы изменить порядок сортировки.  
  
#### <a name="entries-for-power-pivot-services"></a>Записи для служб PowerPivot  
 В следующей таблице описываются записи для операций сервера [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] , которые, скорее всего, будут находиться в файле журнала SharePoint.  
  
|Процесс|Область|Категория|Level|Сообщение|Сведения|  
|-------------|----------|--------------|-----------|-------------|-------------|  
|w3wp.exe|[!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] Служба|Использование|Подробный|Отсутствует статистика по текущему запросу, данные не заносятся в журнал.|Отчеты службы с заранее определенными интервалами запрашивают статистику ответов в виде события использования, отправляемого в систему сбора данных об использовании. Данное сообщение показывает, что отсутствует статистика запросов для передачи.|  
|w3wp.exe|[!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] Служба|Клиентский веб-интерфейс|Подробно|Начинается поиск сервера приложений для источника данных =\<*путь*>|Когда служба [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] получает запрос на соединение, она определяет доступный [!INCLUDE[ssGeminiSrv_md](../../includes/ssgeminisrv-md.md)] для обработки запроса. Если в ферму входит только один сервер, то локальный сервер принимает запрос во всех случаях.|  
|w3wp.exe|[!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] Служба|Клиентский веб-интерфейс|Подробный|Сервер приложений определен успешно.|Запрос передан в приложение службы [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] .|  
|w3wp.exe|[!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] Служба|Клиентский веб-интерфейс|Подробно|Перенаправление запроса для \< *источник PowerPivotdata*> для [!INCLUDE[ssGeminiSrv_md](../../includes/ssgeminisrv-md.md)].|Запрос перенаправлен на [!INCLUDE[ssGeminiSrv_md](../../includes/ssgeminisrv-md.md)].|  
|w3wp.exe|[!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] Служба|Обработка запросов|Подробно|Перенаправление запроса для UserName\<*пользователя SharePoint*> в базу данных|От имени пользователя SharePoint создано соединение с источником данных [!INCLUDE[ssGemini_md](../../includes/ssgemini-md.md)] путем олицетворения.|  
  
## <a name="see-also"></a>См. также  
 [Сбор данных об использовании Power Pivot](../../analysis-services/power-pivot-sharepoint/power-pivot-usage-data-collection.md)   
 [Просмотр и чтение файлов журналов программы установки SQL Server](../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md)   
 [Настройка сбора данных об использовании с PowerPivot для SharePoint](../../analysis-services/power-pivot-sharepoint/configure-usage-data-collection-for-power-pivot-for-sharepoint.md)  
  
  

