---
title: Пользовательские иерархии | Документы Microsoft
ms.date: 05/02/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: olap
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 40b3ebfd8a92bb1c577c9fbd8ee4c9ed0068a700
ms.sourcegitcommit: c12a7416d1996a3bcce3ebf4a3c9abe61b02fb9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
---
# <a name="user-hierarchies"></a>Пользовательские иерархии
[!INCLUDE[ssas-appliesto-sqlas](../../includes/ssas-appliesto-sqlas.md)]
  Пользовательские иерархии, определяемых пользователем иерархий атрибутов, которые используются в [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для организации элементов измерения в иерархические структуры и обеспечения навигационных путей в кубе. Например, в следующей таблице определена таблица измерения для измерения времени. Эта таблица измерения поддерживает три атрибута: «Год», «Квартал» и «Месяц».  
  
|Год|Квартал|Месяц|  
|----------|-------------|-----------|  
|1999|1 квартал|Январь|  
|1999|1 квартал|Февраль|  
|1999|1 квартал|Март|  
|1999|Квартал 2|Апрель|  
|1999|Квартал 2|Май|  
|1999|Квартал 2|Июнь|  
|1999|Квартал 3|Июль|  
|1999|Квартал 3|Август|  
|1999|Квартал 3|Сентябрь|  
|1999|Квартал 4|Окт|  
|1999|Квартал 4|Ноябрь|  
|1999|Квартал 4|Dec|  
  
 Атрибуты «Год», «Квартал» и «Месяц» используются для построения пользовательской иерархии «Календарь» в измерении времени. Связь между уровнями и элементами измерения «Календарь» (обычного измерения) показана на следующей диаграмме.  
  
 ![Иерархия уровней и элементов для измерения времени](../../analysis-services/multidimensional-models-olap-logical-dimension-objects/media/as-levelconcepts.gif "Иерархия уровней и элементов для измерения времени")  
  
> [!NOTE]  
>  Любая иерархия, отличная от двухуровневой иерархии атрибутов по умолчанию, называется пользовательской иерархией. Дополнительные сведения об иерархиях атрибутов см. в разделе [атрибуты и иерархии атрибутов](../../analysis-services/multidimensional-models-olap-logical-dimension-objects/attributes-and-attribute-hierarchies.md).  
  
## <a name="member-structures"></a>Структуры элементов  
 За исключением иерархий типа «родители-потомки», положения элементов в иерархии контролируются порядком атрибутов в определении иерархии. Каждый атрибут в определении иерархии составляет один уровень иерархии. Положение элемента в пределах уровня определяется порядком атрибута, используемого для создания уровня. Пользовательские иерархии могут принимать одну из четырех базовых форм структур элементов согласно способу их связи друг с другом.  
  
### <a name="balanced-hierarchies"></a>Сбалансированные иерархии  
 В сбалансированной иерархии все ветви иерархии опускаются до одного уровня, и логическим «родителем» каждого элемента является уровень непосредственно над элементом. Иерархия «Категории продуктов» измерения «Продукт» в образце [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] базы данных [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] представляет собой хороший пример сбалансированной иерархии. Каждый элемент уровня «Имя продукта» имеет «родительский» элемент на уровне «Подкатегория», который в свою очередь имеет «родительский» элемент на уровне «Категория». Кроме того, каждая ветвь иерархии имеет конечный элемент на уровне «Название продукта».  
  
### <a name="unbalanced-hierarchies"></a>Несбалансированные иерархии  
 В несбалансированной иерархии ветви иерархии опускаются до различных уровней. Иерархии типа «родители-потомки» являются несбалансированными. Например, измерение «Организация» в образце [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] базы данных [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] содержит по одному элементу на каждого сотрудника. Генеральный директор является верхним элементом в иерархии, а руководители подразделений и исполнительный секретарь находятся непосредственно под генеральным директором. Руководители подразделений имеют подчиненные элементы, а исполнительный секретарь — нет.  
  
 Для конечных пользователей может быть невозможно провести различие между несбалансированными и клочковатыми иерархиями. Однако для поддержки этих двух типов иерархий в службах [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] применяются различные методы и свойства. Дополнительные сведения см. в разделе [неоднородные иерархии](../../analysis-services/multidimensional-models/user-defined-hierarchies-ragged-hierarchies.md), и [атрибутов в иерархии родители-потомки](../../analysis-services/multidimensional-models/parent-child-dimension-attributes.md).  
  
### <a name="ragged-hierarchies"></a>Неоднородные иерархии  
 В неоднородной иерархии по крайней мере у одного элемента логический родитель не находится ровно на один уровень выше самого элемента. Это может привести к тому, что ветви иерархии опускаются до различных уровней. Например, в измерении «География», определенном с уровнями «Континент», «Страна» и «Город» именно в этом порядке, элемент «Европа» отображается на верхнем уровне иерархии, элемент «Франция» отображается на среднем уровне, а элемент «Париж» — на нижнем уровне. «Франция» является более точным определением, чем «Европа», а «Париж» является более точным определением, чем «Франция». В эту обычную иерархию вносятся следующие изменения.  
  
-   Элемент «Ватикан» добавляется к уровню «Страна».  
  
-   Элементы добавляются к уровню «Город» и связываются с элементом «Ватикан» уровня «Страна».  
  
-   Уровень с именем «Район» добавляется между уровнями «Страна» и «Город».  
  
 Уровень «Район» заполняется элементами, связанными с другими элементами уровня «Страна», а элементы уровня «Город» связываются соответствующими им элементами уровня «Район». Однако поскольку элемент «Ватикан» уровня «Страна» не имеет связанных с ним элементов уровня «Район», элементы с уровня «Город» должны быть непосредственно связаны с элементом «Ватикан» уровня «Страна». В результате произведенных изменений иерархия измерения стала неровной. Родительским элементом города «Ватикан» является страна «Ватикан», которая не находится на уровне непосредственно над элементом «Ватикан» уровня «Город». Дополнительные сведения об иерархиях см. в разделе [Неоднородные иерархии](../../analysis-services/multidimensional-models/user-defined-hierarchies-ragged-hierarchies.md).  
  
### <a name="parent-child-hierarchies"></a>Иерархии типа «родители-потомки»  
 Иерархии типа «родители-потомки» для измерений определяются с использованием специального атрибута, называемого «родительским», для определения того, как элементы относятся друг к другу. Родительский атрибут описывает *связь, ссылающуюся на себя*(или *самосоединение*) в пределах главной таблицы измерения. Иерархии типа «родители-потомки» создаются из одного родительского атрибута. Иерархии типа «родители-потомки» присваивается только один уровень, поскольку присутствующие в ней уровни наследуют связи типа «родители-потомки» между элементами, связанными с родительским атрибутом. Схема измерения иерархии типа «родители-потомки» зависит от связи, ссылающейся на себя, присутствующей в главной таблице измерения. Например, на следующей схеме показана **DimOrganization** главная таблица измерения в [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] образца базы данных.  
  
 ![Ссылающиеся на себя соединение в таблице DimOrganization](../../analysis-services/multidimensional-models/media/dimorganization.gif "содержат ссылки на себя соединение в таблице DimOrganization")  
  
 В этой таблице измерения столбец **ParentOrganizationKey** имеет связь по внешнему ключу с первичным ключевым столбцом **OrganizationKey** . Другими словами, каждая запись в этой таблице может быть соотнесена посредством связи типа «родители-потомки» с другой записью в таблице. Подобный тип самосоединения обычно используется для представления данных сущности организации (например, структуры управления сотрудниками в отделе).  
  
 При создании иерархии типа «родители-потомки» столбцы, представленные обоими атрибутами, должны иметь одинаковый тип данных. Оба атрибута также должны находиться в одной и той же таблице. По умолчанию любой элемент, «родительский» ключ которого равен его собственному ключу элемента, значению NULL, 0 (нулю) или значению, отсутствующему в столбце для ключей элементов, считается элементом верхнего уровня (исключая уровень «Все»).  
  
 Глубина иерархии типа «родители-потомки» может изменяться между ее иерархическими ветвями. Иными словами, иерархия типа «родители-потомки» считается несбалансированной.  
  
 В отличие от пользовательских иерархий, в которых общее количество уровней определяет число уровней, видимое конечному пользователю, иерархия типа «родители-потомки» определяется единственным уровнем иерархии атрибутов, а значения в нем реализуют несколько уровней, видимых конечными пользователями. Количество отображаемых уровней зависит от содержимого столбца таблицы измерения, в котором хранятся ключи элементов и «родительские» ключи. Количество уровней может изменяться при изменении данных в таблицах измерения. Дополнительные сведения см. в разделе [родитель-потомок измерения](../../analysis-services/multidimensional-models/parent-child-dimension.md), и [атрибутов в иерархии родители-потомки](../../analysis-services/multidimensional-models/parent-child-dimension-attributes.md).  
  
## <a name="see-also"></a>См. также  
 [Создание определяемых пользователем иерархий](../../analysis-services/multidimensional-models/user-defined-hierarchies-create.md)   
 [Свойства пользовательской иерархии](../../analysis-services/multidimensional-models-olap-logical-dimension-objects/user-hierarchies-properties.md)   
 [Справочник по свойствам атрибута измерения](../../analysis-services/multidimensional-models/dimension-attribute-properties-reference.md)  
  
  
