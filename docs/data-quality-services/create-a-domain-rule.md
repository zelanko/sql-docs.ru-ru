---
title: Создание правила домена | Microsoft Docs
ms.custom: ''
ms.date: 11/08/2011
ms.prod: sql
ms.prod_service: data-quality-services
ms.reviewer: ''
ms.technology: data-quality-services
ms.topic: conceptual
f1_keywords:
- sql13.dqs.dm.testdomainrule.f1
- sql13.dqs.dm.rules.f1
ms.assetid: 339fa10d-e22c-4468-b366-080c33f1a23f
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.openlocfilehash: 865c5a9430f7c17f120e96b015ffe2818a68801f
ms.sourcegitcommit: c19696d3d67161ce78aaa5340964da3256bf602d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/29/2018
ms.locfileid: "52617644"
---
# <a name="create-a-domain-rule"></a>Создание правила домена

[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

  В этом разделе описывается, как создать правило домена в [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS). Правило домена — это условие, которое используется для проверки, исправления и стандартизации значений домена. Правило домена должно выполняться в домене, чтобы значения домена были точными и соответствовали требованиям бизнеса. Правила домена могут включать правила проверки, которые используются для проверки значений домена, а не для исправления данных в проектах служб DQS. Правила включают также правила стандартизации, которые применяются в отношении допустимых данных и служат для исправления данных.  
  
##  <a name="BeforeYouBegin"></a> Перед началом  
  
###  <a name="Prerequisites"></a> Предварительные требования  
 Чтобы создать правило домена, необходимо иметь базу знаний и домен, открытые в действии управления доменами.  
  
###  <a name="Security"></a> безопасность  
  
####  <a name="Permissions"></a> Permissions  
 Для создания правила домена необходимо иметь роль dqs_kb_editor или dqs_administrator в базе данных DQS_MAIN.  
  
##  <a name="Build"></a> Создание правил домена  
  
1.  [!INCLUDE[ssDQSInitialStep](../includes/ssdqsinitialstep-md.md)] [Запуск клиентского приложения Data Quality Client](../data-quality-services/run-the-data-quality-client-application.md).  
  
2.  На главном экране клиента [!INCLUDE[ssDQSClient](../includes/ssdqsclient-md.md)] откройте или создайте базу знаний. Выберите операцию **Управление доменами** , а затем нажмите кнопку **Открыть** или **Создать**. Дополнительные сведения см. в разделе [Создание базы знаний](../data-quality-services/create-a-knowledge-base.md) или [Открытие базы знаний](../data-quality-services/open-a-knowledge-base.md).  
  
    > [!NOTE]  
    >  Управление доменами осуществляется на странице клиента службы Data Quality Services, которая содержит пять вкладок для отдельных операций управления доменом. Это не процесс, управляемый мастером; любая операция управления может быть выполнена отдельно.  
  
3.  В области **Список доменов** страницы **Управление доменами** выберите домен, для которого необходимо создать правило домена, или создайте новый домен. Если нужно создать новый домен, см. раздел [Создать домен](../data-quality-services/create-a-domain.md).  
  
4.  Перейдите на вкладку **Правила домена** .  
  
5.  Щелкните **Добавить новое правило домена**и введите имя, которое является уникальным в базе знаний, и описание правила.  
  
6.  Установите флажок **Активно** , чтобы указать, что правило должно применяться (по умолчанию), или снимите его, чтобы правило не применялось.  
  
7.  На панели **Создать правило** выберите условие в раскрывающемся списке в поле предложения правила.  
  
8.  Если для условия требуется значение, введите значение в соответствующем текстовом поле.  
  
9. Если требуется другое предложение, щелкните значок **Добавляет новое условие в выбранное предложение** .  
  
10. В качестве оператора выберите **И** или **ИЛИ** .  
  
11. При необходимости выберите в раскрывающемся списке условие, а затем введите значение операнда.  
  
12. Чтобы изменить порядок, в котором предложения отображаются в списке, выберите предложение, а затем щелкните стрелку вниз. При этом изменяется порядок выполнения предложений, что может повлиять на результаты.  
  
13. При необходимости добавьте дополнительные предложения. При необходимости удалите предложение. Для этого выделите его и щелкните **Удаление выбранного предложения**.  
  
14. При необходимости повторите описанную процедуру для добавления новых правил.  
  
15. Чтобы узнать, какое влияние оказывает на значение правило проверки, если оно реализовано, щелкните значок **Анализ влияния правила домена на значения домена** .  
  
16. Перейдите к процедуре тестирования, которая описана ниже.  
  
##  <a name="Test"></a> Тестирование правил домена  
  
1.  Выберите одно правило, затем щелкните значок **Применить выбранное правило домена к тестовым данным** .  
  
2.  В диалоговом окне «Тестирование правила домена» щелкните значок **Добавить новый проверочный термин для правила домена** . Введите значение для проверки. При необходимости введите другие значения. Выберите значение и щелкните значок **Удалить выбранный проверочный термин** .  
  
3.  Щелкните значок **Проверить правило домена на всех терминах** .  
  
4.  Проверьте допустимость каждого термина. Флажок означает "правильный", крест — "ошибочный", а треугольник — "недопустимый".  
  
5.  Нажмите кнопку **Закрыть** в диалоговом окне тестирования.  
  
6.  При необходимости повторите описанную процедуру для других правил.  
  
7.  Перейдите к процедуре применения, которая описана далее.  
  
##  <a name="Apply"></a> Применение правил домена  
  
1.  Щелкните **Применить все правила** , чтобы применить правила к значениям в домене. После выбора элемента **Применить все правила**открывается всплывающее окно, в котором представлена информация о том, на сколько значений в определенном состоянии влияет правило. Нажмите кнопку **Да** , если все еще требуется применить правило, или **Нет** , если применять правило не требуется. Если нажата кнопка **Да**, нажмите кнопку **ОК** , чтобы закрыть всплывающее окно с результатами.  
  
    > [!NOTE]  
    >  При создании или изменении нового правила сохранять изменения не требуется. Чтобы изменения вступили в силу, необходимо применить правило.  
  
2.  Чтобы отменить изменения, внесенные в правила домена, щелкните **Отменить все изменения** . В силу снова вступят ранее действовавшие правила. Изменения, внесенные после последнего применения правил, не сохраняются. Допустимость каждого значения в домене обновляется в соответствии с ранее применяемыми правилами. Отмененные изменения не учитываются.  
  
3.  Нажмите кнопку **Готово** , чтобы завершить операцию управления доменами, как описано в разделе [Завершение операции по управлению доменами](https://msdn.microsoft.com/library/ab6505ad-3090-453b-bb01-58435e7fa7c0).  
  
##  <a name="FollowUp"></a> Дальнейшие действия. После создания правила домена  
 После создания правила домена можно выполнить другие задачи управления для этого домена, провести обнаружение знаний для добавления набора знаний в домен или добавить в домен политику сопоставления. Дополнительные сведения см. в разделах [Обнаружение набора знаний](../data-quality-services/perform-knowledge-discovery.md), [Управление доменом](../data-quality-services/managing-a-domain.md) и [Создание политики сопоставления](../data-quality-services/create-a-matching-policy.md).  
  
##  <a name="Conditions"></a> Условия правил домена  
 В следующей таблице представлены условия, которые можно применять к правилу домена, и пример для иллюстрации применения условий.  
  
 Если применяется правило домена и значение домена не соответствует правилу, значение обозначается как недопустимое. Значение, которое обозначается как «Недопустимое», изменяется на «Допустимое» при определении правила, согласно которому это значение определено как недопустимое, или отключается, если правило изменено, например при отсутствии несоответствия значения правилу. Если значение вручную обозначено как «Недопустимое» (на вкладке «Значения домена» действия «Управление доменами») и правило, которому значение не соответствует, удалено, отключено или изменено, значение все равно обозначается как «Недопустимое».  
  
 Правило домена, содержащее определительное условие, применяет логику правила к синонимам значений в условиях, а также к самим значениям. Определительными условиями являются: «Значение равно», «Значение не равно», «Значение в наборе» или «Значение не в наборе». Например, предположим, что имеется следующее правило домена: "Для параметра "Город" значение равно Los Angeles". Если Los Angeles и LA являются синонимами, оба значения допустимы. С другой стороны, если правило не содержит определительное условие, например "Для параметра "Город" значение заканчивается на s", то значение Los Angeles является допустимым, а синоним LA — нет.  
  
 При создании правила домена можно использовать различные альтернативы. К примеру, чтобы проверить, начинаются ли значения с букв A, B или C, можно создать простое правило со сложным условием (например, регулярное выражение с символами вертикальной черты) или создать сложное правило, содержащее несколько простых условий. Пример первого правила: "Значение содержит регулярное выражение (^A|^B|^C)". Пример второго правила: ""Значение начинается с A", ИЛИ "Значение начинается с B", ИЛИ "Значение начинается с C"".  
  
|Условие|Описание|Пример|  
|---------------|-----------------|-------------|  
|Длина равна|Допустимы только значения, количество символов в которых соответствует количеству, указанному операндом.|Пример операнда: 3<br /><br /> Допустимое значение: BB1<br /><br /> Недопустимое значение: AA|  
|Длине больше или равна|Допустимы только значения, количество символов в которых соответствует количеству, указанному операндом, или превышает его.|Пример операнда: 3<br /><br /> Допустимые значения: BB1, BBAA<br /><br /> Недопустимое значение: AA|  
|Длина меньше или равна|Допустимы только значения, количество символов в которых равно количеству, указанному операндом, или меньше его.|Пример операнда: 3<br /><br /> Допустимые значения: BB1, AA<br /><br /> Недопустимое значение: BBAA|  
|Значение равно|Допустимы только значения, которые идентичны операнду.|Пример операнда: BB1<br /><br /> Допустимое значение: BB1<br /><br /> Недопустимое значение: BB, BB1#|  
|Значение не равно|Допустимы только значения, которые не идентичны операнду.|Пример операнда: BB1<br /><br /> Допустимое значение: BB, BB1#<br /><br /> Недопустимое значение: BB1|  
|Значение содержит|Допустимы только значения, все символы которых в любом порядке содержатся в операнде.|Пример операнда: A1<br /><br /> Допустимые значения: A1, AA1<br /><br /> Недопустимое значение: 1A, AA|  
|Значение не содержит|Допустимы только значения, которые не содержатся в операнде.|Пример операнда: A1<br /><br /> Допустимые значения: 1A, AA<br /><br /> Недопустимое значение: A1, AA1|  
|Значение начинается с|Допустимы только значения, которые начинаются с символов, указанных в операнде.|Пример операнда: AA<br /><br /> Допустимые значения: AA1<br /><br /> Недопустимые значения: 1AAB|  
|Значение заканчивается на|Допустимы только значения, которые заканчиваются символами, указанными в операнде.|Пример операнда: AA<br /><br /> Допустимые значения: 1AA<br /><br /> Недопустимые значения: 1AAB|  
|Значение является числом|Допустимы только значения с числовым типом данных SQL Server, в том числе int, decimal, float и т. д.|Пример операнда: Н/Д<br /><br /> Допустимые значения: 1, 25, 345.1234<br /><br /> Недопустимые значения: 2b, bcdef|  
|Значение является датой/временем|Допустимы только значения с типом данных «дата-время» SQL Server, в том числе datetime, time, date и т. д.|Пример операнда: Н/Д<br /><br /> Допустимые значения: 1916-06-04; 1916-06-04 18:24:24; March 21, 2001; 5/18/2011; 18:24:24<br /><br /> Недопустимые значения: March 213, 2006|  
|Значение в наборе|Допустимы только значения, входящие в набор, представленный операндом.<br /><br /> Чтобы ввести значения в набор, щелкните текстовое поле операнда, введите первое значение, нажмите клавишу ВВОД, введите второе значение и повторите данную процедуру для всех значений, которые требуется добавить в набор. Затем снова щелкните в текстовом поле операнда. DQS добавляет запятую между значениями в наборе. Если ввести отдельную строку с запятыми без символа возврата каретки (например, "A1, B1"), DQS будет рассматривать такую строку как отдельное значение в наборе.|Пример операнда: [A1, B1]<br /><br /> Допустимые значения: A1, B1<br /><br /> Недопустимые значения: AA, 11|  
|Значение не в наборе|Допустимы только значения, не входящие в набор, представленный операндом.|Пример операнда: [A1, B1]<br /><br /> Допустимые значения: AA, 11<br /><br /> Недопустимые значения: A1, B1|  
|Значение соответствует шаблону|Допустимы только значения, которые соответствуют шаблону символов, цифр или специальных символов в операнде.<br /><br /> Любую букву (А–Z) можно использовать в качестве шаблона для любой буквы. Регистр не учитывается. Любую цифру (0–9) можно использовать в качестве шаблона для любой цифры. Любой специальный символ, за исключением символа или цифры, можно использовать в качестве шаблона для специального символа. Квадратные скобки [] определяют необязательное сопоставление.|Пример операнда: AA:000 (шаблон *любых* 2 символов, за которыми следует двоеточие (:), а затем *любые* 3 цифры.<br /><br /> Допустимые значения: AB:012, df:257<br /><br /> Недопустимые значения: abc:123, FJ-369<br /><br /> Дополнительные сведения о правилах шаблонов в DQS и примеры см. в разделе [Сопоставление по шаблону в правилах доменов DQS](https://blogs.msdn.com/b/dqs/archive/2012/10/08/pattern-matching-in-dqs-domain-rules.aspx).|  
|Значение не соответствует шаблону|Допустимы только значения, которые не соответствуют шаблону символов, цифр или специальных символов в операнде.|Пример операнда: A1 (значение должно соответствовать шаблону *любого* символа, за которым следует *любая* одна цифра).<br /><br /> Допустимые значения: AB1, A, A:5<br /><br /> Недопустимые значения: B7, c9|  
|Значение содержит шаблон|Допустимы только значения, которые содержат шаблон символов, цифр или специальных символов в операнде.|Пример операнда: AA-12 (значение содержит шаблон из двух *любых* символов, за которыми следует дефис (-), а потом две *любые* цифры).<br /><br /> Допустимые значения: AAA-01, ab-975<br /><br /> Недопустимое значение: A7, AA-6, C-45, aa;98|  
|Значение не содержит шаблон|Допустимы только значения, которые не содержат шаблон символов, указанный в операнде.|Пример операнда: AB-12 (значение не должно содержать шаблон из двух *любых* символов, за которыми следует дефис (-), а потом две *любые* цифры).<br /><br /> Допустимые значения: A7, AA-6, C-45, aa;98<br /><br /> Недопустимое значение: AAA-01, ab-975|  
|Значение соответствует регулярному выражению|Допустимыми считаются только значения, которые соответствуют регулярному выражению, указанному в операнде.<br /><br /> Не включайте в регулярные выражения символы "^" или "$", иначе DQS автоматически добавит эти привязки в предложение, содержащее условие "Значение равно регулярному выражению". (В качестве альтернативы вы можете заключить регулярное выражение, содержащее привязки "^" и "$", в скобки.) Дополнительные сведения о регулярных выражениях см. в разделе [Элементы языка регулярных выражений](https://go.microsoft.com/fwlink/?LinkId=225561).|Пример операнда: [1-5]+ (каждый символ должен представлять собой цифру от 1 до 5 и встречаться один или несколько раз)<br /><br /> Допустимые значения: 123, 12345, 14352<br /><br /> Недопустимые значения: 456, ABC|  
|Значение не соответствует регулярному выражению|Допустимыми считаются только значения, которые не соответствуют регулярному выражению, указанному в операнде.|Пример операнда: [1-5]+ (строка не должна содержать только цифры от 1 до 5)<br /><br /> Допустимые значения: 456, ABC<br /><br /> Недопустимое значение: 123, 123456, 14352|  
  
  
