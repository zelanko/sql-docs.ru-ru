---
title: 'Очистка данных с помощью (внешних) эталонных данных базы знаний '
description: Узнайте, как очистить данные с помощью знаний из поставщиков ссылочных данных со службами Data Quality Services (DQS) в SQL Server.
ms.custom: seo-lt-2019
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: data-quality-services
ms.reviewer: ''
ms.technology: data-quality-services
ms.topic: conceptual
ms.assetid: 158009e9-8069-4741-8085-c14a5518d3fc
author: swinarko
ms.author: sawinark
ms.openlocfilehash: fc0135ed4e4956d6bd98fc0b467a5b6d0a25a013
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "75557909"
---
# <a name="cleanse-data-using-external-knowledge-reference-data---data-quality-services-dqs"></a>Очистка данных с помощью (внешних) эталонные данные базы знаний — службы Data Quality Services (DQS)

[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

  В этом разделе описывается очистка данных с использованием набора знаний из поставщиков ссылочных данных. Все этапы очистки данных с использованием набора знаний из поставщиков эталонных данных точно такие же, как описано в разделе [Очистка данных с использованием набора знаний служб DQS &#40;внутренних&#41;](../data-quality-services/cleanse-data-using-dqs-internal-knowledge.md), а в этом разделе приведены сведения по очистке данных с использованием службы эталонных данных в [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS).  

> [!IMPORTANT]
> В этой статье упоминаются сторонние службы ссылочных данных, которые ранее были доступны из Azure DataMarket. DataMarket и службы Data Services — включая данные об адресах Melissa — не поддерживаются после 31 декабря 2016 г. Таким образом, вы больше не можете запускать примеры в этой статье с помощью указанных служб из DataMarket. По-прежнему можно использовать службы эталонных данных, доступные через Интернет напрямую от сторонних поставщиков.
 
 При очистке данных с использованием функции службы ссылочных данных в DQS процесс очистки служб DQS отправляет сопоставленные значения домена поставщику служб ссылочных данных в виде пакетного запроса. Служба ссылочных данных в ответ отправляет следующие сведения:  
  
-   Предлагаемые исправления  
  
-   Достоверность  
  
-   Дополнительные сведения о сопоставленном домене. Ссылочные данные позволяют также стандартизировать, выполнять анализ или обогащать источник дополнительными данными. Эти сведения предоставляются в дополнительных полях в ответе.  
  
 После получения ответа от службы ссылочных данных в ходе действия по очистке в DQS происходит следующее.  
  
-   На основе значений **Пороговое значение автоматического исправления** и **Минимальная достоверность** , заданных при сопоставлении доменов со службой ссылочных данных, происходит автоматическое исправление или предоставление предлагаемых вариантов, в зависимости от уровня достоверности.  
  
    > [!NOTE]  
    >  Пороговые значения, указанные во время сопоставления домена со службой ссылочных данных, применяются при очистке данных с использованием набора знаний в службе ссылочных данных, а не данных, указанных на вкладке **Общие параметры** в разделе **Настройка** . Сведения об указании пороговых значений для очистки эталонных данных см. в шаге 9 в разделе [Подсоединение обычного или составного домена к эталонным данным](../data-quality-services/attach-domain-or-composite-domain-to-reference-data.md).  
  
-   Значения доменов категоризируются следующим образом: **Предложено**, **Новый**, **Недопустимый**, **Исправлено**и **Правильно**.  
  
-   Дополнительные данные присоединены к источнику, а сведения доступны вместе с очищенными данными для экспорта.  
  
## <a name="before-you-begin"></a>Перед началом  
  
###  <a name="Prerequisites"></a> Предварительные требования  
 Следует предварительно сопоставить требуемые домены в базе знаний DQS с соответствующей службой ссылочных данных. Кроме того, база знаний должна содержать набор знаний о типе данных, которые требуется очистить. Например, если требуется очистить исходные данные, содержащие адреса в США, необходимо сопоставить домены с поставщиком службы ссылочных данных, предоставляющим высококачественные данные по адресам в США. Дополнительные сведения см. в разделе [Добавление домена или составного домена к ссылочным данным](../data-quality-services/attach-domain-or-composite-domain-to-reference-data.md).  
  
###  <a name="Security"></a> безопасность  
  
####  <a name="Permissions"></a> Permissions  
 Для выполнения очистки данных необходимо иметь роль dqs_kb_editor или dqs_kb_operator в базе данных DQS_MAIN.  
  
##  <a name="Cleanse"></a>Очистка данных с помощью набора знаний эталонных данных  
 Мы будем использовать тот же пример использования доменов, сопоставленных в предыдущем разделе, [присоединить домен или составной домен к ссылочным данным](../data-quality-services/attach-domain-or-composite-domain-to-reference-data.md)с помощью службы данных Melissa в Azure Marketplace. Теперь мы будем использовать те же домены для очистки образцов адресов в США. Шаги по очистке данных описаны в разделе [Очистка данных с использованием набора знаний служб DQS &#40;внутренних&#41;](../data-quality-services/cleanse-data-using-dqs-internal-knowledge.md). Однако мы будем привлекать ваше внимание к важным деталям в ходе этого процесса.  
  
1.  Создайте проект служб DQS и выберите действие **Очистка** . См. раздел [Create a Data Quality Project](../data-quality-services/create-a-data-quality-project.md).  
  
2.  На странице **Сопоставление** сопоставьте следующие 4 домена с соответствующими столбцами в исходных данных: **Строка адреса**, **Город**, **Штат**и **Почтовый индекс**. Щелкните **Далее**.  
  
    > [!NOTE]  
    >  После того как все 4 домена будут сопоставлены внутри составного домена **Проверка адресов** , очистку данных можно будет выполнять на уровне составного домена, а не отдельных доменов.  
  
3.  На странице **Очистка** запустите автоматизированный процесс очистки. Для этого нажмите кнопку **Пуск**. После завершения процесса очистки нажмите кнопку **Далее**.  
  
    > [!NOTE]  
    >  На странице **Очистка** службы DQS отображают сведения о доменах, присоединенных к службе ссылочных данных, двумя способами.  
    >   
    >  -   После кнопки " **Пуск** " отображается сообщение: "Domains \<Domain1>, \<Домен2>,... \<> доменn очищается с помощью поставщика службы ссылочных данных ". В этом примере отображается следующее сообщение: "Выполняется очистка домена "Проверка адресов" с использованием поставщика службы ссылочных данных".  
    > -   Значок, ![присоединенный к RDS](../data-quality-services/media/dqs-rdsindicator.JPG "Домен прикреплен к RDS"), отображается в области **профилировщика** в соответствии с доменами, присоединенными к поставщику службы ссылочных данных. В этом примере значок будет отображаться напротив составного домена **Проверка адресов** .  
  
4.  На странице **Управление результатами и просмотр результатов** просмотрите значения домена. Служба ссылочных данных может отображать, если доступно, несколько предлагаемых значений, количество которых зависит от максимума, заданного в поле **Предлагаемые варианты** во время сопоставления домена со службой ссылочных данных. Например, для следующего адреса в США отображаются два предлагаемых варианта.  
  
     **Исходное значение:**  
  
    |Строка адреса|City|State|Zip|  
    |------------------|----------|-----------|---------|  
    |1 msft way|Редмонд||98052|  
  
     **Предлагаемые значения:**  
  
    |Строка адреса|City|State|Zip|  
    |------------------|----------|-----------|---------|  
    |1 Microsoft Way|Редмонд|WA|98052|  
    |PO Box 1|Редмонд|WA|98073|  
  
     ![Очистка с помощью службы ссылочных данных](../data-quality-services/media/dqs-rdscleansing.JPG "Очистка с помощью службы ссылочных данных")  
  
    > [!NOTE]  
    >  Что касается составных доменов, то службы DQS выделяют также другим цветом отдельные домены, где в процессе автоматизированной очистки вносились исправления. Например, в данном случае исправлениям подвергались домены **Строка адреса** и **Штат** , поэтому они выделены голубым.  
  
5.  После окончания просмотра всех значений домена нажмите кнопку **Далее** , чтобы экспортировать данные.  
  
6.  Обратите внимание, что на странице **Экспорт** , помимо обычных сведений о действии очистки для каждого домена («Источник», «Причина», «Достоверность» и «Состояние»), будут находиться дополнительные сведения, предоставленные службой ссылочных данных Melissa Data по данным адресов: широта и долгота места, страна, тип адреса (высотный дом, улица и т. д) и т. п.  
  
7.  Экспортируйте данные в нужное назначение (SQL Server, CSV или Excel) и нажмите кнопку **Готово** , чтобы закрыть проект.  
  
    > [!IMPORTANT]  
    >  Если используется 64-разрядная версия Excel, то нельзя экспортировать очищенные данные в файл Excel. Можно экспортировать данные только в базу данных SQL Server или в CSV-файл.  
  
  
