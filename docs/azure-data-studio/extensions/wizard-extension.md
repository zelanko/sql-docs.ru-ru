---
title: Создание расширения мастера
description: В этом учебнике показано, как создать расширение мастера, чтобы добавить пользовательские функции для Azure Data Studio.
ms.prod: azure-data-studio
ms.technology: azure-data-studio
ms.topic: conceptual
author: yualan
ms.author: alayu
ms.reviewer: maghan
ms.custom: ''
ms.date: 08/28/2020
ms.openlocfilehash: 50440aca120dad6cfd165262bd4bfd2e139393cf
ms.sourcegitcommit: 63aef5a96905f0b026322abc9ccb862ee497eebe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91364061"
---
# <a name="create-an-azure-data-studio-wizard-extension"></a>Создание расширения мастера в Azure Data Studio

В этом учебнике показано, как создать **расширение мастера в Azure Data Studio**. Это расширение предоставляет мастер для взаимодействия с пользователями в Azure Data Studio.

В этой статье раскрываются следующие темы:
> [!div class="checklist"]
> - Установка генератора расширений
> - Создание расширения
> - Добавление настраиваемого мастера в расширение
> - Тестирование расширения
> - Упаковка расширения
> - Публикация расширения в Marketplace

## <a name="prerequisites"></a>Предварительные требования

Средство Azure Data Studio основано на той же платформе, что и Visual Studio Code, поэтому расширения для Azure Data Studio создаются с помощью Visual Studio Code. Чтобы приступить к работе, вам потребуются следующие компоненты.

- Установленный [Node.js](https://nodejs.org), доступный в вашей переменной `$PATH`. Node.js включает в себя [npm](https://www.npmjs.com/), диспетчер пакетов Node.js, который будет использоваться для установки генератора расширений.
- [Visual Studio Code](https://code.visualstudio.com) для отладки расширения.
- [Расширение отладки](https://marketplace.visualstudio.com/items?itemName=ms-mssql.sqlops-debug) Azure Data Studio (необязательно). Оно позволяет протестировать расширение без необходимости упаковывать и устанавливать его в Azure Data Studio.
- Убедитесь, что `azuredatastudio` указан в вашем пути. Для Windows выберите параметр `Add to Path` в setup.exe. Для Mac или Linux выберите параметр *Установить путь к команде azuredatastudio в PATH*.

## <a name="install-the-extension-generator"></a>Установка генератора расширений

Чтобы упростить процесс создания расширений, мы создали [генератор расширений](https://code.visualstudio.com/docs/extensions/yocode) с помощью Yeoman. Для его установки выполните следующую команду в командной строке.

```console
`npm install -g yo generator-azuredatastudio`
```

## <a name="create-your-wizard-extension"></a>Создание расширения мастера

### <a name="introduction-to-wizards"></a>Общие сведения о мастере

Мастер — это тип пользовательского интерфейса, предоставляющий пошаговые страницы, которые пользователь должен заполнить для выполнения задачи. Обычно используются мастеры настройки программного обеспечения и мастеры устранения неполадок. Пример:

:::image type="content" source="media/wizard-extension/dacpac-wizard.gif" alt-text="Мастер Dacpac":::

Поскольку мастеры часто удобно использовать при работе с данными и расширении функциональных возможностей Azure Data Studio, Azure Data Studio предлагает интерфейсы API для создания собственных настраиваемых мастеров. Мы рассмотрим, как создать шаблон мастера и изменить его для создания собственного настраиваемого мастера.

### <a name="run-the-extension-generator"></a>Запуск генератора расширений

Для создания расширения сделайте следующее.

1. Запустите генератор расширений с помощью следующей команды.

   `yo azuredatastudio`

2. Выберите **Новый мастер или диалоговое окно** в списке типов расширений. Затем выберите **Мастер** и **Шаблон для начало работы**

3. Выполните инструкции, чтобы указать имя расширения (в этом руководстве используйте **My Test Extension**) и описание.

    :::image type="content" source="media/wizard-extension/extension-generator.png" alt-text="Генератор расширений":::

При выполнении предыдущих шагов создается папка. Откройте ее в Visual Studio Code, после чего вы сможете создать собственное расширение мастера.

### <a name="run-the-extension"></a>Запуск расширения

Давайте посмотрим, что делает шаблон мастера, запустив расширение. Перед запуском убедитесь, что в Visual Studio Code установлено **расширение отладки Azure Data Studio**.

Нажмите клавишу **F5** в Visual Studio Code, чтобы запустить Azure Data Studio в режиме отладки с запущенным расширением. Затем в Azure Data Studio выполните команду **Запуск мастера** из палитры команд (CTRL+SHIFT+P) в новом окне. Запустится мастер по умолчанию, с которым связан вклад этого расширения:

:::image type="content" source="media/wizard-extension/wizard-template.gif" alt-text="Шаблон мастера":::

Далее мы рассмотрим, как изменить этот мастер по умолчанию.

### <a name="develop-the-wizard"></a>Разработка мастера

Разработку расширения нужно начать с самых важных файлов — `package.json`, `src/main.ts` и `vsc-extension-quickstart.md`:

- `package.json`: это файл манифеста, в котором зарегистрирована команда **Запуск мастера**. Кроме того, здесь `main.ts` объявляется основной точкой входа в программу.
- `main.ts`: содержит код для добавления элементов пользовательского интерфейса в мастер, например страницы, текст и кнопки.
- `vsc-extension-quickstart.md`: содержит техническую документацию, на которую можно опираться при разработке.

Внесем изменения и добавим четвертую, пустую страницу. Измените `src/main.ts`, как показано ниже, и при запуске мастера должна отобразиться дополнительная страница.

:::image type="content" source="media/wizard-extension/wizard-main.png" alt-text="Основная страница мастера":::
Познакомившись с шаблоном, попробуйте поэкспериментировать:

- Добавьте кнопку шириной 300 на новую страницу.
- Добавьте гибкий компонент, в котором можно разместить кнопку.
- Добавьте действие для кнопки. Например, при нажатии кнопки открывается диалоговое окно открытия файла или редактор запросов.

## <a name="package-your-extension"></a>Упаковка расширения

Чтобы предоставить общий доступ другим пользователям, нужно упаковать расширение в один файл. Его можно опубликовать в магазине расширений Azure Data Studio или предоставить для общего доступа другим участникам команды или сообщества. Для этого нужно установить другой пакет npm из командной строки.

```console
npm install -g vsce`
```

Измените `README.md` по желанию, перейдите к базовому каталогу расширения и выполните команду `vsce package`. При необходимости можно связать репозиторий с расширением или продолжить работу без него. Чтобы добавить его, добавьте аналогичную строку в файл `package.json`.

```json
"repository": {
    "type": "git",
    "url": "https://github.com/anjalia/my-test-extension.git"
}
```

После добавления этих строк создается файл my-test-extension-0.0.1.vsix, готовый для установки в Azure Data Studio.

:::image type="content" source="media/wizard-extension/install-vsix.png" alt-text="Установка VSIX":::

## <a name="publish-your-extension-to-the-marketplace"></a>Публикация расширения в Marketplace

Магазин расширений Azure Data Studio пока реализован не полностью, но текущая процедура заключается в размещении VSIX расширения где-либо (например, на странице выпуска GitHub) и последующей отправке запроса на вытягивание для обновления [этого JSON-файла](https://github.com/Microsoft/azuredatastudio/blob/release/extensions/extensionsGallery.json) с использованием сведений о расширении.

## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве вы узнали, как выполнять следующие задачи:
> [!div class="checklist"]
> - Установка генератора расширений
> - Создание расширения
> - Добавление настраиваемого мастера в расширение
> - Тестирование расширения
> - Упаковка расширения
> - Публикация расширения в Marketplace

Мы надеемся, что после ознакомления с этим материалом вы захотите создать собственное расширение для Azure Data Studio. Мы обеспечиваем поддержку Dashboard Insights (симпатичное графическое решение, предназначенное для SQL Server), нескольких SQL-ориентированных API, а также обширного набора точек расширений, унаследованных от Visual Studio Code.

Если у вас появилась идея, но вы не знаете, с чего начать, откройте вопрос или отправьте твит нашей команде: [azuredatastudio](https://twitter.com/azuredatastudio).

Вы всегда можете обратиться к [руководству по расширениям Visual Studio Code](https://code.visualstudio.com/docs/extensions/overview), так как оно охватывает все существующие API и шаблоны.

Чтобы узнать, как работать с T-SQL в Azure Data Studio, изучите руководство по редактору T-SQL:

> [!div class="nextstepaction"]
> [Создание объектов базы данных с помощью редактора Transact-SQL](../tutorial-sql-editor.md)
