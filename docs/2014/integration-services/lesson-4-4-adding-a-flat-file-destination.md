---
title: Шаг 4. Добавление назначения неструктурированных файлов | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: f4088de3-16d8-419c-96a1-a2cd005d0a5b
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.openlocfilehash: c43885de9e2a6945a8a24263765df8ee8e26920a
ms.sourcegitcommit: ceb7e1b9e29e02bb0c6ca400a36e0fa9cf010fca
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2018
ms.locfileid: "52823378"
---
# <a name="step-4-adding-a-flat-file-destination"></a>Шаг 4. Добавление назначения «Неструктурированный файл»
  Выход ошибок преобразования «Ключ уточняющего запроса валют» перенаправляет в преобразование «Скрипт» все строки данных, завершившиеся ошибкой в операции поиска. Для расширения сведений о возникших ошибках преобразование «Скрипт» выполняет скрипт, получающий описания ошибок.  
  
 В этой задаче все сведения об ошибках строк будут сохранены для последующей обработки в файле с разделителями. Чтобы сохранить ошибочные строки, необходимо добавить и настроить диспетчер соединений с неструктурированными файлами для текстового файла, который будет содержать данные об ошибках, и назначение «Неструктурированный файл». Путем установки свойств в диспетчере соединений с неструктурированными файлами, который использует назначение «Неструктурированный файл», можно определить способ, которым назначение «Неструктурированный файл» форматирует и записывает текстовый файл. Дополнительные сведения см. в разделах [Flat File Connection Manager](connection-manager/file-connection-manager.md) и [Flat File Destination](data-flow/flat-file-destination.md).  
  
### <a name="to-add-and-configure-a-flat-file-destination"></a>Добавление и настройка назначения «Неструктурированный файл»  
  
1.  Перейдите на вкладку **Поток данных** .  
  
2.  В окне **Область элементов SSIS**раскройте элемент **Другие**и перетащите элемент **Назначение «Неструктурированный файл»** в область конструктора потоков данных. Поместите **Назначение «Неструктурированный файл»** прямо под преобразованием **Получить описание ошибки** .  
  
3.  Щелкните преобразование **Получить описание ошибки** и перетащите зеленую стрелку на новый элемент **Назначение "Неструктурированный файл"**.  
  
4.  В области конструктора **Поток данных** щелкните добавленный элемент **Назначение «Неструктурированный файл»** в только что добавленном преобразовании **Назначение «Неструктурированный файл»** и измените имя на **Строки с ошибками**.  
  
5.  Щелкните правой кнопкой мыши преобразование **Строки с ошибками** , выберите пункт **Изменить**, а затем в **редакторе назначения "Неструктурированный файл"** нажмите кнопку **Создать**.  
  
6.  Убедитесь, что в диалоговом окне **Формат неструктурированного файла** выбран параметр **С разделителями** , и нажмите кнопку **ОК**.  
  
7.  В **редактор диспетчера соединений с неструктурированными**в **имя диспетчера соединений** поле типа `Error Data`.  
  
8.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** нажмите кнопку **Обзор**и перейдите в папку, в которой будет храниться файл.  
  
9. В **откройте** диалоговом окне для **имя файла**, тип `ErrorOutput.txt`, а затем нажмите кнопку **откройте**.  
  
10. В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** убедитесь в том, что в поле **Локаль** установлено значение "Английский (США)", а поле **Кодовая страница** содержит значение "1252 (ANSI -Latin I)".  
  
11. На панели параметров щелкните **Столбцы**.  
  
     Обратите внимание, что, помимо столбцов из исходного файла данных, отображаются три новых столбца: ErrorCode, ErrorColumn и ErrorDescription. Эти столбцы созданы выходом ошибок преобразования «Уточняющий запрос ключа валют» и скриптом в преобразовании «Получить описание ошибок», они могут использоваться для устранения причин появления ошибочных строк.  
  
12. Нажмите кнопку **ОК**.  
  
13. В диалоговом окне **Редактор назначения «Неструктурированный файл»** снимите флажок **Перезаписать данные в файле** .  
  
     Когда этот флажок снят, сохраняются ошибки выполнения нескольких пакетов.  
  
14. В разделе **Редактор назначения «Неструктурированный файл»** щелкните **Сопоставление** , чтобы убедиться, что все столбцы созданы правильно. При желании можно переименовать все столбцы назначения.  
  
15. Нажмите кнопку **ОК**.  
  
## <a name="next-steps"></a>Следующие шаги  
 [Шаг 5. Проверка учебного пакета занятия 4](../integration-services/lesson-4-5-testing-the-lesson-4-tutorial-package.md)  
  
  
