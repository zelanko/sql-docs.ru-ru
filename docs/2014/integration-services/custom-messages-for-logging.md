---
title: Пользовательские сообщения для ведения журнала | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- logs [Integration Services], custom
- writing log entries
- SSIS packages, logs
- custom messages for logging [Integration Services]
ms.assetid: 3c74bba9-02b7-4bf5-bad5-19278b680730
author: janinezhang
ms.author: janinez
manager: craigg
ms.openlocfilehash: 47a14ad3baf1660b2b60cd6b96f2ef51f1e5d727
ms.sourcegitcommit: f40fa47619512a9a9c3e3258fda3242c76c008e6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/23/2019
ms.locfileid: "66060087"
---
# <a name="custom-messages-for-logging"></a>Пользовательские сообщения для ведения журнала
  Службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предусматривают большой набор пользовательских событий, предполагающих добавление записей в журнал для пакетов и многих задач. Записывая стандартные события или определенные пользователем сообщения с целью последующего анализа, можно сохранить подробные сведения о процессе выполнения, результатах и проблемах. Например, можно записать, когда начинается и заканчивается массовая вставка, чтобы идентифицировать проблемы с производительностью при выполнении пакета.  
  
 Пользовательские записи в журнале являются другим набором записей, отличным от стандартных событий ведения журнала, которые доступны для пакетов, всех контейнеров и задач. Пользовательские записи в журнале приспособлены для записи полезных сведений о конкретной задаче или пакете. Например, одна из пользовательских записей в журнале для задачи «Выполнение SQL» содержит инструкцию SQL, которая выполняется в задаче.  
  
 Все записи в журнале содержат сведения о дате и времени, в том числе записи, которые автоматически формируются в начале и в конце выполнения пакета. Многие события журнала формируют несколько записей журнала. Это обычно происходит в том случае, когда событие состоит из нескольких стадий. Например, событие журнала `ExecuteSQLExecutingQuery` формирует три записи: одну запись после того, как задача устанавливает соединение с базой данных, вторую после того, как задача приступает к подготовке инструкции SQL, и еще одну после того, как выполнение инструкции SQL завершается.  
  
 Следующие объекты служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] содержат пользовательские записи в журнале.  
  
 [Пакет](#Package)  
  
 [Задача «Массовая вставка»](#BulkInsert)  
  
 [Задача потока данных](#DataFlow)  
  
 [Задача «Выполнение пакета служб DTS 2000»](#ExecuteDTS200)  
  
 [Задача «Выполнение процесса»](#ExecuteProcess)  
  
 [Задача «Выполнение SQL»](#ExecuteSQL)  
  
 [Задача "Файловая система"](#FileSystem)  
  
 [Задача «FTP»](#FTP)  
  
 [Задача «Очередь сообщений»](#MessageQueue)  
  
 [Задача «Скрипт»](#Script)  
  
 [Задача «Отправка почты»](#SendMail)  
  
 [Задача «Передача базы данных»](#TransferDatabase)  
  
 [Задача «Передача сообщений об ошибках»](#TransferErrorMessages)  
  
 [Задача «Передача заданий»](#TransferJobs)  
  
 [Задача «Передача имен входа»](#TransferLogins)  
  
 [Задача «Передача главных хранимых процедур»](#TransferMasterStoredProcedures)  
  
 [Задача «Передача объектов SQL Server»](#TransferSQLServerObjects)  
  
 [Задача «Веб-служба»](#WebServices)  
  
 [Задача «Модуль чтения данных WMI»](#WMIDataReader)  
  
 [Задача «Отслеживание событий WMI»](#WMIEventWatcher)  
  
 [Задача «XML»](#XML)  
  
## <a name="log-entries"></a>Записи журнала  
  
###  <a name="Package"></a> Пакет  
 В следующей таблице перечислены пользовательские записи в журнале для пакетов.  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`PackageStart`|Указывает, что выполнение пакета началось.<br /><br /> Примечание. Эта запись журнала формируется автоматически. Ее нельзя исключить.|  
|`PackageEnd`|Указывает, что выполнение пакета завершено.<br /><br /> Примечание. Эта запись журнала формируется автоматически. Ее нельзя исключить.|  
|`Diagnostic`|Предоставляет сведения о настройках системы, влияющих на выполнение пакета, таких как количество одновременно исполняемых объектов.<br /><br /> Запись журнала `Diagnostic` также включает записи, сделанные до и после обращения к внешним поставщикам данных. Дополнительные сведения см. в статье [Troubleshooting Tools Package Connectivity](troubleshooting/troubleshooting-tools-for-package-connectivity.md).|  
  
###  <a name="BulkInsert"></a> Задача «Массовая вставка»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Массовая вставка».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`DTSBulkInsertTaskBegin`|Указывает, что массовая вставка началась.|  
|`DTSBulkInsertTaskEnd`|Указывает, что массовая вставка завершена.|  
|`DTSBulkInsertTaskInfos`|Выводит описательные сведения об этой задаче.|  
  
###  <a name="DataFlow"></a> Задача потока данных  
 В следующей таблице перечислены пользовательские записи в журнале для задачи потока данных.  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`BufferSizeTuning`|Указывает, что задача потока данных изменила размер буфера. Эта запись журнала описывает причины изменения размера и фиксирует новый временный размер буфера.|  
|`OnPipelinePostEndOfRowset`|Означает, что компонент получил сигнал конца набора строк, который устанавливается при последнем вызове метода `ProcessInput`. Запись делается для каждого компонента в потоке данных, который обрабатывает ввод. Запись включает имя компонента.|  
|`OnPipelinePostPrimeOutput`|Указывает, что компонент завершил последний вызов метода `PrimeOutput`. В зависимости от потока данных, возможно формирование нескольких записей в журнале. Если компонент является источником, это означает, что компонент завершил обработку строк.|  
|`OnPipelinePreEndOfRowset`|Показывает, что компонент уже готов получить сигнал конца набора строк, который устанавливается при последнем вызове метода `ProcessInput`. Запись делается для каждого компонента в потоке данных, который обрабатывает ввод. Запись включает имя компонента.|  
|`OnPipelinePrePrimeOutput`|Показывает, что компонент готов получить свой вызов из метода `PrimeOutput`. В зависимости от потока данных, возможно формирование нескольких записей в журнале.|  
|`OnPipelineRowsSent`|Сообщает количество строк, предоставленных входу компонента с помощью вызова метода `ProcessInput`. Запись журнала включает имя компонента.|  
|`PipelineBufferLeak`|Предоставляет сведения обо всех компонентах, которые удерживают буферы от уничтожения после того, как диспетчер буферов завершил свое выполнение. Это означает, что ресурсы буферов не были освобождены и могут вызвать утечку памяти. Запись журнала предоставляет имя компонента и идентификатор буфера.|  
|`PipelineExecutionPlan`|Сообщает о плане выполнения потока данных. Предоставляет сведения о том, как буферы будут отсылаться компонентам. Эти сведения в сочетании с записью PipelineExecutionTrees описывают, что происходит в задаче.|  
|`PipelineExecutionTrees`|Сообщает о дереве выполнения макета в потоке данных. Планировщик подсистемы обработки потока данных использует эти деревья для построения плана выполнения потока данных.|  
|`PipelineInitialization`|Предоставляет сведения об инициализации задачи. Эти сведения включают каталоги, используемые для временного хранения данных большого объема типа BLOB, размер буфера по умолчанию и количество строк в буфере. В зависимости от настройки задачи потока данных, возможно формирование нескольких записей в журнале.|  
  
###  <a name="ExecuteDTS200"></a> Задача «Выполнение пакета служб DTS 2000»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Выполнение пакета служб DTS 2000».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`ExecuteDTS80PackageTaskBegin`|Указывает, что задача приступила к выполнению пакета служб DTS 2000.|  
|`ExecuteDTS80PackageTaskEnd`|Указывает, что выполнение задачи завершено.<br /><br /> Примечание. Пакет служб DTS 2000 может продолжить свое выполнение после завершения задачи.|  
|`ExecuteDTS80PackageTaskTaskInfo`|Выводит описательные сведения об этой задаче.|  
|`ExecuteDTS80PackageTaskTaskResult`|Сообщает результаты выполнения пакета служб DTS 2000, запущенного задачей.|  
  
###  <a name="ExecuteProcess"></a> Задача «Выполнение процесса»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Выполнение процесса».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`ExecuteProcessExecutingProcess`|Предоставляет сведения о процессе выполнения исполняемого объекта, на запуск которого настроена задача.<br /><br /> В журнале формируются две записи. Одна из них предоставляет сведения об имени и месте выполнения исполняемого объекта, на запуск которого настроена задача, другая фиксирует выход из исполняемого объекта.|  
|`ExecuteProcessVariableRouting`|Предоставляет сведения о том, какие переменные направляются на вход и выходы исполняемого объекта. Данные журнала записываются для потоков stdin (вход), stdout (выход) и stderr (вывод ошибок на выходе).|  
  
###  <a name="ExecuteSQL"></a> Задача «Выполнение SQL»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «Выполнение SQL».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`ExecuteSQLExecutingQuery`|Предоставляет сведения об этапах выполнения инструкции SQL. Записи журнала формируются в тот момент, когда задача устанавливает соединение с базой данных, когда задача приступает к подготовке инструкции SQL, и после того, как завершается выполнение инструкции SQL. Запись журнала для этапа подготовки содержит инструкцию SQL, которая используется задачей.|  
  
###  <a name="FileSystem"></a> Задача "Файловая система"  
 В следующей таблице перечислены пользовательские записи журнала для задачи «Файловая система».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`FileSystemOperation`|Сообщает об операции, выполняемой задачей. Эта запись журнала формируется, когда операция файловой системы начинается и включает сведения об источнике и назначении.|  
  
###  <a name="FTP"></a> Задача «FTP»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «FTP».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`FTPConnectingToServer`|Указывает, что задача инициализировала соединение с FTP-сервером.|  
|`FTPOperation`|Сообщает о начале FTP-операции, выполняемой задачей, и о типе этой операции.|  
  
###  <a name="MessageQueue"></a> Задача «Очередь сообщений»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Очередь сообщений».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`MSMQAfterOpen`|Указывает, что задача завершила открытие очереди сообщений.|  
|`MSMQBeforeOpen`|Указывает, что задача приступила к открытию очереди сообщений.|  
|`MSMQBeginReceive`|Указывает, что задача приступила к получению сообщения.|  
|`MSMQBeginSend`|Указывает, что задача приступила к отправке сообщения.|  
|`MSMQEndReceive`|Указывает, что задача завершила прием сообщения.|  
|`MSMQEndSend`|Указывает, что задача завершила отправку сообщения.|  
|`MSMQTaskInfo`|Выводит описательные сведения об этой задаче.|  
|`MSMQTaskTimeOut`|Указывает, что время ожидания выполнения задачи истекло.|  
  
###  <a name="Script"></a> Задача «Скрипт»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «Скрипт».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`ScriptTaskLogEntry`|Сообщает о результатах выполнения операции ведения журнала в скрипте. Запись журнала формируется для каждого вызова метода `Log` объекта `Dts`. Эта запись формируется в момент запуска кода. Дополнительные сведения см. в разделе [ведения журналов в задаче «скрипт»](extending-packages-scripting/task/logging-in-the-script-task.md).|  
  
###  <a name="SendMail"></a> Задача «Отправка почты»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Отправка почты».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`SendMailTaskBegin`|Указывает, что задача приступила к отправке сообщения электронной почты.|  
|`SendMailTaskEnd`|Указывает, что задача завершила отправку сообщения электронной почты.|  
|`SendMailTaskInfo`|Выводит описательные сведения об этой задаче.|  
  
###  <a name="TransferDatabase"></a> Задача «Передача базы данных»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача базы данных».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`SourceDB`|Указывает базу данных, которая копируется задачей.|  
|`SourceSQLServer`|Указывает компьютер, с которого копируется база данных.|  
  
###  <a name="TransferErrorMessages"></a> Задача «Передача сообщений об ошибках»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача сообщений об ошибках».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`TransferErrorMessagesTaskFinishedTransferringObjects`|Указывает, что задача завершила передачу сообщений об ошибках.|  
|`TransferErrorMessagesTaskStartTransferringObjects`|Указывает, что задача приступила к передаче сообщений об ошибках.|  
  
###  <a name="TransferJobs"></a> Задача «Передача заданий»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача заданий».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`TransferJobsTaskFinishedTransferringObjects`|Указывает, что задача завершила передачу заданий агента [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .|  
|`TransferJobsTaskStartTransferringObjects`|Указывает, что задача приступила к передаче заданий агента [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .|  
  
###  <a name="TransferLogins"></a> Задача «Передача имен входа»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача имен входа».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`TransferLoginsTaskFinishedTransferringObjects`|Указывает, что задача завершила передачу имен входа.|  
|`TransferLoginsTaskStartTransferringObjects`|Указывает, что задача приступила к передаче имен входа.|  
  
###  <a name="TransferMasterStoredProcedures"></a> Задача «Передача главных хранимых процедур»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача главных хранимых процедур».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`TransferStoredProceduresTaskFinishedTransferringObjects`|Указывает, что задача завершила передачу пользовательских хранимых процедур, хранящихся в базе данных **master** .|  
|`TransferStoredProceduresTaskStartTransferringObjects`|Указывает, что задача приступила к передаче пользовательских хранимых процедур, хранящихся в базе данных **master** .|  
  
###  <a name="TransferSQLServerObjects"></a> Задача «Передача объектов SQL Server»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача объектов [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] ».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`TransferSqlServerObjectsTaskFinishedTransferringObjects`|Указывает, что задача завершила передачу объектов базы данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .|  
|`TransferSqlServerObjectsTaskStartTransferringObjects`|Указывает, что задача приступила к передаче объектов базы данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .|  
  
###  <a name="WebServices"></a> Задача «Веб-служба»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Веб-служба».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`WSTaskBegin`|Задача получила доступ к веб-службе.|  
|`WSTaskEnd`|Задача завершила метод веб-службы.|  
|`WSTaskInfo`|Описательные сведения об этой задаче.|  
  
###  <a name="WMIDataReader"></a> Задача «Модуль чтения данных WMI»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Модуль чтения данных WMI».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`WMIDataReaderGettingWMIData`|Указывает, что задача приступила к чтению данных инструментария WMI.|  
|`WMIDataReaderOperation`|Сообщает о WQL-запросе, выполняемом задачей.|  
  
###  <a name="WMIEventWatcher"></a> Задача «Отслеживание событий WMI»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Отслеживание событий WMI».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`WMIEventWatcherEventOccurred`|Сообщает, что произошло событие, отслеживаемое задачей.|  
|`WMIEventWatcherTimedout`|Указывает, что время ожидания выполнения задачи истекло.|  
|`WMIEventWatcherWatchingForWMIEvents`|Указывает, что задача приступила к выполнению WQL-запроса. Эта запись содержит запрос.|  
  
###  <a name="XML"></a> Задача «XML»  
 В приведенной ниже таблице перечислены пользовательские записи журнала для задачи «XML».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|`XMLOperation`|Предоставляет сведения об операции, выполняемой задачей|  
  
## <a name="related-content"></a>См. также  
 Запись в блоге: [Ведение журнала пользовательских событий для задач служб Integration Services](https://go.microsoft.com/fwlink/?LinkId=150580), на сайте dougbert.com  
  
## <a name="see-also"></a>См. также  
 [Ведение журналов в службах Integration Services (SSIS)](performance/integration-services-ssis-logging.md)  
  
  
