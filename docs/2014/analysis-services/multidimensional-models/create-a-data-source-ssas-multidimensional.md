---
title: Создание источника данных (многомерные службы SSAS) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.datasourcedesigner.f1
- sql12.asvs.sqlserverstudio.impersonationinfo.f1
- sql12.asvs.connectionmanager.f1
helpviewer_keywords:
- impersonation [Analysis Services]
- data sources [Analysis Services], creating
- security [Analysis Services], data source connections
ms.assetid: 9fab8298-10dc-45a9-9a91-0c8e6d947468
author: minewiskan
ms.author: owend
ms.openlocfilehash: 0e7f387bb62f15acff8e3443e7e9fdc8888896e8
ms.sourcegitcommit: f0772f614482e0b3cde3609e178689ce62ca3a19
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84536758"
---
# <a name="create-a-data-source-ssas-multidimensional"></a>Создание источника данных (многомерные службы SSAS)
  В многомерной модели служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] объект источника данных представляет собой соединение с источником данных, данные из которого обрабатываются или импортируются. Многомерная модель должна содержать по меньшей мере один объект источника данных, но можно добавить несколько таких объектов, чтобы объединить данные из нескольких хранилищ данных. Для создания объекта источника данных модели воспользуйтесь инструкциями, приведенными в этом разделе. Дополнительные сведения о настройке свойств этого объекта см. в разделе [Задание свойств источника данных (многомерная база данных SSAS)](set-data-source-properties-ssas-multidimensional.md).  
  
 Этот раздел включает следующие подразделы:  
  
 [Выбор поставщика данных](#bkmk_provider)  
  
 [Задание учетных данных и параметров олицетворения](#bkmk_impersonation)  
  
 [Просмотр или изменение свойств подключения](#bkmk_ConnectionString)  
  
 [Создание источника данных с помощью мастера источников данных](#bkmk_steps)  
  
 [Создание источника данных с помощью существующего соединения](#bkmk_connection)  
  
 [Добавление нескольких источников данных в модель](#bkmk_multipleDS)  
  
##  <a name="choose-a-data-provider"></a><a name="bkmk_provider"></a>Выбор поставщика данных  
 Соединение можно установить с помощью управляемой платформы [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Framework или собственного поставщика OLE DB. В качестве поставщика данных для источника данных SQL Server рекомендуется использовать собственный клиент SQL Server, поскольку он, как правило, обеспечивает лучшую производительность.  
  
 Для Oracle и других сторонних производителей данных проверьте, предоставляется ли собственный поставщик OLE DB стронними производителями, и в первую очередь опробуйте его. Если возникают ошибки, попробуйте другой поставщик .NET или собственный поставщик OLE DB, перечисленные в диспетчере соединений. Убедитесь в том, что все используемые поставщики данных установлены на всех компьютерах, которые применяются для разработки и выполнения решения служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .  
  
##  <a name="set-credentials-and-impersonation-options"></a><a name="bkmk_impersonation"></a>Настройка учетных данных и параметров олицетворения  
 Соединение с источником данных иногда может использовать проверку подлинности Windows или проверку подлинности службы, предоставляемые системой управления базами данных, например проверку подлинности SQL Server, для соединения с базой данных SQL Azure. Задаваемая учетная запись должна иметь имя входа на сервере удаленной базы данных и разрешения на чтение внешней базы данных.  
  
### <a name="windows-authentication"></a>Проверка подлинности Windows  
 Соединения, использующие проверку подлинности Windows, указаны на вкладке **Сведения об олицетворении** конструктора источников данных. Используйте эту вкладку для выбора параметра олицетворения, определяющего учетную запись, от имени которой выполняются службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] при подключении к внешнему источнику данных. Некоторые параметры можно использовать не во всех ситуациях. Дополнительные сведения об этих параметрах и их использовании см. в разделе [Задание параметров олицетворения (многомерная база данных SSAS)](set-impersonation-options-ssas-multidimensional.md).  
  
### <a name="database-authentication"></a>Проверка подлинности базы данных  
 В качестве альтернативы проверке подлинности Windows можно указать соединение, использующее службу проверки подлинности, предоставляемую системой управления базами данных. В некоторых случаях требуется проверка подлинности базы данных. Сценарии, вызывающие использование проверки подлинности базы данных, включают использование SQL Server проверки подлинности для подключения к базе данных SQL Azure или доступ к реляционному источнику данных, который выполняется в другой операционной системе или в недоверенном домене.  
  
 Для источника данных, который использует проверку подлинности базы данных, имя пользователя и пароль для входа в базу данных указываются в строке подключения. Учетные данные добавляются к строке подключения при вводе имени пользователя и пароля в диспетчере соединений во время установки соединения с источником данных в модели [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] . Необходимо указать идентификатор пользователя, имеющего разрешения на чтение этих данных.  
  
 При получении данных клиентская библиотека, выполняющая подключение, создает запрос на соединение, который содержит учетные данные в строке подключения. Параметры проверки подлинности учетных данных Windows на вкладке «Сведения об олицетворении» не используются в соединении, но могут использоваться для других операций, таких как получение доступа к ресурсам на локальном компьютере. Дополнительные сведения см. в разделе [Задание параметров олицетворения (многомерная база данных SSAS)](set-impersonation-options-ssas-multidimensional.md).  
  
 После сохранения объекта источника данных в модели строка подключения и пароль шифруются.  В целях безопасности все видимые трассировки пароля удаляются из строки подключения при последующем просмотре в инструментах, скрипте или коде.  
  
> [!NOTE]  
>  По умолчанию в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] пароли в строке подключения не сохраняются. Если пароль не сохранен, службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] при необходимости запрашивают его. При выборе сохранения пароля он сохраняется в зашифрованном формате в строке подключения к данным. [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] зашифровывают пароль для источника данных с помощью ключа шифрования базы данных, указанной в источнике данных. Для изменения зашифрованных учетных данных служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] следует пользоваться диспетчером конфигурации [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , в противном случае восстановление зашифрованных данных будет невозможно. Дополнительные сведения см. в разделе [SQL Server Configuration Manager](../../relational-databases/sql-server-configuration-manager.md).  
  
### <a name="defining-impersonation-information-for-data-mining-objects"></a>Определение данных олицетворения для объектов интеллектуального анализа данных  
 Запросы интеллектуального анализа данных могут производиться в контексте учетной записи службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , в контексте отправившего запрос пользователя или в контексте указанного пользователя. Контекст, в котором выполняется запрос, может повлиять на его результаты. Для операций интеллектуального анализа данных типа `OPENQUERY` может потребоваться, чтобы запрос интеллектуального анализа данных выполнялся в контексте текущего или указанного пользователя, а не в контексте учетной записи службы. Это позволяет осуществить выполнение запроса с ограниченными учетными данными безопасности. Если нужно, чтобы службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] олицетворяли текущего пользователя или указанного пользователя, следует выбрать параметр **Использовать указанные имя пользователя и пароль** или **Использовать учетные данные текущего пользователя** .  
  
##  <a name="create-a-data-source-using-the-data-source-wizard"></a><a name="bkmk_steps"></a>Создание источника данных с помощью мастера источников данных  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]откройте проект служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] или подключитесь к базе данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , в которой необходимо определить источник данных.  
  
2.  В **обозревателе решений**щелкните правой кнопкой мыши папку **Источники данных** , затем щелкните **Создать новый источник данных** для запуска **мастера источников данных**.  
  
3.  На странице **Выбор метода определения соединения** выберите **Создать источник данных, основанный на существующем или на новом соединении** , а затем щелкните **Создать** , чтобы открыть **диспетчер соединений**.  
  
     Новые подключения создаются в диспетчере соединений. В диспетчере соединений следует выбрать поставщик и указать свойства строки подключения к поставщику для подключения к базовым данным. Какие именно данные необходимо указать, зависит от выбранного поставщика, но обычно это сервер или экземпляр службы, учетные данные для входа, имя базы данных или файла и другие параметры, относящиеся к конкретному поставщику. В оставшейся части этой процедуры предполагается, что SQL Server подключение к базе данных.  
  
4.  Для подключения выберите поставщик платформы [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Framework или собственный поставщик OLE DB.  
  
     По умолчанию для нового соединения применяется собственный поставщик OLE DB\\[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или поставщик Native Client. Этот поставщик используется для подключения к экземпляру компонента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Database Engine с помощью OLE DB. Для подключений к реляционной базе данных SQL Server использование собственного клиента OLE DB или SQL Server Native Client 11.0 чаще всего более производительно, чем при использовании других поставщиков.  
  
     Для доступа к другим источникам данных вы можете выбрать другой поставщик. Список поставщиков и реляционных баз данных [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , поддерживаемых, см. в разделе [Источники данных, поддерживаемые &#40;многомерных&#41;SSAS ](supported-data-sources-ssas-multidimensional.md).  
  
5.  Введите данные, необходимые для выбранного поставщика и подключитесь к соответствующему источнику данных. Если выбран **Собственный поставщик OLE DB \SQL Server Native Client** , введите следующие данные:  
  
    1.  **Имя сервера** — это сетевое имя экземпляра Database Engine. Его можно указать как IP-адрес, имя NETBIOS компьютера или в виде полного доменного имени. Если сервер установлен как именованный экземпляр, необходимо включить имя экземпляра (например, \<computername> \\<instanceName \> ).  
  
    2.  **Вход на сервер** указывает, какой тип проверки подлинности будет использоваться для соединения. **Проверка подлинности Windows** указывает, что будет использована проверка подлинности Windows. **Использовать проверку Подлинности SQL Server** указывает имя входа пользователя базы данных для баз данных SQL Azure или экземпляр SQL Server, поддерживающий смешанный режим проверки подлинности.  
  
        > [!IMPORTANT]  
        >  В диспетчере соединений содержится флажок **Сохранить пароль** для соединений, использующих проверку подлинности SQL Server. Хотя флажок всегда видим, используется он не всегда.  
        >   
        >  Среди условий, при которых службы Analysis Services не используют этот флажок: обновление или обработка реляционных данных SQL Server, используемых в активной базе данных служб Analysis Services. Вне зависимости от того, снят или поставлен флажок **Сохранить пароль**, службы Analysis Services всегда сохраняют и шифруют пароль. Пароль шифруется и хранится как в файлах ABF, так и в файлах данных. Это происходит потому, что службы Analysis Services не поддерживают сохранение пароля для каждого сеанса на сервере.  
        >   
        >  Такое поведение применимо к базам данных, которые a) сохранены в экземпляре сервера Analysis Services и b) используют проверку подлинности SQL Server для обновления или обработки реляционных данных. Оно не относится к соединениям с источниками данных, которые настраиваются в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] и используются только в течение сеанса. Поскольку не существует способа удалить уже сохраненный пароль, можно использовать другие учетные данные либо проверку подлинности Windows, в ходе которых пользовательские сведения, сохраненные в базе данных, будут перезаписаны.  
  
    3.  **Выбрать или ввести имя базы данных** или **Присоединить файл базы данных** используются для указания базы данных.  
  
    4.  В левой части диалогового окна щелкните **Все** для просмотра дополнительных параметров этого соединения, включая все настройки по умолчанию для данного поставщика.  
  
    5.  Измените параметры в соответствии с окружением и нажмите кнопку **ОК**.  
  
         Новое соединение появится на панели **Подключение к данным** на странице **Выбор метода определения соединения** мастера источников данных.  
  
6.  Щелкните **Далее**.  
  
7.  В разделе **Сведения об олицетворении**укажите учетные данные или удостоверение пользователя Windows, которые службы Analysis Services будут использовать для соединения с внешним источником данных. Если используется проверка подлинности базы данных, эти параметры при подключении не учитываются.  
  
     Рекомендации по выбору параметра олицетворения различаются в зависимости от способа использования источника данных. Для выполнения задач обработки при соединении с источником данных служба [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] должна быть запущена в контексте безопасности собственной учетной записи службы или заданной учетной записи пользователя.  
  
    -   **Использовать конкретное имя пользователя Windows и пароль** ― указание уникального набора учетных данных с наименьшими правами доступа.  
  
    -   **Использовать учетную запись службы** ― обработка данных с использованием удостоверения службы.  
  
     Указанная учетная запись должна иметь разрешения на чтение в источнике данных.  
  
8.  Щелкните **Далее**.  На странице **Завершение работы мастера**введите имя источника данных или используйте имя по умолчанию. Имя по умолчанию — это имя базы данных, используемой соединением. На панели **Предварительный просмотр** отображается строка подключения для этого нового источника данных.  
  
9. Нажмите кнопку **Готово**.  Новый источник данных появится в папке **Источники данных** в обозревателе решений.  
  
##  <a name="create-a-data-source-using-an-existing-connection"></a><a name="bkmk_connection"></a>Создание источника данных с помощью существующего соединения  
 При работе в проекте служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] источник данных может быть основан на существующем источнике данных решения или на проекте [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] . Мастер источников данных предоставляет несколько параметров для создания объекта источника данных, в том числе использование существующего подключения в одном проекте.  
  
-   Создание источника данных на основе существующего источника данных решения позволяет определить источник данных, который синхронизирован с существующим. При построении проекта, содержащего новый источник данных, используются настройки базового источника данных.  
  
-   Создание источника данных на основе проекта служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] позволяет ссылаться из решения в текущем проекте на другой проект служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] . Новый источник данных использует поставщик MSOLAP со свойствами `Data Source` и `Initial Catalog`, полученными из свойств `TargetServer` и `TargetDatabase` выбранного проекта. Эта возможность полезна в решениях, когда используется несколько проектов служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для управления удаленными секциями, поскольку для баз данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] источника и назначения необходимы двусторонние источники данных для поддержки хранения и обработки удаленных секций.  
  
 При создании ссылки на объект источника данных этот объект можно изменять только в целевом объекте или проекте. Данные соединения в объекте источника данных, содержащем ссылку, изменять нельзя. Изменения данных о соединении в объекте или проекте, на который указывает ссылка, отражаются в новом источнике данных при его построении. Данные о строке соединения, которая отображается в файле источника данных (DS) в проекте, синхронизируется при сборке проекта или при удалении ссылки в конструкторе источников данных.  
  
##  <a name="view-or-edit-connection-properties"></a><a name="bkmk_ConnectionString"></a>Просмотр или изменение свойств соединения  
 Строка подключения формируется на основе свойств, выбранных в конструкторе источников данных или в мастере источников данных. Можно просмотреть строку подключения и другие свойства в среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].  
  
 **Изменение строки подключения**  
  
1.  Дважды щелкните объект источника данных в обозревателе решений среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].  
  
2.  Щелкните **Изменить**, а затем — **Все** на левой панели навигации.  
  
3.  Появится сетка свойств, в которой будут показаны доступные свойства используемого поставщика данных. Дополнительные сведения об этих свойствах см. в документации поставщика.  Информацию о SQL Server Native Client см. в разделе [Using Connection String Keywords with SQL Server Native Client](../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).  
  
 При наличии нескольких источников данных в решении и необходимости хранения строки подключения в одном местоположении можно настроить текущий источник данных, чтобы он ссылался на другой объект источника данных.  
  
 *Ссылка на источник данных* представляет собой взаимосвязь с другим проектом или источником данных [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] в этом же решении. Ссылки предоставляют возможность синхронизации источников данных между объектами в решении. Данные строки подключения синхронизируются при каждом построении проекта. Чтобы изменить строку подключения для источника данных, который ссылается на другой объект, необходимо изменить строку подключения для объекта, на который он ссылается.  
  
 Ссылку можно удалить, сняв флажок. При этом прекращается синхронизация между объектами и обеспечивается возможность изменения строки подключения в источнике данных.  
  
##  <a name="add-multiple-data-sources-to-a-model"></a><a name="bkmk_multipleDS"></a>Добавление нескольких источников данных в модель  
 Можно создать несколько объектов источника данных для поддержки соединений с дополнительными источниками данных. Каждый источник данных должен содержать столбцы, которые можно будет использовать для создания связей.  
  
> [!NOTE]  
>  Если определено несколько источников данных, причем в одном запросе требуются данные из нескольких источников (например, измерения, связанные по схеме «снежинка»), необходимо определить источник данных, который поддерживает удаленные запросы через метод `OpenRowset`. Как правило, это будет источник данных Microsoft SQL Server.  
  
 Существуют следующие требования к использованию нескольких источников данных.  
  
-   Укажите один источник данных в качестве первичного. Первичный источник данных используется для создания представления источников данных.  
  
-   Первичный источник данных должен поддерживать функцию `OpenRowset`.  Дополнительные сведения об этой функции в SQL Server см. в разделе <xref:Microsoft.SqlServer.TransactSql.ScriptDom.TSqlTokenType.OpenRowSet>.  
  
 Для объединения данных из нескольких источников данных используйте следующий подход.  
  
1.  Создайте источники данных в модели.  
  
2.  Создайте представление источника данных, используя реляционную базу данных SQL Server в качестве источников данных. Это будет первичный источник данных.  
  
3.  В конструкторе представлений источников данных, используя только что созданное представление источника данных, щелкните правой кнопкой мыши в любой точке рабочей области и выберите пункт **Добавить/удалить таблицы**.  
  
4.  Выберите другой источник данных и таблицы для добавления.  
  
5.  Найдите и выберите таблицу, которая была добавлена. Щелкните правой кнопкой мыши таблицу и выберите команду **Создать связь**. Выберите исходный и целевой столбцы, содержащие соответствующие данные.  
  
## <a name="see-also"></a>См. также:  
 [Поддерживаемые источники данных &#40;многомерные&#41;SSAS](supported-data-sources-ssas-multidimensional.md)   
 [Представления источников данных в многомерных моделях](data-source-views-in-multidimensional-models.md)  
  
  
