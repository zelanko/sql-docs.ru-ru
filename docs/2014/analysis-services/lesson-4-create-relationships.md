---
title: 'Занятие 5: Создание связей | Документация Майкрософт'
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.suite: ''
ms.technology:
- analysis-services
ms.tgt_pltfrm: ''
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
caps.latest.revision: 20
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 4f0c32363cd3af495ef17d689bbf8c704e8ba21d
ms.sourcegitcommit: c18fadce27f330e1d4f36549414e5c84ba2f46c2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2018
ms.locfileid: "37204510"
---
# <a name="lesson-5-create-relationships"></a>Занятие 5. Создание связей
  На этом занятии будут проверены связи, автоматически созданные во время импорта данных, и добавлены новые связи между различными таблицами. Связь — это соединение между двумя таблицами, которое определяет, каким образом должны соотноситься данные этих таблиц. Например, таблица «Продукт» и таблица «Подкатегория продуктов» содержат связь на основе того факта, что каждый продукт принадлежит подкатегории. Дополнительные сведения см. в разделе [Связи (табличные службы SSAS)](tabular-models/relationships-ssas-tabular.md).  
  
 Предполагаемое время выполнения данного занятия: **10 минут.**  
  
## <a name="prerequisites"></a>предварительные требования  
 Этот раздел является частью учебника по табличному моделированию, который необходимо изучать по порядку. Прежде чем выполнять задания в этом занятии, необходимо завершить предыдущее [Занятие 3. Переименование столбцов](rename-columns.md).  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a>Обзор существующих связей и добавление новых  
 Во время импорта данных с помощью мастера импорта таблиц было импортировано семь таблиц из базы данных AdventureWorksDW. Обычно во время импорта данных из реляционного источника существующие связи автоматически импортируются вместе с данными. Однако необходимо проверить правильность создания связей между таблицами, прежде чем продолжить создание модели. В этом учебнике будут также созданы три новые связи.  
  
#### <a name="to-review-existing-relationships"></a>Просмотр существующих связей  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]щелкните меню **Модель** , укажите **Представление модели**и щелкните пункт **Представление диаграммы**.  
  
     Конструктор моделей появится в представлении диаграммы — графическом формате отображения всех импортированных таблиц, соединенных линиями. Линии между таблицами указывают на связи, которые были автоматически созданы во время импорта данных.  
  
     Используйте элементы управления мини-карты в верхнем правом углу конструктора моделей, чтобы настроить представление, включив в него как можно большее число таблиц. Можно также выбирать и перетаскивать таблицы в другие места. Например, их можно свести вместе или разместить в определенном порядке. Перемещение таблиц не влияет на связи между ними. Для просмотра всех столбцов в определенной таблице щелкните и перетащите край таблицы, чтобы увеличить или уменьшить ее.  
  
2.  Щелкните сплошную линию между таблицей **Клиент** и таблицей **География** . Сплошная линия между этими двумя таблицами показывает, что связь активна, то есть она используется по умолчанию при расчете DAX-формул.  
  
     Обратите внимание, что столбец **Идентификатор географии** в таблице **Клиент** и столбец **Идентификатор географии** в таблице **География** появились в блоке. Это указывает на то, что эти столбцы используются в связи. Свойства связи также отображаются в окне **Свойства** .  
  
    > [!TIP]  
    >  Помимо использования конструктора моделей в представлении диаграммы, можно также воспользоваться диалоговым окном **Управление связями** для отображения связей между всеми таблицами в табличном формате. В меню **Таблица** выберите команду **Управление связями**. Диалоговое окно **Управление связями** показывает связи, которые были автоматически созданы во время импорта данных.  
  
3.  Используйте конструктор моделей в представлении диаграммы или диалоговое окно **Управление связями** , чтобы убедиться, что следующие связи были созданы во время импорта таблиц из базы данных AdventureWorksDW.  
  
    |Активен|Таблица|Связанная таблица подстановки|  
    |------------|-----------|--------------------------|  
    |Да|**Клиент [идентификатор географии]**|**География [идентификатор географии]**|  
    |Да|**Продукт [идентификатор подкатегории продуктов]**|**Подкатегория продуктов [идентификатор подкатегории продуктов]**|  
    |Да|**Подкатегория продуктов [идентификатор категории продуктов]**|**Категория продуктов [идентификатор категории продуктов]**|  
    |Да|**Интернет-продажи [идентификатор клиента]**|**Клиент [идентификатор клиента]**|  
    |Да|**Интернет-продажи [идентификатор продукта]**|**Продукт [идентификатор продукта]**|  
  
 Если какие-либо связи в приведенной выше таблице отсутствуют, убедитесь, что модель включает следующие таблицы: Клиент, Дата, География, Продукт, Категория продукта, Подкатегория продукта и Интернет-продажи. Если таблицы импортируются из одного подключения к источнику данных несколько раз, связи между этими таблицами не будут созданы и их нужно будет создавать вручную.  
  
 В некоторых случаях может потребоваться создание дополнительных связей между таблицами в модели, чтобы поддержать определенную бизнес-логику. Во время выполнения этого учебника мы создадим три дополнительные связи между таблицами «Интернет-продажи» и «Дата».  
  
#### <a name="to-add-new-relationships-between-tables"></a>Добавление новых связей между таблицами  
  
1.  В конструкторе моделей в таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата заказа** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите.  
  
     Появится сплошная линия, которая покажет, что между столбцом **Дата заказа** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана активная связь.  
  
    > [!NOTE]  
    >  Во время создания связей порядок между первичной таблицей и связанной таблицей поиска автоматически устанавливается в надлежащем виде.  
  
2.  В таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата выполнения заказа** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите.  
  
     Появится пунктирная линия, которая покажет, что между столбцом **Дата выполнения заказа** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана неактивная связь. Между таблицами можно создавать несколько связей, но одновременно может быть активна только одна связь.  
  
3.  Наконец, создайте еще одну связь. В таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата отправки** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите  
  
     Появится пунктирная линия, которая покажет, что между столбцом **Дата отправки** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана неактивная связь.  
  
## <a name="next-step"></a>Следующий шаг  
 Чтобы продолжить изучение этого занятия, перейдите к следующему занятию: [Занятие 6. Создание вычисляемых столбцов](lesson-5-create-calculated-columns.md).  
  
  
