---
title: Занятие 5. Создание связей | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 7a80f607c3187e967404ce018b7eed00497d9c01
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "66078581"
---
# <a name="lesson-5-create-relationships"></a>Занятие 5. Создание связей
  На этом занятии будут проверены связи, автоматически созданные во время импорта данных, и добавлены новые связи между различными таблицами. Связь — это соединение между двумя таблицами, определяющее, как именно должны соотноситься данные в них. Например, таблица «Продукт» и таблица «Подкатегория продуктов» содержат связь на основе того факта, что каждый продукт принадлежит подкатегории. Дополнительные сведения см. в разделе [Связи (табличные службы SSAS)](tabular-models/relationships-ssas-tabular.md).  
  
 Предполагаемое время выполнения этого занятия: **10 минут**  
  
## <a name="prerequisites"></a>Предварительные требования  
 Этот раздел входит в учебник по табличному моделированию, который следует изучать в предложенном порядке. Прежде чем выполнять задания в этом занятии, необходимо завершить предыдущее [Занятие 3. Переименование столбцов](rename-columns.md).  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a>Обзор существующих связей и добавление новых  
 Во время импорта данных с помощью мастера импорта таблиц было импортировано семь таблиц из базы данных AdventureWorksDW. Обычно во время импорта данных из реляционного источника существующие связи автоматически импортируются вместе с данными. Однако прежде чем продолжить создание модели, нужно убедиться, что эти связи между таблицами созданы правильно. В этом учебнике вы также добавите три новых связи.  
  
#### <a name="to-review-existing-relationships"></a>Просмотр существующих связей  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]щелкните меню **Модель** , укажите **Представление модели**и щелкните пункт **Представление диаграммы**.  
  
     Теперь конструктор моделей находится в представлении схемы — графическом формате, когда все импортированные таблицы отображаются с линиями между ними. Линии между таблицами обозначают связи, созданные автоматически при импорте данных.  
  
     Используйте элементы управления мини-карты в верхнем правом углу конструктора моделей, чтобы настроить представление, включив в него как можно большее число таблиц. Вы также можете щелкнуть и перетащить таблицы в другое место, сблизив их или расположив в определенном порядке. Перемещение таблиц не влияет на связи между ними. Для просмотра всех столбцов в определенной таблице щелкните и перетащите ее край, чтобы развернуть или уменьшить ее.  
  
2.  Щелкните сплошную линию между таблицей **Клиент** и таблицей **География** . Сплошная линия между этими двумя таблицами показывают, что связь активна, то есть используется по умолчанию при вычислении формул DAX.  
  
     Обратите внимание, что столбец **Идентификатор географии** в таблице **Клиент** и столбец **Идентификатор географии** в таблице **География** появились в блоке. Это означает, что именно эти столбцы используются в связи. Свойства связи теперь также отображаются в окне **Свойства** .  
  
    > [!TIP]  
    >  Помимо использования конструктора моделей в представлении диаграммы, можно также использовать диалоговое окно **Управление связями** для отображения связей между всеми таблицами в табличном формате. В меню **Таблица** выберите команду **Управление связями**. Диалоговое окно **Управление связями** показывает связи, которые были автоматически созданы во время импорта данных.  
  
3.  Используйте конструктор моделей в представлении диаграммы или диалоговое окно **Управление связями** , чтобы убедиться, что при импорте каждой таблицы из базы данных AdventureWorksDW были созданы следующие связи:  
  
    |Активна|Таблица|Соответствующая таблица подстановки|  
    |------------|-----------|--------------------------|  
    |Да|**Клиент [Идентификатор географии]**|**География [Идентификатор географии]**|  
    |Да|**Продукт [Идентификатор подкатегории продуктов]**|**Подкатегория продуктов [Идентификатор подкатегории продуктов]**|  
    |Да|**Подкатегория продуктов [Идентификатор категории продуктов]**|**Категория продуктов [Идентификатор категории продуктов]**|  
    |Да|**Интернет-продажи [идентификатор клиента]**|**Клиент [идентификатор клиента]**|  
    |Да|**Интернет-продажи [идентификатор продукта]**|**Продукт [идентификатор продукта]**|  
  
 Если какие-либо связи в приведенной выше таблице отсутствуют, убедитесь, что модель включает следующие таблицы: Клиент, Дата, География, Продукт, Категория продукта, Подкатегория продукта и Интернет-продажи. Если таблицы из одного подключения к источнику данных импортируются в разное время, связи между ними не создаются автоматически, поэтому их нужно настроить вручную.  
  
 В некоторых случаях может потребоваться создать дополнительные связи между таблицами в модели для реализации определенной бизнес-логики. Во время выполнения этого учебника мы создадим три дополнительные связи между таблицами «Интернет-продажи» и «Дата».  
  
#### <a name="to-add-new-relationships-between-tables"></a>Добавление новых связей между таблицами  
  
1.  В конструкторе моделей в таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата заказа** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите.  
  
     Появится сплошная линия, которая покажет, что между столбцом **Дата заказа** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана активная связь.  
  
    > [!NOTE]  
    >  Во время создания связей порядок между первичной таблицей и связанной таблицей поиска автоматически устанавливается в надлежащем виде.  
  
2.  В таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата выполнения заказа** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите.  
  
     Появится пунктирная линия, которая покажет, что между столбцом **Дата выполнения заказа** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана неактивная связь. Можно использовать несколько связей между таблицами, но одновременно может быть активна только одна из них.  
  
3.  Наконец, создайте еще одну связь. В таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата отправки** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите  
  
     Появится пунктирная линия, которая покажет, что между столбцом **Дата отправки** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана неактивная связь.  
  
## <a name="next-step"></a>Дальнейшее действие  
 Чтобы продолжить изучение этого занятия, перейдите к следующему занятию: [Занятие 6. Создание вычисляемых столбцов](lesson-5-create-calculated-columns.md).  
  
  
