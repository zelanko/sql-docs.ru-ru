---
title: Изменение представления результатов трассировки | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
ms.assetid: 860a80dc-bac0-4ef0-bf7f-7a9b430d7aa3
author: mashamsft
ms.author: mathoma
manager: craigg
ms.openlocfilehash: 780772f7703e4499c13eb9373ccad4252097b536
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "66089439"
---
# <a name="modify-the-trace-results-view"></a>Изменение представления результатов трассировки
  Данный раздел содержит описание процесса изменения представления результатов трассировки сеанса расширенных событий в [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] посредством выполнения следующих задач.  
  
1.  [Добавление или удаление столбцов](#AddRemoveColumns)  
  
2.  [Создание, редактирование или удаление объединенных столбцов](#ChangeColumns)  
  
3.  [Сортировка результатов](#SortResults)  
  
4.  [Группирование результатов](#GroupResults)  
  
5.  [Агрегатная обработка результатов](#AggregateResults)  
  
6.  [Фильтрация результатов](#Filter)  
  
7.  [Поиск текста в столбцах](#Search)  
  
8.  [Изменение параметров отображения](#ChangeDisplay)  
  
##  <a name="AddRemoveColumns"></a>Добавление или удаление столбцов  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  В окне результатов трассировки щелкните правой кнопкой мыши заголовок столбца, а затем укажите **Выбрать столбец**.  
  
3.  В диалоговом окне **Выбрать столбец** в разделе **Доступные столбцы** выберите имена столбцов, которые необходимо добавить, а затем щелкните стрелку вправо.  
  
    > [!NOTE]  
    >  По умолчанию столбцы упорядочиваются по имени. Чтобы вывести на экран столбцы с учетом события, нажмите **Упорядочение по событиям**.  
  
     Чтобы удалить столбцы, укажите в разделе **Выбранные столбцы** те столбцы, которые необходимо удалить, и щелкните стрелку влево.  
  
4.  В разделе **Выбранные столбцы** , чтобы изменить порядок отображения столбцов, нажмите кнопку **Переместить вверх** или **Переместить вниз** соответственно. Возможность перемещать сразу несколько строк не предусмотрена.  
  
5.  Нажмите кнопку **ОК**.  
  
##  <a name="ChangeColumns"></a>Создание, изменение и удаление Объединенных столбцов  
  
#### <a name="to-create-merged-columns"></a>Создание объединенных столбцов  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  В окне результатов трассировки щелкните правой кнопкой мыши заголовок столбца и выберите команду **Выбрать столбцы**.  
  
3.  В диалоговом окне **Выбрать столбцы** щелкните **Создать**.  
  
4.  В диалоговом окне **Создать объединенный столбец** в поле **Имя объединенного столбца** введите имя для объединенных столбцов.  
  
5.  В поле **Исходные объединяемые столбцы** выберите два или несколько столбцов, подлежащих объединению, из раскрывающегося списка.  
  
    > [!NOTE]  
    >  Подсистема обработки расширенных событий поддерживает объединение не больше пяти столбцов.  
  
6.  Нажмите кнопку **ОК**.  
  
#### <a name="to-edit-merged-columns"></a>Изменение объединенных столбцов  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  В окне результатов трассировки щелкните правой кнопкой мыши заголовок столбца и выберите команду **Выбрать столбцы**.  
  
3.  В диалоговом окне **Выбрать столбцы** щелкните **Изменить**.  
  
4.  Чтобы изменить имя объединенного столбца, в диалоговом окне **Создать объединенный столбец** в поле **Имя объединенного столбца** введите новое имя.  
  
     Чтобы выбрать для объединения другие столбцы, в поле **Исходные объединяемые столбцы** выберите в раскрывающемся списке столбцы, которые должны быть объединены, а затем нажмите кнопку **ОК**.  
  
#### <a name="to-delete-merged-columns"></a>Удаление объединенных столбцов  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  В окне результатов трассировки щелкните правой кнопкой мыши заголовок столбца и выберите команду **Выбрать столбцы**.  
  
3.  В диалоговом окне **Выбрать столбцы** выберите имя объединенного столбца, который необходимо удалить, и нажмите кнопку **Удалить**.  
  
##  <a name="SortResults"></a>Сортировка результатов  
  
#### <a name="to-sort-the-results-in-ascending-or-descending-order"></a>Сортировка результатов по возрастанию или убыванию  
  
-   Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса, выбрать **Просмотр данных, передаваемых в режиме реального времени**, а затем нажать кнопку **Остановить поток данных** на панели инструментов.  
  
-   В окне результатов трассировки щелкните правой кнопкой мыши заголовок столбца, который необходимо отсортировать. Щелкните **Сортировать по возрастанию** или **Сортировать по убыванию** , чтобы выполнить сортировку столбца по возрастанию или убыванию соответственно.  
  
     Если имеются сгруппированные столбцы, то сортировка столбца приводит лишь к сортировке данных в пределах группы.  
  
##  <a name="GroupResults"></a>Результаты группы  
  
#### <a name="to-group-the-results-by-a-single-column"></a>Группирование результатов по одному столбцу  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса, выбрать **Просмотр данных, передаваемых в режиме реального времени**и нажать кнопку **Остановить поток данных** на панели инструментов «Расширенные события».  
  
2.  В окне результатов трассировки щелкните правой кнопкой мыши заголовок столбца, по которому должно быть выполнено группирование, а затем выберите команду **Группировать по этому столбцу**.  
  
#### <a name="to-group-the-results-by-multiple-columns"></a>Группирование результатов по нескольким столбцам  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса, выбрать **Просмотр данных, передаваемых в режиме реального времени**, а затем нажать кнопку **Остановить поток данных** на панели инструментов.  
  
2.  На панели инструментов «Расширенные события» нажмите кнопку **Группирование** .  
  
3.  В диалоговом окне **Группирование** в поле **Доступные столбцы** выберите столбцы, которые необходимо сгруппировать, а затем щелкните стрелку вправо.  
  
     Изменить порядок группирования можно стрелками вверх и вниз в разделе **Столбцы, сгруппированные по** .  
  
     Чтобы удалить столбцы из группирования, в поле **Столбцы, сгруппированные по** выберите столбцы, которые требуется удалить, а затем щелкните стрелку влево.  
  
4.  Нажмите кнопку **ОК**.  
  
##  <a name="AggregateResults"></a>Статистические результаты  
 Расширенные события поддерживают пять агрегатных функций:  
  
-   SUM  
  
-   Min  
  
-   Max  
  
-   Среднее  
  
-   Count  
  
 Функции Sum, Min, Max и Average можно использовать только для доступных числовых столбцов. Count — это количество не равных NULL значений, имеющихся в выбранном столбце в группе.  
  
#### <a name="to-aggregate-results"></a>Агрегатная обработка результатов  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса, выбрать **Просмотр данных, передаваемых в режиме реального времени**, а затем нажать кнопку **Остановить поток данных** на панели инструментов.  
  
    > [!NOTE]  
    >  Агрегатная обработка осуществляется по отношению к группе, поэтому необходимо сгруппировать результаты, прежде чем появится возможность выполнить статистическую обработку.  
  
2.  На панели инструментов «Расширенные события» нажмите кнопку **Выполнять статистическое вычисление** .  
  
     Откроется диалоговое окно **Статистическая обработка** , отображающее столбцы, доступные для статистической обработки.  
  
3.  В области **Тип статистической обработки**выберите в раскрывающемся списке тип статистической обработки соответствующего столбца.  
  
4.  В поле **Сортировать результаты статистической обработки по** выберите в раскрывающемся списке столбец, по которому должна быть выполнена сортировка.  
  
5.  Выберите вариант **В порядке возрастания** , чтобы отсортировать результаты статистической обработки в порядке возрастания.  
  
6.  Выберите вариант **В порядке убывания** , чтобы отсортировать результаты агрегатной обработки в порядке убывания.  
  
7.  Нажмите кнопку **ОК**.  
  
##  <a name="Filter"></a>Фильтрация результатов  
 Для уменьшения объемов результатов, отображаемых в окне трассировки, можно применить фильтры. Фильтр отображения включает в себя фильтр времени и расширенный фильтр. Для фильтрации результатов трассировки по отметкам времени событий используется фильтр времени, а для создания условий фильтра с использованием полей события и действий — дополнительный фильтр. Между фильтрами времени и дополнительными фильтрами определено отношение И.  
  
#### <a name="to-create-a-filter"></a>Создание фильтра  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  В окне результатов трассировки выберите результаты, которые необходимо отфильтровать, а затем на панели инструментов «Расширенные события» щелкните **Фильтры** .  
  
3.  В диалоговом окне **Фильтры** выберите **Задать фильтр времени** , чтобы установить фильтр времени, перетаскивая ползунки для задания временной шкалы. Обратите внимание, что после ввода значения времени происходит перемещение левого ползунка времени соответствующим образом. Можно также ввести значение времени в поле времени или выбрать его из раскрывающегося списка. Обратите внимание, что после ввода значения времени происходит перемещение левого ползунка времени соответствующим образом.  
  
4.  В разделе **Дополнительные фильтры** примените требуемые условия фильтра и нажмите кнопку **Применить**. После завершения создания фильтра нажмите кнопку **ОК**.  
  
 Особым случаем является совпадение имени поля события с именем действия. Примером служит session_id. В некоторые события входит поле session_id, а также можно добавить действие session_id. Оба фрагмента данных собираются, но в сетке отображения профилировщика расширенных событий применяется следующая логика.  
  
-   В сетке отображается только одна копия столбца (в данном случае session_id).  
  
-   Если в данных существуют и поле и действие, то отображается значение поля.  
  
-   Если в данных существует или только действие, или только поле, то отображается это действие или это поле.  
  
-   Если не существует ни действия, ни поля, отображается значение NULL.  
  
##  <a name="Search"></a>Поиск текста в столбцах  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  На панели инструментов «Расширенные события» нажмите кнопку **Поиск** .  
  
3.  В диалоговом окне **Найти в расширенных событиях** в поле **Найти** введите текст для поиска.  
  
     В раскрывающемся списке можно выбрать одну из 20 последних строк поиска.  
  
4.  В поле **Искать в** выберите в раскрывающемся списке расположение, где должен осуществляться поиск указанного текста. Можно использовать следующие параметры для поиска:  
  
    -   **Столбцы таблицы**. Этот параметр служит для поиска всех видимых столбцов в окне трассировки.  
  
    -   **Подробные сведения**. Этот параметр используется для поиска в окне трассировки всех столбцов (повышенных и неповышенных), которые были выбраны перед открытием диалогового окна **найти в расширенных событиях** .  
  
    -   Имя столбца событий>. ** \< ** Этот параметр служит для поиска в столбце определенного события из раскрывающегося списка.  
  
5.  Чтобы указать, как должен быть определен поиск, можно также задать следующие параметры:  
  
    1.  **Учитывать регистр**. Этот параметр используется для отображения результатов поиска текста, введенного в поле **Найти** , которые согласуются с ним и по содержанию, и по регистру.  
  
    2.  **Слово целиком**. Этот параметр служит для отображения результатов поиска введенного текста, которые согласуются с полными словами.  
  
    3.  **Поиск**. Этот параметр используется для поиска от местоположения курсора к началу результатов.  
  
    4.  **Используйте**. Используйте этот параметр для интерпретации специальных символов и регулярных выражений, введенных в поле **найти** . Специальные символы — это символы-шаблоны (*) и (?), представляющие один или нескольких символов. Регулярные выражения представляют собой специальные обозначения, используемые для определения искомого текста с помощью шаблонов.  
  
6.  Щелкните **Найти далее** , чтобы найти следующее вхождение текста, введенного в поле **Найти** .  
  
##  <a name="ChangeDisplay"></a>Изменение параметров экрана  
 Можно сохранить сведения о столбцах (порядок столбцов, объединенный столбец и ширина столбца) и отфильтрованные результаты трассировки в файле параметров представления «Расширенные события» (VIEWSETTING-файл). После сохранения файла можно его использовать для трассировки результатов и изменения представления.  
  
#### <a name="to-change-the-display-settings"></a>Изменение параметров отображения  
  
1.  Откройте XEL-файл для просмотра результатов трассировки.  
  
    > [!NOTE]  
    >  Можно также щелкнуть правой кнопкой мыши имя сеанса и выбирать пункт **Показать данные, передаваемые в режиме реального времени**.  
  
2.  В окне результатов трассировки панели или в меню «Расширенные события» выберите **Параметры экрана**.  
  
3.  Выберите один из следующих параметров из раскрывающегося списка.  
  
    -   **Сохранить как**. Сохраните столбцы и сведения о результатах трассировки в файле .viewsetting.  
  
    -   **Откройте**. Открыть существующий VIEWSETTING-файл.  
  
    -   **Откройте последние**. Открыть недавно сохраненный VIEWSETTING-файл.  
  
  
