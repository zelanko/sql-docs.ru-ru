---
title: Создание роли RSExecRole | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- RSExecRole
ms.assetid: 7ac17341-df7e-4401-870e-652caa2859c0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 3a6bc5ecbd1c59a5dc03f9c28d36d2816e6a8d92
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "66102032"
---
# <a name="create-the-rsexecrole"></a>Создание роли RSExecRole
  Службы [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] используют стандартную роль базы данных с именем `RSExecRole`, чтобы предоставить серверу отчетов разрешения в базе данных сервера отчетов. Роль `RSExecRole` создается автоматически с базой данных сервера отчетов. Как правило, никогда не следует изменять ее или назначать другим пользователям. Однако при перемещении базы данных сервера отчетов в новое или другое [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] [!INCLUDE[ssDE](../../../includes/ssde-md.md)]значение необходимо повторно создать роль в системных базах данных master и msdb.  
  
 С помощью следующих инструкций выполняются следующие шаги.  
  
-   Создание и предоставление роли `RSExecRole` в системной базе данных master.  
  
-   Создание и предоставление роли `RSExecRole` в системной базе данных msdb.  
  
> [!NOTE]  
>  Инструкции в этом разделе предназначены для пользователей, которые не хотят запускать скрипт или писать код инструментария WMI для предоставления базы данных сервера отчетов. Если предстоит управлять большим развертыванием и регулярно перемещать базы данных, необходимо подготовить скрипт для автоматизации этих шагов. Дополнительные сведения см. в разделе [Доступ к поставщику WMI для служб Reporting Services](../tools/access-the-reporting-services-wmi-provider.md).  
  
## <a name="before-you-start"></a>Перед началом работы  
  
-   Создайте резервную копию ключей шифрования, чтобы их можно было восстановить после перемещения базы данных. Этот шаг не влияет напрямую на возможность создавать и предоставлять роль `RSExecRole`, но резервная копия ключей необходима, чтобы проверить работу. Дополнительные сведения см. в разделе [Резервное копирование и восстановление ключей шифрования служб Reporting Services](../install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md).  
  
-   Проверьте, что выполнен вход в систему под учетной записью пользователя, у которой есть разрешения `sysadmin` на экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].  
  
-   Проверьте, что служба агента [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] установлена и работает на экземпляре компонента [!INCLUDE[ssDE](../../../includes/ssde-md.md)] , который планируется использовать.  
  
-   Присоедините базы данных reportservertempdb и reportserver. Не требуется присоединять базы данных, чтобы создать собственно роль, но они должны быть присоединены, прежде чем удастся проверить работу.  
  
 Инструкции для создания роли `RSExecRole` вручную предназначены для использования в контексте миграции установки сервера отчетов. Важные задачи, такие как резервное копирование и перемещение базы данных сервера отчетов, не рассматриваются в данном разделе, но описаны в документации по компоненту Database Engine.  
  
## <a name="create-rsexecrole-in-master"></a>Создание роли RSExecRole в базе данных master  
 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]использует расширенные хранимые процедуры [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для службы агента для поддержки запланированных операций. Следующие шаги поясняют, как предоставить разрешения EXECUTE для процедур роли `RSExecRole`.  
  
#### <a name="to-create-rsexecrole-in-the-master-system-database-using-management-studio"></a>Создание роли RSExecRole в системной базе данных master с помощью среды Management Studio  
  
1.  Запустите [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] и подключитесь к [!INCLUDE[ssDE](../../../includes/ssde-md.md)] экземпляру, на котором размещена база данных сервера отчетов.  
  
2.  Откройте узел **Базы данных**.  
  
3.  Откройте узел **Системные базы данных**.  
  
4.  Откройте среду `Master`.  
  
5.  Откройте **Безопасность**.  
  
6.  Откройте **Роли**.  
  
7.  Щелкните правой кнопкой мыши **Роли базы данных**и выберите пункт **Создать роль базы данных**. Отображается страница «Общие».  
  
8.  В окне **имя роли**введите `RSExecRole`.  
  
9. В окне **владелец**введите **dbo**.  
  
10. Щелкните **Защищаемые объекты**.  
  
11. Нажмите кнопку **Поиск**. Отображается диалоговое окно **Добавление объектов** . Параметр **Определенные объекты** выбран по умолчанию.  
  
12. Нажмите кнопку **ОК**. Появится диалоговое окно **Выбор объектов** .  
  
13. Щелкните **Типы объектов**.  
  
14. Щелкните **Расширенные хранимые процедуры**.  
  
15. Нажмите кнопку **ОК**.  
  
16. Нажмите кнопку **Обзор**.  
  
17. Прокрутите список расширенных хранимых процедур и выберите следующие:  
  
    1.  xp_sqlagent_enum_jobs  
  
    2.  xp_sqlagent_is_starting  
  
    3.  xp_sqlagent_notify  
  
18. Нажмите кнопку **ОК**, а затем еще раз кнопку **ОК** .  
  
19. В строке **Выполнить** в столбце **Предоставить** установите флажок и нажмите кнопку **ОК**.  
  
20. Повторите действия для каждой оставшейся хранимой процедуры. Роль `RSExecRole` должна иметь разрешения EXECUTE для всех трех хранимых процедур.  
  
 ![Страница свойств ролей базы данных](../media/rsexecroledbproperties.gif "Страница свойств ролей базы данных")  
  
## <a name="create-rsexecrole-in-msdb"></a>Создание роли RSExecRole в базе данных msdb  
 Службы Reporting Services используют хранимые процедуры для службы агента SQL Server и получают сведения о заданиях из системных таблиц для поддержки запланированных действий. Следующие шаги поясняют, как предоставить роли RSExecRole разрешения EXECUTE для процедур и разрешений SELECT в таблицах.  
  
#### <a name="to-create-rsexecrole-in-the-msdb-system-database"></a>Создание роли RSExecRole в системной базе данных msdb  
  
1.  Повторите аналогичные шаги, чтобы предоставить разрешения хранимым процедурам и таблицам в базе данных msdb. Чтобы упростить шаги, обрабатывайте хранимые процедуры и таблицы отдельно.  
  
2.  Откройте среду `MSDB`.  
  
3.  Откройте **Безопасность**.  
  
4.  Откройте **Роли**.  
  
5.  Щелкните правой кнопкой мыши **Роли базы данных**и выберите пункт **Создать роль базы данных**. Отображается страница «Общие».  
  
6.  В окне имя роли введите `RSExecRole`.  
  
7.  В окне Владелец введите **dbo**.  
  
8.  Щелкните **Защищаемые объекты**.  
  
9. Нажмите кнопку **Добавить**. Отображается диалоговое окно **Добавление объектов** . Параметр **Выбрать объекты** выбран по умолчанию.  
  
10. Нажмите кнопку **ОК**.  
  
11. Щелкните **Типы объектов**.  
  
12. Щелкните **Хранимые процедуры**.  
  
13. Нажмите кнопку **ОК**.  
  
14. Нажмите кнопку **Обзор**.  
  
15. Прокрутите список объектов и выберите следующие:  
  
    1.  sp_add_category  
  
    2.  sp_add_job  
  
    3.  sp_add_jobschedule  
  
    4.  sp_add_jobserver  
  
    5.  sp_add_jobstep  
  
    6.  sp_delete_job  
  
    7.  sp_help_category  
  
    8.  sp_help_job  
  
    9. sp_help_jobschedule  
  
    10. sp_verify_job_identifiers  
  
16. Нажмите кнопку **ОК**, а затем еще раз кнопку **ОК** .  
  
17. Выберите первую хранимую процедуру sp_add_category.  
  
18. В строке **Выполнить** в столбце **Предоставить** установите флажок и нажмите кнопку **ОК**.  
  
19. Повторите действия для каждой оставшейся хранимой процедуры. Роли RSExecRole должны быть предоставлены разрешения EXECUTE для всех десяти хранимых процедур.  
  
20. На вкладке «Защищаемые объекты» повторно нажмите кнопку **Добавить** . Отображается диалоговое окно **Добавление объектов** . Параметр **Выбрать объекты** выбран по умолчанию.  
  
21. Нажмите кнопку **ОК**.  
  
22. Щелкните **Типы объектов**.  
  
23. Щелкните **Таблицы**.  
  
24. Нажмите кнопку **ОК**.  
  
25. Нажмите кнопку **Обзор**.  
  
26. Прокрутите список объектов и выберите следующие:  
  
    1.  syscategories  
  
    2.  sysjobs  
  
27. Нажмите кнопку **ОК**, а затем еще раз кнопку **ОК** .  
  
28. Выберите первую таблицу — syscategories.  
  
29. В строке **Выбрать** в столбце **Предоставить** установите флажок и нажмите кнопку **ОК**.  
  
30. Повторите для таблицы sysjobs. Роли RSExecRole должны быть предоставлены разрешения SELECT для обеих таблиц.  
  
## <a name="move-the-report-server-database"></a>Перемещение базы данных сервера отчетов  
 После создания ролей можно переместить базу данных сервера отчетов на новый экземпляр SQL Server. Дополнительные сведения см. в разделе [Перемещение баз данных сервера отчетов на другой компьютер (собственный режим служб SSRS)](../report-server/moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md).  
  
 Если компонент [!INCLUDE[ssDE](../../../includes/ssde-md.md)] обновляется до [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], можно обновить его до или после перемещения базы данных.  
  
 База данных сервера отчетов обновляется автоматически до уровня [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] при подключении к ней сервера отчетов. Для обновления этой базы данных не требуется никаких конкретных шагов.  
  
## <a name="restore-encryption-keys-and-verify-your-work"></a>Восстановление ключей шифрования и проверка проделанной работы  
 Если имеются присоединенные базы данных сервера отчетов, можно выполнить следующие шаги для проверки работы.  
  
#### <a name="to-verify-report-server-operability-after-a-database-move"></a>Проверка работоспособности сервера отчетов после перемещения базы данных  
  
1.  Запустите программу настройки служб Reporting Services и подключитесь к серверу отчетов.  
  
2.  Щелкните **База данных**.  
  
3.  Нажмите кнопку **Изменить базу данных**.  
  
4.  Щелкните **Выбрать существующую базу данных сервера отчетов**.  
  
5.  Введите имя экземпляра сервера компонента Database Engine. Если базы данных сервера отчетов подключены к именованному экземпляру, то имя экземпляра необходимо вводить в следующем формате: \<имя_сервера>\\<имя_экземпляра\>.  
  
6.  Нажмите кнопку **Проверить соединение**.  
  
7.  Щелкните **Далее**.  
  
8.  На странице «База данных» выберите базу данных сервера отчетов.  
  
9. Нажмите кнопку **Далее** и завершите работу мастера.  
  
10. Щелкните **Ключи шифрования**.  
  
11. Щелкните **Восстановить**.  
  
12. Выберите файл ключа для строгого имени (SNK), который содержит резервную копию симметричного ключа, используемого для расшифровки сохраненных учетных данных и сведений о соединении с базой данных сервера отчетов.  
  
13. Введите пароль и нажмите кнопку **ОК**.  
  
14. Нажмите кнопку **URL-адрес диспетчера отчетов**.  
  
15. Щелкните ссылку, чтобы открыть диспетчер отчетов. Будут отображены элементы сервера отчетов из базы данных сервера отчетов.  
  
## <a name="see-also"></a>См. также:  
 [Перемещение баз данных сервера отчетов на другой компьютер &#40;служб SSRS в собственном режиме&#41;](../report-server/moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md)   
 [Использование диспетчера конфигурации служб Reporting Services (собственный режим)](../../sql-server/install/reporting-services-configuration-manager-native-mode.md)   
 [Создание базы данных сервера отчетов в собственном режиме &#40;Configuration Manager SSRS&#41;](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md)   
 [Резервное копирование и восстановление ключей шифрования служб Reporting Services](../install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md)  
  
  
