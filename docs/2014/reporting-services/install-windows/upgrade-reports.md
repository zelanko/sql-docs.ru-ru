---
title: Обновление отчетов | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology:
- database-engine
ms.topic: conceptual
helpviewer_keywords:
- reports [Reporting Services], upgrading
- published reports [Reporting Services], upgrades
- custom report items, upgrading
- Reporting Services, upgrades
- upgrading Reporting Services
- snapshots [Reporting Services], upgrading
- report definition files [Reporting Services]
- .rdl files
ms.assetid: a1a10c67-7462-4562-9b07-a8822188a161
author: markingmyname
ms.author: maghan
manager: craigg
ms.openlocfilehash: 1caf710a55ee548f7939ec65ead6397ccd4092d4
ms.sourcegitcommit: 3da2edf82763852cff6772a1a282ace3034b4936
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/02/2018
ms.locfileid: "48179324"
---
# <a name="upgrade-reports"></a>Upgrade Reports
  RDL-файлы определения отчетов автоматически обновляются следующими способами.  
  
-   При открытии отчета в конструкторе отчетов среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]определение отчета обновляется до поддерживаемой в настоящее время RDL-схемы. При указании [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] или [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)] сервера отчетов в свойствах проекта, определение отчета сохраняется в схеме, который совместим с целевым сервером.  
  
-   При обновлении установки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] до служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] существующие отчеты и моментальные снимки, опубликованные на сервере отчетов, компилируются и автоматически обновляются до новой схемы при первой обработке. Если отчет автоматически обновить не удается, он обрабатывается в режиме обратной совместимости. Определение отчета остается в исходной схеме.  
  
 При передаче файла определения отчета на сервер отчетов или на сайт SharePoint отчеты не обновляются. Обновление определения отчета в среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] является единственным способом обновления RDL-файла.  
  
 После локального обновления отчета или обновления на сервере отчетов могут появиться дополнительные ошибки, предупреждения и сообщения. Это результат изменений внутренней объектной модели отчетов и компонентов обработчиков, которые приводят к появлению сообщений при обнаружении проблем в отчете. Дополнительные сведения см. в статье [Reporting Services Backward Compatibility](../reporting-services-backward-compatibility.md).  
  
 Дополнительные сведения о новых возможностях для [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)], см. в разделе [новые &#40;служб Reporting Services&#41;](../what-s-new-reporting-services.md).  
  
 В этом разделе:  
  
-   [Версии отчетов, которые могут быть обновлены](#bkmk_versionsupported)  
  
-   [Файлы определения отчетов (RDL) и конструктор отчетов](#bkmk_rdlfiles)  
  
-   [Опубликованные отчеты и моментальные снимки отчетов](#bkmk_publishedreports_and_snapshots)  
  
-   [Режим обратной совместимости](#bkmk_backcompat)  
  
-   [Обновление отчета с вложенными отчетами](#bkmk_subreports)  
  
-   [Обновление пользовательских элементов отчета в отчете](#bkmk_CRIs)  
  
-   [Диалоговое окно «Преобразование пользовательского элемента отчета»](#bkmk_convertCRIdialog)  
  
##  <a name="bkmk_versionsupported"></a> Версии отчетов, которые могут быть обновлены  
 Можно обновить отчеты, созданные в любой из предыдущих версий служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Эти версии включают следующие.  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 с пакетом обновления 1  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 с пакетом обновления 2 (SP2)  
  
-   [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]  
  
-   [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)]  
  
-   [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]  
  
##  <a name="bkmk_rdlfiles"></a> Файлы определения отчетов (RDL) и конструктор отчетов  
 Файл определения отчета содержит ссылку на пространство имен языка определения отчетов, которое указывает версию схемы определения отчета, используемую для проверки RDL-файла.  
  
 Если RDL-файл открывается в конструкторе отчетов в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]и отчет был создан в предыдущем пространстве имен, конструктор отчетов автоматически создает файл резервной копии и обновляет отчет до текущего пространства имен. Это единственный способ обновления файла определения отчетов.  
  
 Устанавливаемые свойства развертывания могут влиять на то, в какой схеме сохраняется файл определения отчета. Дополнительные сведения см. в разделе [Развертывание и поддержка версий в SQL Server Data Tools (SSRS)](../tools/deployment-and-version-support-in-sql-server-data-tools-ssrs.md).  
  
 Можно передать RDL-файл, созданный в более ранней версии служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], на сервер отчетов [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], где он будет автоматически обновлен при первом использовании. На сервере отчетов файлы определения отчетов хранятся в собственном формате. Отчет обновляется автоматически при первом просмотре, однако сохраненный файл определения отчетов остается без изменений.  
  
> [!NOTE]  
>  Нельзя опубликовать или передать на сервер отчет, у которого в пространстве имен определения отчета [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] указан сервер отчетов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005.  
  
 Сведения о том, как определить текущую схему языка определения отчетов для отчетов, сервера отчетов или конструктора отчетов, см. в разделе [Определение версии схемы определения отчета (SSRS)](../reports/find-the-report-definition-schema-version-ssrs.md).  
  
##  <a name="bkmk_publishedreports_and_snapshots"></a> Опубликованные отчеты и моментальные снимки отчетов  
 При первом использовании сервер отчетов пытается обновить существующие опубликованные отчеты и моментальные снимки отчетов до новой схемы определения отчетов, что не требует каких-либо действий со стороны пользователя. Попытка обновления происходит, когда пользователь просматривает отчет или моментальный снимок отчета либо когда сервер отчетов обрабатывает подписку. Определение отчета не заменяется, а по-прежнему хранится на сервере отчетов [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] в своей первоначальной схеме. Если отчет невозможно обновить, он работает в режиме обратной совместимости.  
  
##  <a name="bkmk_backcompat"></a> Режим обратной совместимости  
 Успешно обновленный отчет обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] . Не может быть обновленный отчет обрабатывается [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] обработчиком в режиме обратной совместимости отчетов. Нельзя обработать отчет обоими обработчиками. При первом использовании отчет будет либо успешно обновлен, либо помечен для обработки в режиме обратной совместимости.  
  
 Только обработчик отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] поддерживает новые функции. Если обновить отчет не удается, отчет, готовый для просмотра, можно просмотреть, однако новые функции будут недоступны. Чтобы использовать эти новые функции, необходимо успешно обновить отчет.  
  
##  <a name="bkmk_subreports"></a> Обновление отчета с вложенными отчетами  
 Если отчет содержит вложенные отчеты, то при обновлении возникает одна из приведенных ниже четырех ситуаций.  
  
-   Главный отчет и все вложенные отчеты успешно обновляются. Они обрабатываются обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] .  
  
-   Главный отчет и все вложенные отчеты обновить не удается. Они обрабатываются [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] обработчиком отчетов.  
  
-   Возможно обновление главного отчета, однако один или несколько вложенных отчетов обновить не удается. Главный отчет обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] , однако в готовом для просмотра отчете отображается сообщение «Ошибка: не удалось обработать вложенный отчет» в том месте, где должен отображаться вложенный отчет, который не удалось обновить.  
  
-   Главный отчет обновить нельзя, однако можно обновить один или несколько вложенных отчетов. Главный отчет обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] , однако в готовом для просмотра отчете отображается сообщение «Ошибка: не удалось обработать вложенный отчет» в том месте, где должен отображаться вложенный отчет.  
  
 Если отображается сообщение «Ошибка: не удалось обработать вложенный отчет», необходимо изменить определение главного отчета или вложенного отчета таким образом, чтобы отчеты могла обработать одна версия обработчика отчетов.  
  
 Это ограничение не касается детализированных отчетов, поскольку они обрабатываются как независимые отчеты.  
  
##  <a name="bkmk_CRIs"></a> Обновление пользовательских элементов отчета в отчете  
 Отчеты служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] могут содержать пользовательские элементы отчета, предоставленные сторонними поставщиками ПО и установленные системным администратором на компьютере разработчика отчетов и на сервере отчетов. Обновлять отчеты с пользовательскими элементами отчета можно следующим образом.  
  
-   Объект [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] обновляется до сервера отчетов [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] сервера отчетов. Отчеты, опубликованные на сервере отчетов, автоматически обновляются при первом использовании.  
  
-   Объект [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] отчет загружается в [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] сервера отчетов. Отчет автоматически обновляется при первом использовании.  
  
-   Отчет служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] открывается в конструкторе отчетов среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Создается резервная копия отчета. Возможен один из двух вариантов.  
  
    1.  Ни один пользовательский элемент отчета не содержит неподдерживаемых функций. Пользовательские элементы отчета преобразуются в элементы отчета в новой схеме определения отчета; таким образом, обновляется весь отчет. При сохранении файл сохраняется в текущем пространстве имен языка определения отчетов.  
  
    2.  В одном или нескольких пользовательских элементах отчета есть неподдерживаемые функции. Открывается диалоговое окно, в котором пользователю предлагается выбрать действие: преобразовать пользовательские элементы отчета или оставить их без изменений.  
  
     Дополнительные сведения см. в подразделе [Открытие отчета в конструкторе отчетов](#OpeningaReport) далее в этом разделе.  
  
 Сведения об определении текущего пространства имен языка определения отчетов для сервера отчетов, среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] или отчета см. в разделе [Определение версии схемы определения отчета (SSRS)](../reports/find-the-report-definition-schema-version-ssrs.md).  
  
### <a name="upgrading-reports-on-a-report-server"></a>Обновление отчетов на сервере отчетов  
 В первый раз [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] отчет выполняется на сервере отчетов, который был обновлен для [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] сервера отчетов, отчет автоматически обновляется до текущего пространства имен определения отчета, поддерживаемого сервером отчетов. Отчет мог существовать на сервере отчетов до обновления, или были передать туда с помощью диспетчера отчетов или опубликовать на сервере отчетов из конструктора отчетов в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].  
  
 В следующей таблице перечислены действия по обновлению, выполняемые сервером отчетов для каждого конкретного типа пользовательских элементов отчета.  
  
|Тип пользовательского элемента отчета|Действие сервера отчетов по обновлению|  
|--------------|----------------------------------|  
|Сторонние пользовательские элементы отчета|Обновление не выполняется.<br /><br /> Обрабатывается обработчиком отчетов служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].|  
|Пользовательский элемент отчета Dundas 2005 Chart без неподдерживаемых функций|Обновляется до самой последней схемы языка определения отчетов. Все пользовательские элементы отчета Dundas 2005 Chart преобразуются в диаграммной области данных с помощью служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)].<br /><br /> Обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)].|  
|Пользовательский элемент отчета Dundas 2005 Gauge без неподдерживаемых функций|Обновляется до самой последней схемы языка определения отчетов. Все пользовательские элементы датчика Dundas 2005, преобразуются в области данных, совместимые с датчика [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)]<br /><br /> Обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)].|  
|Пользовательский элемент отчета Dundas 2005 Chart с неподдерживаемыми функциями|Обновление не выполняется.<br /><br /> Обрабатывается обработчиком отчетов служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].|  
|Пользовательский элемент отчета Dundas 2005 Gauge с неподдерживаемыми функциями|Обновление не выполняется.<br /><br /> Обрабатывается обработчиком отчетов служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].|  
  
###  <a name="OpeningaReport"></a> Открытие отчета с пользовательскими элементами отчета в конструкторе отчетов  
 При открытии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 2005 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] отчета с пользовательскими элементами отчета в конструкторе отчетов в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], отчет обновится до новой схемы определения отчета. В зависимости от того, какие пользовательские элементы отчета содержит отчет, выполняется одно из следующих действий.  
  
-   Обнаружены сторонние пользовательские элементы отчета. Если версия пользовательского элемента отчета, установленного на компьютере разработчика отчетов, несовместима с новой RDL-схемой, то в области конструктора отображается текстовое поле с красной буковой «X». Чтобы установить новые версии пользовательских элементов отчета сторонних поставщиков, совместимых с новой RDL-схемой, необходимо обратиться к системному администратору.  
  
-   Обнаружены пользовательские элементы отчета Dundas 2005 Chart или Gauge, все экземпляры содержат поддерживаемые функции. Все пользовательские элементы отчета Dundas 2005 Chart и Gauge преобразуются в элементы отчета «Диаграмма» и «Датчик» служб Reporting Services, которые находятся в области элементов. Они известны как собственные элементы отчета «диаграмма» и «датчик».  
  
-   Обнаружены пользовательские элементы отчета Dundas 2005 Chart или Gauge, все экземпляры содержат неподдерживаемые функции. Неподдерживаемые функции описаны после этого раздела. Можно выбрать, следует ли преобразовывать пользовательские элементы отчета в собственные элементы отчета.  
  
    -   При преобразовании отчет обновится до новой RDL-схемы и пользовательские элементы отчета Dundas 2005 Chart и Gauge будут преобразованы в соответствующие собственные диаграммы и датчики, но неподдерживаемые функции будут удалены. В отчете, готовом для просмотра, способ отображения пользовательских элементов отчета может отличаться.  
  
    -   Если отказаться от преобразования, отчет обновляется до новой RDL-схемы, но все пользовательские элементы рассматриваются как сторонние пользовательские элементы отчета. Чтобы установить новые пользовательские элементы отчета, совместимые с новой схемой отчета, необходима помощь системного администратора или стороннего поставщика. Если новые пользовательские элементы отчета недоступны, в отчете отображается текстовое поле с красной буквой «X» в конструкторе отчетов.  
  
 Сохранение отчета после обновления в среде, где он был создан, — единственный способ обновить существующий отчет до новой схемы определения отчета.  
  
### <a name="unsupported-dundas-2005-chart-custom-report-item-functionality"></a>Неподдерживаемые функции пользовательского элемента отчета Dundas 2005 Chart  
 Ниже приведены неподдерживаемые функции пользовательского элемента отчета Dundas 2005 Chart.  
  
-   Заметки.  
  
-   Пользовательские условные обозначения.  
  
-   Пользовательские атрибуты со следующими именами:  
  
    -   CUSTOM_CODE_CS;  
  
    -   CUSTOM_CODE_VB;  
  
    -   CUSTOM_CODE_COMPILED_ASSEMBLY.  
  
         Например, если RDL-файл содержит следующий раздел, перед обновлением этот код необходимо удалить:  
  
        ```  
        <CustomProperty>  
         <Name>CUSTOM_CODE_CS</Name>  
         <Value>dXNpWERwegfdfgiobxxl3bmc… </Value>  
        </CustomProperty>  
        ```  
  
### <a name="unsupported-dundas-2005-gauge-custom-report-item-functionality"></a>Неподдерживаемые функции пользовательского элемента отчета Dundas 2005 Gauge  
 Ниже приведены неподдерживаемые функции пользовательского элемента отчета Dundas 2005 Gauge.  
  
-   Числовые индикаторы.  
  
-   Индикаторы состояния.  
  
-   Пользовательские изображения.  
  
###  <a name="bkmk_convertCRIdialog"></a> Диалоговое окно «Преобразование пользовательского элемента отчета»  
 Этот отчет содержит пользовательские элементы отчетов с неподдерживаемыми функциями. Пользовательские элементы отчетов представляют собой расширения языка определения отчетов, которые поддерживают пользовательские объекты, отображающие данные в отчете. Пользовательские элементы отчета включают компоненты времени разработки и времени выполнения, поставляемые сторонними поставщиками программного обеспечения.  
  
> [!NOTE]  
>  Решение о поддержке пользовательских элементов отчетов на сервере отчетов принимает системный администратор. Чтобы можно было просматривать пользовательские элементы в отчете, компоненты CRI должны быть установлены на системе клиента, создающего отчеты, для предварительного просмотра отчета и на сервере отчетов для просмотра опубликованного или переданного отчета. Дополнительные сведения см. в разделе [пользовательские элементы отчета](../custom-report-items/custom-report-items.md) и в документации поставщика стороннего программного обеспечения.  
  
 Некоторые пользовательские элементы в отчете могут быть преобразованы в элементы отчета в новом формате определения отчета. Список CRI, которые могут быть преобразованы, см. в разделе [обновление отчетов](upgrade-reports.md). Используйте следующий список, чтобы решить, следует ли преобразовать пользовательские элементы в этом отчете.  
  
-   **Да** Выберите **Да** , чтобы преобразовать все пользовательские элементы в отчете, где возможно. Неподдерживаемые функции в пользовательских элементах отчета нельзя обновить и удалить из файла определения отчета. Список неподдерживаемых функций, см. в разделе [обновление отчетов](upgrade-reports.md). При просмотре отчета можно увидеть различия в способах отображения пользовательских элементов в отчете.  
  
-   **Нет** Выберите **Нет** , если не нужно преобразовать пользовательские элементы в отчете. Эти пользовательские элементы отчета в их текущей версии невозможно отобразить с помощью обработчика отчета. Если системный администратор планирует установить новую версию пользовательского элемента отчета от стороннего поставщика программного обеспечения, которая совместима с новым форматом определения отчета, то следует выбрать **Нет**. До тех пор, пока не появятся новые версии, пользовательские элементы отчета отображаются в отчете как пустые текстовые поля с красным символом «X».  
  
 В обоих случаях отчет обновляется до нового формата определения отчета, и резервная копия исходного отчета сохраняется как *\<Имя отчета>* `-` Backup.rdl. При сохранении отчета в средстве создания отчетов выполняется сохранение обновленного отчета в новом формате определения отчета. Если отчет публикуется, то отчет сначала сохраняется в компьютере пользователя, а затем публикуется на сервере отчетов. Обновленная версия отчета публикуется на сервере отчетов.  
  
 Если отчет не сохраняется, то исходный отчет остается неизмененным. Однако нельзя изменить этот отчет в версии [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] или средстве разработки отчетов, использующем более новый формат определения отчета. Можно продолжить выполнять исходную версию отчета, передав ее на сервер отчетов [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] с помощью диспетчера отчетов. Дополнительные сведения см. в разделе [Передача файла или отчета (диспетчер отчетов)](../reports/upload-a-file-or-report-report-manager.md).  
  
 Для отчетов, которые передаются вместо публикации на сервере отчетов, обработчик отчета отчета определяет, можно ли обновить отчет при первом использовании. Отчеты, которые нельзя обновить, обрабатываются в режиме обратной совместимости и продолжают отображаться, как в предыдущей версии служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].  
  
## <a name="see-also"></a>См. также  
 [Обновление и перенос служб Reporting Services](upgrade-and-migrate-reporting-services.md)   
 [Критические изменения в SQL Server Reporting Services в SQL Server 2014](../breaking-changes-in-sql-server-reporting-services-in-sql-server-2016.md)   
 [Изменения в работе в SQL Server Reporting Services в SQL Server 2014](../behavior-changes-to-sql-server-reporting-services-in-sql-server-2016.md)   
 [Неподдерживаемые возможности в SQL Server Reporting Services в SQL Server 2014](../discontinued-functionality-to-sql-server-reporting-services-in-sql-server.md)   
 [Пользовательские элементы отчета](../custom-report-items/custom-report-items.md)   
 [Обновление базы данных сервера отчетов](upgrade-a-report-server-database.md)  
  
  
