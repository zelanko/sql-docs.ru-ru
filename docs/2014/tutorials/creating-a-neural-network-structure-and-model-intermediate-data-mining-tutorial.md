---
title: Создание структуры и модели нейронной сети (учебник по интеллектуальному анализу данных — средний уровень) | Документация Майкрософт
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- discretization [Analysis Services]
- DISCRETIZED column
- DiscretizationBuckets property
- DiscretizationMethod property
- EQUAL_AREAS method
ms.assetid: 3f16215c-531e-4ecf-a11f-ee7c6a764463
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 6787db165770f944838a312ecd3e0386d161da38
ms.sourcegitcommit: 6fd8c1914de4c7ac24900fe388ecc7883c740077
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2020
ms.locfileid: "62856335"
---
# <a name="creating-a-neural-network-structure-and-model-intermediate-data-mining-tutorial"></a>Создание структуры и модели нейронной сети (учебник по интеллектуальному анализу данных — средний уровень)
  Чтобы создать модель интеллектуального анализа данных, сначала необходимо воспользоваться мастером интеллектуального анализа данных, чтобы создать новую структуру интеллектуального анализа, основанную на новом представлении источника данных. В этой задаче мастер будет использоваться для создания структуры интеллектуального анализа данных и в то же время создать связанную модель интеллектуального анализа данных, основанную на алгоритме [!INCLUDE[msCoName](../includes/msconame-md.md)] нейронной сети.  
  
 Так как нейронные сети чрезвычайно гибки и могут анализировать много сочетаний входных и выходных данных, для достижения наилучших результатов необходимо поэкспериментировать с несколькими способами обработки данных. Например, можно настроить способ, которым числовой целевой объект для качества службы будет *Binned*или сгруппирован, для назначения конкретных бизнес-требований. Для этого в структуру интеллектуального анализа данных добавляется новый столбец, который группирует числовые данные другим образом, а затем создается модель, которая использует новый столбец. С помощью этих моделей интеллектуального анализа данных будет проводиться исследование.  
  
 Наконец, когда из модели нейронной сети определены факторы, которые сильнее всего влияют на бизнес-задачу, будет построена отдельная модель для прогнозирования и оценки. Будет использоваться алгоритм [!INCLUDE[msCoName](../includes/msconame-md.md)] логистической регрессии, основанный на модели нейронных сетей, но оптимизированный для поиска решения на основе конкретных входных данных.  
  
 **Шаги**  
  
 [Создайте стандартную структуру интеллектуального анализа данных и модель](#bkmk_defaul)  
  
 [Используйте дискретизацию для секционирования прогнозируемого столбца](#bkmk_ColumnCopy)  
  
 [Скопируйте столбец и измените метод дискретизации для другой модели](#bkmk_Alias)  
  
 [Создайте псевдоним для прогнозируемого столбца, что позволит сравнить модели](#bkmk_Alias2)  
  
 [Обработать все модели](#bkmk_SeedProcess)  
  
## <a name="create-the-default-call-center-structure"></a>Создание структуры центра обработки вызовов по умолчанию<a name="bkmk_defaul"></a>  
  
1.  В обозреватель решений в [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)]щелкните правой кнопкой мыши элемент **структуры интеллектуального анализа данных** и выберите пункт **создать структуру интеллектуального анализа данных**.  
  
2.  На странице **Вас приветствует мастер интеллектуального анализа данных** нажмите кнопку **Далее**.  
  
3.  На странице **Выбор метода определения** убедитесь, что выбран параметр **из существующей реляционной базы данных или хранилища данных** , а затем нажмите кнопку **Далее**.  
  
4.  На странице **Создание структуры интеллектуального анализа данных** убедитесь, что выбран параметр **создать структуру интеллектуального анализа с моделью интеллектуального** анализа.  
  
5.  Щелкните раскрывающийся список для параметра Выбор **метода интеллектуального анализа данных, который вы хотите использовать?**, а затем выберите **нейронные сети Майкрософт**.  
  
     Так как модели логистической регрессии основаны на нейронных сетях, можно повторно использовать ту же структуру и добавить новую модель интеллектуального анализа данных.  
  
6.  Нажмите кнопку **Далее**.  
  
     Откроется страница **Выбор представления источника данных** .  
  
7.  В разделе **Доступные представления источников данных**выберите `Call Center`и нажмите кнопку **Далее**.  
  
8.  На странице **Выбор типов таблиц** установите флажок Case ( **регистр** ) рядом с таблицей **FactCallCenter** . Не выбирайте ничего для **DimDate**. Нажмите кнопку **Далее**.  
  
9. На странице **Определение обучающих данных** выберите **ключ** рядом со столбцом **факткаллцентерид.**  
  
10. Установите флажки `Predict` и **ввода** .  
  
11. Выберите **ключ**, **Ввод**и `Predict` флажки, как показано в следующей таблице.  
  
    |Таблицы и столбцы|Ключ/Входные данные/Прогноз|  
    |---------------------|-------------------------|  
    |AutomaticResponses|Входные данные|  
    |AverageTimePerIssue|Входные данные/Прогноз|  
    |Вызовы|Входные данные|  
    |DateKey|Не использовать|  
    |DayOfWeek|Входные данные|  
    |FactCallCenterID|Ключ|  
    |IssuesRaised|Входные данные|  
    |LevelOneOperators|Входные данные/Прогноз|  
    |LevelTwoOperators|Входные данные|  
    |Orders|Входные данные/Прогноз|  
    |ServiceGrade|Входные данные/Прогноз|  
    |Сдвиг|Входные данные|  
    |TotalOperators|Не использовать|  
    |WageType|Входные данные|  
  
     Заметьте, что выбрано несколько прогнозируемых столбцов. Одним из преимуществ алгоритма нейронной сети является возможность анализа всех возможных сочетаний входных и выходных атрибутов. Это нежелательно делать для большого набора данных, так как он может экспоненциально увеличивать время обработки.  
  
12. На странице **Определение содержимого и типа данных столбцов** убедитесь, что сетка содержит столбцы, типы содержимого и типы данных, как показано в следующей таблице, а затем нажмите кнопку **Далее**.  
  
    |Столбцы|Тип содержимого|Типы данных|  
    |-------------|------------------|----------------|  
    |AutomaticResponses|Непрерывные|Long|  
    |AverageTimePerIssue|Непрерывные|Long|  
    |Вызовы|Непрерывные|Long|  
    |DayOfWeek|Discrete|Text|  
    |FactCallCenterID|Ключ|Long|  
    |IssuesRaised|Непрерывные|Long|  
    |LevelOneOperators|Непрерывные|Long|  
    |LevelTwoOperators|Непрерывные|Long|  
    |Orders|Непрерывные|Long|  
    |ServiceGrade|Непрерывные|Double|  
    |Сдвиг|Discrete|Text|  
    |WageType|Discrete|Text|  
  
13. На странице **Создание проверочного набора** очистите текстовое поле для параметра **процент данных для тестирования**. Нажмите кнопку **Далее**.  
  
14. На странице **Завершение работы мастера** для **имени структуры интеллектуального анализа данных**введите `Call Center`.  
  
15. В поле **имя модели интеллектуального анализа данных**введите `Call Center Default NN`, а затем нажмите кнопку **Готово**.  
  
     Поле **Разрешить детализацию** отключено, так как вы не можете детализировать данные с помощью моделей нейронной сети.  
  
16. В обозреватель решений щелкните правой кнопкой мыши имя только что созданной структуры интеллектуального анализа данных и выберите команду **обработать**.  
  
## <a name="use-discretization-to-bin-the-target-column"></a>Используйте дискретизацию для секционирования целевого столбца  
 По умолчанию при создании модели нейронной сети, имеющей числовой прогнозируемый атрибут, алгоритм нейронной сети (Майкрософт) считает атрибут непрерывным числом. Например, атрибут ServiceGrade представляет собой число, теоретически из диапазона от 0,00 (все звонки обработаны) до 1,00 (все звонки отложены). В этом наборе данных значения имеют следующее распределение:  
  
 ![распределение значений уровня обслуживания](../../2014/tutorials/media/skt-service-grade-valuesc.gif "распределение значений уровня обслуживания")  
  
 В результате при обработке модели выходные данные могут быть сгруппированы не так, как ожидалось. Например, если для поиска лучших групп значений используется кластеризация, алгоритм делит значения в ServiceGrade на диапазоны, такие как 0,0748051948-0.09716216215. Такое группирование математически точно, однако подобные диапазоны могут представляться бизнес-пользователям мало осмысленными.  
  
 На этом шаге, чтобы сделать результат более интуитивно понятным, можно сгруппировать числовые значения по-разному, создавая копии столбца числовых данных.  
  
### <a name="how-discretization-works"></a>Как работает дискретизация  
 Службы Analysis Services предоставляют разнообразные методы для сегментирования числовых данных и их обработки. В следующей таблице показаны различия в результатах обработки выходного атрибута ServiceGrade тремя способами.  
  
-   Обрабатывать атрибут как непрерывное число.  
  
-   Использовать в алгоритме кластеризацию для определения наилучшего распределения значений.  
  
-   Указать, что числа сегментируются с помощью метода равных областей.  
  
 Модель по умолчанию (продолжение)  
  
|Значение|Псевдоним|  
|-----------|-------------|  
|Missing|0|  
|0,09875|120|  
  
 Сегментирование кластеризацией  
  
|Значение|Псевдоним|  
|-----------|-------------|  
|\<0,0748051948|34|  
|0,0748051948-0.09716216215|27|  
|0.09716216215 — 0.13297297295|39|  
|0.13297297295 — 0.167499999975|10|  
|>= 0.167499999975|10|  
  
 Сегментирование на равные области  
  
|Значение|Псевдоним|  
|-----------|-------------|  
|\<0,07|26|  
|0,07-0,00|22|  
|0,09-0,11|36|  
|>= 0,12|36|  
  
> [!NOTE]  
>  Эту статистику можно получить из узла граничной статистики модели после обработки всех данных. Дополнительные сведения об узле граничной статистики см. в разделе [содержимое моделей интеллектуального анализа данных для моделей нейронных сетей &#40;Analysis Services-&#41;интеллектуального анализа ](../../2014/analysis-services/data-mining/mining-model-content-for-neural-network-models-analysis-services-data-mining.md).  
  
 В этой таблице столбец VALUE показывает, как обрабатывалось число для ServiceGrade. Столбец SUPPORT показывает, сколько вариантов пришлось на данное значение или попало в данный диапазон.  
  
-   **Использовать непрерывные числа (по умолчанию)**  
  
     Если использовался метод по умолчанию, то алгоритм вычислил результаты для 120 уникальных значений. Среднее значение равно 0,09875. Также можно просмотреть число отсутствующих значений.  
  
-   **Сегментирование кластеризацией**  
  
     Если оптимальное группирование значений определяется алгоритмом кластеризации (Майкрософт), то алгоритм группирует значения для ServiceGrade на пять (5) диапазонов. Варианты распределяются по диапазонам неравномерно, о чем сообщает столбец SUPPORT.  
  
-   **Сегментирование на равные области**  
  
     Если выбран этот метод, то алгоритм принудительно разделяет значения на контейнеры одинакового размера, что в свою очередь приводит к изменению верхней и нижней границы каждого диапазона. Можно задать число контейнеров, но следует избегать ситуации, когда в одном контейнере оказывается слишком мало значений.  
  
 Дополнительные сведения о параметрах группирования см. в разделе [методы дискретизации &#40;&#41;интеллектуального анализа данных ](../../2014/analysis-services/data-mining/discretization-methods-data-mining.md).  
  
 Кроме того, вместо использования числовых значений можно добавить отдельный производный столбец, который классифицирует уровни обслуживания в предопределенные целевые диапазоны, например " **лучший** " (ServiceGrade \<= 0,05), **приемлемый** (0,10 > ServiceGrade > 0,05) и **плохое** (ServiceGrade >= 0,10).  
  
###  <a name="create-a-copy-of-a-column-and-change-the-discretization-method"></a><a name="bkmk_newColumn"></a>Создание копии столбца и изменение метода дискретизации  
 Вы создадите копию столбца интеллектуального анализа данных, содержащего целевой атрибут, ServiceGrade и измените способ группировки чисел. Можно создать несколько копий любого столбца в структуре интеллектуального анализа данных, включая прогнозируемый атрибут.  
  
 Для этого учебника будет использоваться метод дискретизации с равными областями с указанием четырех контейнеров. Группирования, получаемые этим методом, довольно близки к целевым значениям, представляющим интерес для бизнес-пользователей.  
  
####  <a name="to-create-a-customized-copy-of-a-column-in-the-mining-structure"></a><a name="bkmk_ColumnCopy"></a>Создание пользовательской копии столбца в структуре интеллектуального анализа данных  
  
1.  В обозревателе решений дважды щелкните созданную структуру интеллектуального анализа данных.  
  
2.  На вкладке Структура интеллектуального анализа данных щелкните **Добавить столбец структуры интеллектуального анализа данных**.  
  
3.  В диалоговом окне **Выбор столбца** выберите ServiceGrade из списка в поле **Исходный столбец**, а затем нажмите кнопку **ОК**.  
  
     Новый столбец будет добавлен в список столбцов структуры интеллектуального анализа данных. По умолчанию новый столбец интеллектуального анализа данных имеет то же имя, что и существующий столбец с числовым значением постфикса: например, ServiceGrade 1. Имя этого столбца можно заменить на более описательное.  
  
     Также будет указан метод дискретизации.  
  
4.  Щелкните правой кнопкой мыши ServiceGrade 1 и выберите пункт **Свойства**.  
  
5.  В окне **Свойства** перейдите к свойству **имя** и измените имя на **Service Grade Binned** .  
  
6.  Откроется диалоговое окно с предложением внести это изменение в имена всех связанных столбцов модели интеллектуального анализа данных. Нажмите кнопку **Нет**.  
  
7.  В окне **Свойства** выберите **тип данных** раздела и при необходимости разверните его.  
  
8.  Измените значение свойства `Content` с `Continuous` на `Discretized`.  
  
     Доступны следующие свойства. Измените значения свойств в соответствии со следующей таблицей.  
  
    |Свойство|Значение по умолчанию|Новое значение|  
    |--------------|-------------------|---------------|  
    |`DiscretizationMethod`|`Continuous`|`EqualAreas`|  
    |`DiscretizationBucketCount`|Без значения|4|  
  
    > [!NOTE]  
    >  По умолчанию свойство <xref:Microsoft.AnalysisServices.ScalarMiningStructureColumn.DiscretizationBucketCount%2A> имеет значение 0, что означает, что алгоритм автоматически определяет оптимальное число контейнеров. Поэтому, если необходимо изменить значение этого свойства на значение по умолчанию, введите 0.  
  
9. В конструкторе интеллектуального анализа данных перейдите на вкладку **модели интеллектуального анализа** .  
  
     Обратите внимание, что во время добавления копии столбца структуры интеллектуального анализа данных флаг использования для копии автоматически получает значение `Ignore`. Обычно во время добавления копии столбца к структуре интеллектуального анализа данных копия не используется для анализа совместно с исходным столбцом. В противном случае алгоритм обнаружит между двумя столбцами сильную корреляцию, которая может скрыть остальные связи.  
  
##  <a name="add-a-new-mining-model-to-the-mining-structure"></a><a name="bkmk_NewModel"></a>Добавление новой модели интеллектуального анализа данных в структуру интеллектуального анализа данных  
 После создания нового группирования для целевого атрибута необходимо добавить новую модель интеллектуального анализа данных, которая использует дискретизированный столбец. После этого в структуре интеллектуального анализа данных CallCenter окажется две модели интеллектуального анализа данных:  
  
-   модель Call Center Default NN обрабатывает значения ServiceGrade в виде непрерывного диапазона;  
  
-   Будет создана новая модель интеллектуального анализа данных, Call Center Binned NN, которая использует в качестве целевого объекта значения столбца ServiceGrade, распределенные по четырем контейнерам одинакового размера.  
  
#### <a name="to-add-a-mining-model-based-on-the-new-discretized-column"></a>Добавление модели интеллектуального анализа данных на основе нового дискретизированного столбца  
  
1.  В обозреватель решений щелкните правой кнопкой мыши только что созданную структуру интеллектуального анализа данных и выберите команду **Открыть**.  
  
2.  Перейдите на вкладку **Модели интеллектуального анализа данных** .  
  
3.  Щелкните **создать связанную модель интеллектуального анализа данных**.  
  
4.  В диалоговом окне **Новая модель интеллектуального анализа данных** в поле **имя модели**введите `Call Center Binned NN`. В раскрывающемся списке **имя алгоритма** выберите **нейронная сеть (Майкрософт**).  
  
5.  В списке столбцов, содержащихся в новой модели интеллектуального анализа данных, выберите ServiceGrade и измените для него флаг использования с `Predict` на `Ignore`.  
  
6.  Аналогичным образом выберите столбец ServiceGrade Binned и измените для него флаг использования с `Ignore` на `Predict`.  
  
##  <a name="create-an-alias-for-the-target-column"></a><a name="bkmk_Alias2"></a>Создание псевдонима для целевого столбца  
 Обычно невозможно сравнивать модели интеллектуального анализа данных, в которых используются различные прогнозируемые атрибуты. Однако для столбца модели интеллектуального анализа данных можно создать псевдоним. То есть можно переименовать столбец ServiceGrade Binned в модели интеллектуального анализа данных таким образом, чтобы он совпадал с именем исходного столбца. Затем можно непосредственно сравнить эти две модели по диаграмме точности, несмотря на то, что данные дискретизируются различным образом.  
  
###  <a name="to-add-an-alias-for-a-mining-structure-column-in-a-mining-model"></a><a name="bkmk_Alias"></a>Добавление псевдонима для столбца структуры интеллектуального анализа данных в модели интеллектуального анализа данных  
  
1.  На вкладке **модели интеллектуального анализа данных** в разделе **Структура**выберите ServiceGrade Binned.  
  
     Обратите внимание, что в окне **Свойства** отображаются свойства объекта скаларминингструктуре столбец.  
  
2.  Под столбцом для модели интеллектуального анализа данных ServiceGrade Binned NN щелкните ячейку, соответствующую столбцу ServiceGrade Binned.  
  
     Обратите внимание, что теперь в окне **Свойства** отображаются свойства объекта MiningModelColumn.  
  
3.  Выберите свойство **имя** и измените значение на `ServiceGrade`.  
  
4.  Укажите свойство **Description** и введите **псевдоним временного столбца**.  
  
     Окно **Свойства** должно содержать следующие сведения:  
  
    |Свойство|Значение|  
    |--------------|-----------|  
    |**Описание**|Временный псевдоним столбца|  
    |**Идентификатор**|ServiceGrade Binned|  
    |**Флаги моделирования**||  
    |**Имя**|Service Grade|  
    |**SourceColumn ID**|Service Grade 1|  
    |**Использование**|Predict|  
  
5.  Щелкните в любом месте вкладки **модель интеллектуального анализа данных** .  
  
     Сетка обновляется для отображения нового временного псевдонима `ServiceGrade`столбца, рядом с использованием столбца. Сетка, содержащая структуру интеллектуального анализа данных и две модели интеллектуального анализа данных, должна иметь следующий вид:  
  
    |Структура|Call Center Default NN|Call Center Binned NN|  
    |---------------|----------------------------|---------------------------|  
    ||Алгоритм нейронной сети Майкрософт|Алгоритм нейронной сети Майкрософт|  
    |AutomaticResponses|Входные данные|Входные данные|  
    |AverageTimePerIssue|Predict|Predict|  
    |Вызовы|Входные данные|Входные данные|  
    |DayOfWeek|Входные данные|Входные данные|  
    |FactCallCenterID|Ключ|Ключ|  
    |IssuesRaised|Входные данные|Входные данные|  
    |LevelOneOperators|Входные данные|Входные данные|  
    |LevelTwoOperators|Входные данные|Входные данные|  
    |Orders|Входные данные|Входные данные|  
    |ServiceGrade Binned|Игнорировать|Прогноз (ServiceGrade)|  
    |ServiceGrade|Predict|Игнорировать|  
    |Сдвиг|Входные данные|Входные данные|  
    |Total Operators|Входные данные|Входные данные|  
    |WageType|Входные данные|Входные данные|  
  
## <a name="process-all-models"></a>Обработайте все модели  
 Наконец, чтобы обеспечить возможность простого сравнения созданных моделей, будет установлен параметр начального значения для модели по умолчанию и модели с сегментированием. Установка начального значения гарантирует, что каждая модель начнет обработку данных с одной и той же точки.  
  
> [!NOTE]  
>  Если не указать числовое значение для параметра начального значения, службы SQL Server Analysis Services создадут начальное значение на основе имени модели. Поскольку модели всегда имеют разные имена, необходимо задать начальное значение, чтобы обеспечить одинаковый порядок обработки данных этими моделями.  
  
###  <a name="to-specify-the-seed-and-process-the-models"></a><a name="bkmk_SeedProcess"></a>Указание начального значения и обработка моделей  
  
1.  На вкладке **модель интеллектуального анализа данных** щелкните правой кнопкой мыши столбец для модели с именем Call Center-LR и выберите пункт **задать параметры алгоритма**.  
  
2.  В строке для параметра HOLDOUT_SEED щелкните пустую ячейку в поле **значение**и введите `1`. Нажмите кнопку **ОК**. Повторите этот шаг для каждой модели, связанной со структурой.  
  
    > [!NOTE]  
    >  Значение, выбираемое в качестве начального, не играет роли, но необходимо использовать одно и то же начальное значение для всех связанных моделей.  
  
3.  В меню **модели интеллектуального анализа данных** выберите пункт **обработать структуру интеллектуального анализа данных и все модели**. Нажмите кнопку **Да** , чтобы развернуть обновленный проект интеллектуального анализа данных на сервере.  
  
4.  В диалоговом окне **Обработка модели интеллектуального анализа данных** нажмите кнопку **выполнить**.  
  
5.  Нажмите кнопку **Закрыть** , чтобы закрыть диалоговое окно **Ход обработки** , а затем еще раз нажмите кнопку **Закрыть** в диалоговом окне **Обработка модели интеллектуального анализа данных** .  
  
 После создания двух связанных моделей интеллектуального анализа данных будет выполнено исследование данных с целью выявления содержащихся в них связей.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Руководство по использованию модели центра обработки вызовов &#40;промежуточного интеллектуального анализа данных&#41;](../../2014/tutorials/exploring-the-call-center-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>См. также  
 [Структуры интеллектуального анализа данных (службы Analysis Services — интеллектуальный анализ данных)](../../2014/analysis-services/data-mining/mining-structures-analysis-services-data-mining.md)  
  
  
