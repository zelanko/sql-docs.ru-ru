---
title: Задача 14. Добавление «Выполнение SQL» в поток управления для выполнения хранимых процедур для MDS | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology:
- data-quality-services
- integration-services
- master-data-services
ms.topic: conceptual
ms.assetid: 9a5d1b52-d505-4e6f-8a89-569329c094e2
author: douglaslms
ms.author: douglasl
manager: craigg
ms.openlocfilehash: 75529b9880183a644abdbdce1f6174c375245ba2
ms.sourcegitcommit: 334cae1925fa5ac6c140e0b2c38c844c477e3ffb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/13/2018
ms.locfileid: "53355847"
---
# <a name="task-14-adding-execute-sql-task-to-control-flow-to-run-the-stored-procedure-for-mds"></a>Задача 14. Добавление задачи «Выполнение SQL» в поток управления для выполнения хранимых процедур для MDS
  После загрузки данных в промежуточные таблицы служб MDS вы выполняете хранимую процедуру, связанную с этой таблицей, для загрузки данных из промежуточных таблиц в соответствующие таблицы в базе данных MDS. Данной хранимой процедуре необходимо передать два обязательных параметра: LogFlag и VersionName. Параметр LogFlag определяет, записываются ли транзакции в журнал в ходе промежуточного процесса, а параметр VersionName представляет версию модели. См. в разделе [промежуточная хранимая процедура](https://msdn.microsoft.com/library/hh231028.aspx) Дополнительные сведения.  
  
 В этой задаче вы добавляете задачу «Выполнение SQL» в поток управления для вызова хранимой процедуры и загрузки промежуточных данных в соответствующие таблицы базы данных MDS.  
  
1.  Перейдите к **поток управления** вкладки.  
  
2.  Перетащите **задаче "Выполнение SQL"** из **область элементов служб SSIS** для **поток управления** вкладки.  
  
3.  Щелкните правой кнопкой мыши **задаче "Выполнение SQL"** в **поток управления** , а щелкните **Переименовать**. Тип **вызов хранимой процедуры для загрузки данных в MDS** и нажмите клавишу **ввод**.  
  
4.  Подключение **Receive, очистка, сопоставление и исправление данных поставщика** для **вызов хранимой процедуры для загрузки данных** с помощью зеленого соединителя.  
  
     ![Подключение к «Выполнение SQL»](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-01.jpg "подключиться к «Выполнение SQL»")  
  
5.  С помощью **переменных** окна, добавьте две новые переменные со следующими параметрами. Если вы не видите **переменных** окно, нажмите кнопку **SSIS** в строке меню щелкните **переменных**.  
  
    |Имя|Тип данных|Значение|  
    |----------|---------------|-----------|  
    |LogFlag|Int32|1|  
    |VersionName|String|VERSION_1|  
  
     ![Окно переменных служб SSIS](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-02.jpg "окно переменных служб SSIS")  
  
6.  Дважды щелкните **активации хранимой процедуры для загрузки данных в MDS**.  
  
7.  В **Execute SQL Task Editor** выберите **(local). MDS** (или **localhost. MDS**) для **подключения**.  
  
8.  Тип **EXEC [stg]. [ udp_Supplier_Leaf]?,?,?** для **инструкции SQL**. Имя можно проверить с помощью среды SQL Server Management Studio.  
  
     ![Выполнение общих параметров SQL диалоговое окно редактора -](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-03.jpg "выполнить SQL диалоговое окно редактора - Общие параметры")  
  
9. Нажмите кнопку **сопоставление параметров** в меню слева.  
  
10. В **сопоставление параметров** щелкните **добавить** для добавления сопоставления. Разверните окно и измените размер столбцов, чтобы можно было видеть значения в раскрывающемся списке.  
  
11. Выберите **User::VersionName** из раскрывающегося списка для **имя переменной**.  
  
12. Выберите **NVARCHAR** для **тип данных**.  
  
13. Тип **0** (ноль) в поле **имя параметра**.  
  
14. Повторите предыдущие четыре шага, чтобы добавить другие переменные.  
  
    |Имя переменной|Тип данных (важно)|Имя параметра|  
    |-------------------|-----------------------------|--------------------|  
    |User::LogFlag|LONG|1|  
    |User::BatchTag|NVARCHAR|2|  
  
     ![Редактор SQL задач - Выполнение сопоставление параметров](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-04.jpg "SQL редактор задач - Выполнение сопоставление параметров")  
  
15. Нажмите кнопку **ОК** закрыть **редактор SQL Выполнение** диалоговое окно.  
  
## <a name="next-step"></a>Следующий шаг  
 [Задача 15. Построение и запуск проекта служб SSIS](../../2014/tutorials/task-15-building-and-running-the-ssis-project.md)  
  
  
