---
title: Администрирование серверов с помощью управления на основе политик | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- facet See facets
- Declarative Management Framework See Policy-Based Management
- surface area configuration [SQL Server], Policy-Based Management
- Policy-Based Management
- facets [Policy-Based Management]
- Policy-Based Management, administering
- conditions [Policy-Based Management]
- facets [Policy-Based Management], about facets
- PolicyAdministratorRole role
ms.assetid: ef2a7b3b-614b-405d-a04a-2464a019df40
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: cb9d48156ecd1ca98dc36c10c2680883160582c1
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "63157113"
---
# <a name="administer-servers-by-using-policy-based-management"></a>Администрирование серверов с помощью управления на основе политик
  Управление на основе политик — это система управления одним или несколькими экземплярами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Если администраторы политик [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] используют управление на основе политик, то они применяют среду [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] для создания политик управления сущностями на сервере, например экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], базами данных или другими объектами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
## <a name="benefits-of-policy-based-management"></a>Преимущества управления на основе политик  
 Управление на основе политик полезно при решении проблем, представленных в следующих сценариях.  
  
-   Политика компании запрещает включение компонента Database Mail или службы SQL Mail. Политика создается для проверки состояния этих двух компонентов сервера. Администратор сравнивает состояние сервера с политикой. Если состояние сервера не находится в соответствии, администратор выбирает режим настройки и политика приводит состояние сервера в соответствие.  
  
-   База данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] имеет соглашение об именах, требующее, чтобы все хранимые процедуры начинались с символов AW_. Политика создается для обеспечения этой политики. При проверке этой политики администратор получает список хранимых процедур, не соответствующих условию. Если будущие хранимые процедуры не будут соответствовать контексту именования, создание инструкций для них завершится ошибкой.  
  
> [!NOTE]  
>  Имейте в виду, что политики могут повлиять на работу некоторых функций [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Например, система отслеживания измененных данных и репликация транзакций используют таблицу systranschemas, не имеющую индекса. При включении политики, согласно которой все таблицы должны иметь индекс, принудительная реализация этого условия приведет к отказу этой функции.  
  
 Для создания и управления политиками используется среда [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]. Этот процесс состоит из следующих шагов.  
  
1.  Выбор аспекта управления на основе политик, содержащего настраиваемые свойства.  
  
2.  Указание условия, определяющего состояние аспекта управления.  
  
3.  Указание политики, содержащей условие, дополнительные условия, фильтрующие наборы целей и режим оценки.  
  
4.  Проверка соответствия экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] политике.  
  
 Для политик, выполненных с ошибкой, обозреватель объектов формирует предупреждение о критическом состоянии в виде красного значка рядом с целью и узлами, расположенными выше в дереве обозревателя объектов.  
  
> [!NOTE]  
>  Когда система вычисляет набор объектов для политики, системные объекты исключаются из него по умолчанию.  Например, если набор объектов для политики относится ко всем таблицам, политика будет неприменима к системным таблицам. Если пользователям требуется оценить политику, используя системные объекты, их можно явно добавить в набор объектов. Однако несмотря на то, что все политики поддерживаются режимом оценки **проверка по расписанию** , в режиме **проверка при внесении изменений** по соображениям производительности поддерживаются не все политики с обязательными наборами объектов. Дополнительные сведения см. в разделе.[https://blogs.msdn.com/b/sqlpbm/archive/2009/04/13/policy-evaluation-modes.aspx](https://blogs.msdn.com/b/sqlpbm/archive/2009/04/13/policy-evaluation-modes.aspx)  
  
## <a name="policy-based-management-concepts"></a>Основные понятия управления на основе политик  
 Управление на основе политик включает три следующих компонента.  
  
-   Управление политикой  
  
     Администраторы политик создают политики.  
  
-   Явное администрирование  
  
     Администраторы выбирают одну или несколько управляемых целей и выполняют явную проверку соответствия целей определенной политике или выполняют явную настройку целей для соответствия политике.  
  
-   Режимы оценки  
  
     Существует четыре режима оценки, три из которых могут быть автоматизированы.  
  
    -   **По запросу**. В этом режиме политика непосредственно указывается пользователем.  
  
    -   **При изменении: запретить**. В этом автоматизированном режиме для предотвращения нарушения политики используются триггеры DDL.  
  
        > [!IMPORTANT]  
        >  Если параметр конфигурации сервера nested triggers отключен, политика **При изменении: запретить** не будет правильно работать. Управление на основе политик с помощью триггеров DDL определяет и выполняет откат DDL-операций, не соответствующих политикам, использующим режим оценки. Удаление триггеров DDL управления на основе политик или отключение вложенных триггеров приведет к отказу этого режима оценки или к непредвиденным результатам.  
  
    -   **При изменении: только в журнале**. В этом автоматизированном режиме используется уведомление о событии для определения политики при возникновении соответствующего изменения.  
  
    -   **По расписанию**. В этом автоматизированном режиме для периодического определения политики используется задание агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
     Если автоматизированные политики не включены, то управление на основе политик не оказывает влияния на производительность системы.  
  
## <a name="policy-based-management-terms"></a>Термины управления на основе политик  
 Цель управления на основе политик  
 Сущности, управляемые на основе политик, например: экземпляр компонента [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], база данных, таблица, или индекс. Все цели на экземпляре сервера формируют иерархию целей. Набор целей — это набор целей, являющихся результатом применения набора фильтров к иерархии целей, например: все таблицы базы данных, владельцем которой является схема HumanResources.  
  
 Аспект управления на основе политик  
 Набор логических свойств, моделирующих поведение или характеристики определенных типов целей управления. Количество и характеристики свойств встраиваются в аспект и могут быть добавлены или удалены только создателем аспекта. Тип цели может реализовать один или несколько аспектов управления, а аспект управления соответственно может быть реализован одним или несколькими типами цели. Некоторые свойства аспекта могут применяться только в определенной версии.  
  
 Условие управления на основе политик  
 Логическое выражение, определяющее набор разрешенных состояний целей управления на основе политик, с точки зрения аспекта управления. 
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] пытается просмотреть параметры сортировки при вычислении условия. Если параметры сортировки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не совпадают в точности с параметрами сортировки Windows, проверяйте состояние, чтобы определить, каким образом алгоритм разрешает конфликты.  
  
 Политика управления на основе политик  
 Условие управления на основе политик и ожидаемое поведение, например режим оценки, целевые фильтры и расписание. Политика может содержать только одно условие. Политики могут быть включены или отключены. Политики хранятся в базе данных msdb.  
  
 Категория политики управления на основе политик  
 Определяемая пользователем категория для помощи в управлении политиками. Пользователи могут классифицировать политики по различным категориям. Политика принадлежит только к одной, и только одной категории политики. Категории политик применяются к базам данных и серверам. На уровне базы данных применяются следующие условия.  
  
-   Владельцы базы данных могут подписать базу данных набором категорий политики.  
  
-   Только политики из подписанных категорий могут управлять базой данных.  
  
-   Все базы данных неявно подписаны категорией политики по умолчанию.  
  
 На уровне сервера категории политик могут применяться ко всем базам данных.  
  
 Действующая политика  
 Действующими политиками цели являются те политики, которые управляют этой целью. Политика действительна по отношению к цели только при выполнении следующих условий.  
  
-   Политика включена.  
  
-   Цель принадлежит к набору целей политики.  
  
-   Цель или один из ее предков подписан к группе политики, содержащей эту политику.  
  
## <a name="policy-based-management-tasks"></a>Задачи управления на основе политик  
 Управление на основе политик — это система, основанная на политиках, для управления одним или несколькими экземплярами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Используйте управление на основе политик для создания условий, содержащих выражения условия. Затем создайте политики, применяющие условия к целевым объектам базы данных.  
  
|Описание задачи|Раздел|  
|----------------------|-----------|  
|Описывается хранение политик управления на основе политик.|Хранение политик управления на основе политик|  
|Описывается настройка предупреждений для администраторов политик о сбоях политики.|[Настройка предупреждений для уведомления администраторов политик об ошибках политик](configure-alerts-to-notify-policy-administrators-of-policy-failures.md)|  
|Описывается создание, просмотр, изменение и удаление условий управления на основе политик.|[Создание нового условия управления на основе политик](create-a-new-policy-based-management-condition.md)<br /><br /> [Удаление условия управления на основе политик](delete-a-policy-based-management-condition.md)<br /><br /> [Просмотр или изменение свойств условия управления на основе политик](view-or-modify-the-properties-of-a-policy-based-management-condition.md)|  
|Описывается создание, просмотр, изменение и удаление политики управления на основе политик.|[Создание политики управления на основе политик](create-a-policy-based-management-policy.md)<br /><br /> [Удаление политики управления на основе политик](delete-a-policy-based-management-policy.md)<br /><br /> [Просмотр или изменение свойств политики управления на основе политик](view-or-modify-the-properties-of-a-policy-based-management-policy.md)|  
|Описывается экспорт и импорт политики управления на основе политик.|[Экспорт политики управления на основе политик](export-a-policy-based-management-policy.md)<br /><br /> [Импорт политики управления на основе политик](import-a-policy-based-management-policy.md)|  
|Описывается проверка соответствия политике экземпляра сервера, базы данных, серверного объекта или объекта базы данных.|[Вычисление политики управления на основе политик на основе объекта](evaluate-a-policy-based-management-policy-from-an-object.md)<br /><br /> [Вычисление политики управления на основе политик по этой политике](evaluate-a-policy-based-management-policy-from-that-policy.md)<br /><br /> [Вычисление политики управления на основе политик по расписанию](evaluate-a-policy-based-management-policy-on-a-schedule.md)|  
|Описывается просмотр и копирование в файл состояния аспекта управления на основе политик.|[Работа с аспектами управления на основе политик](working-with-policy-based-management-facets.md)|  
|Предоставляет набор файлов политик, которые можно импортировать в качестве политик рекомендаций. Затем приводится описание, как выполнять эти политики для набора целей, включающего экземпляры, объекты экземпляров, базы данных или объекты базы данных.|[Наблюдение с помощью управления на основе политик и принудительное применение рекомендаций с помощью управления на основе политик](monitor-and-enforce-best-practices-by-using-policy-based-management.md)|  
|Содержит разделы справки F1 для узла **Управление политиками** обозревателя объектов в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].|[Узел управления политиками &#40;обозреватель объектов&#41;](../../ssms/object/object-explorer.md)|  
  
## <a name="see-also"></a>См. также:  
 [Представления управления на основе политик &#40;&#41;Transact-SQL](/sql/relational-databases/system-catalog-views/policy-based-management-views-transact-sql)  
  
  
