---
title: Занятие 2. Создание подписки на публикацию транзакций | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], tutorials
ms.assetid: 5995b7d2-7c06-46f5-b96c-2bee879bcda2
author: rothja
ms.author: jroth
manager: craigg
ms.openlocfilehash: 9dc9824efb3f962d97f786835fa2367be18b55f7
ms.sourcegitcommit: 4b5919e3ae5e252f8d6422e8e6fddac1319075a1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/09/2020
ms.locfileid: "83000418"
---
# <a name="lesson-2-creating-a-subscription-to-the-transactional-publication"></a>Занятие 2. Создание подписки на публикацию транзакций
  На этом занятии с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]будет создана подписка. Приступать к этому занятию нужно только по завершении предыдущего: [Занятие 1. Публикация данных с помощью репликации транзакций](lesson-1-publishing-data-using-transactional-replication.md).  
  
### <a name="to-create-the-subscription"></a>Создание подписки  
  
1.  Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера и папку **Репликация** .  
  
2.  В папке **Локальные публикации** щелкните правой кнопкой мыши публикацию **AdvWorksProductTrans** и выберите команду **Создать подписку**.  
  
     Откроется мастер создания подписки.  
  
3.  На странице «Публикация» выберите публикацию **AdvWorksProductTrans**и нажмите кнопку **Далее**.  
  
4.  На странице «Расположение агента распространителя» установите флажок **Выполнять все агенты на распространителе**и нажмите кнопку **Далее**.  
  
5.  Если имя экземпляра подписчика не отображается, на странице «Подписчики» нажмите кнопку **Добавить подписчик**, выберите **Добавить подписчик SQL Server**, в диалоговом окне **Соединение с сервером** введите имя экземпляра подписчика, затем нажмите кнопку **Соединить**.  
  
6.  На странице Подписчики выберите имя экземпляра сервера подписчика и выберите ** \< создать базу данных>** в разделе **база данных подписки**.  
  
7.  В диалоговом окне **Создание базы данных** в поле **Имя базы данных** введите **ProductReplica** , нажмите кнопку **ОК**, затем **Далее**.  
  
8.  В диалоговом окне **безопасность агент распространения** нажмите кнопку с многоточием (**...**), введите \< _Machine_Name>_ **\ repl_distribution** в поле **учетная запись процесса** , введите пароль для этой учетной записи, нажмите кнопку **ОК**, а затем нажмите кнопку **Далее**.  
  
9. Нажмите кнопку **Готово** , чтобы принять значения по умолчанию на оставшихся страницах и завершить работу мастера.  
  
### <a name="setting-database-permissions-at-the-subscriber"></a>Установка разрешений базы данных на подписчике  
  
1.  Подключитесь к подписчику в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], последовательно разверните узлы **Базы данных**, **ProductReplica**и **Безопасность**, щелкните правой кнопкой мыши элемент **Пользователи**и выберите пункт **Создать пользователя**.  
  
2.  На странице **Общие** в списке **Тип пользователя** выберите **Пользователь Windows**.  
  
3.  Выберите поле **имя пользователя** и нажмите кнопку с многоточием (...) в поле **введите имя объекта для выбора** введите <Machine_Name>**\ repl_distribution**, щелкните **Проверить имена**, а затем нажмите кнопку **ОК**.  
  
4.  Чтобы создать пользователя, на странице **Членство** в поле **Членство в роли базы данных** выберите **db_owner**и нажмите кнопку **ОК** .  
  
### <a name="to-view-the-synchronization-status-of-the-subscription"></a>Просмотр состояния синхронизации подписки  
  
1.  Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера и папку **Репликация** .  
  
2.  В папке **Локальные публикации** разверните публикацию **AdvWorksProductTrans** , щелкните правой кнопкой мыши подписку в базе данных **ProductReplica** и выберите пункт **Просмотр состояния синхронизации**.  
  
     Отобразится текущее состояние синхронизации подписки.  
  
3.  Если подписка не отображается под публикацией **AdvWorksProductTrans**, нажмите клавишу F5 для обновления списка.  
  
## <a name="next-steps"></a>Следующие шаги  
 Создание подписки на публикацию транзакций успешно завершено. Ввиду того, что агент распространителя для этой подписки постоянно запущен, подписка инициализируется при создании. Далее необходимо использовать трассировочные токены, чтобы проверить выполнение репликации изменений и определить задержку. См. раздел [Lesson 3: Validating the Subscription and Measuring Latency](lesson-3-validating-the-subscription-and-measuring-latency.md).  
  
## <a name="see-also"></a>См. также  
 [Инициализация подписки с помощью моментального снимка](initialize-a-subscription-with-a-snapshot.md)   
 [Создание принудительной подписки](create-a-push-subscription.md)   
 [Subscribe to Publications](subscribe-to-publications.md)  
  
  
