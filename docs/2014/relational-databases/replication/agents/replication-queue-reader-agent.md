---
title: Агент чтения очереди репликации | Документация Майкрософт
ms.custom: ''
ms.date: 10/29/2018
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- agents [SQL Server replication], Queue Reader Agent
- command prompt [SQL Server replication]
- Queue Reader Agent, parameter reference
- Queue Reader Agent, executables
ms.assetid: 8e227793-11f6-47c6-99dc-ffc282f5d4bf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d27b24d6e4b0d89dc53d66fb9955ca39892b581f
ms.sourcegitcommit: 57f1d15c67113bbadd40861b886d6929aacd3467
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/18/2020
ms.locfileid: "85068743"
---
# <a name="replication-queue-reader-agent"></a>Агент чтения очереди репликации
  Агент чтения очереди репликации — это исполняемый файл, который считывает сообщения, хранящиеся в очереди [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или очереди сообщений [!INCLUDE[msCoName](../../../includes/msconame-md.md)], а затем применяет их к издателю. Агент чтения очереди используется совместно с публикациями транзакций и публикациями моментальных снимков, которые допускают обновление посредством очередей.  
  
> [!NOTE]  
>  Параметры можно указывать в любом порядке. Если необязательные параметры не указаны, используются стандартные значения из профиля агента по умолчанию.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
  
      qrdrsvc [-?]  
[-Continuous]  
[-DefinitionFiledefinition_file]  
[-Distributorserver_name[\instance_name]]  
[-DistributionDBdistribution_database]  
[-DistributorLogindistributor_login]  
[-DistributorPassworddistributor_password]  
[-DistributorSecurityMode [0|1]]  
[-EncryptionLevel [0|1|2]]  
[-HistoryVerboseLevel [0|1|2|3]]  
[-LoginTimeOutlogin_time_out_seconds]  
[-Outputoutput_path_and_file_name]  
[-OutputVerboseLevel [0|1|2]]  
[-PollingIntervalpolling_interval]  
[-PublisherFailoverPartnerserver_name[\instance_name] ]  
[-ProfileNameagent_profile_name]  
[-QueryTimeOutquery_time_out_seconds]  
[-ResolverState [1|2|3]]  
```  
  
## <a name="arguments"></a>Аргументы  
 **-?**  
 Отображает сведения об использовании.  
  
 **-Continuous**  
 Указывает, пытается ли агент обрабатывать находящиеся в очереди транзакции последовательно. Если этот параметр указан, то агент продолжит работу даже в том случае, когда в очереди больше нет незавершенных транзакций, поступивших от какого-либо из подписчиков.  
  
 **-DefinitionFile** _путь_и_имя_файла_определения_  
 Путь к файлу определения агента. Файл определения агента содержит параметры командной строки для агента. Содержимое файла анализируется как для исполняемого файла. Для указания значений параметров, содержащих произвольные символы, используются двойные кавычки (").  
  
 **-Distributor** _имя_сервера_[ **\\** _имя_экземпляра_]  
 Имя распространителя. Укажите *server_name* , чтобы использовать экземпляр сервера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] по умолчанию. Укажите *имя_сервера*\\*имя_экземпляра* для именованного экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] по умолчанию на этом сервере. Если же этот параметр не указан, то используется имя экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] по умолчанию на локальном компьютере.  
  
 **-DistributionDB** _база_данных_распространителя_  
 База данных распространителя.  
  
 **-DistributorLogin** _имя_входа_распространителя_  
 Имя входа распространителя.  
  
 **-DistributorPassword** _пароль_распространителя_  
 Пароль распространителя.  
  
 **-DistributorSecurityMode** [ **0**| **1**]  
 Указывает режим безопасности распространителя. Значение **0** означает проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (по умолчанию), а значение **1** — проверку подлинности Windows.  
  
 **-EncryptionLevel** [ **0** | **1** | **2** ]  
 Уровень шифрования по протоколу SSL, используемый агентом чтения очереди при установлении соединений.  
  
|Значение EncryptionLevel|Описание|  
|---------------------------|-----------------|  
|**0**|Указывает, что SSL не используется.|  
|**1**|Указывает, что SSL используется, но агент не проверяет, подписан ли сертификат сервера SSL надежным издателем.|  
|**2**|Указывает, что SSL используется и сертификат подтвержден.|  

 > [!NOTE]  
 >  Допустимый SSL-сертификат задается с полным доменным именем SQL Server. Если параметр -EncryptionLevel имеет значение 2, то для подключения агента создайте псевдоним на локальном сервере SQL Server. Для параметра Alias Name (Имя псевдонима) должно быть указано имя сервера, а для параметра Server (Сервер) — полное доменное имя SQL Server.
  
 Дополнительные сведения см. в разделе [репликация SQL Server Security](../security/view-and-modify-replication-security-settings.md).  
  
 **-HistoryVerboseLevel** [ **0**| **1**| **2**| **3**]  
 Указывает объем данных, регистрируемых в журнале при работе агента чтения очереди. Выбрав значение **1**, можно свести к минимуму влияние ведения журнала на производительность.  
  
|Значение HistoryVerboseLevel|Описание|  
|-------------------------------|-----------------|  
|**0**|Ведение журнала отключено (не рекомендуется).|  
|**1**|По умолчанию. Всегда обновлять предыдущее сообщение журнала с таким же состоянием (запуск, выполнение, успех и т. д.). Если предыдущих сообщений с таким состоянием нет, то вставить новую запись.|  
|**2**|Вставлять в журнал новые записи, в том числе сообщения о простоях и долго выполняемых заданиях.|  
|**3**|Вставлять в журнал новые записи, включая подробные сведения, которые могут оказаться полезными при устранении неполадок.|  
  
 **-LoginTimeOut** _время_ожидания_входа_в_секундах_  
 Время ожидания входа в секундах. Значение по умолчанию составляет 15 секунд.  
  
 **-Output** _путь_и_имя_выходного_файла_  
 Путь к выходному файлу агента. Если имя файла не указано, данные выводятся на консоль. Если указанный файл существует, то выходные данные добавляются в конец файла.  
  
 **-OutputVerboseLevel** [ **0**| **1**| **2**]  
 Указывает, должны ли выводимые данные быть подробными. Если уровень подробностей равен **0**, выводятся только сообщения об ошибках. Если уровень подробностей равен **1**, выводятся все сообщения отчета о состоянии. Если уровень подробностей равен **2** (по умолчанию), выводятся и сообщения об ошибках, и сообщения отчета о состоянии, что удобно для отладки.  
  
 **-PollingInterval** _интервал_опроса_  
 Относится только к обновлению подписок, использующих очереди на основе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] . Указывает частоту (в секундах) опроса очереди [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на наличие незавершенных транзакций. Значение может находиться в диапазоне от 0 до 240 секунд. Значение по умолчанию — 5 секунд.  
  
 **-PublisherFailoverPartner** _имя_сервера_[ **\\** _имя_экземпляра_]  
 Указывает партнера по обеспечению отработки отказа служб [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , участвующего в сеансе зеркального отображения базы данных с базой данных публикации. Дополнительные сведения см. в статье [Зеркальное отображение и репликация баз данных (SQL Server)](../../../database-engine/database-mirroring/database-mirroring-and-replication-sql-server.md).  
  
 **-ProfileName** _имя_профиля_агента_  
 Имя профиля агента, используемого для предоставления агенту набора значений по умолчанию. Дополнительные сведения см. в статье [Профили агента репликации](replication-agent-profiles.md).  
  
 **-QueryTimeOut** _время_ожидания_запроса_в_секундах_  
 Время ожидания запроса в секундах. Значение по умолчанию — 1800 секунд.  
  
 **-ResolverState** [ **1**| **2**| **3**]  
 Определяет, каким образом разрешаются конфликты обновления посредством очередей. Значение **1** указывает, что конфликт разрешается в пользу издателя, то есть на издателе и на подписчике будет произведен откат участвующей в конфликте текущей транзакции из очереди, а обработка последующих транзакций из очереди будет продолжена. Значение **2** указывает, что конфликт разрешается в пользу подписчика, то есть транзакция, находящаяся в очереди, переопределяет значения на издателе. Значение **3** указывает, что результатом любого конфликта будет повторная инициализация подписчика, то есть конфликт разрешается в пользу издателя и обработка последующих транзакций из очереди будет прекращена с повторной инициализации подписки. Для публикаций транзакций значение по умолчанию равно **1** , а для публикаций моментальных снимков — **3** .  
  
## <a name="remarks"></a>Remarks  
 Для запуска агента чтения очереди выполните из командной строки файл **qrdrsvc.exe** . Дополнительные сведения см. в разделе [Исполняемые объекты агента репликации](../concepts/replication-agent-executables-concepts.md).  
  
## <a name="see-also"></a>См. также:  
 [Администрирование агента репликации](replication-agent-administration.md)  
  
  
