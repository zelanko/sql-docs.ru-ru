---
title: Восстановление базы данных (страница "Общие") | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dbe-backup-restore
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- sql12.swb.restoredb.general.f1
ms.assetid: 160cf58c-b06a-475f-9a69-2b051e5767ab
caps.latest.revision: 85
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.openlocfilehash: f310d762ca8a8d116b3accc618532b772eef8c26
ms.sourcegitcommit: 5dd5cad0c1bbd308471d6c885f516948ad67dfcf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2018
ms.locfileid: "36191480"
---
# <a name="restore-database-general-page"></a>Восстановление базы данных (страница «Общие»)
  Страница **Общие** позволяет задать данные об исходной и целевой базах данных для операции восстановления базы данных.  
  
 **Восстановление резервной копии базы данных с помощью среды SQL Server Management Studio**  
  
-   [Восстановление резервной копии базы данных &#40;SQL Server Management Studio&#41;](restore-a-database-backup-using-ssms.md)  
  
-   [Определение логического устройства резервного копирования для ленточного накопителя (SQL Server)](define-a-logical-backup-device-for-a-tape-drive-sql-server.md)  
  
> [!NOTE]  
>  При указании задачи восстановления с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], можно создать соответствующий [!INCLUDE[tsql](../../includes/tsql-md.md)] [ВОССТАНОВИТЬ](/sql/t-sql/statements/restore-statements-transact-sql) , щелкнув **сценария** и выбрав место назначения для скрипта.  
  
## <a name="permissions"></a>Разрешения  
 Если восстанавливаемая база данных не существуют, для выполнения инструкции RESTORE у пользователя должны быть разрешения CREATE DATABASE. Если база данных существует, разрешения на выполнение инструкции RESTORE по умолчанию предоставлены членам предопределенных ролей сервера **sysadmin** и **dbcreator** , а также владельцу базы данных (**dbo**).  
  
 Разрешения на выполнение инструкции RESTORE даются ролям, в которых данные о членстве всегда доступны серверу. Так как членство в предопределенной роли базы данных может быть проверено только тогда, когда база данных доступна и не повреждена, что не всегда имеет место при выполнении инструкции RESTORE, члены предопределенной роли базы данных **db_owner** не имеют разрешений RESTORE.  
  
 Восстановление из зашифрованной копии требует `VIEW DEFINITION` разрешений на сертификат или асимметричный ключ, используемый для шифрования резервной копии.  
  
## <a name="options"></a>Параметры  
  
### <a name="source"></a>Source  
 Параметры панели **Восстановить из**определяют, где расположены наборы архивации для базы данных и какие наборы архивации требуется восстановить.  
  
|Термин|Определение|  
|----------|----------------|  
|**База данных**|Выберите из раскрывающегося списка базу данных для восстановления. Данный список содержит только базы данных, резервное копирование которых было выполнено в соответствии с журналом резервного копирования **msdb** .|  
|**Устройство**|Выберите логические или физические устройства резервного копирования (ленты, URL-адрес или файлы), которые содержат резервные копии, необходимые для восстановления. Это необходимо, если при создании резервной копии базы данных использовался другой экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].<br /><br /> Чтобы выбрать одно или несколько логических или физических устройств резервного копирования, нажмите кнопку обзора, которая открывает диалоговое окно **Выбор устройства резервного копирования** . В этом диалоговом окне можно выбрать до 64 устройств, принадлежащих к одному набору носителей. Ленточные устройства должны быть физически подключены к компьютеру, на котором работает экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Файл резервной копии может находиться на локальном или удаленном дисковом устройстве. Дополнительные сведения см. в разделе [Устройства резервного копирования (SQL Server)](backup-devices-sql-server.md). Кроме того, можно выбрать **URL-адрес** в качестве типа устройства для файлов резервных копий, размещаемых в хранилище Windows Azure.<br /><br /> После выхода из диалогового окна **Выбор устройства резервного копирования** выбранное устройство появляется в виде значения, доступного только для чтения, в списке **Устройство** .|  
|**База данных**|Выберите из раскрывающегося списка имя базы данных, из которой нужно восстановить резервные копии.<br /><br /> Примечание. Этот список доступен, только если выбран элемент **Устройство** . Будут выбраны только те базы данных, резервные копии которых доступны на выбранных устройствах.|  
  
### <a name="destination"></a>Назначение  
 Параметры панели **Восстановить в** определяют базу данных и точку восстановления.  
  
|Термин|Определение|  
|----------|----------------|  
|**База данных**|Введите в список базу данных, предназначенную для восстановления. Можно ввести новую базу данных или выбрать уже существующую из раскрывающегося списка. Список включает все базы данных на сервере кроме системных баз данных **master** и **tempdb**.<br /><br /> Примечание. Для восстановления резервной копии, защищенной паролем, необходимо использовать инструкцию [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) .|  
|**Восстановить в**|В поле **Восстановить до** по умолчанию задан параметр «До последней созданной резервной копии». Можно также щелкнуть **Временную шкалу** , чтобы вывести диалоговое окно **Временная шкала резервного копирования** , содержащее журнал резервного копирования баз данных в виде временной шкалы. Нажмите кнопку **временная шкала** Чтобы задать определенную `datetime` для которого требуется восстановить базу данных. База данных будет восстановлена до состояния, в котором она находилась в указанный момент времени. См. раздел [Backup Timeline](backup-timeline.md).|  
  
### <a name="restore-plan"></a>План восстановления  
  
|Термин|Определение|  
|----------|----------------|  
|**Резервные наборы данных, которые необходимо восстановить**|Отображает резервный набор данных, доступный для указанного места. Каждый резервный набор данных (результат одной операции резервного копирования) распределяется по всем устройствам в наборе носителей. По умолчанию предполагается наличие плана восстановления, направленного на достижение целей операции восстановления и основанного на выборе необходимых резервных наборов данных. [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] использует журнал резервного копирования в базе данных **msdb** , чтобы определить резервные наборы данных, необходимые для восстановления базы данных, и создает план восстановления. Например, для восстановления базы данных план восстановления выбирает самую последнюю полную резервную копию базы данных и самую последнюю разностную резервную копию базы данных при ее наличии. Согласно модели полного восстановления план восстановления выбирает затем все последующие резервные копии журналов транзакций.<br /><br /> Чтобы переопределить предложенный план восстановления, можно изменить следующие параметры в сетке. Если выбор каких-то резервных копий отменяется, то автоматически отменяется и выбор зависящих от них резервных копий.<br /><br /> **Восстановление**:<br />                          Установленные флажки обозначают резервные наборы данных, отмеченные для восстановления.<br />**Имя**: имя резервного набора данных.<br />**Компонент**: компонент резервных копий: **базы данных**, **файл**, или  **\<пустой >** (для журналов транзакций).<br />**Тип**. Тип созданной резервной копии: **Полная**, **Разностная**или **Журнал транзакций**.<br />**Сервер**. Имя экземпляра компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] , выполнившего операцию архивации.<br />**База данных**: имя базы данных, участвовавшей в операции резервного копирования.<br />**Положение**. Расположение набора архивации в томе.<br />**Первый номер LSN**: порядковый номер журнала первой транзакции в резервном наборе данных. Пустой для резервных копий файлов.<br />**Последний номер LSN**: порядковый номер журнала последней транзакции в резервном наборе данных. Пустой для резервных копий файлов.<br />**Номер LSN контрольной точки**: порядковый номер журнала (LSN) для последней контрольной точки на момент создания резервной копии.<br />**Полный номер LSN**: порядковый номер последней полной резервной копии журнала.<br />**Дата начала**: Дата и время начала операции резервного копирования, указанные в региональных настройках клиента.<br />**Дата завершения**: Дата и время окончания операции резервного копирования, указанные в региональных настройках клиента.<br />**Размер**: размер резервного набора данных в байтах.<br />**Имя пользователя**: имя пользователя, выполнившего операцию резервного копирования.<br /><br /> **Истечение срока действия**: Дата и время истечения срока действия резервного набора.<br /><br /> Установка этих флажков возможна, только если задан параметр **Выбор вручную** . Позволяет выбрать, какие наборы резервного копирования необходимо восстановить.<br /><br /> Если задан параметр **Выбор вручную** , точность плана восстановления проверяется каждый раз при его изменении. Если последовательность резервных копий является неверной, появится сообщение об ошибке.|  
|**Проверить носитель резервной копии**|Инструкция RESTORE VERIFY_ONLY вызывается для выбранных наборов резервного копирования.<br /><br /> Примечание. Это длительная операция, и ее выполнение или отмену можно выполнить с помощью монитора хода выполнения на платформе диалоговых окон.<br /><br /> Эта кнопка позволяет проверить целостность файлов резервной копии до их восстановления.<br /><br /> При проверке целостности резервных наборов данных в статусе выполнения в нижнем левом углу диалогового окна будет указано «Проверка», а не «Выполнение».|  
  
## <a name="compatibility-support"></a>Поддержка совместимости  
 В [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]можно восстановить пользовательскую базу данных из резервной копии базы данных, созданной с помощью [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] или более поздней версии. Однако восстановление резервных копий баз данных **master**, **model** и **msdb** , созданных в [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] через [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] , в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]невозможно. Кроме того, резервные копии, созданные в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , невозможно восстановить в более ранних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] используется путь по умолчанию, отличный от пути, использованного в предыдущих версиях. Поэтому, чтобы восстановить из резервной копии базу данных, созданную в расположении по умолчанию для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]предыдущих версий, необходимо использовать параметр MOVE.  
  
 Если восстановить базу данных предыдущей версии до [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], то эта база данных автоматически обновится. Как правило, база данных сразу становится доступной. Однако если база данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] содержит полнотекстовые индексы, то в процессе обновления будет произведен их импорт, сброс или перестроение, в зависимости от установленного значения свойства сервера **Режим обновления полнотекстового каталога** . Если при обновлении выбран режим **Импортировать** или **Перестроить**, то полнотекстовые индексы во время обновления будут недоступны. В зависимости от объема индексируемых данных процесс импорта может занять несколько часов, а перестроение — в несколько (до десяти) раз больше. Обратите внимание, что если при обновлении выбран режим **Импортировать**, а полнотекстовый каталог недоступен, то связанные с ним полнотекстовые индексы будут перестроены.  
  
## <a name="restoring-from-an-encrypted-backup"></a>Восстановление из зашифрованной резервной копии  
 Для восстановления требуется, чтобы сертификат или асимметричный ключ, который использовался при создании резервной копии, был доступен на экземпляре, куда выполняется восстановление. Учетная запись, выполняющая восстановление должна иметь `VIEW DEFINITIONS` на сертификат или асимметричный ключ. Сертификаты, используемые для шифрования резервных копий, не должны обновляться.  
  
## <a name="restoring-from-windows-azure-storage"></a>Восстановление из хранилища Windows Azure  
 При восстановлении резервной копии, хранящейся в хранилище Windows Azure, в пользовательском интерфейсе восстановления появляется новый параметр устройства резервного копирования. **URL-адрес** в диалоговом окне **Выбор устройства резервного копирования** . После нажатия кнопки **Добавить**откроется диалоговое окно **Подключение к Windows Azure** , позволяющее указать учетные данные SQL для проверки подлинности в учетной записи хранения.  При подключении к учетной записи хранения файлы резервной копии будут отображены в диалоговом окне **Локальный файл резервной копии в Windows Azure** , в котором можно выбрать файл, применяемый для восстановления.  
  
## <a name="see-also"></a>См. также  
 [Устройства резервного копирования (SQL Server)](backup-devices-sql-server.md)   
 [Восстановление резервной копии с устройства (SQL Server)](restore-a-backup-from-a-device-sql-server.md)   
 [Восстановление базы данных до помеченной транзакции (среда SQL Server Management Studio)](restore-a-database-to-a-marked-transaction-sql-server-management-studio.md)   
 [Восстановление резервной копии журнала транзакций (SQL Server)](restore-a-transaction-log-backup-sql-server.md)   
 [Просмотр содержимого ленты или файла резервной копии (SQL Server)](view-the-contents-of-a-backup-tape-or-file-sql-server.md)   
 [Просмотр свойств и содержимого логического устройства резервного копирования (SQL Server)](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)   
 [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](media-sets-media-families-and-backup-sets-sql-server.md)   
 [Аргументы инструкции RESTORE (Transact-SQL)](/sql/t-sql/statements/restore-statements-arguments-transact-sql)   
 [Применение резервных копий журналов транзакций (SQL Server)](transaction-log-backups-sql-server.md)  
  
  
