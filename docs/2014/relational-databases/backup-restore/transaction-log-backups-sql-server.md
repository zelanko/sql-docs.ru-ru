---
title: Резервные копии журнала транзакций (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- backing up [SQL Server], transaction logs
- transaction log backups [SQL Server], creating
- log backups [SQL Server[
- transaction log backups [SQL Server], sequencing
ms.assetid: f4a44a35-0f44-4a42-91d5-d73ac658a3b0
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 752447d6c38a2df0fcbdce72fbba12edd7a9eeb3
ms.sourcegitcommit: f71e523da72019de81a8bd5a0394a62f7f76ea20
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2020
ms.locfileid: "84956166"
---
# <a name="transaction-log-backups-sql-server"></a>Резервные копии журналов транзакций (SQL Server)
  Этот раздел относится только к тем базам данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которые используют модель полного восстановления или модель восстановления с неполным протоколированием. В этом разделе рассматривается создание резервной копии журнала транзакций базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
 Перед созданием любой резервной копии журнала необходимо создать как минимум одну полную резервную копию. После этого резервное копирование журнала транзакций может выполняться в любое время, кроме времени другого резервного копирования журнала. Рекомендуется периодически производить резервное копирование журнала для снижения вероятности потери результатов работы и для усечения журнала. Обычно администратор базы данных время от времени создает полную резервную копию базы данных (например, еженедельно) и дополнительно создает разностные резервные копии через более короткие интервалы, например ежедневно. Независимо от резервного копирования базы данных администратор создает резервные копии журнала транзакций через еще более короткие интервалы, например каждые 10 минут. При таком подходе к резервному копированию оптимальный интервал между моментами выполнения резервного копирования зависит от множества факторов: важности данных, размера базы данных и рабочей нагрузки сервера.  
  
 **В этом разделе.**  
  
-   [Как работает последовательность резервных копий журналов](#LogBackupSequence)  
  
-   [Рекомендации](#Recommendations)  
  
-   [Связанные задачи](#RelatedTasks)  
  
-   [См. также](#RelatedContent)  
  
##  <a name="how-a-sequence-of-log-backups-works"></a><a name="LogBackupSequence"></a>Как работает последовательность резервных копий журналов  
 Последовательность резервных копий *цепочки журналов* транзакций не зависит от резервных копий данных. Например, предположим, что имеется следующая последовательность событий:  
  
|Time|Событие|  
|----------|-----------|  
|8:00|Резервное копирование базы данных.|  
|Полдень|Резервное копирование журнала транзакций.|  
|16:00|Резервное копирование журнала транзакций.|  
|18:00|Резервное копирование базы данных.|  
|20:00|Резервное копирование журнала транзакций.|  
  
 Резервная копия журнала транзакций создана в 20:00, содержит записи журнала транзакций начиная с 16:00 до 20:00, включая время создания полной резервной копии базы данных в 18:00. Последовательность резервных копий журнала транзакций непрерывна, начиная с первого полного резервного копирования базы данных в 8:00 и до последнего резервного копирования журнала в 20:00. Сведения о применении этих резервных копий журналов приводятся в примере в статье [Применение резервных копий журналов транзакций (SQL Server)](transaction-log-backups-sql-server.md).  
  
##  <a name="recommendations"></a><a name="Recommendations"></a> Рекомендации  
  
-   Если журнал транзакций поврежден, будут потеряны все результаты работы, начиная с момента самого последнего действительного резервного копирования. Поэтому настоятельно рекомендуется помещать файлы журнала в отказоустойчивое хранилище.  
  
-   Если база данных повреждена или требуется восстановить базу данных, рекомендуется создать [резервную копию заключительного фрагмента журнала](tail-log-backups-sql-server.md) , чтобы можно было восстановить базу данных до текущего момента.  
  
-   По умолчанию каждая успешная операция резервного копирования добавляет запись в журнал ошибок служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и в журнал системных событий. Если создание резервной копии журналов производится очень часто, это приводит к быстрому накоплению сообщений об успешном завершении. Это приводит к увеличению журналов ошибок, затрудняя поиск других сообщений. Если работа существующих скриптов не зависит от этих записей, то их можно отключить с помощью флага трассировки 3226. Дополнительные сведения см. в разделе [Флаги трассировки (Transact-SQL)](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql).  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> Связанные задачи  
 **Создание резервной копии журнала транзакций**  
  
-   [Создание резервной копии журнала транзакций (SQL Server)](back-up-a-transaction-log-sql-server.md)  
  
-   <xref:Microsoft.SqlServer.Management.Smo.Backup.SqlBackup%2A> (SMO)  
  
 Описание планирования заданий резервного копирования см. в разделе [Use the Maintenance Plan Wizard](../maintenance-plans/use-the-maintenance-plan-wizard.md).  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> См. также  
 Нет.  
  
## <a name="see-also"></a>См. также:  
 [Журнал транзакций (SQL Server)](../logs/the-transaction-log-sql-server.md)   
 [Резервное копирование и восстановление баз данных SQL Server](back-up-and-restore-of-sql-server-databases.md)   
 [Резервные копии заключительного фрагмента журнала (SQL Server)](tail-log-backups-sql-server.md)   
 [Применение резервных копий журналов транзакций (SQL Server)](transaction-log-backups-sql-server.md)  
  
  
