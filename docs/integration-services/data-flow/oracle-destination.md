---
title: Назначение Oracle | Документация Майкрософт
ms.custom: ''
ms.date: 08/14/2019
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f09d0cc0ad4a8d6ee1230bd846375b5b340cd4fe
ms.sourcegitcommit: c8e1553ff3fdf295e8dc6ce30d1c454d6fde8088
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/22/2020
ms.locfileid: "86913780"
---
# <a name="oracle-destination"></a>Назначение Oracle

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]

Назначение Oracle позволяет выполнять массовые загрузки данных в Oracle Database.

Для подключения к источнику данных это назначение использует диспетчер подключений Oracle. Дополнительные сведения см. в статье о [диспетчере подключений Oracle](oracle-connection-manager.md).

Назначение Oracle содержит сопоставления между входными столбцами и столбцами в источнике данных назначения. Нет необходимости сопоставлять входные столбцы всем целевым столбцам, но в зависимости от свойств целевых столбцов могут произойти ошибки, если входные столбцы не сопоставлены целевым столбцам. Например, если целевой столбец не допускает значений NULL, входной столбец должен быть ему сопоставлен. Кроме того, если входные данные несовместимы по типу с данными в целевом столбце, в среде выполнения возникает ошибка. В зависимости от настроек поведения в случае ошибки, ошибка может быть пропущена, может произойти сбой или может быть перенаправлена строка в окно вывода ошибок.

Назначение Oracle имеет один обычный вход и один вывод ошибок.

Столбцы неподдерживаемых типов данных удаляются с предупреждением перед сопоставлением.
Дополнительные сведения см. в разделе [Поддержка типов данных](oracle-data-type-support.md).

## <a name="load-options"></a>Параметры загрузки

Поддерживаются два режима загрузки (доступа). Режим можно задать в [редакторе назначения Oracle (страница "Диспетчер подключений")](#oracle-destination-editor-connection-manager-page). Доступны два режима.

- Пакетная загрузка. В этом режиме данные загружаются в таблицу Oracle в виде пакетов, где весь пакет вставляется в рамках одной транзакции.
Сведения о настройке этого режима см. в разделе [Редактор назначения Oracle (страница "Диспетчер подключений")](#oracle-destination-editor-connection-manager-page) и [Пользовательские свойства назначения Oracle](#oracle-destination-custom-properties).

- Быстрая загрузка с использованием операций прямой загрузки. В этом режиме загрузка таблицы Oracle осуществляется с использованием режима драйвера для прямой загрузки. Инструкции по использованию этого режима см. в документации по Oracle.  
Сведения о настройке этого режима см. в разделе [Редактор назначения Oracle (страница "Диспетчер подключений")](#oracle-destination-editor-connection-manager-page) и [Пользовательские свойства назначения Oracle](#oracle-destination-custom-properties).

## <a name="error-handling"></a>Обработка ошибок

Назначение Oracle предусматривает вывод ошибок. Вывод ошибок компонента включает следующие выходные столбцы.

- **Код ошибки.** Номер, обозначающий тип текущей ошибки. Код ошибки может быть получен из таких источников:
    - Сервер Oracle. Подробное описание ошибки см. в документации по базе данных Oracle.
    - Среда выполнения Integration Services. Список кодов ошибок служб SSIS см. в «Справочнике по кодам ошибок и сообщениям служб SIS».
- **Столбец с ошибкой.** Номер исходного столбца, который вызывает ошибки преобразования.

- **Столбцы данных с ошибкой.** Данные, которые вызывают ошибку.

Поддерживаются такие типы ошибок вывода при загрузке: преобразование данных, усечение, нарушение ограничения и т. д. Сведения см. в разделе о [редакторе назначения Oracle (страница "Вывод ошибок")](#oracle-destination-editor-error-output-page).

Свойство **Максимальное количество ошибок (MaxErrors)** позволяет задать максимальное число ошибок, которые могут возникнуть. Если достигается это максимальное количество, выполнение останавливается и возвращаются ошибки. При этом в целевую таблицу будут добавлены только записи о выполнении до достижения этого предельного количества. Дополнительные сведения о настройке см. в разделе [Редактор назначения Oracle (страница "Диспетчер подключений")](#oracle-destination-editor-connection-manager-page).

## <a name="parallelism"></a>Parallelism

В режиме пакетной загрузки нет ограничений для настройки параллельного выполнения, но стандартный механизм блокировки записей может повлиять на производительность. Процент снижения производительности зависит от структуры таблицы и данных.

В режиме с использованием протокола прямой загрузки (быстрая загрузка) можно настроить одно назначение Oracle для передачи данных одновременно в одну таблицу. Но можно использовать параллельный режим.

При параллельной прямой загрузке допускается несколько загрузок. Это позволяет настроить несколько назначений Oracle для передачи данных одновременно в одну и ту же таблицу. Oracle не блокирует целевую таблицу только для использования в сеансе быстрой загрузки, позволяя запускать дополнительные компоненты назначения быстрой загрузки для параллельной загрузки одной и той же целевой таблицы.
Параллельная прямая загрузка связана с определенными ограничениями: любое использование параллелизма нужно планировать заранее.

Нет оснований использовать один параллельный сеанс.

Сведения об ограничениях при использовании параллельных прямых загрузок см. в соответствующей документации по Oracle.

Дополнительные сведения см. в разделе [Пользовательские свойства назначения Oracle](#oracle-destination-custom-properties).

## <a name="troubleshooting-the-oracle-destination"></a>Устранение неполадок с назначением Oracle

Устранять неполадки с экспортом данных можно с помощью журнала вызовов ODBC, которые источник Oracle отправляет к источникам данных Oracle. Для ведения журнала вызовов ODBC к источникам данных Oracle, выполняемых источником Oracle, включите трассировку диспетчера драйверов ODBC. Дополнительные сведения см. в документации Майкрософт по теме *Как формировать трассировку ODBC с помощью администратора источника данных ODBC*.

## <a name="oracle-destination-custom-properties"></a>Пользовательские свойства назначения Oracle

В следующей таблице описаны пользовательские свойства назначения Oracle. Все свойства доступны для чтения и записи.

|Имя свойства|Тип данных|Описание|Режим загрузки|
|:-|:-|:-|:-|
|BatchSize|Целое число|Размер пакета для массовой загрузки. Это количество строк, загружаемых в виде одного пакета.|Используется только в пакетном режиме.|
|DefaultCodePage|Целое число|Кодовая страница, которая используется, если для источника данных нет сведений о кодовой странице. <br>**Примечание.** Это свойство задает только **Расширенный редактор**.|Используется в обоих режимах.|
|FastLoad|Логическое|Указывает, используется ли быстрая загрузка. Значение по умолчанию — **false**. Это свойство можно также задать в [редакторе назначения Oracle (страница "Диспетчер подключений")](#oracle-destination-editor-connection-manager-page). |Используется в обоих режимах.|
|MaxErrors|Целое число|Максимальное число ошибок, после превышения которого останавливается поток данных. По умолчанию задано значение **0**, что означает отсутствие ограничения на число ошибок.<br> Используется, если на странице **Обработка ошибок** выбрано **Перенаправить поток**. До достижения предельного числа ошибок в вывод ошибок возвращаются все ошибки. Дополнительные сведения см. в разделе [Обработка ошибок](#error-handling).|Используется только в режиме быстрой загрузки.|
|NoLogging|Логическое|Указывает, отключено ли ведение журнала базы данных. По умолчанию задано значение **False**. Это означает, что ведение журнала включено.|Используется в обоих режимах.|
|Parallel|Логическое|Указывает, разрешена ли параллельная загрузка. Значение **True** указывает, что другие сеансы загрузки могут выполняться для одной и той же целевой таблицы.<br> Дополнительные сведения см. в разделе [Параллелизм](#parallelism).|Используется только в режиме быстрой загрузки.|
|TableName|Строка|Имя таблицы с используемыми данными.|Используется в обоих режимах.|
|TableSubName|Строка|Уточняющее имя подраздела. Это значение является необязательным.<br> **Примечание.** Это свойство можно задать только в **Расширенном редакторе**.|Используется только в режиме быстрой загрузки.|
|TransactionSize|Целое число|Число операций вставки, которые можно выполнить в рамках одной транзакции. Значение по умолчанию **BatchSize**.|Используется только в пакетном режиме.|
|TransferBufferSize|Целое число|Размер буфера передачи. Значение по умолчанию — 64 КБ.|Используется только в режиме быстрой загрузки.|

## <a name="configuring-the-oracle-destination"></a>Настройка назначения Oracle

Назначение Oracle можно настраивать программными средствами или с помощью конструктора служб SSIS

На рисунке ниже показан редактор назначения Oracle. Он содержит такие страницы: "Диспетчер подключений", "Сопоставления" и "Вывод ошибок".

Дополнительные сведения см. в одном из следующих разделов:

- [Редактор назначения Oracle (страница "Диспетчер подключений")](#oracle-destination-editor-connection-manager-page)
- [Редактор назначения Oracle (страница "Сопоставления")](#oracle-destination-editor-mappings-page)
- [Редактор назначения Oracle (страница "Вывод ошибок")](#oracle-destination-editor-error-output-page)

![Назначение Oracle](media/oracle-destination.png)

Диалоговое окно **Расширенный редактор** содержит свойства, которые могут быть заданы программным путем.
Открытие диалогового окна **Расширенный редактор** .

- На экране **Поток данных** конкретного проекта Integration Services щелкните правой кнопкой мыши назначение Oracle и выберите пункт **Показать расширенный редактор**.

Дополнительные сведения о свойствах, которые вы можете задать в диалоговом окне "Расширенный редактор", см. в разделе [Пользовательские свойства назначения Oracle](#oracle-destination-custom-properties).

## <a name="oracle-destination-editor-connection-manager-page"></a>Редактор назначения Oracle (страница "Диспетчер подключений")

Страница **Диспетчер подключений** диалогового окна **Редактор назначения Oracle** используется для выбора диспетчера подключений Oracle для назначения. На этой странице также можно выбрать таблицу или представление базы данных.

**Открытие страницы диспетчера подключений в редакторе назначения Oracle**

- В SQL Server Data Tools откройте пакет SQL Server Integration Services (SSIS) с назначением Oracle.

- На вкладке "Поток данных" дважды щелкните назначение Oracle.

- В окне "Редактор назначения Oracle" щелкните "Диспетчер подключений".

### <a name="options"></a>Параметры

**Connection manager**

Выберите в списке существующий диспетчер подключений или нажмите кнопку **Создать**, чтобы создать диспетчер подключений Oracle.

**Создать**

Нажмите кнопку **Создать**. Откроется диалоговое окно **Редактор диспетчера подключений Oracle**, где можно создать диспетчер подключений.

**Режим доступа к данным**

Выберите метод выбора данных из источника. Доступные параметры показаны в следующей таблице.

|Параметр|Описание|
|:-|:-|
|Имя таблицы|Настройте назначение Oracle для работы в пакетном режиме. Параметры:<br><br> **Имя таблицы или представления.** Выберите доступную таблицу или представление базы данных из списка.<br><br> **Размер транзакций.** Укажите число операций вставки, которые можно выполнить в рамках одной транзакции. Значение по умолчанию **BatchSize**.<br><br> **Размер пакета.** Укажите размер пакета (число загружаемых строк) для массовой загрузки.
|Имя таблицы — быстрая загрузка|Настройте назначение Oracle для работы в режиме быстрой загрузки (прямой загрузки). <br><br>Доступные параметры:<br><br> **Имя таблицы или представления.** Выберите доступную таблицу или представление базы данных из списка.<br><br> **Параллельная загрузка.** Указывает, включена ли параллельная загрузка. Дополнительные сведения см. в разделе [Параллелизм](#parallelism).<br><br> **Без ведения журнала.** Этот флажок позволяет отключить ведение журнала базы данных. Этот журнал используется для восстановления базы данных Oracle (он не связан с трассировкой).<br><br> **Максимальное число ошибок.** Максимальное число ошибок, после достижения которого поток данных останавливается. Значение по умолчанию равно 0, что означает отсутствие ограничения.<br><br> Все возникающие ошибки будут возвращаться в окне вывода ошибок.<br><br> **Размер буфера передачи (КБ).** Введите размер буфера передачи. Размер по умолчанию — 64 КБ.|

**Просмотр существующих данных**

Нажмите кнопку **Просмотр существующих данных**, чтобы просмотреть первые строки (до 200) данных для выбранной таблицы.

## <a name="oracle-destination-editor-mappings-page"></a>Редактор назначения Oracle (страница "Сопоставления")

Страница **Сопоставления** диалогового окна **Редактор назначения Oracle** используется для сопоставления входных столбцов с целевыми.

**Открытие страницы "Сопоставления" в редакторе назначения Oracle**

- В SQL Server Data Tools откройте пакет SQL Server Integration Services (SSIS) с назначением Oracle.

- На вкладке "Поток данных" дважды щелкните назначение Oracle.

- В редакторе назначения Oracle щелкните "Сопоставления".

### <a name="options"></a>Параметры

**Доступные входные столбцы**

Список доступных входных столбцов. Перетащите входной столбец в доступный целевой столбец, чтобы сопоставить эти столбцы.

**Доступные целевые столбцы**

Список доступных целевых столбцов. Перетащите целевой столбец в доступный входной столбец, чтобы сопоставить эти столбцы.

**Входной столбец**

Позволяет просматривать выбранные входные столбцы. Сопоставления можно удалить, выбрав вариант **<игнорировать>** , чтобы исключить столбцы из выходных данных.

**Целевой столбец**

Просмотрите все доступные целевые столбцы, сопоставленные и несопоставленные.

> [!NOTE]
>
>Столбцы неподдерживаемых типов данных будут удалены из сопоставления с предупреждением.

## <a name="oracle-destination-editor-error-output-page"></a>Редактор назначения Oracle (страница "Вывод ошибок")

Страница "Вывод ошибок" диалогового окна "Редактор назначения Oracle" используется для выбора параметров обработки ошибок.

**Открытие страницы "Вывод ошибок" в редакторе назначения Oracle**

- В SQL Server Data Tools откройте пакет SQL Server Integration Services (SSIS) с назначением Oracle.

- На вкладке "Поток данных" дважды щелкните назначение Oracle.

- В окне "Редактор назначения Oracle" щелкните "Вывод ошибок".

### <a name="options"></a>Параметры

**Действия при ошибке**

Выберите способ обработки ошибок в потоке источником Oracle: пропустить ошибку, перенаправить строку или вызвать сбой компонента.
**Дополнительные сведения см. в статье** [Обработка ошибок в данных](https://docs.microsoft.com/sql/integration-services/data-flow/error-handling-in-data?view=sql-server-2017)

**Усечение**

Выберите порядок обработки усечений в потоке источником Oracle: пропустить ошибку, перенаправить строку или вызвать сбой компонента.

## <a name="next-steps"></a>Дальнейшие действия

- Настройка [диспетчера подключений Oracle](oracle-connection-manager.md).
- Настройка [источника Oracle](oracle-source.md).
- Настройка [назначения Oracle](oracle-destination.md).
- Если у вас возникнут вопросы, посетите страницу [технического сообщества](https://aka.ms/AA5u35j).
