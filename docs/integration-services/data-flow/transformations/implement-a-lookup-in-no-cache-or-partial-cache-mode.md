---
title: "Реализация уточняющего запроса в режиме \"Частичное кэширование\" или \"Без кэширования\" | Документы Майкрософт"
ms.custom: 
ms.date: 03/01/2017
ms.prod: sql-non-specified
ms.prod_service: integration-services
ms.service: 
ms.component: data-flow
ms.reviewer: 
ms.suite: sql
ms.technology: integration-services
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Lookup transformation
- match exactly [Integration Services]
- lookups [Integration Services]
- exact matches [Integration Services]
ms.assetid: 01b7fbca-5181-4d47-9f75-7f25af6b40d2
caps.latest.revision: "67"
author: douglaslMS
ms.author: douglasl
manager: jhubbard
ms.workload: Inactive
ms.openlocfilehash: b157a1022c9cc379369e01a9e6e0b3a30e985af1
ms.sourcegitcommit: 7f8aebc72e7d0c8cff3990865c9f1316996a67d5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2017
---
# <a name="implement-a-lookup-in-no-cache-or-partial-cache-mode"></a>Реализация уточняющего запроса в режиме «Частичное кэширование» или «Без кэширования»
  Можно настроить преобразование «Уточняющий запрос», чтобы использовать частичный кэш или не использовать режим кэша.  
  
-   Частичное кэширование  
  
     Строки с совпадающими записями в эталонном наборе данных и при необходимости строки без совпадающих записей в наборе данных хранятся в кэше. Когда превышается объем памяти кэша, преобразование «Уточняющий запрос» автоматически удаляет из кэша строки, которые используются реже всего.  
  
-   Без кэширования  
  
     Данные в кэш не загружаются.  
  
 Независимо от того, используется ли частичное кэширование или кэш не используется, чтобы подключиться к эталонному набору данных, используется диспетчер соединений OLE DB. Создание эталонного набора данных производится по таблице, представлению или SQL-запросу во время выполнения преобразования «Уточняющий запрос».  
  
### <a name="to-implement-a-lookup-transformation-in-no-cache-or-partial-cache-mode"></a>Реализация преобразования «Уточняющий запрос» в режиме частичного кэширования или режиме без кэширования  
  
1.  В среде [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)]откройте проект [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] , содержащий необходимый пакет, и затем откройте пакет.  
  
2.  На вкладке **Поток данных** добавьте преобразование «Уточняющий запрос».  
  
3.  Подключите преобразование «Уточняющий запрос» к потоку данных, перетащив соединитель из источника или предыдущего преобразования в преобразование «Уточняющий запрос».  
  
    > [!NOTE]  
    >  Преобразование «Уточняющий запрос», настроенное для работы без кэша, может не пройти проверку, если оно соединено с неструктурированным файлом, в котором содержится пустое поле данных. Успешность проверки преобразования зависит от того, включено ли в диспетчере соединений для неструктурированного файла сохранение значений NULL. Чтобы гарантировать успешность проверки преобразования «Уточняющий запрос», выберите в **редакторе источника «неструктурированный файл»**на странице **Диспетчер соединений**параметр **Оставлять значения NULL из источника в потоке данных** .  
  
4.  Чтобы настроить компонент, дважды щелкните источник или предыдущее преобразование.  
  
5.  Дважды щелкните преобразование "Уточняющий запрос", а затем в окне **Редактор преобразования "Уточняющий запрос"**на странице **Общие** выберите **Частичное кэширование** или **Без кэширования**.  
  
6.  В списке **Укажите метод обработки строк без совпадающих элементов** выберите параметр обработки ошибок.  
  
7.  На странице **Соединение** выберите диспетчер соединений из списка **Диспетчер соединений OLE DB** или нажмите кнопку **Создать** , чтобы создать новый диспетчер соединений. Дополнительные сведения см. в статье [OLE DB Connection Manager](../../../integration-services/connection-manager/ole-db-connection-manager.md).  
  
8.  Выполните следующие действия:  
  
    -   Выберите параметр **Использовать таблицу или представление**, а затем выберите таблицу или представление; либо нажмите кнопку **Создать** , чтобы создать таблицу или представление.  
  
    -   Выберите параметр **Использовать результаты SQL-запроса**, а затем создайте запрос в окне **Команда SQL** .  
  
         —или—  
  
         Нажмите кнопку **Создать запрос** , чтобы создать запрос с помощью графических средств, предоставляемых **Построителем запросов** .  
  
         —или—  
  
         Нажмите кнопку **Обзор** , чтобы выполнить импорт инструкции SQL из файла.  
  
     Для проверки SQL-запроса щелкните **Анализ запроса**.  
  
     Чтобы просмотреть образец, нажмите кнопку **Просмотр**.  
  
9. Перейдите на страницу **Столбцы** и перетащите хотя бы один из столбцов в списке **Доступные входные столбцы** в столбец из списка **Доступные столбцы подстановки** .  
  
    > [!NOTE]  
    >  Преобразование «Уточняющий запрос» автоматически сопоставляет столбцы, которые обладают одинаковыми названиями и типами данных.  
  
    > [!NOTE]  
    >  Типы данных сопоставляемых столбцов должны совпадать. Дополнительные сведения см. в разделе [Integration Services Data Types](../../../integration-services/data-flow/integration-services-data-types.md).  
  
10. Включите столбцы подстановки в выходные данные, выполнив следующие действия.  
  
    1.  В списке **Доступные столбцы подстановки** выберите столбцы.  
  
    2.  Затем в списке **Операция поиска** укажите, будут ли значения из столбцов подстановки заменять значения входных столбцов или они будут записаны в новый столбец.  
  
11. Если в шаге 5 выбрано **Частичное кэширование** , на странице **Дополнительно** задайте следующие параметры кэша.  
  
    -   Из списка **Размер кэша (32-разрядная версия)** выберите размер кэша для 32-разрядных сред.  
  
    -   Из списка **Размер кэша (64-разрядная версия)** выберите размер кэша для 64-разрядных сред.  
  
    -   Чтобы обеспечить кэширование строк без совпадающих записей в ссылке, выберите элемент **Включить кэширование для строк с несовпадающими записями**.  
  
    -   В списке **Распределение из кэша** выберите процентную долю объема кэша, которая должна использоваться для хранения строк без совпадающих записей.  
  
12. Чтобы изменить инструкцию SQL, формирующую эталонный набор данных, выберите команду **Изменить инструкцию SQL**и измените инструкцию SQL, отображаемую в текстовом поле.  
  
     Если эта инструкция включает параметры, нажмите кнопку **Параметры** , чтобы сопоставить параметры с входными столбцами.  
  
    > [!NOTE]  
    >  Дополнительная инструкция SQL, которую можно указать на этой странице, заменяет имя таблицы, указанное на странице **Соединение** **Редактора преобразования «Уточняющий запрос»**.  
  
13. Чтобы настроить вывод ошибок, перейдите на страницу **Вывод ошибок** и задайте параметры обработки ошибок. Дополнительные сведения см. в разделе [Редактор преобразования "Уточняющий запрос" (страница "Вывод ошибок")](../../../integration-services/data-flow/transformations/lookup-transformation-editor-error-output-page.md).  
  
14. Нажмите кнопку **ОК** , чтобы сохранить изменения в преобразовании «Уточняющий запрос», а затем запустите пакет.  
  
## <a name="see-also"></a>См. также раздел  
 [Преобразования служб Integration Services](../../../integration-services/data-flow/transformations/integration-services-transformations.md)  
  
  
