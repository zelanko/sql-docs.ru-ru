---
title: Подключение к источнику Teradata | Документация Майкрософт
ms.custom: ''
ms.date: 11/22/2019
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 16c534788803c2c29fc36817fb63e112c8c84b1f
ms.sourcegitcommit: c8e1553ff3fdf295e8dc6ce30d1c454d6fde8088
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/22/2020
ms.locfileid: "86912340"
---
# <a name="connect-to-the-teradata-source"></a>Подключение к источнику Teradata

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]

Источник Teradata извлекает данные из баз данных Teradata с помощью следующего:
- Таблица или представление.
- Результат выполнения инструкции SQL.

Источник использует диспетчер соединений Teradata для подключения к источнику Teradata. Дополнительные сведения см. в разделе [Использование диспетчера соединений Teradata](teradata-connection-manager.md).

## <a name="troubleshoot-the-teradata-source"></a>Устранение неполадок с источником Teradata

Вы можете регистрировать вызовы, которые источник Teradata передает в API-интерфейс Teradata Parallel Transporter (TPT). Для этого включите ведение журнала пакета, а затем выберите **диагностическое** событие на уровне пакета.

Можно зарегистрировать вызовы ODBC, которые источник Teradata передает в драйвер ODBC Teradata, включив трассировку диспетчера драйверов ODBC. Дополнительные сведения см. в разделе [Создание трассировки ODBC с помощью Администратора источников данных ODBC](https://docs.microsoft.com/sql/odbc/admin/setting-tracing-options).

## <a name="parallelism"></a>Parallelism

Источник Teradata поддерживает параллелизм, когда задания экспорта могут обращаться к одной и той же таблице или разным таблицам одновременно. Переменная базы данных с именем `MaxLoadTasks` задает ограничение числа заданий экспорта, которые могут выполняться одновременно. Это максимальное число можно определить с помощью переменной `MaxLoadTasks`.

## <a name="teradata-source-custom-properties"></a>Пользовательские свойства источника Teradata

В таблице ниже перечислены пользовательские свойства источника Teradata. Все свойства доступны для чтения и записи.

|Имя свойства|Тип данных|Описание|
|:-|:-|:-|
|AccessMode|Integer (перечисление)|Режим, используемый для доступа к базе данных. Возможные значения — *Имя таблицы* и *Команда SQL*. Значение по умолчанию — *Table Name*.|
|BlockSize|Целое число|Размер блока в байтах, который используется при возврате данных клиенту. Значение по умолчанию — 1 048 576 (1 МБ). Минимальное значение — 256 байт. Максимальное значение — 16 775 168 байт.<br> Это свойство находится в области **Расширенный редактор**.|
|BufferMaxSize|Целое число|Общий максимальный размер буфера данных, возвращаемого функцией GetBuffer. Этот размер должен быть достаточно большим, чтобы вместить по крайней мере одну строку данных, включая заголовок строки, фактическую строку данных и конец буфера. Общий максимальный размер буфера данных по умолчанию составляет 16 775 552 байт. <br>Дополнительные сведения см. в разделе [Экспорт данных из базы данных Teradata с помощью GetBuffer](https://docs.teradata.com/reader/TvVKKmxaBAoyETJZD8zz_g/oaxiwNJmnCa6UctY4k498w).|
|BufferMode|Логическое|Значение по умолчанию — *True*. Значение должно быть *true*, если используется функция PutBuffer. Это свойство находится в области **Расширенный редактор**.|
|DataEncryption|Логическое|Значение по умолчанию — *false*. Используется полное шифрование для безопасности, если значение равно *true*.|
|DefaultCodePage|Целое число|Кодовая страница, которая используется, если для источника данных нет сведений о кодовой странице. Это свойство находится в области **Расширенный редактор**.|
|DetailedTracingLevel|Integer (перечисление)|Выберите один из следующих параметров для расширенной трассировки: <br> *Off*: без расширенного ведения журнала. <br> *General*: ведение журнала общей трассировки действий, связанных с драйвером. <br> *CLI*: ведение журнала трассировки действий, связанных с CLI 2.0. <br> *Notify Method*: ведение журнала трассировки действий, связанных с функциями. <br> *Common Library*: ведение журнала трассировки действий библиотеки opcommon. <br> *Все*: ведение журнала трассировки всех предыдущих действий. <br> Файл журнала расширенной трассировки определен в свойстве `DetailedTracingFile`. <br> Если для параметра не установлено значение *Off*, необходимо задать свойство `DetailedTracingFile`. Это свойство находится в области **Расширенный редактор**.|
|DetailedTracingFile|Строка|Путь к файлу журнала, который создается автоматически, когда для параметра *DetailedTracingLevel* не установлено значение *Off*. Это свойство находится в области **Расширенный редактор**.|
|DiscardLargeRow|Логическое|Значение по умолчанию — *false*. Отбросить большие строки (более 64 КБ), если значение равно *true*.|
|ExtendedStringColumnsAllocation|Логическое|*Максимальный коэффициент распределения символов* используется, если значение равно *true*. <br> Это значение должно быть равно *true*, если для свойства базы данных Teradata `Export Width Table ID` задано значение *Maximal Defaults*. <br> Значение по умолчанию — *false*.|
|JobMaxRowSize|Целое число|Может поддерживаться максимальный размер строки. Это значение необходимо, если значение `DiscardLargeRow` равно *true*.<br>Допустимые значения: <br>*64* (значение по умолчанию): поддерживаются 2-байтовые длины строк. <br>*1024*: поддерживаются 4-байтовые длины строк.|
|MaxSessions|Целое число|Максимальное количество сеансов, в которых выполнен вход в систему. Это значение должно быть больше единицы. Значение по умолчанию — один сеанс для каждого доступного процессора Access Module Processor (AMP).|
|MinSessions|Целое число|Минимальное количество сеансов, в которых выполнен вход в систему. Это значение должно быть больше единицы. Значение по умолчанию — один сеанс для каждого доступного AMP.|
|QueryBandSessInfo|Varchar|Определяемое пользователем выражение диапазона запроса на основе сеанса в формате строки подключения. Это свойство используется для обратного мониторинга и контроля. Это свойство находится в области **Расширенный редактор**.|
|SpoolMode|Varchar|Допустимые значения: <br>*Spool*: используйте значение по умолчанию *Spool*. <br> *NoSpool*: не используйте значение *Spool*. Это значение допустимо, только если сервер базы данных поддерживает значение *NoSpool*. <br>  *NoSpoolOnly*: не используйте *Spool* в любом случае. Задание будет завершено с ошибкой, если сервер баз данных не поддерживает *NoSpool*.|
|SqlCommand|Строка|Команда SQL, которая должна быть выполнена, если для `AccessMode` задано значение *SQL Command*.|
|TableName|Строка|Имя таблицы, содержащей данные, которые будут использоваться, если `AccessMode` имеет значение *Table Name*.|
|TenacityHours|Целое число|Количество часов, в течение которых драйвер TPT пытается войти в систему, если уже выполняется максимальное количество операций загрузки и экспорта. Значение по умолчанию составляет *4 часа*. Это свойство находится в области **Расширенный редактор**.|
|TenacitySleep|Целое число|Количество минут, в течение которых драйвер TPT приостанавливается, прежде чем пытаться войти в систему по достижении предела. Ограничение определяется свойствами `MaxSessions` и `TenacityHours`. Значение по умолчанию — 6 минут. Это свойство находится в области **Расширенный редактор**.|
|UnicodePassThrough|Логическое|*Off* (значение по умолчанию): отключить пропуск символов Юникода. <br>*Когда обновлено*: включить пропуск символов Юникода.|

## <a name="configure-the-teradata-source"></a>Настройка источника Teradata

Источник Teradata можно настроить программно или с помощью конструктора SQL Server Integration Services (SSIS).

На следующем рисунке показана панель **Редактор источника Teradata**. Дополнительные сведения см. в следующих разделах Редактора источника Teradata:

- [Панель "Диспетчер соединений"](#the-connection-manager-pane)
- [Панель "Столбцы"](#the-columns-pane)
- [Панель вывода ошибок](#the-error-output-pane)

![Редактор источника Teradata](media/teradata-source.png)

Панель **Расширенный редактор** содержит свойства, которые можно задать программно. Чтобы открыть панель, сделайте следующее:
- На странице **Поток данных** проекта Integration Services щелкните правой кнопкой мыши источник Oracle и выберите пункт **Показать расширенный редактор**.

Дополнительные сведения о свойствах, которые можно установить на панели **Расширенный редактор**, см. в разделе [Пользовательские свойства источника Teradata](#teradata-source-custom-properties).

## <a name="the-connection-manager-pane"></a>Панель "Диспетчер соединений"

Используйте панель **Диспетчер соединений**, чтобы выбрать экземпляр диспетчера соединений Teradata для источника. На этой панели можно также выбрать таблицу или представление из базы данных. Чтобы открыть панель, сделайте следующее:

1. В SQL Server Data Tools откройте пакет служб SSIS, содержащий источник Teradata.

1. На вкладке **Поток данных** дважды щелкните источник Teradata.

1. В редакторе источника Teradata выберите вкладку **Диспетчер подключений**.

### <a name="options"></a>Параметры

**Connection manager**

* В списке выберите существующий диспетчер подключений или выберите команду **Создать**, чтобы создать новый экземпляр диспетчера подключений Teradata.

**Создать**

* Нажмите кнопку **Создать**. Откроется панель **Редактор диспетчера подключений Teradata**. На этой панели можно создать новый диспетчер подключений.

**Режим доступа к данным**

* Выберите метод выбора данных из источника. Доступные параметры показаны в следующей таблице.

    |Параметр|Описание|
    |:-|:-|
    |Table name — TPT Export|Получение данных из таблицы или представления в источнике данных Teradata. Если выбран этот параметр, щелкните доступную таблицу или представление в списке **Имя таблицы или представления**.|
    |SQL command — TPT Export|Получение данных из источника данных Teradata с помощью SQL-запроса. Если выбран этот параметр, введите запрос одним из следующих способов: <ul><li>Введите текст SQL-запроса в поле **Текст команды SQL** .</li><li>Нажмите кнопку **Обзор**, чтобы загрузить SQL-запрос из текстового файла.</li><li>Чтобы проверить синтаксис текста запроса, нажмите кнопку **Анализ запроса**.</li></ul>|

**Предварительный просмотр**

* Нажмите кнопку **Просмотр**, чтобы просмотреть первые 200 строк данных, извлеченных из выбранной таблицы или представления.

## <a name="the-columns-pane"></a>Панель "Столбцы"

Используйте панель **Столбцы**, чтобы связать выходной столбец с каждым внешним столбцом (источником). Чтобы открыть панель, сделайте следующее:

1. В SQL Server Data Tools откройте пакет служб SSIS, содержащий источник Teradata.

1. На вкладке **Поток данных** дважды щелкните источник Teradata.

1. В редакторе источника Teradata выберите вкладку **Столбцы**.

### <a name="options"></a>Параметры

**Доступные внешние столбцы**

В этой таблице перечислены доступные внешние столбцы, которые можно выбрать для добавления в список **Внешний столбец**. Вы можете вывести список столбцов в выбранном порядке. В этой таблице нельзя добавлять или удалять столбцы.

* Чтобы выбрать все столбцы, установите флажок **Выбрать все**.

**Внешние столбцы**

Выбранные внешние столбцы (источники) перечисляются по порядку. Чтобы изменить порядок, сначала очистите список **Доступные внешние столбцы**, а затем выберите столбцы в другом порядке.

**Выходной столбец**

Несмотря на то что имя выбранного внешнего столбца (источника) является выходным именем по умолчанию, можно ввести любое уникальное имя.

>[!NOTE]
>>Если имеются столбцы, содержащие неподдерживаемые типы данных, появится предупреждение с отображением неподдерживаемых типов данных и соответствующие столбцы будут удалены из сопоставления.

## <a name="the-error-output-pane"></a>Панель вывода ошибок

Используйте панель **Вывод ошибок**, чтобы выбрать параметры обработки ошибок. Чтобы открыть панель, сделайте следующее:

1. В SQL Server Data Tools откройте пакет служб SSIS, содержащий источник Teradata.

1. На вкладке **Поток данных** дважды щелкните источник Teradata.

1. В редакторе источника Teradata выберите вкладку **Вывод ошибок**.

### <a name="options"></a>Параметры

**Действия при ошибке**

* Выберите порядок обработки ошибок в потоке источником Teradata: 
  * пропустить ошибку;
  * перенаправить строку;
  * завершить работу компонента с ошибкой.

**См. также:** См. раздел [Обработка ошибок в данных](error-handling-in-data.md).

**Усечение**

* Выберите порядок обработки усечений в потоке источником Teradata: 
  * пропустить ошибку;
  * перенаправить строку;
  * завершить работу компонента с ошибкой.

## <a name="next-steps"></a>Дальнейшие действия

- Настройка [назначения Teradata](teradata-destination.md).
- Если у вас возникнут вопросы, посетите страницу [технического сообщества](https://aka.ms/AA6iwdw).
