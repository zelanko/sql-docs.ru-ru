---
title: Назначение SQL Server | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.sqlserverdest.f1
- sql13.dts.designer.sqlserverdestadapter.connection.f1
- sql13.dts.designer.sqlserverdestadapter.mappings.f1
- sql13.dts.designer.sqlserverdestadapter.advanced.f1
helpviewer_keywords:
- SQL Server destination
- loading data
- destinations [Integration Services], SQL Server
- inserting data
- bulk load [Integration Services]
ms.assetid: a0227cd8-6944-4547-87e8-7b2507e26442
author: janinezhang
ms.author: janinez
manager: craigg
ms.openlocfilehash: 19fe20d882810488e077ed1158b79c3399cc12f8
ms.sourcegitcommit: 7ccb8f28eafd79a1bddd523f71fe8b61c7634349
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58290590"
---
# <a name="sql-server-destination"></a>назначение «SQL Server»
  Назначение «SQL Server» подключается к локальной базе данных служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и производит массовую загрузку данных в таблицы и представления [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Нельзя использовать назначение «SQL Server» в пакетах, получающих доступ к базе данных служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на удаленном сервере. Вместо этого пакеты должны использовать назначение «OLE DB». Дополнительные сведения см. в разделе [OLE DB Destination](../../integration-services/data-flow/ole-db-destination.md).  
  
## <a name="permissions"></a>Разрешения  
 Пользователям, выполняющим пакеты, которые содержат назначение «SQL Server», необходимо разрешение на «Создание глобальных объектов». Предоставить это разрешение пользователям можно с помощью средства политики локальной безопасности, доступного в меню **Администрирование** . Если при выполнении пакета, который использует назначение «SQL Server», получено сообщение об ошибке, убедитесь, что учетная запись, под которой был запущен пакет, имеет разрешение на «Создание глобальных объектов».  
  
## <a name="bulk-inserts"></a>Массовые вставки  
 При попытке использовать назначение «SQL Server» для массовой загрузки данных в удаленную базу данных SQL Server может появиться сообщение об ошибке, похожее на следующее: «Доступна запись OLE DB. Источник: Значение Hresult собственного клиента Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]: 0x80040E14 Описание: "Не удалось выполнить массовую загрузку, поскольку невозможно открыть объект сопоставления файлов служб SSIS 'Global\DTSQLIMPORT'. Код ошибки операционной системы 2 (система не может найти указанный файл). Убедитесь, что доступ к локальному серверу осуществляется через систему безопасности Windows"».  
  
 Назначение "SQL Server" предлагает такую же высокоскоростную вставку данных в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , что и задача "Массовая вставка". Однако используя назначение "SQL Server", пакет может применить преобразования к столбцу раньше, чем данные будут загружены в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
 Для загрузки данных в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]необходимо рассмотреть возможность использования назначения «SQL Server» вместо назначения «OLE DB».  
  
### <a name="bulk-insert-options"></a>Параметры массовой вставки  
 Если назначение «SQL Server» использует режим доступа быстрой загрузки данных, можно задать следующие параметры быстрой загрузки.  
  
-   Хранить значения идентификаторов из файла импортируемых данных или использовать уникальные значения, назначенные [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
-   Хранить в памяти значения NULL во время операции массовой загрузки.  
  
-   Проверить ограничения целевых таблиц или представлений во время операции массового импорта.  
  
-   Получить блокировку на уровне таблиц на период операции массовой загрузки.  
  
-   Выполнить триггеры Insert, определенные в целевой таблице во время операции массовой загрузки.  
  
-   Указать номер первой строки во входе для загрузки во время операции массовой вставки.  
  
-   Указать номер последней строки во входе для загрузки во время операции массовой вставки.  
  
-   Указать максимально допустимое число ошибок, при достижении которого операция массовой загрузки отменяется. Каждая строка, которая не может быть импортирована, считается как одна ошибка.  
  
-   Указать столбцы во входе, которые содержат отсортированные данные.  
  
 Дополнительные сведения о параметрах массовой загрузки см. в разделе [BULK INSERT (Transact-SQL)](../../t-sql/statements/bulk-insert-transact-sql.md).  
  
#### <a name="performance-improvements"></a>Повышение производительности  
 Чтобы повысить производительность массовой вставки и доступа к таблице данных во время операции массовой вставки, необходимо изменить параметры по умолчанию следующим образом:  
  
-   Не проверять ограничения целевых таблиц или представлений во время операции массового импорта.  
  
-   Не выполнять триггеры Insert, определенные в целевой таблице во время операции массовой загрузки.  
  
-   Не применять блокировку таблицы. Таким образом, таблица остается доступной для других пользователей и приложений во время операции массовой вставки.  
  
## <a name="configuration-of-the-sql-server-destination"></a>Настройка назначения SQL Server  
 Назначение «SQL Server» можно настроить следующими способами.  
  
-   Укажите таблицу или представление, в которые будет производиться массовая загрузка.  
  
-   Настройте операцию массовой загрузки, указав такие параметры, как управление очередностью.  
  
-   Укажите, можно ли произвести фиксацию всех строк в одном пакете, или установите максимальное количество строк, фиксируемых в одном пакете.  
  
-   Укажите время ожидания для операции массовой загрузки.  
  
 Это назначение использует диспетчер соединений OLE DB для подключения к источнику данных, и диспетчер соединений определяет используемый поставщик OLE DB. Дополнительные сведения см. в разделе [Диспетчер соединений OLE DB](../../integration-services/connection-manager/ole-db-connection-manager.md).  
  
 Проект служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] также предоставляет объект источника данных, из которого можно создать диспетчер соединений OLE DB. Это предоставляет назначению «SQL Server» доступ к источникам данных и представлениям источника данных.  
  
 Назначение «SQL Server» имеет один вход. Вывод ошибок не поддерживается.  
  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Диалоговое окно **Расширенный редактор** содержит свойства, которые можно установить с помощью программных средств. Дополнительные сведения о свойствах, которые вы можете задать в диалоговом окне **Расширенный редактор** или программными средствами, см. в следующих разделах.  
  
-   [Общие свойства](https://msdn.microsoft.com/library/51973502-5cc6-4125-9fce-e60fa1b7b796)  
  
-   [Пользовательские свойства назначения «SQL Server»](../../integration-services/data-flow/sql-server-destination-custom-properties.md)  
  
 Дополнительные сведения о настройке свойств см. в следующих разделах.  
  
-   [Выполнение массовой загрузки данных с помощью назначения «SQL Server»](../../integration-services/data-flow/bulk-load-data-by-using-the-sql-server-destination.md)  
  
-   [Установление свойств компонента потока данных](../../integration-services/data-flow/set-the-properties-of-a-data-flow-component.md)  
  
## <a name="related-tasks"></a>Связанные задачи  
  
-   [Выполнение массовой загрузки данных с помощью назначения «SQL Server»](../../integration-services/data-flow/bulk-load-data-by-using-the-sql-server-destination.md)  
  
-   [Установление свойств компонента потока данных](../../integration-services/data-flow/set-the-properties-of-a-data-flow-component.md)  
  
## <a name="related-content"></a>См. также  
  
-   Техническая статья [В системах, поддерживающих контроль учетных записей, может быть получена ошибка «Не удалось подготовить массовую вставку данных служб SSIS»](https://go.microsoft.com/fwlink/?LinkId=199482)на сайте support.microsoft.com.  
  
-   Техническая статья [Руководство по производительности загрузки данных](https://go.microsoft.com/fwlink/?LinkId=233700)на сайте msdn.microsoft.com.  
  
-   Техническая статья [Использование служб SQL Server Integration Services для массовой загрузки данных](https://go.microsoft.com/fwlink/?LinkId=233701)размещена на сайте simple-talk.com.  
  
## <a name="sql-destination-editor-connection-manager-page"></a>Редактор назначения «SQL» (страница «Диспетчер соединений»)
  Страница **Диспетчер соединений** диалогового окна **Редактор назначения «SQL»** используется для задания сведений об источнике данных и для предварительного просмотра результатов. Назначение [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] загружает данные в таблицы или представления в базе данных [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
### <a name="options"></a>Параметры  
 **Диспетчер соединений OLE DB**  
 Выберите существующий диспетчер подключений из списка или создайте новое соединение, выбрав пункт **Создать**.  
  
 **Создать**  
 Создайте новое соединение с помощью диалогового окна **Настройка диспетчера соединений OLE DB** .  
  
 **Использовать таблицу или представление**  
 Выберите существующую таблицу или представление из списка или создайте новое соединение, нажав кнопку **Создать**.  
  
 **Создать**  
 Создайте новую таблицу с помощью диалогового окна **Создание таблицы** .  
  
> [!NOTE]  
>  При нажатии кнопки **Создать**службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] по умолчанию формируют инструкцию CREATE TABLE на основе подключенного источника данных. Эта инструкция CREATE TABLE не включает атрибут FILESTREAM, даже если исходная таблица содержит столбец, для которого объявлен атрибут FILESTREAM. Чтобы запустить компонент служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] с атрибутом FILESTREAM, сначала следует создать хранилище FILESTREAM в целевой базе данных. Затем добавьте атрибут FILESTREAM к инструкции CREATE TABLE в диалоговом окне **Создание таблицы** . Дополнительные сведения см. в разделе [Данные большого двоичного объекта (SQL Server)](../../relational-databases/blob/binary-large-object-blob-data-sql-server.md).  
  
 **Предварительный просмотр**  
 Просмотрите предварительные результаты, используя диалоговое окно **Предварительный просмотр результатов запроса** . В окне «Предварительный просмотр» может отображаться до 200 строк.  
  
## <a name="sql-destination-editor-mappings-page"></a>Редактор назначения "SQL" (страница «Сопоставления»)
  Страница **Сопоставления** диалогового окна **Редактор назначения «SQL»** используется для сопоставления входных столбцов с целевыми столбцами.  
  
### <a name="options"></a>Параметры  
 **Доступные входные столбцы**  
 Просмотрите список доступных входных столбцов. Для сопоставления доступных входных столбцов с целевыми столбцами используется операция перетаскивания.  
  
 **Доступные целевые столбцы**  
 Просмотрите список доступных целевых столбцов. Чтобы сопоставить доступные целевые столбцы с входными столбцами, воспользуйтесь операцией перетаскивания.  
  
 **Входной столбец**  
 Просмотрите выбранные входные столбцы из вышеприведенной таблицы. Сопоставления можно изменить с помощью списка **Доступные входные столбцы**.  
  
 **Целевой столбец**  
 Просмотреть все доступные целевые столбцы независимо от того, сопоставлены они с входными столбцами или нет.  
  
## <a name="sql-destination-editor-advanced-page"></a>Редактор назначения SQL (страница «Дополнительно»)
  Используйте страницу **Дополнительно** в диалоговом окне **Редактор назначения «SQL»** , чтобы указать дополнительные параметры массовой вставки.  
  
### <a name="options"></a>Параметры  
 **Сохранять ИД**  
 Укажите, должна ли задача вставлять значения в столбцы идентификаторов. Это свойство имеет значение по умолчанию **False**.  
  
 **Сохранять значения NULL**  
 Укажите, должна ли данная задача сохранять значения NULL. Это свойство имеет значение по умолчанию **False**.  
  
 **Блокировка таблицы**  
 Укажите, будет ли таблица заблокирована в ходе загрузки данных. Значение по умолчанию этого свойства равно **True**.  
  
 **Проверочные ограничения**  
 Укажите, должна ли задача проверять ограничения. Значение по умолчанию этого свойства равно **True**.  
  
 **Запускать триггеры**  
 Укажите, будет ли массовая вставка запускать триггеры таблиц. Это свойство имеет значение по умолчанию **False**.  
  
 **Первая строка**  
 Укажите первую вставляемую строку. Значение по умолчанию этого свойства равно **-1**. Оно указывает, что значение не присваивалось.  
  
> [!NOTE]  
>  Очистите текстовое поле в **Редакторе назначения «SQL»** , чтобы показать, что этому свойству не нужно присваивать значение. Используйте значение -1 в окне **Свойства** , **Расширенном редакторе**и объектной модели.  
  
 **Последняя строка**  
 Укажите последнюю вставляемую строку. Значение по умолчанию этого свойства равно **-1**. Оно указывает, что значение не присваивалось.  
  
> [!NOTE]  
>  Очистите текстовое поле в **Редакторе назначения «SQL»** , чтобы показать, что этому свойству не нужно присваивать значение. Используйте значение -1 в окне **Свойства** , **Расширенном редакторе**и объектной модели.  
  
 **Максимальное количество ошибок**  
 Укажите допустимое максимальное число ошибок, после превышения которого происходит прекращение массовой вставки. Значение по умолчанию этого свойства равно **-1**. Оно указывает, что значение не присваивалось.  
  
> [!NOTE]  
>  Очистите текстовое поле в **Редакторе назначения «SQL»** , чтобы показать, что этому свойству не нужно присваивать значение. Используйте значение -1 в окне **Свойства** , **Расширенном редакторе**и объектной модели.  
  
 **Timeout**  
 Укажите количество секунд ожидания, по истечении которых массовая вставка будет прекращена.  
  
 **Порядок столбцов**  
 Введите имена столбцов сортировки. Любой столбец можно сортировать в порядке возрастания или в порядке убывания. Если нужно задать несколько столбцов сортировки, используйте в качестве разделителей запятые.  
  
## <a name="see-also"></a>См. также:  
 [Поток данных](../../integration-services/data-flow/data-flow.md)  
  
  
