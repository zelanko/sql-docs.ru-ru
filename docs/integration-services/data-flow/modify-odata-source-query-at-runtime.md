---
title: Указание запроса источника OData во время выполнения | Документы Майкрософт
ms.custom: ''
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: integration-services
ms.service: ''
ms.component: data-flow
ms.reviewer: ''
ms.suite: sql
ms.technology:
- integration-services
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: bcbba7f4-6e5d-46e6-a73a-3f17d3ff376a
caps.latest.revision: 7
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.workload: Inactive
ms.openlocfilehash: 190cbebff69d08424e62ec82b70ea9759d13a96c
ms.sourcegitcommit: a85a46312acf8b5a59a8a900310cf088369c4150
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="provide-an-odata-source-query-at-runtime"></a>Указание запроса источника OData во время выполнения
 Можно изменить запрос источника OData во время выполнения, добавив *выражение* в свойство **[OData Source].[Query]** задачи потока данных.  
  
 Должны возвращаться те же столбцы, которые возвращались во время разработки, иначе при выполнении пакета произойдет ошибка. Обязательно укажите те же столбцы (в том же порядке) при использовании параметра $select запроса. Более безопасная альтернатива применению параметра $select состоит в том, чтобы отменить выбор ненужных столбцов непосредственно в пользовательском интерфейсе исходного компонента.  
  
 Существует несколько способов для динамической установки значения запроса во время выполнения. Ниже перечислены некоторые из наиболее распространенных методов.  
  
## <a name="provide-the-query-as-a-parameter"></a>Предоставление запроса в качестве параметра  
 Следующая процедура демонстрирует, как предоставить пакету доступ к запросу, используемому компонентом источника OData, в качестве параметра.  
  
1.  Щелкните правой кнопкой мыши **Задача потока данных** и выберите пункт **Параметризация…** .  
  
2.  В диалоговом окне **Параметризация** выберите **[\<имя исходного компонента OData>].[Query]** для параметра **Свойство**.  
  
3.  Выберите, следует ли значение **создать новый параметр** или **использовать существующий параметр**.  
  
4.  Если установлен флажок **Создать новый параметр**:  
  
    1.  Введите **имя** и **описание** для параметра.  
  
    2.  Укажите **значение** по умолчанию для данного параметра.  
  
    3.  Укажите **область** (**пакет** или **проект**) для параметра.  
  
    4.  Укажите, является ли параметр **обязательным** или нет.  
  
5.  Чтобы закрыть диалоговое окно, нажмите кнопку **ОК** .  
  
## <a name="provide-the-query-with-an-expression"></a>Предоставление запроса с выражением
 Этот метод удобен для динамического построения строки запроса во время выполнения.
  
1.  Выберите **задачу потока данных**, содержащую ваш **источник OData**.  
  
2.  В окне **Свойства** выделите свойство **Выражения** .  
  
3.  Нажмите кнопку с многоточием (...), чтобы открыть **Редактор выражений свойств**.  
  
4.  Выберите свойство **[OData Source].[Query]** .  
  
5.  Нажмите кнопку с многоточием (...) для элемента **Выражение**.  
  
6.  Введите **выражение**.  
  
7.  Нажмите кнопку **ОК**.  
  
> [!NOTE]  
> При использовании такого подхода необходимо убедиться, чтобы значения были правильно закодированы в URL-адресе. При получении значений из входных данных пользователя (например, установке отдельных значений параметра запроса из параметра) необходимо убедиться, что значения проверяются, чтобы избежать потенциальных атак путем инжекции кода SQL.  
  
  
