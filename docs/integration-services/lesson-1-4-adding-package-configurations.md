---
description: Занятие 1–4. Добавление конфигураций пакетов
title: Шаг 4. Добавление конфигураций пакетов | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: tutorial
ms.assetid: e04a5321-63d5-4ec5-85b9-cb4eaf6c87f6
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 052bb905c78839c644a5436da568667b6665b432
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "88477214"
---
# <a name="lesson-1-4---adding-package-configurations"></a>Занятие 1–4. Добавление конфигураций пакетов

[!INCLUDE[sqlserver-ssis](../includes/applies-to-version/sqlserver-ssis.md)]


В этой задаче необходимо добавить конфигурацию каждому пакету. Конфигурации позволяют обновлять значения свойств и объектов пакетов во время выполнения.  
  
[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предоставляют различные типы конфигурации. Конфигурации можно сохранять в переменных среды, в записях реестра, пользовательских переменных, таблицах [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] и XML-файлах. Чтобы обеспечить дополнительную гибкость, службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] поддерживают косвенную конфигурацию. Это подразумевает использование переменной среды для указания расположения конфигурации, которая, в свою очередь, указывает фактические значения. Для пакетов проекта из учебника по развертыванию используется сочетание XML-файлов конфигурации и косвенная конфигурация. В XML-файле конфигурации могут содержаться параметры конфигурации для различных свойств, а когда возможно, и для различных пакетов. В данном учебнике для каждого пакета используется отдельный файл конфигурации.  
  
В файлах конфигурации часто содержатся конфиденциальные данные, такие как строки соединения. Поэтому необходимо использовать список управления доступом (ACL), чтобы ограничить доступ к месту или папке, где хранятся эти файлы, и предоставить доступ только пользователям или учетным записям, обладающим разрешением на выполнение пакетов. Дополнительные сведения см. в разделе [Доступ к файлам, используемым пакетами](../integration-services/security/security-overview-integration-services.md#files).  
  
Для успешного выполнения после разворачивания на целевом сервере пакетам (DataTransfer и LoadXMLData), добавленным в проект из учебника по развертыванию в предыдущей задаче, необходимы конфигурации. Для выполнения настройки сначала необходимо создать косвенную конфигурацию для XML-файлов конфигурации и затем создать XML-файлы конфигурации.  
  
Будут созданы два файла конфигурации, DataTransferConfig.dtsConfig и LoadXMLData.dtsConfig. Эти файлы содержат пары «имя-значение», обновляющие в пакетах свойства, которые указывают расположение используемых пакетом файлов данных и журналов. Позже, на одном из этапов процесса развертывания, потребуется обновить значения в файлах конфигурации, чтобы отразить новое место хранения файлов на целевом компьютере.  
  
[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] распознают, что файлы DataTransferConfig.dtsConfig и LoadXMLData.dtsConfig представляют собой зависимости пакетов DataTransfer и LoadXMLData, и на следующем занятии при создании комплекта развертывания в них автоматически будут содержаться эти файлы конфигурации.  
  
### <a name="to-create-indirect-configuration-for-the-datatransfer-package"></a>Создание косвенной конфигурации для пакета DataTransfer  

Проверьте текущую модель развертывания проекта и при необходимости измените ее на **модель развертывания пакета**. В меню **Проект** выберите пункт **Преобразовать в модель развертывания пакета**.
  
1.  В обозревателе решений дважды щелкните DataTransfer.dtsx.  
  
2.  В конструкторе служб [!INCLUDE[ssIS](../includes/ssis-md.md)] щелкните в области конструктора потока управления.  
  
3.  В меню **Службы SSIS** выберите команду **Конфигурации пакетов**.  
  
4.  В диалоговом окне **Организатор конфигурации пакетов**установите флажок **Включить конфигурации пакетов** , если эта функция еще не активирована, и нажмите кнопку **Добавить**.  
  
5.  На странице приветствия мастера настройки пакета нажмите кнопку **Далее**.  
  
6.  На странице выбора типа конфигурации в списке **Тип конфигурации** выберите **XML-файл конфигурации** , затем выберите параметр **Сведения о расположении файла конфигурации хранятся в переменной среды** и введите **DataTransfer** или выберите переменную среды **DataTransfer** из списка.  
  
    > [!NOTE]  
    > Чтобы переменная среды была доступна в списке, после добавления переменной может потребоваться перезагрузка компьютера. Если перезагрузка компьютера нежелательна, можно просто ввести имя переменной.  
  
7.  Нажмите кнопку **Далее**.  
  
8.  На странице «Завершение работы мастера» в окне **Имя конфигурации** введите **DataTransfer EV Configuration** , проверьте содержимое конфигурации на панели **Предварительный просмотр** и нажмите кнопку **Готово**.  
  
9. Закройте диалоговое окно **Организатор конфигурации пакетов**.  
  
### <a name="to-create-the-xml-configuration-for-the-datatransfer-package"></a>Создание XML-конфигурации для пакета DataTransfer  
  
1.  В обозревателе решений дважды щелкните DataTransfer.dtsx.  
  
2.  В конструкторе служб [!INCLUDE[ssIS](../includes/ssis-md.md)] щелкните в области конструктора потока управления.  
  
3.  В меню **Службы SSIS** выберите команду **Конфигурации пакетов**.  
  
4.  В диалоговом окне "Организатор конфигурации пакетов" установите флажок **Включить конфигурации пакетов** и нажмите кнопку **Добавить**.  
  
5.  На странице приветствия мастера настройки пакета нажмите кнопку **Далее**.  
  
6.  На странице выбора типа конфигурации в списке **Тип конфигурации** выберите **XML-файл конфигурации** и нажмите кнопку **Обзор**.  
  
7.  В диалоговом окне **Выберите расположение файла конфигурации** укажите путь к папке C:\DeploymentTutorial и в поле **Имя файла** введите **DataTransferConfig** , после чего нажмите кнопку **Сохранить**.  
  
8.  На странице выбора типа конфигурации нажмите кнопку **Далее**.  
  
9. На странице выбора свойств для экспорта раскройте разделы "DataTransfer", "Диспетчеры соединений", "Журнал учебника по развертыванию" и "Свойства", после чего установите флажок **Строка подключения** .  
  
10. В разделе "Диспетчеры соединений" разверните узел "NewCustomers" и установите флажок **Строка подключения** .  
  
11. Нажмите кнопку **Далее**.  
  
12. На странице «Завершение работы мастера» в окне **Имя конфигурации** введите **DataTransfer Configuration** , проверьте содержимое конфигурации и нажмите кнопку **Готово**.  
  
13. В диалоговом окне **Организатор конфигурации пакетов** убедитесь, что конфигурация DataTransfer EV Configuration находится на первом месте в списке, а DataTransfer Configuration на втором, и нажмите кнопку **Закрыть**.  
  
### <a name="to-create-indirect-configuration-for-the-loadxmldata-package"></a>Создание косвенной конфигурации для пакета LoadXMLData  
  
1.  В обозревателе решений дважды щелкните LoadXMLData.dtsx.  
  
2.  В конструкторе служб [!INCLUDE[ssIS](../includes/ssis-md.md)] щелкните в области конструктора потока управления.  
  
3.  В меню **Службы SSIS** выберите команду **Конфигурации пакетов**.  
  
4.  В диалоговом окне **Организатор конфигурации пакетов**нажмите кнопку **Добавить**.  
  
5.  На странице приветствия мастера настройки пакета нажмите кнопку **Далее**.  
  
6.  На странице выбора типа конфигурации в списке **Тип конфигурации** выберите **XML-файл конфигурации** , выберите параметр **Сведения о расположении файла конфигурации хранятся в переменной среды** и введите **LoadXMLData** или выберите переменную среды **LoadXMLData** из списка.  
  
    > [!NOTE]  
    > Чтобы переменная среды была доступна в списке, после добавления переменной может потребоваться перезагрузка компьютера.  
  
7.  Нажмите кнопку **Далее**.  
  
8.  На странице «Завершение работы мастера» в окне **Имя конфигурации** введите **LoadXMLData EV Configuration** , проверьте содержимое конфигурации и нажмите кнопку **Готово**.  
  
### <a name="to-create-the-xml-configuration-for-the-loadxmldata-package"></a>Создание XML-конфигурации для пакета LoadXMLData  
  
1.  В обозревателе решений дважды щелкните LoadXMLData.dtsx.  
  
2.  В конструкторе служб [!INCLUDE[ssIS](../includes/ssis-md.md)] щелкните в области конструктора потока управления.  
  
3.  В меню **Службы SSIS** выберите команду **Конфигурации пакетов**.  
  
4.  В диалоговом окне "Организатор конфигурации пакетов" установите флажок **Включить конфигурации пакетов** и нажмите кнопку **Добавить**.  
  
5.  На странице приветствия мастера настройки пакета нажмите кнопку **Далее**.  
  
6.  На странице выбора типа конфигурации в списке **Тип конфигурации** выберите **XML-файл конфигурации** и нажмите кнопку **Обзор**.  
  
7.  В диалоговом окне **Выберите расположение файла конфигурации** укажите путь к папке C:\DeploymentTutorial и в поле **Имя файла** введите **LoadXMLDataConfig** , после чего нажмите кнопку **Сохранить**.  
  
8.  На странице выбора типа конфигурации нажмите кнопку **Далее**.  
  
9. На странице выбора свойств для экспорта разверните узлы "LoadXMLData", "Исполняемые объекты", "Загрузка XML-данных" и "Свойства", после чего установите флажки **[XMLSource].[XMLData]** и **[XMLSource].[XMLSchemaDefinition]** .  
  
10. Нажмите кнопку **Далее**.  
  
11. На странице «Завершение работы мастера» в окне **Имя конфигурации** введите **LoadXMLData Configuration** , проверьте содержимое конфигурации и нажмите кнопку **Готово**.  
  
12. В диалоговом окне **Организатор конфигурации пакетов** убедитесь, что конфигурация LoadXMLData EV Configuration находится на первом месте в списке, а LoadXMLData Configuration на втором, и нажмите кнопку **Закрыть**.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
[Шаг 5. Тестирование обновленных пакетов](../integration-services/lesson-1-5-testing-the-updated-packages.md)  
  
## <a name="see-also"></a>См. также  
[Конфигурации пакета](../integration-services/packages/package-configurations.md)  
[Создание конфигурации пакетов](../integration-services/packages/create-package-configurations.md)  
[Доступ к файлам, используемым пакетами](../integration-services/security/security-overview-integration-services.md#files)  
