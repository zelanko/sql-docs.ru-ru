---
title: Установка задачи "Профилирование данных" | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- Data Profiling task [Integration Services], configuring
ms.assetid: fe050ca4-fe45-43d7-afa9-99478041f9a8
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 0230354bfe53de8c362bcdb70caa597652706ee2
ms.sourcegitcommit: b2e81cb349eecacee91cd3766410ffb3677ad7e2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "71293984"
---
# <a name="setup-of-the-data-profiling-task"></a>Установка задачи «Профилирование данных»

[!INCLUDE[ssis-appliesto](../../includes/ssis-appliesto-ssvrpluslinux-asdb-asdw-xxx.md)]


  Перед просмотром профиля исходных данных необходимо сначала настроить и выполнить задачу «Профилирование данных». Эта задача создается в пакете служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Задача «Профилирование данных» настраивается с помощью редактора задачи «Профилирование данных». Этот редактор позволяет выбрать расположение, в которое будут выводиться профили, в том числе профили, требуемые для вычисления. После настройки задачи запускается пакет, вычисляющий профили данных.  
  
## <a name="requirements-and-limitations"></a>Требования и ограничения  
 Задача «Профилирование данных» работает только с данными, хранящимися в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Она не работает с источниками данных сторонних разработчиков и с файловыми источниками данных.  
  
 Кроме того, для запуска пакета, содержащего задачу «Профилирование данных», необходимо использовать учетную запись с разрешениями на чтение и запись базы данных tempdb, включая разрешение CREATE TABLE.  
  
## <a name="data-profiling-task-in-a-package"></a>Задача «Профилирование данных» в пакете  
 Задача «Профилирование данных» только настраивает профили и создает выходной файл, который содержит вычисляемые профили. Для просмотра этого файла используется средство просмотра профиля данных (изолированная программа просмотра). Поскольку выходные данные следует просматривать раздельно, задачу «Профилирование данных» можно использовать в пакете, не содержащем других задач.  
  
 Однако не обязательно использовать задачу «Профилирование данных» в качестве единственной задачи в пакете. Если необходимо выполнить профилирование данных в рабочем процессе или потоке данных более сложного пакета, можно использовать один из следующих режимов:  
  
-   Чтобы реализовать условную логику, основанную на выходном файле задачи, поместите в потоке управления пакета задачу «Скрипт» после задачи «Профилирование данных». После этого можно использовать данную задачу «Скрипт» для выполнения запросов к выходному файлу.  
  
-   Для профилирования данных в потоке данных после их загрузки и преобразования необходимо временно сохранить измененные данные в таблице [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . После этого можно выполнить профилирование сохраненных данных.  
  
 Дополнительные сведения см. в разделе [Включение задачи "Профилирование данных" в рабочий процесс пакета](../../integration-services/control-flow/incorporate-a-data-profiling-task-in-package-workflow.md).  
  
## <a name="setup-of-the-task-output"></a>Настройка выходных данных задачи  
 После добавления в пакет задачи «Профилирование данных» необходимо настроить файл выходных данных для профилей, которые будет вычислять эта задача. Для настройки выходного формата профилей используется страница **Общие** редактора задачи "Профилирование данных". Помимо указания целевого объекта для выходных данных, на странице **Общие** предусмотрена возможность выбора быстрого профиля данных. При выборе функции **Быстрый профиль** задача "Профилирование данных" профилирует таблицу или представление с использованием некоторых или всех профилей и их параметров по умолчанию.  
  
 Дополнительные сведения см. в разделе [Редактор задачи "Профилирование данных" (страница "Общие")](../../integration-services/control-flow/data-profiling-task-editor-general-page.md) и [Форма быстрого профиля одной таблицы (задача "Профилирование данных")](../../integration-services/control-flow/single-table-quick-profile-form-data-profiling-task.md).  
  
> [!IMPORTANT]  
>  В выходном файле могут содержаться конфиденциальные данные о базе данных и о содержащихся в ней данных. Рекомендации по повышению защищенности этого файла см. в разделе [Доступ к файлам, используемым пакетами](../../integration-services/security/security-overview-integration-services.md#files).  
  
## <a name="selection-and-configuration-of-the-profiles-to-be-computed"></a>Выбор и настройка профилей для вычисления  
 После настройки файла выходных данных необходимо выбрать профили данных для вычисления. Задача «Профилирование данных» может вычислять восемь различных профилей данных. Пять из них анализируют отдельные столбцы, а остальные три анализируют несколько столбцов или связи между столбцами и таблицами. В рамках одной задачи «Профилирование данных» можно вычислить несколько профилей для нескольких столбцов или сочетаний столбцов из нескольких таблиц или представлений.  
  
 В приведенной ниже таблице описаны отчеты, вычисляемые каждым из этих профилей, а также типы данных, для которых профиль является допустимым.  
  
|Для вычисления|Это позволяет определить|Используемый профиль|  
|----------------|-------------------------|----------------------|  
|Все различающиеся размеры строковых значений в выбранном столбце, а также процентную долю строк в таблице, которые представляют каждый размер.|**Недопустимые строковые значения** — например, профилируется столбец, который должен содержать двухсимвольные коды штатов США, но обнаружены значения длиной более двух символов.|**Распределение длины столбцов** — допустимо для столбцов с символьными данными одного из следующих типов:<br /><br /> **char**<br /><br /> **nchar**<br /><br /> **varchar**<br /><br /> **nvarchar**|  
|Набор регулярных выражений, охватывающий указанную процентную долю значений строкового столбца.<br /><br /> Кроме того, для поиска регулярных выражений, которые могут быть использованы в будущем для проверки новых значений.|**Недопустимые строковые значения или значения, имеющие неверный формат, —** . Например, шаблон профиля столбца почтового индекса может выдавать регулярные выражения: \d{5}-\d{4}, \d{5} и \d{9}. Если выходные данные содержат другие регулярные выражения, то данные, содержащие значения, либо недопустимы, либо имеют неверный формат.|**Профиль шаблона столбца** — допустимо для столбцов с символьными данными одного из следующих типов:<br /><br /> **char**<br /><br /> **nchar**<br /><br /> **varchar**<br /><br /> **nvarchar**|  
|Процент значений NULL в выбранном столбце.|**Неожиданно высокое соотношение значений NULL в столбце** — например, профилируется столбец, который должен содержать почтовые индексы штатов США, но обнаружено неприемлемо много отсутствующих почтовых индексов.|**Соотношение значений NULL в столбце** — допустимо для столбцов с данными одного из следующих типов:<br /><br /> **image**<br /><br /> **text**<br /><br /> **xml**<br /><br /> определяемые пользователем типы<br /><br /> типы variant.|  
|Статистические данные, такие как минимальное, максимальное, среднее и стандартное отклонение для числовых столбцов, а также минимальное и максимальное значение для столбцов **datetime** .|**Недопустимые числовые значения и даты** — например, профилируется столбец исторических дат, и при этом оказывается, что самая поздняя дата относится к будущему.|**Профиль статистики столбцов** — допустимо для столбцов с данными одного из следующих типов.<br /><br /> Числовые типы данных:<br /><br /> целочисленные типы (кроме **бит**)<br /><br /> **money**<br /><br /> **smallmoney**<br /><br /> **decimal**<br /><br /> **float**<br /><br /> **real**<br /><br /> **numeric**<br /><br /> Типы данных даты и времени:<br /><br /> **datetime**<br /><br /> **smalldatetime**<br /><br /> **timestamp**<br /><br /> **date**<br /><br /> **time**<br /><br /> **datetime2**<br /><br /> **datetimeoffset**<br /><br /> Примечание. Для столбца с типом данных date и time профиль вычисляет только минимальные и максимальные значения.|  
|Все различающиеся значения в выбранном столбце, а также процентную долю строк в таблице, которые представляет каждое значение. Кроме того, все значения, представляющие больший процент, чем указано в таблице.|**Неверное число различающихся значений в столбце** — например, профилируется столбец, который содержит штаты США, но найдено более 50 различных значений.|**Распределение значений столбцов** — допустимо для столбцов с данными одного из следующих типов.<br /><br /> Числовые типы данных:<br /><br /> целочисленные типы (кроме **бит**)<br /><br /> **money**<br /><br /> **smallmoney**<br /><br /> **decimal**<br /><br /> **float**<br /><br /> **real**<br /><br /> **numeric**<br /><br /> Символьные типы данных:<br /><br /> **char**<br /><br /> **nchar**<br /><br /> **varchar**<br /><br /> **nvarchar**<br /><br /> Типы данных даты и времени:<br /><br /> **datetime**<br /><br /> **smalldatetime**<br /><br /> **timestamp**<br /><br /> **date**<br /><br /> **time**<br /><br /> **datetime2**<br /><br /> **datetimeoffset**|  
|Является ли столбец или набор столбцов ключом или приблизительным ключом для выбранной таблицы.|**Повторяющиеся значения в потенциальном ключевом столбце** — например, при профилировании столбцов Name и Address в таблице Customers обнаруживаются повторяющиеся значения там, где сочетания имени и адреса должны быть уникальными.|**Потенциальный ключ** — профиль с несколькими столбцами, в котором показано, подходит ли столбец или набор столбцов для роли ключевого столбца в выбранной таблице. Допустимо для столбцов с данными одного из следующих типов.<br /><br /> Целочисленные типы данных:<br /><br /> **bit**<br /><br /> **tinyint**<br /><br /> **smallint**<br /><br /> **int**<br /><br /> **bigint**<br /><br /> Символьные типы данных:<br /><br /> **char**<br /><br /> **nchar**<br /><br /> **varchar**<br /><br /> **nvarchar**<br /><br /> Типы данных даты и времени:<br /><br /> **datetime**<br /><br /> **smalldatetime**<br /><br /> **timestamp**<br /><br /> **date**<br /><br /> **time**<br /><br /> **datetime2**<br /><br /> **datetimeoffset**|  
|Экстент, в котором значения одного столбца (зависимого) зависят от другого столбца или набора столбцов (определяющего столбца).|**Значения, которые являются недопустимыми в зависимых столбцах** — например, при профилировании зависимости между столбцом с почтовыми индексами США и столбцом, содержащим штаты. Каждому штату соответствует только один почтовый индекс. Однако профиль обнаружил нарушение зависимости.|**Функциональная зависимость** — допустимо для столбцов с данными одного из следующих типов.<br /><br /> Целочисленные типы данных:<br /><br /> **bit**<br /><br /> **tinyint**<br /><br /> **smallint**<br /><br /> **int**<br /><br /> **bigint**<br /><br /> Символьные типы данных:<br /><br /> **char**<br /><br /> **nchar**<br /><br /> **varchar**<br /><br /> **nvarchar**<br /><br /> Типы данных даты и времени:<br /><br /> **datetime**<br /><br /> **smalldatetime**<br /><br /> **timestamp**<br /><br /> **date**<br /><br /> **time**<br /><br /> **datetime2**<br /><br /> **datetimeoffset**|  
|Способность столбца или набора столбцов служить в качестве внешнего ключа для выбранных таблиц.<br /><br /> То есть этот профиль сообщает о перекрытии значений между двумя столбцами или наборами столбцов.|**Недопустимые значения** — например, профилируется столбец ProductID таблицы Sales. Профиль определяет, что в столбце содержатся значения, отсутствующие в столбце ProductID таблицы Products.|**Включение значений** — допустимо для столбцов с данными одного из следующих типов:<br /><br /> Целочисленные типы данных:<br /><br /> **bit**<br /><br /> **tinyint**<br /><br /> **smallint**<br /><br /> **int**<br /><br /> **bigint**<br /><br /> Символьные типы данных:<br /><br /> **char**<br /><br /> **nchar**<br /><br /> **varchar**<br /><br /> **nvarchar**<br /><br /> Типы данных даты и времени:<br /><br /> **datetime**<br /><br /> **smalldatetime**<br /><br /> **timestamp**<br /><br /> **date**<br /><br /> **time**<br /><br /> **datetime2**<br /><br /> **datetimeoffset**|  
  
 Профили для вычисления выбираются на странице **Запросы профиля** в редакторе задачи "Профилирование данных". Дополнительные сведения см. в разделе [Редактор задачи "Профилирование данных" (страница "Запросы профиля")](../../integration-services/control-flow/data-profiling-task-editor-profile-requests-page.md).  
  
 Кроме того, на странице **Запрос профиля** можно задать источник данных и настроить профили данных. При настройке задачи необходимо учитывать следующие сведения:  
  
-   Чтобы выполнить простую настройку и упростить обнаружение характеристик незнакомых данных, можно использовать символ-шаблон **(\*)** вместо имени отдельного столбца. При использовании этого шаблона задача будет профилировать все столбцы, содержащие данные соответствующего типа, что может снизить скорость обработки.  
  
-   Если выбранная таблица или представление пусты, задача «Профилирование данных» не вычисляет никакие профили.  
  
-   Когда все значения в выбранном столбце являются значениями NULL, то задача «Профилирование данных» вычисляет только профиль соотношения значений NULL в столбцах. Она не вычисляет профиль распределения длины столбцов, профиль шаблона столбцов, профиль статистики столбцов и профиль распределения значений столбцов для пустого столбца.  
  
 Для каждого из доступных профилей данных предусмотрены свои параметры конфигурации. Дополнительные сведения об этих параметрах см. в следующих разделах:  
  
-   [Параметры запроса профиля потенциальных ключей (задача "Профилирование данных")](../../integration-services/control-flow/candidate-key-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса профиля распределения длины столбцов (задача "Профилирование данных")](../../integration-services/control-flow/column-length-distribution-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса профиля соотношения значений NULL в столбцах (задача "Профилирование данных")](../../integration-services/control-flow/column-null-ratio-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса профиля шаблона столбцов (задача "Профилирование данных")](../../integration-services/control-flow/column-pattern-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса профиля статистики столбцов (задача "Профилирование данных")](../../integration-services/control-flow/column-statistics-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса профиля распределения значений в столбцах (задача "Профилирование данных")](../../integration-services/control-flow/column-value-distribution-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса для профиля функциональной зависимости (задача "Профилирование данных")](../../integration-services/control-flow/functional-dependency-profile-request-options-data-profiling-task.md)  
  
-   [Параметры запроса профиля включения значений (задача "Профилирование данных")](../../integration-services/control-flow/value-inclusion-profile-request-options-data-profiling-task.md)  
  
## <a name="execution-of-the-package-that-contains-the-data-profiling-task"></a>Выполнение пакета, содержащего задачу «Профилирование данных»  
 Задачу «Профилирование данных» можно запускать после соответствующей настройки. После запуска задача вычисляет профили данных и выводит полученные сведения в формате XML в файл или переменную пакета. Структура этого XML соответствует схеме DataProfile.xsd. Схему можно открыть в [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] или в другом редакторе схем, XML-редакторе или в редакторе текстов, например в "Блокноте". Использование этой схемы сведений о качестве данных может быть полезно в следующих случаях.  
  
-   Обмен сведениями о качестве данных внутри организации и между различными организациями.  
  
-   Построение собственных средств, работающих со сведениями о качестве данных.  
  
 Целевое пространство имен определяется в схеме как [https://schemas.microsoft.com/sqlserver/2008/DataDebugger/](https://schemas.microsoft.com/sqlserver/2008/DataDebugger/).  
  
## <a name="next-step"></a>Следующий шаг  
 [Средство просмотра профиля данных](../../integration-services/control-flow/data-profile-viewer.md)  
  
  
