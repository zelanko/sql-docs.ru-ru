---
title: Задача "FTP" | Документы Майкрософт
ms.custom: ''
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.ftptask.f1
- sql13.dts.designer.ftptask.general.f1
- sql13.dts.designer.ftptask.filetransfer.f1
helpviewer_keywords:
- FTP task [Integration Services]
ms.assetid: 41c3f2c4-ee04-460a-9822-bb9ae4036c2e
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.openlocfilehash: 52f86e1750858ec7fabcb8fab30dcd23b4306ace
ms.sourcegitcommit: 2429fbcdb751211313bd655a4825ffb33354bda3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2018
ms.locfileid: "52509434"
---
# <a name="ftp-task"></a>Задача «FTP»
  Задача «FTP» производит загрузку и передачу файлов данных, а также управляет каталогами на серверах. Например, пакет может загрузить файлы данных с удаленного сервера или из Интернета в качестве части рабочего процесса пакета служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Можно использовать задачу «FTP» для следующих целей:  
  
-   Копирование каталогов и файлов данных из одного каталога в другой перед или после перемещения данных, а также применение преобразований данных.  
  
-   Вход на источник FTP и копирование файлов или пакетов в целевой каталог.  
  
-   Загрузка файлов из расположения FTP и применение преобразований столбцов данных перед загрузкой данных в базу данных.  
  
 Во время выполнения задача «FTP» подключается к серверу, используя диспетчер FTP-соединений. Настройка диспетчера FTP-сеансов производится отдельно от задачи «FTP», затем в задаче «FTP» указывается ссылка на диспетчера. Диспетчер FTP-соединений включает в себя настройки сервера, учетные данные для доступа на FTP-узел, а также такие параметры, как время ожидания и количество повторных попыток подключения к серверу. Дополнительные сведения см. в статье [Диспетчер FTP-соединений](../../integration-services/connection-manager/ftp-connection-manager.md).  
  
> [!IMPORTANT]  
>  Диспетчер FTP-соединений поддерживает только анонимную проверку подлинности и обычную проверку подлинности. Проверка подлинности Windows не поддерживается.  
  
 При доступе к локальному файлу или локальному каталогу, задача «FTP» использует диспетчер подключения файлов или сведения о пути, хранимые в переменной. При доступе к удаленному файлу или удаленному каталогу, задача «FTP» использует явно указанный путь удаленного сервера, который указан в диспетчере FTP-соединений, или сведения о пути, хранимые в переменной. Дополнительные сведения см. в разделах [Диспетчер соединения файлов](../../integration-services/connection-manager/file-connection-manager.md) и [Переменные в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-variables.md).  
  
 Это значит, что задача «FTP» может получать несколько файлов и удалять несколько удаленных файлов, однако задача может посылать только один файл и удалять только один локальный файл, если она использует диспетчер подключения, т.к. диспетчер подключения файлов может обращаться только к одному файлу. Для обращения к нескольким локальным файлам, задача «FTP» должна использовать переменную для предоставления сведений о пути. Например, переменная, содержащая "C:\Test\\*.txt", предоставляет путь, который поддерживает удаление или отправку всех файлов каталога Test, которые имеют расширение TXT.  
  
 Для отправки нескольких файлов и для доступа к нескольким локальным файлам или каталогам, также можно выполнить задачу «FTP» несколько раз, включив ее в контейнер «цикл по каждому элементу». Контейнер «цикл по каждому элементу» может произвести перечисление файлов каталога, используя перечислитель For Each File. Дополнительные сведения см. в статье [Foreach Loop Container](../../integration-services/control-flow/foreach-loop-container.md).  
  
 Задача «FTP» поддерживает в пути символы-шаблоны *?* и *\** . Это позволяет задаче обращаться к нескольким файлам. Однако можно использовать символы-шаблоны только в той части пути, которая указывает имя файла. Например, "C:\MyDirectory\\*.txt" является допустимым путем, а "C:\\\*\MyText.txt" — нет.  
  
 Операции FTP могут быть настроены для остановки задачи «Файловая система» при ошибке операции или для переноса файлов в режиме ASCII. Операции, которые отправляют и получают файлы, могут быть настроены для перезаписи целевых файлов и каталогов.  
  
## <a name="predefined-ftp-operations"></a>Стандартные FTP-операции  
 Задача «FTP» содержит стандартный набор операций. Данные операции описываются в следующей таблице.  
  
|Операция|Описание|  
|---------------|-----------------|  
|Отправить файлы|Отправляет файл с локального компьютера на FTP-сервер.|  
|Получить файлы|Сохраняет файл с FTP-сервера на локальный компьютер.|  
|Создать локальный каталог|Создает каталог на локальном компьютере.|  
|Создать удаленный каталог|Создает каталог на FTP-сервере.|  
|Удалить локальный каталог|Удаляет каталог на локальном компьютере.|  
|Удалить удаленный каталог|Удаляет каталог на FTP-сервере.|  
|Удалить локальные файлы|Удаляет файл на локальном компьютере.|  
|Удалить удаленные файлы|Удаляет файл на FTP-сервере.|  
  
## <a name="custom-log-entries-available-on-the-ftp-task"></a>Пользовательские записи журнала, доступные в задаче «FTP»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «FTP». Дополнительные сведения см. в разделе [Ведение журналов в службах Integration Services (SSIS)](../../integration-services/performance/integration-services-ssis-logging.md).  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**FTPConnectingToServer**|Указывает, что задача инициализировала соединение с FTP-сервером.|  
|**FTPOperation**|Сообщает о начале FTP-операции, выполняемой задачей, и о типе этой операции.|  
  
## <a name="related-tasks"></a>Связанные задачи  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о настройке этих свойств в конструкторе [!INCLUDE[ssIS](../../includes/ssis-md.md)] см. в разделе [Задание свойств задач или контейнеров](https://msdn.microsoft.com/library/52d47ca4-fb8c-493d-8b2b-48bb269f859b).  
  
 Дополнительные сведения о настройке этих свойств программным путем см. в разделе <xref:Microsoft.SqlServer.Dts.Tasks.FtpTask.FtpTask>.  
  
## <a name="ftp-task-editor-general-page"></a>Редактор задачи «FTP» (страница «Общие»)
  Используйте страницу **Общие** диалогового окна **Редактор задачи «FTP»** для задания диспетчера FTP-соединений, выполняющего соединение с FTP-сервером, с которым задача обменивается данными. Также здесь можно указать имя и описание задачи «FTP».  
  
### <a name="options"></a>Параметры  
 **FtpConnection**  
 Выберите существующий диспетчер подключений FTP или щелкните \<**Создать соединение...**>, чтобы создать его.  
  
> [!IMPORTANT]  
>  Диспетчер FTP-соединений поддерживает только анонимную проверку подлинности и обычную проверку подлинности. Проверка подлинности Windows не поддерживается.  
  
 **См. также**: [FTP Connection Manager](../../integration-services/connection-manager/ftp-connection-manager.md), [FTP Connection Manager Editor](../../integration-services/connection-manager/ftp-connection-manager-editor.md)  
  
 **StopOnFailure**  
 Укажите, следует ли завершить задачу «FTP» в случае ошибки операции с FTP.  
  
 **Название**  
 Задайте уникальное имя задачи «FTP». Это имя используется в качестве метки для значка задачи.  
  
> [!NOTE]  
>  Имена задач в пределах пакета должны быть уникальными.  
  
 **Описание**  
 Введите описание задачи «FTP».  
  
## <a name="ftp-task-editor-file-transfer-page"></a>Редактор задачи «FTP» (страница «Передача файлов»)
  Страница **Передача файлов** диалогового окна **Редактор задачи «FTP»** используется для настройки операции FTP, выполняемой задачей.  
  
### <a name="options"></a>Параметры  
 **IsRemotePathVariable**  
 Укажите, хранится ли удаленный путь в переменной. Это свойство имеет параметры, указанные в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**True**|Целевой путь хранится в переменной. Выбор этого значения отображает динамический параметр **RemoteVariable**.|  
|**False**|Целевой путь задается в диспетчере подключения файлов. Выбор этого значения отображает динамический параметр **RemotePath**.|  
  
 **OverwriteFileAtDestination**  
 Задайте, можно ли заменять файл в месте назначения.  
  
 **IsLocalPathVariable**  
 Укажите, хранится ли локальный путь в переменной. Это свойство имеет параметры, указанные в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**True**|Целевой путь хранится в переменной. Выбор этого значения отображает динамический параметр **LocalVariable**.|  
|**False**|Целевой путь задается в диспетчере подключения файлов. Выбор этого значения отображает динамический параметр **LocalPath**.|  
  
 **Операция**  
 Выберите операцию протокола FTP для выполнения. Это свойство имеет параметры, указанные в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**Отправить файлы**|Отправляет файлы. При выборе этого значения выводятся динамические параметры **LocalVariable**, **LocalPathRemoteVariable** и **RemotePath**.|  
|**Получить файлы**|Получает файлы. При выборе этого значения выводятся динамические параметры **LocalVariable**, **LocalPathRemoteVariable** и **RemotePath**.|  
|**Создать локальный каталог**|Создает локальный каталог. При выборе этого значения выводятся динамические параметры **LocalVariable** и **LocalPath**.|  
|**Создать удаленный каталог**|Создает удаленный каталог. При выборе этого значения выводятся динамические параметры **RemoteVariable** и **RemoteIPath**.|  
|**Удалить локальный каталог**|Удаляет локальный каталог. При выборе этого значения выводятся динамические параметры **LocalVariable** и **LocalPath**.|  
|**Удалить удаленный каталог**|Удаляет удаленный каталог. При выборе этого значения выводятся динамические параметры **RemoteVariable** и **RemotePath**.|  
|**Удалить локальные файлы**|Удаляет локальные файлы. При выборе этого значения выводятся динамические параметры **LocalVariable** и **LocalPath**.|  
|**Удалить удаленные файлы**|Удаляет удаленные файлы. При выборе этого значения выводятся динамические параметры **RemoteVariable** и **RemotePath**.|  
  
 **IsTransferASCII**  
 Укажите, должны ли файлы, передаваемые на и с удаленного FTP-сервера, передаваться в режиме ASCII.  
  
### <a name="isremotepathvariable-dynamic-options"></a>Динамические параметры IsRemotePathVariable  
  
#### <a name="isremotepathvariable--true"></a>IsRemotePathVariable = True  
 **RemoteVariable**  
 Выберите существующую пользовательскую переменную или щелкните \<**Создать переменную...**>, чтобы создать ее.  
  
 **См. также:** [Переменные в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-variables.md), Добавление переменной  
  
#### <a name="isremotepathvariable--false"></a>IsRemotePathVariable = False  
 **RemotePath**  
 Выберите существующий диспетчер подключений FTP или щелкните \<**Создать соединение...**>, чтобы создать его.  
  
 **См. также:** [Диспетчер FTP-соединений](../../integration-services/connection-manager/ftp-connection-manager.md), [Редактор диспетчера FTP-сеансов](../../integration-services/connection-manager/ftp-connection-manager-editor.md)  
  
### <a name="islocalpathvariable-dynamic-options"></a>Динамические параметры IsLocalPathVariable  
  
#### <a name="islocalpathvariable--true"></a>IsLocalPathVariable = True  
 **LocalVariable**  
 Выберите существующую пользовательскую переменную или щелкните \<**Создать переменную...**>, чтобы создать ее.  
  
 **См. также:** [Переменные в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-variables.md), Добавление переменной  
  
#### <a name="islocalpathvariable--false"></a>IsLocalPathVariable = False  
 **LocalPath**  
 Выберите существующий диспетчер подключений файлов или щелкните \<**Создать подключение...**>, чтобы создать его.  
  
 **См. также:** [Диспетчер соединений с неструктурированными файлами](../../integration-services/connection-manager/flat-file-connection-manager.md)  
  
## <a name="see-also"></a>См. также:  
 [Задачи служб Integration Services](../../integration-services/control-flow/integration-services-tasks.md)   
 [Поток управления](../../integration-services/control-flow/control-flow.md)  
  
  
