---
title: Отладка потока управления | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.setbreakpoints.f1
helpviewer_keywords:
- progress reporting [Integration Services]
- breakpoints [Integration Services]
- debugging [Integration Services], control flow
- control flow [Integration Services], debugging
- color-coded progress reporting [Integration Services]
- Set Breakpoints dialog box
ms.assetid: 54a458cc-9f4f-4b48-8cf2-db2e0fa7756c
author: janinezhang
ms.author: janinez
manager: craigg
ms.openlocfilehash: 6fe2095d7e5bdd47a4442084b9d75c6880a64cfc
ms.sourcegitcommit: fd71d04a9d30a9927cbfff645750ac9d5d5e5ee7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2019
ms.locfileid: "65713711"
---
# <a name="debugging-control-flow"></a>Отладка потока управления

[!INCLUDE[ssis-appliesto](../../includes/ssis-appliesto-ssvrpluslinux-asdb-asdw-xxx.md)]


  [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] и [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] включают функции и инструменты, которые можно использовать для устранения неполадок потока управления в пакете [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].  
  
-   [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] поддерживают точки останова в контейнерах и задачах.  
  
-   [!INCLUDE[ssIS](../../includes/ssis-md.md)] во время выполнения предоставляет отчет о ходе выполнения.  
  
-   [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] предоставляет окна отладки.  
  
## <a name="breakpoints"></a>Точки останова  
 [!INCLUDE[ssIS](../../includes/ssis-md.md)] предоставляет диалоговое окно **Задание точек останова** , в котором можно установить точки останова по следующим критериям: выполнение определенного внутреннего условия и количество проходов по данной точке до приостановления выполнения пакета. Точки останова могут быть установлены на уровне пакета или на уровне компонента. Если условие останова установлено на уровне задачи или контейнера, то значок точки останова отображается рядом с задачей или контейнером в области конструктора на вкладке **Поток управления** . Если условие останова установлено на уровне пакета, то значок точки останова отображается в метке вкладки **Поток управления** .  
  
 При остановке выполнения в заданной точке значок точки останова изменяется, чтобы помочь определить причину останова. Во время выполнения пакета можно изменить условие останова, добавить или удалить точку останова.  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] предлагают десять условий останова, которые можно установить для всех задач и контейнеров. В диалоговом окне **Задание точек останова** можно установить точки останова по следующим условиям.  
  
|Условие останова|Описание|  
|---------------------|-----------------|  
|Задача или контейнер получает событие **OnPreExecute** .|Вызывается в момент запуска задачи. Это событие возникает непосредственно перед тем, как задача или контейнер начнет свое выполнение.|  
|Задача или контейнер получает событие **OnPostExecute** .|Вызывается сразу после того, как задача завершит свою работу. Это событие возникает сразу после того, как задача или контейнер завершит свое выполнение.|  
|Задача или контейнер получает событие **OnError** .|Вызывается задачей или контейнером при возникновении ошибки.|  
|Задача или контейнер получает событие **OnWarning** .|Вызывается, когда задача находится в состоянии, еще не подтверждающем ошибку, но уже требующем передачи предупреждения.|  
|Задача или контейнер получает событие **OnInformation** .|Вызывается, когда от задачи требуется передача сведений.|  
|Задача или контейнер получает событие **OnTaskFailed** .|Вызывается сервером задач при возникновении ошибки.|  
|Задача или контейнер получает событие **OnProgress** .|Вызывается для обновления информации о ходе выполнения задачи.|  
|Задача или контейнер получает событие **OnQueryCancel** .|Вызывается в любой момент обработки задачи, когда необходимо отменить ее выполнение.|  
|Задача или контейнер получает событие **OnVariableValueChanged** .|Вызывается средой во время выполнения служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , когда изменяется значение переменной. Чтобы вызвать данное событие, для свойства RaiseChangeEvent переменной необходимо установить значение **true** .<br /><br /> **&#42;&#42; Предупреждение. &#42;&#42;** Переменная, связанная с этой точкой останова, должна быть определена в области **контейнера**. Если переменная определена в области пакета, точка останова не достигается.|  
|Задача или контейнер получает событие **OnCustomEvent** .|Вызывается задачей для вызова пользовательского события, определенного для данной задачи.|  
  
 В дополнение к условиям останова, доступным для всех задач и контейнеров, некоторые задачи и контейнеры имеют дополнительные условия останова для установки точек останова. Например, можно активировать условия останова в контейнере «цикл по элементам», который задает точку останова, приостанавливающую выполнение в начале каждой итерации цикла.  
  
 Для повышения гибкости и функциональности можно изменить поведение точки останова с помощью настройки следующих параметров.  
  
-   Число попаданий или максимальное количество попаданий в заданную точку останова, после достижения которого выполнение приостанавливается.  
  
-   Тип счетчика попаданий или правило, определяющее, когда условие останова запускает точку останова.  
  
 Типы счетчика попаданий, кроме типа Always, уточняются числом попаданий. Например, если тип — «Число попаданий» и число попаданий — 5, то выполнение будет остановлено на 6-м событии условия останова.  
  
 В следующей таблице описываются типы счетчика попаданий.  
  
|Тип счетчика попаданий|Описание|  
|--------------------|-----------------|  
|Всегда|Выполнение приостанавливается при каждом попадании в точку останова.|  
|Число попаданий|Выполнение приостанавливается, если число попаданий в точку останова равно значению счетчика попаданий.|  
|Число попаданий больше или равно|Выполнение приостанавливается, если число попаданий в точку останова становится равным или больше значения, заданного счетчиком попаданий.|  
|Число попаданий кратно|Выполнение приостанавливается, если число попаданий в точку останова кратно установленному. Например, если значение этого параметра равно 5, выполнение приостанавливается на каждой пятой точке прерывания.|  
  
#### <a name="to-set-breakpoints"></a>Задание точки останова  
  
-   [Выполнение отладки пакета путем установки точек останова для задачи или контейнера](#debug)  
  
## <a name="progress-reporting"></a>Отчет о состоянии  
 [!INCLUDE[ssIS](../../includes/ssis-md.md)] Конструктор включает два типа отчетов о состоянии: выделение цветом в области конструктора на вкладке **Поток управления** и сообщения о состоянии на вкладке **Выполнение** .  
  
 Когда пакет выполняется, конструктор служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] отображает ход выполнения каждой задачи или контейнера при помощи цвета, определяющего состояние выполнения. По этому цвету можно определить, ожидает ли элемент выполнения или выполняется в данный момент, завершилось ли его выполнение успешно или с ошибкой. После того, как выполнение пакета останавливается, выделение цветом исчезает.  
  
 Следующая таблица описывает цвета, используемые для отображения состояния.  
  
|Color|Состояние выполнения|  
|-----------|----------------------|  
|Серый|Ожидание выполнения|  
|Желтый|Запущен|  
|Зеленый|Успешное завершение|  
|выделенный текст|Завершение с ошибками|  
  
 Вкладка **Выполнение** содержит список задач и контейнеров в порядке их выполнения, а также время запуска и завершения выполнения, предупреждения и сообщения об ошибках. После того как выполнение пакета остановлено, данные о ходе выполнения могут быть получены на вкладке **Результаты выполнения** .  
  
> [!NOTE]  
>  Чтобы включить или отключить отображение сообщений на вкладке **Выполнение** , установите или снимите флажок **Отчет о ходе отладки** в меню **Службы SSIS** .  
  
 Вкладка **Выполнение** показана на следующей диаграмме.  
  
 ![Вкладка "Ход выполнения" конструктора служб SSIS](../../integration-services/troubleshooting/media/mw-dtsflow04.gif "Вкладка \"Ход выполнения\" конструктора служб SSIS")  
  
## <a name="debug-windows"></a>Окна отладки  
 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] содержит много окон, которые можно использовать для работы с точками останова и для отладки пакетов, содержащих точки останова. Чтобы получить больше информации по каждому из окон, откройте окно и нажмите клавишу F1 для получения справки.  
  
 Для открытия этих окон в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], выберите меню **Отладка** , выберите пункт **Окна**и выберите пункт **Точки останова**, **Вывод**или **Немедленно**.  
  
 В следующей таблице приводятся описания этих окон.  
  
|Окно|Описание|  
|------------|-----------------|  
|Точки останова|Содержит список точек останова пакета и позволяет устанавливать и удалять точки останова.|  
|Вывод|Отображает сообщения о состоянии объектов [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].|  
|Немедленно|Используется для отладки и вычисления выражений и вывода значений переменных.|  

## <a name="debug"></a> Выполнение отладки пакета путем установки точек останова для задачи или контейнера
  Эта процедура описывает, как установить точки останова в пакете, задаче, контейнерах «цикл по элементам», «цикл по каждому элементу» и контейнере последовательности.  
  
### <a name="to-set-breakpoints-in-a-package-a-task-or-a-container"></a>Установка точки останова в пакете, задаче или контейнере  
  
1.  В среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]откройте проект служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , содержащий необходимый пакет.  
  
2.  Дважды щелкните пакет, для которого следует установить точки останова.  
  
3.  В конструкторе служб SSIS сделайте следующее.  
  
    -   Чтобы установить точки останова в объекте пакета, перейдите на вкладку **Поток управления** , поместите курсор где-либо на заднем плане области конструктора, щелкните правой кнопкой мыши и выберите пункт **Изменить точки останова**.  
  
    -   Чтобы установить точки останова в потоке управления пакета, перейдите на вкладку **Поток управления** , правой кнопкой мыши щелкните задачу, контейнер "цикл по элементам", "цикл по каждому элементу" или контейнер последовательности и выберите пункт **Изменить точки останова**.  
  
    -   Чтобы установить точки останова в обработчике события, перейдите на вкладку **Обработчик события** , щелкните правой кнопкой мыши задачу, контейнер "цикл по элементам", "цикл по каждому элементу" или контейнер последовательности и выберите пункт **Изменить точки останова**.  
  
4.  В диалоговом окне **Задание точек останова \<имя контейнера>** выберите точки останова для включения.  
  
5.  При необходимости измените тип счетчика попаданий и значение числа попаданий для каждой точки останова.  
  
6.  Чтобы сохранить пакеты, выберите пункт **Сохранить выбранные элементы** в меню **Файл** .  

## <a name="set-breakpoints"></a>Задание точек останова
  Диалоговое окно **Установка точек останова** используется для указания событий, для которых будут включены точки останова, а также управления поведением точек останова.  
  
### <a name="options"></a>Параметры  
 **Enabled**  
 Выберите, чтобы включить точку останова для события.  
  
 **Условие останова**  
 Позволяет просмотреть список доступных событий, для которых можно установить точки останова.  
  
 **Тип счетчика числа попаданий**  
 Позволяет указать условия срабатывания точки останова.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**Всегда**|Выполнение приостанавливается при каждом попадании в точку останова.|  
|**Число попаданий**|Выполнение приостанавливается, если число попаданий в точку останова равно значению счетчика попаданий.|  
|**Число попаданий больше или равно**|Выполнение приостанавливается, если число попаданий в точку останова становится равным или больше значения, заданного счетчиком попаданий.|  
|**Число попаданий кратно**|Выполнение приостанавливается, если число попаданий в точку останова кратно установленному. Например, если значение этого параметра равно 5, выполнение приостанавливается на каждой пятой точке прерывания.|  
  
 **Число попаданий**  
 Позволяет задать число попаданий в точку останова, необходимое для приостановки выполнения. Этот параметр недоступен, если точка останова настроена на срабатывание всегда.  
  
## <a name="see-also"></a>См. также:  
 [Инструменты устранения неполадок при разработке пакета](../../integration-services/troubleshooting/troubleshooting-tools-for-package-development.md)  
 [Отладка скрипта с помощью точек останова в задаче и компоненте «Скрипт»](../../integration-services/extending-packages-scripting/debug-a-script-by-setting-breakpoints-in-a-script-task-and-script-component.md)   
