---
title: Создание файлов скриптов (MySQLToSQL) | Документация Майкрософт
ms.prod: sql
ms.custom: ''
ms.date: 01/19/2017
ms.reviewer: ''
ms.technology: ssma
ms.topic: conceptual
helpviewer_keywords:
- Creating script files, configuring console settings
- Creating script files, Script commands
- Creating script files, script file validation
- Creating script files, server connection parameters
ms.assetid: b4608fe7-c777-4ba5-b853-4402f02109e3
author: nahk-ivanov
ms.author: alexiva
ms.openlocfilehash: 54b8dd8d58158997793f6c32da51a10136d02fce
ms.sourcegitcommit: e8f6c51d4702c0046aec1394109bc0503ca182f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87935753"
---
# <a name="creating-script-files-mysqltosql"></a>Создание файлов скриптов (MySQLToSQL)
Первым шагом перед запуском консольного приложения SSMA является создание файла скрипта и при необходимости создание файла значения переменной и файла подключения к серверу.  
  
Файл скрипта можно разделить на три раздела: визуализациям...  
  
1.  **Конфигурация:** Позволяет пользователю задать параметры конфигурации для консольного приложения.  
  
2.  **серверы:** Позволяет пользователю задать определения исходных и целевых серверов. Это также может быть в отдельном файле соединения сервера.  
  
3.  **команды сценария:** Позволяет пользователю выполнять команды рабочего процесса SSMA.  
  
Каждый раздел подробно описан ниже:  
  
## <a name="configuring-mysql-console-settings"></a>Настройка параметров консоли MySQL  
Конфигурации скрипта отображаются в файле скрипта консоли.  
  
Если какие бы то ни было элементы указаны в узле конфигурации, они задаются как глобальные параметры, т. е. они применимы ко всем командам сценария. Эти элементы конфигурации также могут быть заданы в каждой команде в разделе сценарий-команда, если пользователь хочет переопределить глобальный параметр.  
  
Настраиваемые пользователем параметры включают:  
  
1.  **Поставщик окно вывода:** Если для атрибута подавлять-messages задано значение ' true ', сообщения, относящиеся к конкретной команде, не отображаются на консоли. Описание атрибутов указано ниже:  
  
    -   Назначение: указывает, должны ли выходные данные выводиться в файл или stdout. По умолчанию это значение равно false.  
  
    -   имя файла: путь к файлу (необязательно).  
  
    -   подавлять сообщения: подавляет сообщения в консоли. По умолчанию это значение равно false.  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <output-window  
  
        suppress-messages="<true/false>"   (optional)  
  
        destination="<file/stdout>"        (optional)  
  
        file-name="<file-name>"            (optional)  
  
       />  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <...All commands...>  
  
      <output-window  
  
         suppress-messages="<true/false>"   (optional)  
  
         destination="<file/stdout>"        (optional)  
  
         file-name="<file-name>"            (optional)  
  
       />  
  
    </...All commands...>  
    ```  
  
2.  **Поставщик подключения для переноса данных:** Указывает, какой исходный или целевой сервер следует учитывать при переносе данных.  Источник-использование — Последнее значение указывает, что последний использованный исходный сервер используется для переноса данных. Аналогичное назначение — Last-Use указывает, что последний использованный целевой сервер используется для переноса данных. Пользователь также может указать сервер (исходный или целевой) с помощью атрибутов Source-Server или Target-Server.  
  
    Можно использовать только один или другой указанный атрибут, например:  
  
    - Источник-использование-Last-used = "true" (по умолчанию) или Source-Server = "source_servername"  
  
    - Target-use-Last-used = "true" (по умолчанию) или Target-Server = "target_servername"  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <data-migration-connection  source-use-last-used="true"  
  
                                  target-server="<target-server-unique-name>"/>  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <migrate-data>  
  
      <data-migration-connection   source-server="<source-server-unique-name>"  
  
                                   target-use-last-used="true"/>  
  
    </migrate-data>  
    ```  
  
3.  **Всплывающее окно ввода пользователя:** Это позволяет обрабатывать ошибки, когда объекты загружаются из базы данных. Пользователь предоставляет режимы ввода, и в случае ошибки консоль переходит в режим пользователя.  
  
    Режимы включают:  
  
    -   **ASK-пользователь-** Предлагает пользователю продолжить ("Да") или ошибку ("No").  
  
    -   **Ошибка-** Консоль выводит сообщение об ошибке и останавливает выполнение.  
  
    -   **продолжить —** Консоль переходит к выполнению.  
  
    Режим по умолчанию — **Ошибка**.  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <user-input-popup mode="<ask-user/continue/error>"/>  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <!-- Connect to target database -->  
  
    <connect-target-database server="<target-server-unique-name>">  
  
      <user-input-popup mode="<ask-user/continue/error>"/>  
  
    </connect-target-database>  
    ```  
  
4.  **Повторное подключение поставщика:** Это позволяет пользователю задать параметры повторного подключения в случае сбоя подключения. Это значение может быть задано как для исходного, так и для целевого серверов.  
  
    Существуют следующие режимы повторного подключения:  
  
    -   Повторное подключение к последнему использованному серверу. Если соединение неактивно, оно пытается повторно подключиться к последнему серверу, который использовался в течение 5 раз.  
  
    -   Generate-a-Error: Если соединение неактивно, возникает ошибка.  
  
    Режим по умолчанию — **Generate-a-Error**.  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
    <reconnect-manager  on-source-reconnect="<reconnect-to-last-used-server/generate-an-error>"  
  
                        on-target-reconnect="<reconnect-to-last-used-server/generate-an-error>"/>  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <!--synchronization-->  
  
    <synchronize-target>  
  
      <reconnect-manager on-target-reconnect="reconnect-to-last-used-server"/>  
  
    </synchronize-target>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <!--data migration-->  
  
    <migrate-data server="target-server-unique-name">  
  
      <reconnect-manager  
  
        on-source-reconnect="reconnect-to-last-used-server"  
  
        on-target-reconnect="generate-an-error"/>  
  
    </migrate-data>  
    ```  
  
5.  **Поставщик перезаписи преобразователя:** Это позволяет пользователю выполнять обработку объектов, уже имеющихся в целевой метабазе. Возможные действия:  
  
    -   Ошибка: в консоли отображается ошибка и останавливается выполнение.  
  
    -   перезаписать: перезаписывает существующие значения объекта. Это действие выполняется по умолчанию.  
  
    -   пропустить: консоль пропускает объекты, которые уже существуют в базе данных.  
  
    -   ASK-пользователь: запрашивает у пользователя ввод ("Yes"/"No")  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <object-overwrite action="<error/skip/overwrite/ask-user>"/>  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <convert-schema object-name="<object-name>">  
  
      <object-overwrite action="<error/skip/overwrite/ask-user>"/>  
  
    </convert-schema>  
    ```  
  
6.  **Неудачный поставщик предварительных требований:** Это позволяет пользователю обрабатывать все необходимые компоненты, необходимые для обработки команды. По умолчанию для этого режима используется значение false. Если задано значение "true", создается исключение для обеспечения соответствия предварительным требованиям.  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <prerequisites strict-mode="<true/false>"/>  
  
    </output-providers>  
    ```  
  
7.  **Операция завершения:** При выполнении средней операции, если пользователь хочет прерывать операцию, можно использовать сочетание клавиш **CTRL + C** . SSMA для консоли MySQL ожидает завершения операции и прерывает выполнение консоли.  
  
    Если пользователь хочет немедленно приступить к выполнению, то сочетание клавиш **CTRL + C** можно будет снова нажать клавишу Shift для внезапного завершения работы консольного приложения SSMA  
  
8.  **Поставщик хода выполнения:** Информирует о ходе выполнения каждой команды консоли. Эта функция отключена по умолчанию. Атрибуты отчета о ходе выполнения включают:  
  
    -   off  
  
    -   каждые-1%  
  
    -   каждые-2%  
  
    -   каждые-5%  
  
    -   каждые-10%  
  
    -   каждые 20%  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <progress-reporting enable="<true/false>"          (optional)  
  
                         report-messages="<true/false>"  (optional)  
  
                         report-progress="<every-1%/every-2%/every-5%/every-10%/every-20%/off>" (optional)/>  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <...All commands...>  
  
      <progress-reporting  
  
        enable="<true/false>"              (optional)  
  
        report-messages="<true/false>"     (optional)  
  
        report-progress="<every-1%/every-2%/every-5%/every-10%/every-20%/off>"     (optional)/>  
  
    </...All commands...>  
    ```  
  
9. **Уровень детализации средства ведения журнала:** Задает уровень детализации журнала. Это соответствует параметру все категории в пользовательском интерфейсе. По умолчанию используется уровень детализации журнала "ошибка".  
  
    Параметры уровня ведения журнала включают:  
  
    -   Неустранимая ошибка: регистрируются только неустранимые сообщения об ошибках.  
  
    -   Ошибка: регистрируются только сообщения об ошибках и неустранимых ошибках.  
  
    -   внимание! регистрируются все уровни, кроме сообщений отладки и сведений.  
  
    -   INFO: регистрируются все уровни, кроме сообщений отладки.  
  
    -   Отладка: все уровни зарегистрированных сообщений.  
  
    > [!NOTE]  
    > Обязательные сообщения записываются на любом уровне.  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <log-verbosity level="<fatal-error/error/warning/info/debug>"/>  
  
    </output-providers>  
    ```  
    *или диспетчер конфигурации служб*  
  
    ```xml  
    <...All commands...>  
  
      <log-verbosity level="<fatal-error/error/warning/info/debug>"/>  
  
    </...All commands...>  
    ```  
  
10. **Переопределить зашифрованный пароль:** Если значение равно true, то пароль в формате открытого текста, указанный в разделе определения сервера файла подключения к серверу или в файле скрипта, переопределяет зашифрованный пароль, хранящийся в защищенном хранилище, если он существует. Если в открытом тексте пароль не указан, пользователю будет предложено ввести пароль.  
  
    В этом случае возникает два варианта:  
  
    1.  Если параметр override имеет **значение false**, то порядок поиска будет защищен &gt; файлом файла сценария хранения файл — &gt; файл подключения к серверу- &gt; запросить пользователя.  
  
    2.  Если параметр override имеет **значение true**, то порядок поиска будет выполняться в файле сценария файл &gt; подключения сервера — &gt; запрос пользователя.  
  
    **Пример**.  
  
    ```xml  
    <output-providers>  
  
      <encrypted-password override="<true/false>"/>  
  
    </output-providers>  
    ```  
  
Параметр без возможности настройки:  
  
-   **Максимальное число попыток повторного подключения:** Если время ожидания установленного соединения истекло из-за сбоя в сети, необходимо повторно подключить сервер. Попытки повторного подключения допускаются не более **5** повторных попыток, после чего консоль автоматически выполняет повторное подключение. Механизм автоматического повторного подключения сокращает усилия при повторном выполнении сценария.  
  
## <a name="server-connection-parameters"></a>Параметры соединения с сервером  
Параметры соединения с сервером можно определить в файле скрипта или в файле соединения с сервером. Дополнительные сведения см. в разделе [Создание файлов подключения к серверу &#40;MySQLToSQL&#41;](../../ssma/mysql/creating-the-server-connection-files-mysqltosql.md) .  
  
## <a name="script-commands"></a>Команды скриптов  
Файл скрипта содержит последовательность команд рабочего процесса миграции в формате XML. Консольное приложение SSMA обрабатывает миграцию в порядке команд, появляющихся в файле скрипта.  
  
Например, типичная миграция данных для определенной таблицы в базе данных MySQL соответствует иерархии: база данных- &gt; таблица.  
  
После успешного выполнения всех команд в файле скрипта консольное приложение SSMA завершает работу и возвращает элемент управления пользователю. Содержимое файла скрипта является более или менее статическим, если сведения о переменных содержатся либо в [файлах значений переменных](creating-variable-value-files-mysqltosql.md) , либо в отдельном разделе в файле скрипта для значений переменных.  
  
**Пример**.  
  
```xml  
<!--Sample of script file commands -->  
  
<ssma-script-file>  
  
  <script-commands>  
  
    <create-new-project project-folder="<project-folder>"  
  
                        project-name="<project-name>"  
  
                        overwrite-if-exists="<true/false>"/>  
  
    <connect-source-database server="<source-server-unique-name>"/>  
  
    <save-project/>  
  
    <close-project/>  
  
  </script-commands>  
  
</ssma-script-file>  
```  
Шаблоны, состоящие из 3 файлов сценариев (для выполнения различных сценариев), файла значений переменных и файла подключения к серверу, приведены в папке примеры сценариев консоли в каталоге продукта:  
  
-   AssessmentReportGenerationSample.xml  
  
-   ConversionAndDataMigrationSample.xml  
  
-   SqlStatementConversionSample.xml  
  
-   VariableValueFileSample.xml  
  
-   ServersConnectionFileSample.xml  
  
Вы можете выполнить шаблоны (файлы) после изменения отображаемых параметров для релевантности.  
  
Полный список команд сценария можно найти в статьях [выполнение консоли SSMA &#40;MySQLToSQL&#41;](../../ssma/mysql/executing-the-ssma-console-mysqltosql.md)  
  
## <a name="script-file-validation"></a>Проверка файла скрипта  
Пользователь может легко проверить свой файл скрипта по файлу определения схемы **2ssconsolescriptschema. xsd** , который доступен в папке Schemas.  
  
## <a name="next-step"></a>Следующий шаг  
Следующим шагом в работе консоли является [Создание файлов значений переменных &#40;MySQLToSQL&#41;](../../ssma/mysql/creating-variable-value-files-mysqltosql.md).  
  
## <a name="see-also"></a>См. также:  
[Создание файлов переменных значений &#40;MySQLToSQL&#41;](../../ssma/mysql/creating-variable-value-files-mysqltosql.md)  
  
