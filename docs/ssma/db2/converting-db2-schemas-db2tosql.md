---
title: Преобразование схем DB2 (DB2ToSQL) | Документация Майкрософт
ms.prod: sql
ms.custom: ''
ms.date: 01/19/2017
ms.reviewer: ''
ms.suite: sql
ms.technology: ssma
ms.tgt_pltfrm: ''
ms.topic: conceptual
applies_to:
- Azure SQL Database
- SQL Server
ms.assetid: 7947efc3-ca86-4ec5-87ce-7603059c75a0
caps.latest.revision: 9
author: Shamikg
ms.author: Shamikg
manager: craigg
ms.openlocfilehash: d6c63b66a52f0fbc6a676a2143299b7ee5b13208
ms.sourcegitcommit: c7a98ef59b3bc46245b8c3f5643fad85a082debe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2018
ms.locfileid: "38980706"
---
# <a name="converting-db2-schemas-db2tosql"></a>Преобразование схем DB2 (DB2ToSQL)
После подключения к DB2, подключенных к [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)], и задание проекта и параметры сопоставления данных, можно преобразовать объекты базы данных DB2 для [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] объектов базы данных.  
  
## <a name="the-conversion-process"></a>Процесс преобразования  
Преобразование объектов базы данных принимает определения объектов из DB2, преобразует их в аналогичные [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] объектов и затем загружает эту информацию в метаданные SSMA. Она не загружает данные в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)]. Затем можно просмотреть объекты и их свойства с помощью [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] обозреватель метаданных.  
  
Во время преобразования SSMA выводит сообщения об ошибках на панели списка ошибок и выходных сообщений в области вывода. Чтобы определить, есть ли у вас для изменения базы данных DB2 и процесс преобразования, чтобы получить результаты требуемое преобразование, используйте выходные данные и сведения об ошибке.  
  
## <a name="setting-conversion-options"></a>Установка параметров преобразования  
Прежде чем выполнять преобразование объектов, просмотрите параметры преобразования проекта в **параметры проекта** диалоговое окно. В этом диалоговом окне, можно задать как SSMA преобразует функции и глобальные переменные. Дополнительные сведения см. в разделе [параметры проекта &#40;преобразования&#41; &#40;DB2ToSQL&#41;](../../ssma/db2/project-settings-conversion-db2tosql.md).  
  
## <a name="conversion-results"></a>Результаты преобразования  
В следующей таблице показаны объекты DB2 преобразуются, в результате чего [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] объектов:  
  
|Объекты DB2|Полученные объекты SQL Server|  
|-----------|----------------------------|  
|Типы данных|**SSMA сопоставляет любого типа, кроме перечисленных ниже следующее:**<br /><br />CLOB: Некоторые собственные функции для работы с этим типом не поддерживается (например CLOB_EMPTY())<br /><br />BLOB-ОБЪЕКТОВ: Некоторые собственные функции для работы с этим типом не поддерживается (например BLOB_EMPTY())<br /><br />DBLOB: Некоторые собственные функции для работы с этим типом не поддерживается (например DBLOB_EMPTY())|  
|Определяемые пользователем типы|**SSMA сопоставляет следующие определяемые пользователем:**<br /><br />Отдельный тип<br /><br />Структурированный тип<br /><br />Типы данных SQL PL — Обратите внимание: тип слабые курсора не поддерживаются.|  
|Специальные регистры|**SSMA сопоставление только регистры, перечисленных ниже:**<br /><br />ТЕКУЩАЯ ОТМЕТКА ВРЕМЕНИ<br /><br />ТЕКУЩАЯ ДАТА<br /><br />ТЕКУЩЕЕ ВРЕМЯ<br /><br />ТЕКУЩИЙ ЧАСОВОЙ ПОЯС<br /><br />ТЕКУЩИЙ ПОЛЬЗОВАТЕЛЬ<br /><br />Функция SESSION_USER и пользователя<br /><br />SYSTEM_USER<br /><br />ТЕКУЩИЙ CLIENT_APPLNAME<br /><br />ТЕКУЩИЙ CLIENT_WRKSTNNAME<br /><br />ТЕКУЩЕЕ ВРЕМЯ ОЖИДАНИЯ БЛОКИРОВКИ<br /><br />ТЕКУЩАЯ СХЕМА<br /><br />ТЕКУЩИЙ СЕРВЕР<br /><br />ТЕКУЩИЙ ИЗОЛЯЦИИ<br /><br />Другие специальные регистры не сопоставлены с семантики SQL server.|  
|CREATE TABLE|**SSMA сопоставляет CREATE TABLE, за исключением следующих случаев:**<br /><br />Таблицы многомерной кластеризации (MDC)<br /><br />Диапазон кластеризованных таблиц (RCT)<br /><br />Секционированные таблицы<br /><br />Отсоединенные таблицы<br /><br />Предложение системы отслеживания ИЗМЕНЕННЫХ данных<br /><br />СКРЫТЫЕ IMPLICITLY параметр<br /><br />Параметр VOLATILE|  
|CREATE VIEW|SSMA сопоставляет CREATE VIEW с «С ЛОКАЛЬНОГО CHECK OPTION», но другие параметры не сопоставлены с семантикой SQL server|  
|CREATE INDEX|**SSMA сопоставляет CREATE INDEX, за исключением следующих случаев:**<br /><br />XML-индекс<br /><br />Параметр BUSINESS_TIME без ПЕРЕКРЫТИЯ<br /><br />СЕКЦИОНИРОВАННЫЕ предложение<br /><br />СПЕЦИФИКАЦИЯ только параметр<br /><br />РАСШИРИТЬ с помощью параметра<br /><br />Параметр MINPCTUSED<br /><br />Параметр РАЗБИЕНИЕ страницы|  
|Триггеры|**SSMA сопоставляет следующие триггерная семантика:**<br /><br />После / EACH СТРОК ТРИГГЕРОВ<br /><br />После /FOR активирует каждой инструкции<br /><br />Прежде ЧЕМ / EACH строки и ВМЕСТО / EACH СТРОК ТРИГГЕРОВ|  
|Последовательности;|Сопоставлены.|  
|Инструкция SELECT|**SSMA карт ВЫБЕРИТЕ со следующими исключениями:**<br /><br />Предложение данных изменение--ссылку на таблицу — частично сопоставлены, но ИТОГОВЫЕ таблицы не поддерживается<br /><br />Предложение ссылки на таблицу — частично сопоставлены, но только для таблицы ссылке, внешней таблицы ссылкой, analyze_table-expression, производную таблицу коллекции, xmltable выражение не сопоставлены с семантикой SQL server<br /><br />Предложение спецификации периода — не сопоставлен.<br /><br />Предложение по-прежнему обработчик — не сопоставлен.<br /><br />Предложение типизированные корреляции – не сопоставлен.<br /><br />Разрешения на доступ для одновременных предложение — не сопоставлен.|  
|Инструкция значения|Сопоставляется.|  
|Инструкция INSERT|Сопоставляется.|  
|Инструкции UPDATE|S**SMA сопоставляет обновления со следующими исключениями:**<br /><br />Предложение ссылки на таблицу — только для таблицы ссылке не сопоставлен с семантикой SQL server<br /><br />Периода предложение — не сопоставлен.|  
|Инструкция MERGE|**SSMA сопоставляет СЛИЯНИЯ за исключением следующих случаев:**<br /><br />Единый vs несколько вхождений каждого предложения — сопоставляется семантику SQL server в ограниченной вхождения каждого предложения<br /><br />Предложение СИГНАЛА — не сопоставляется с семантикой SQL Server<br /><br />Смешанные обновление и удаление предложений — не сопоставляется семантику SQL Server<br /><br />Период предложение — не сопоставляется с семантикой SQL Server|  
|Инструкция DELETE|**SSMA maps удалить за исключением следующих случаев:**<br /><br />Предложение ссылки на таблицу — только для таблицы ссылке не сопоставлен с семантикой SQL server<br /><br />Периода предложение — не сопоставляется с семантикой SQL Server|  
|Уровень изоляции и тип блокировки|Сопоставляется.|  
|Процедуры (SQL)|Сопоставлены.|  
|Процедуры (внешнее)|Требуется обновление вручную.|  
|Процедуры (источником)|Не сопоставляются семантику SQL Server.|  
|Оператор присваивания|Сопоставляется.|  
|Инструкции CALL для процедуры|Сопоставляется.|  
|Инструкция CASE |Сопоставляется.|  
|Оператор FOR|Сопоставляется.|  
|GOTO, инструкция|Сопоставляется.|  
|Инструкция IF|Сопоставляется.|  
|Инструкция ИТЕРАЦИИ|Сопоставляется.|  
|ОСТАВЬТЕ инструкции|Сопоставляется.|  
|Оператор ЦИКЛА|Сопоставляется.|  
|ПОВТОРИТЕ инструкцию|Сопоставляется.|  
|RESIGNAL инструкции|Условия не поддерживаются. Сообщения могут быть необязательным.|  
|Оператор RETURN|Сопоставляется.|  
|Инструкция СИГНАЛА|Условия не поддерживаются. Сообщения могут быть необязательным.|  
|Оператор WHILE|Сопоставляется.|  
|ДИАГНОСТИКА оператор GET|**SSMA сопоставляет получить диагностики, за исключением следующих случаев:**<br /><br />ROW_COUNT — сопоставлен.<br /><br />DB2_RETURN_STATUS — сопоставлен.<br /><br />MESSAGE_TEXT — сопоставлен.<br /><br />DB2_SQL_NESTING_LEVEL - не сопоставляется с семантикой SQL Server<br /><br />DB2_TOKEN_STRING - не сопоставляется с семантикой SQL Server|  
|Курсоры|**SSMA сопоставляет КУРСОРОВ, за исключением следующих случаев:**<br /><br />КУРСОР ВЫДЕЛЕНИЯ заявление — не сопоставляется семантику SQL Server<br /><br />СВЯЗАТЬ УКАЗАТЕЛИ заявление — не сопоставляется семантику SQL Server<br /><br />Инструкции DECLARE CURSOR - Returnability предложение не сопоставлен с семантикой SQL server<br /><br />Инструкции FETCH — частичное сопоставление. Поддерживаются только переменные в качестве целевого объекта. ДЕСКРИПТОР SQLDA не сопоставлен с семантикой SQL server|  
|Переменные|Сопоставлены.|  
|Исключения, обработчики и условия|**SSMA сопоставляет «обработка исключений», за исключением следующих случаев:**<br /><br />Выйти из обработчиков — сопоставлены.<br /><br />ОТМЕНИТЬ обработчики — сопоставлены.<br /><br />Обработчики — по-ПРЕЖНЕМУ не сопоставлены.<br /><br />Условия — он сопоставляется с семантикой SQL server.|  
|Динамические инструкции SQL|Не сопоставлен.|  
|Aliases|Сопоставлены.|  
|Псевдонимы|Частичное сопоставление. Обработка вручную не требуется для базового объекта|  
|Синонимы|Сопоставлены.|  
|Стандартные функции в DB2|SSMA сопоставляет стандартные функции DB2 при эквивалентную функцию в SQL Server:|  
|Авторизация|Не сопоставлен.|  
|Предикаты|Сопоставлены.|  
|SELECT INTO, инструкция|Не сопоставлен.|  
|ЗНАЧЕНИЯ в инструкции|Не сопоставлен.|  
|Контроле над транзакциями|Не сопоставлен.|  
  
## <a name="converting-db2-database-objects"></a>Преобразование объектов базы данных DB2  
Для преобразования объектов базы данных DB2, сначала выберите объекты, которые требуется преобразовать и затем имеют SSMA выполнить преобразование. Просмотр выходных сообщений во время преобразования, на **представление** меню, выберите **вывода**.  
  
**Для преобразования объектов DB2 с синтаксисом SQL Server**  
  
1.  В обозревателе метаданных DB2, разверните узел сервера DB2 и раскройте **схемы**.  
  
2.  Выберите объекты для преобразования:  
  
    -   Чтобы преобразовать все схемы, установите флажок рядом с полем **схемы**.  
  
    -   Чтобы преобразовать или опустить базы данных, установите флажок рядом с именем схемы.  
  
    -   Для преобразования или пропустить категории объектов, разверните схему и затем установите или снимите флажок рядом с категорией.  
  
    -   Чтобы преобразовать или исключить отдельные объекты, разверните папку «категория» и выберите или снимите флажок рядом с объектом.  
  
3.  Для преобразования всех выбранных объектов, щелкните правой кнопкой мыши **схемы** и выберите **преобразования схемы**.  
  
    Можно также преобразовать отдельных объектов или категории объектов, щелкнув правой кнопкой мыши объект или ее родительскую папку, а затем выбрав **преобразования схемы**.  
  
## <a name="viewing-conversion-problems"></a>Просмотр проблемы с преобразованием  
Некоторые объекты DB2 не могут быть преобразованы. Успех конверсии можно определить, просмотрев отчет сводки преобразования.  
  
**Чтобы просмотреть сводный отчет**  
  
1.  В обозревателе метаданных DB2 выберите **схемы**.  
  
2.  В области справа выберите **отчетов** вкладки.  
  
    Этот отчет показывает отчет об оценке сводки для всех объектов базы данных, оценивается ли или преобразованы. Можно также просмотреть сводный отчет по отдельным объектам:  
  
    -   Чтобы просмотреть отчет для отдельную схему, выберите схему в обозревателе метаданных DB2.  
  
    -   Чтобы просмотреть отчет, для отдельного объекта, выберите объект в обозревателе метаданных DB2. Объекты, имеющие проблемы с преобразованием иметь красный значок ошибки.  
  
Для объектов, которые не удалось выполнить преобразование можно просмотреть синтаксис, вызвавшую ошибку преобразования.  
  
**Для просмотра отдельных преобразования проблем**  
  
1.  В обозревателе метаданных DB2 разверните **схемы**.  
  
2.  Разверните схему, которая показывает красный значок ошибки.  
  
3.  В области схемы разверните папку с красным значком ошибки.  
  
4.  Выберите объект, который имеет красный значок ошибки.  
  
5.  В области справа щелкните **отчетов** вкладки.  
  
6.  В верхней части **отчетов** вкладка — стрелку раскрывающегося списка. Если в списке отображается **статистики**, выделение **источника**.  
  
    SSMA отобразит исходный код и несколько кнопок, расположенный непосредственно над кодом.  
  
7.  Нажмите кнопку **следующая проблема** кнопки. Это красный значок ошибки с стрелка, указывающая вправо.  
  
    SSMA будут выделите первый проблемных исходного кода, найденных в текущем объекте.  
  
Для каждого элемента, которые не могут быть преобразованы необходимо определить, что нужно сделать с помощью этого объекта:  
  
-   Можно изменить исходный код для процедуры **SQL** вкладки.  
  
-   Можно изменить объект в базе данных DB2 для удаления или изменения неисправного кода. Чтобы загрузить обновленный код в SSMA, необходимо обновить метаданные. Дополнительные сведения см. в разделе [подключение к базе данных DB2 &#40;DB2ToSQL&#41;](../../ssma/db2/connecting-to-db2-database-db2tosql.md).  
  
-   Объект можно исключить из миграции. В [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] обозревателя метаданных и обозреватель метаданных DB2, снимите флажок рядом с элементом перед загрузкой объектов в [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] и перенос данных из DB2.  
  
## <a name="next-step"></a>Следующий шаг  
Следующий шаг в процессе миграции является [загрузит преобразованные объекты в SQL Server](http://msdn.microsoft.com/f4ea1ced-9f9f-4a9d-88ab-81dbab64adc3).  
  
## <a name="see-also"></a>См. также  
[Миграция данных DB2 в SQL Server &#40;DB2ToSQL&#41;](../../ssma/db2/migrating-db2-data-into-sql-server-db2tosql.md)  
  
