---
title: Преобразование схем DB2 (DB2ToSQL) | Документация Майкрософт
ms.prod: sql
ms.custom: ''
ms.date: 01/19/2017
ms.reviewer: ''
ms.technology: ssma
ms.topic: conceptual
ms.assetid: 7947efc3-ca86-4ec5-87ce-7603059c75a0
author: nahk-ivanov
ms.author: alexiva
ms.openlocfilehash: 13afcabf85515b211d8493990a59950dc97d72f5
ms.sourcegitcommit: e8f6c51d4702c0046aec1394109bc0503ca182f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87933938"
---
# <a name="converting-db2-schemas-db2tosql"></a>Преобразование схем DB2 (DB2ToSQL)
После подключения к DB2, подключения к и [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] настройки параметров проекта и сопоставления данных можно преобразовать объекты базы данных DB2 в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] объекты базы данных.  
  
## <a name="the-conversion-process"></a>Процесс преобразования  
Преобразование объектов базы данных принимает определения объектов из DB2, преобразует их в аналогичные [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] объекты, а затем загружает эти сведения в метаданные SSMA. Он не загружает сведения в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Затем можно просмотреть объекты и их свойства с помощью [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обозревателя метаданных.  
  
Во время преобразования SSMA выводит выходные сообщения на панель вывода и сообщения об ошибках в область Список ошибок. Используйте выходные данные и сведения об ошибках, чтобы определить, нужно ли изменить базы данных DB2 или процесс преобразования, чтобы получить нужные результаты преобразования.  
  
## <a name="setting-conversion-options"></a>Настройка параметров преобразования  
Перед преобразованием объектов проверьте параметры преобразования проекта в диалоговом окне " **Параметры проекта** ". С помощью этого диалогового окна можно задать, как SSMA преобразует функции и глобальные переменные. Дополнительные сведения см. в разделе [Project Settings &#40;Conversion&#41; &#40;DB2ToSQL&#41;](../../ssma/db2/project-settings-conversion-db2tosql.md).  
  
## <a name="conversion-results"></a>Результаты преобразования  
В следующей таблице показано, какие объекты DB2 преобразованы, а также итоговые [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] объекты.  
  
|Объекты DB2|Результирующие SQL Server объекты|  
|-----------|----------------------------|  
|Типы данных|**SSMA сопоставляет каждый тип, кроме перечисленных ниже:**<br /><br />CLOB: некоторые собственные функции для работы с этим типом не поддерживаются (например, CLOB_EMPTY ())<br /><br />BLOB: некоторые собственные функции для работы с этим типом не поддерживаются (например, BLOB_EMPTY ())<br /><br />ДБЛОБ: некоторые собственные функции для работы с этим типом не поддерживаются (например, DBLOB_EMPTY ())|  
|Определяемые пользователем типы|**SSMA сопоставляет следующее определяемое пользователем:**<br /><br />Отдельный тип<br /><br />Структурированный тип<br /><br />Типы данных SQL PL — Примечание. тип нестрогого курсора не поддерживается.|  
|Специальные регистры|**SSMA сопоставляет только регистры, перечисленные ниже:**<br /><br />ТЕКУЩАЯ ОТМЕТКА ВРЕМЕНИ<br /><br />ТЕКУЩАЯ ДАТА<br /><br />ТЕКУЩЕЕ ВРЕМЯ<br /><br />ТЕКУЩИЙ ЧАСОВОЙ ПОЯС<br /><br />ТЕКУЩИЙ ПОЛЬЗОВАТЕЛЬ<br /><br />SESSION_USER и пользователь<br /><br />SYSTEM_USER<br /><br />ТЕКУЩЕЕ CLIENT_APPLNAME<br /><br />ТЕКУЩЕЕ CLIENT_WRKSTNNAME<br /><br />ТЕКУЩЕЕ ВРЕМЯ ОЖИДАНИЯ БЛОКИРОВКИ<br /><br />ТЕКУЩАЯ СХЕМА<br /><br />ТЕКУЩИЙ СЕРВЕР<br /><br />ТЕКУЩАЯ ИЗОЛЯЦИЯ<br /><br />Другие специальные регистры не сопоставлены с семантикой SQL Server.|  
|CREATE TABLE|**SSMA Maps CREATE TABLE со следующими исключениями:**<br /><br />Таблицы многомерных кластеров (MDC)<br /><br />Диапазон-кластеризованные таблицы (RCT)<br /><br />Секционированные таблицы<br /><br />Отключенная таблица<br /><br />Предложение CAPTURE данных<br /><br />Неявный скрытый параметр<br /><br />Параметр VOLATILE|  
|CREATE VIEW|SSMA Maps создает представление с ПАРАМЕТРом "с локальной ГАЛОЧКой", но другие параметры не сопоставлены с семантикой SQL Server|  
|CREATE INDEX|**SSMA Maps создает индекс со следующими исключениями:**<br /><br />XML-индекс<br /><br />Параметр BUSINESS_TIME без перекрытия<br /><br />СЕКЦИОНИРОВАНное предложение<br /><br />Параметр "только спецификация"<br /><br />РАСШИРЕНИЕ параметра USING<br /><br />МИНПКТУСЕД, параметр<br /><br />Параметр РАЗБИЕНИя страницы|  
|Триггеры|**SSMA сопоставляет следующую семантику триггера:**<br /><br />После/для каждого триггера строки<br /><br />После/фор каждый оператор активирует<br /><br />ДО/для каждой строки, а не для каждого триггера строки.|  
|Последовательности|Сопоставляются.|  
|Инструкция SELECT|**SSMA Maps SELECT со следующими исключениями:**<br /><br />Предложение "изменение данных-таблица-ссылка" — частично сопоставлено, но ОКОНЧАТЕЛЬНые таблицы не поддерживаются<br /><br />Предложение "Таблица-ссылка" — частично сопоставленное, но только табличное, ссылочное, внешнее табличное, analyze_table-Expression, коллекция-производная таблица, ксмлтабле-Expression не сопоставлена с семантикой SQL Server<br /><br />Предложение "период-спецификация" не сопоставлено.<br /><br />Предложение продолжения-обработчика — не сопоставлено.<br /><br />Предложение типизированной корреляции не сопоставлено.<br /><br />Предложение одновременного разрешения на доступ — не сопоставлено.|  
|Оператор VALUES|Сопоставлен.|  
|Инструкция INSERT|Сопоставлен.|  
|Инструкция UPDATE|**Карты SMA обновляются со следующими исключениями:**<br /><br />Предложение "Таблица-ссылка" — только табличная ссылка не сопоставлена с семантикой SQL Server<br /><br />Предложение period не сопоставлено.|  
|Инструкция MERGE|**SSMA сопоставляет СЛИЯНИе со следующими исключениями:**<br /><br />Одно и несколько вхождений каждого предложения — сопоставляются с семантикой SQL Server для ограниченных вхождений каждого предложения.<br /><br />СИГНАЛЬное предложение — не соответствует семантике SQL Server<br /><br />Смешанные предложения UPDATE и DELETE — не сопоставляются с семантикой SQL Server<br /><br />Предложение period-не соответствует семантике SQL Server|  
|DELETE, инструкция|**SSMA сопоставляет DELETE со следующими исключениями:**<br /><br />Предложение "Таблица-ссылка" — только табличная ссылка не сопоставлена с семантикой SQL Server<br /><br />Предложение period — не соответствует семантике SQL Server|  
|Уровень изоляции и тип блокировки|Сопоставлен.|  
|Процедуры (SQL)|Сопоставляются.|  
|Процедуры (внешние)|Требовать ручное обновление.|  
|Процедуры (источник)|Не сопоставляться с семантикой SQL Server.|  
|Оператор присваивания|Сопоставлен.|  
|Оператор CALL для процедуры|Сопоставлен.|  
|Инструкция CASE|Сопоставлен.|  
|Оператор FOR|Сопоставлен.|  
|GOTO, инструкция|Сопоставлен.|  
|Инструкция IF|Сопоставлен.|  
|ИТЕРАЦИЯ, инструкция|Сопоставлен.|  
|Оператор LEAVE|Сопоставлен.|  
|LOOP, оператор|Сопоставлен.|  
|Оператор REPEAT|Сопоставлен.|  
|Инструкция resigning|Условия не поддерживаются. Сообщения могут быть необязательными.|  
|Оператор RETURN|Сопоставлен.|  
|СИГНАЛЬный оператор|Условия не поддерживаются. Сообщения могут быть необязательными.|  
|Оператор WHILE|Сопоставлен.|  
|ПОЛУЧЕНИЕ ДИАГНОСТической инструкции|**SSMA Maps получает ДИАГНОСТИКу со следующими исключениями:**<br /><br />ROW_COUNT — сопоставлен.<br /><br />DB2_RETURN_STATUS — сопоставлен.<br /><br />MESSAGE_TEXT — сопоставлен.<br /><br />DB2_SQL_NESTING_LEVEL — не соответствует семантике SQL Server<br /><br />DB2_TOKEN_STRING — не соответствует семантике SQL Server|  
|Курсоры|**SSMA сопоставляет КУРСОРы со следующими исключениями:**<br /><br />Инструкция выделения КУРСОРа не соответствует семантике SQL Server<br /><br />Оператор СВЯЗЫВАНИЯ УКАЗАТЕЛей — не соответствует семантике SQL Server<br /><br />Инструкция DECLARE CURSOR-предложение о возврате не сопоставлено с семантикой SQL Server<br /><br />Инструкция FETCH — частичное сопоставление. Переменные в качестве целевого объекта поддерживаются только. Дескриптор СКЛДА не сопоставлен с семантикой SQL Server|  
|Переменные|Сопоставляются.|  
|Исключения, обработчики и условия|**SSMA сопоставляет "обработку исключений" со следующими исключениями:**<br /><br />Обработчики выхода — сопоставляются.<br /><br />Обработчики отмены-сопоставлены.<br /><br />Обработчики CONTINUE — не сопоставлены.<br /><br />Условия — она не сопоставляется с семантикой SQL Server.|  
|Динамический SQL|Не сопоставлено.|  
|Псевдонимы|Сопоставляются.|  
|Псевдонимы|Частичное сопоставление. Для базового объекта требуется ручная обработка|  
|Синонимы|Сопоставляются.|  
|Стандартные функции в DB2|SSMA сопоставляет стандартные функции DB2, если в SQL Server доступен эквивалентная функция:|  
|Авторизация|Не сопоставлено.|  
|Предикаты|Сопоставляются.|  
|Инструкция SELECT INTO|Не сопоставлено.|  
|Оператор VALUES|Не сопоставлено.|  
|Управление транзакциями|Не сопоставлено.|  
  
## <a name="converting-db2-database-objects"></a>Преобразование объектов базы данных DB2  
Для преобразования объектов базы данных DB2 сначала необходимо выбрать объекты, которые необходимо преобразовать, а затем SSMA выполнить преобразование. Чтобы просмотреть выходные сообщения во время преобразования, в меню **вид** выберите **выходные данные**.  
  
**Преобразование объектов DB2 в синтаксис SQL Server**  
  
1.  В обозревателе метаданных DB2 разверните сервер DB2, а затем узел **схемы**.  
  
2.  Выберите объекты для преобразования:  
  
    -   Чтобы преобразовать все схемы, установите флажок рядом с пунктом **схемы**.  
  
    -   Чтобы преобразовать или опустить базу данных, установите флажок рядом с именем схемы.  
  
    -   Чтобы преобразовать или опустить категорию объектов, разверните схему, а затем установите или снимите флажок рядом с категорией.  
  
    -   Чтобы преобразовать или опустить отдельные объекты, разверните папку Категория, а затем установите или снимите флажок рядом с объектом.  
  
3.  Чтобы преобразовать все выбранные объекты, щелкните правой кнопкой мыши **схемы** и выберите команду **преобразовать схему**.  
  
    Можно также преобразовать отдельные объекты или категории объектов, щелкнув правой кнопкой мыши объект или его родительскую папку, а затем выбрав команду **преобразовать схему**.  
  
## <a name="viewing-conversion-problems"></a>Просмотр проблем преобразования  
Возможно, некоторые объекты DB2 не преобразованы. Вы можете определить ставки успешности преобразования, просмотрев отчет о преобразовании сводки.  
  
**Просмотр сводного отчета**  
  
1.  В обозревателе метаданных DB2 выберите **схемы**.  
  
2.  На правой панели выберите вкладку **отчет** .  
  
    В этом отчете представлен сводный отчет по оценке для всех объектов базы данных, которые были оценены или преобразованы. Также можно просмотреть сводный отчет по отдельным объектам:  
  
    -   Чтобы просмотреть отчет для отдельной схемы, выберите схему в обозревателе метаданных DB2.  
  
    -   Чтобы просмотреть отчет для отдельного объекта, выберите объект в обозревателе метаданных DB2. Объекты, имеющие проблемы преобразования, имеют красный значок ошибки.  
  
Для объектов, которые не удалось преобразовать, можно просмотреть синтаксис, который привел к сбою преобразования.  
  
**Просмотр отдельных проблем преобразования**  
  
1.  В обозревателе метаданных DB2 разверните узел **схемы**.  
  
2.  Разверните схему, на которой отображается красный значок ошибки.  
  
3.  В схеме разверните папку с красным значком ошибки.  
  
4.  Выберите объект с красным значком ошибки.  
  
5.  На правой панели щелкните вкладку **отчет** .  
  
6.  В верхней части вкладки **отчета** находится раскрывающийся список. Если в списке отображается **Статистика**, измените выбор на **источник**.  
  
    SSMA будет отображать исходный код и несколько кнопок непосредственно над кодом.  
  
7.  Нажмите кнопку **Следующая проблема** . Это красный значок ошибки со стрелкой, указывающей вправо.  
  
    SSMA выделит первый проблемный исходный код, найденный в текущем объекте.  
  
Для каждого элемента, который не удалось преобразовать, необходимо определить, что нужно сделать с этим объектом:  
  
-   Исходный код для процедур можно изменить на вкладке **SQL** .  
  
-   Можно изменить объект в базе данных DB2, чтобы удалить или исправить проблемный код. Чтобы загрузить обновленный код в SSMA, необходимо обновить метаданные. Дополнительные сведения см. [в разделе Подключение к базе данных DB2 &#40;DB2ToSQL&#41;](../../ssma/db2/connecting-to-db2-database-db2tosql.md).  
  
-   Вы можете исключить объект из миграции. В [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обозревателе метаданных и обозревателе МЕТАДАННЫХ DB2 снимите флажок рядом с элементом перед загрузкой объектов в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и миграции данных из DB2.  
  
## <a name="next-step"></a>Следующий шаг  
Следующим шагом процесса миграции является [Загрузка преобразованных объектов в SQL Server](https://msdn.microsoft.com/f4ea1ced-9f9f-4a9d-88ab-81dbab64adc3).  
  
## <a name="see-also"></a>См. также:  
[Перенос данных DB2 в SQL Server &#40;DB2ToSQL&#41;](../../ssma/db2/migrating-db2-data-into-sql-server-db2tosql.md)  
  
