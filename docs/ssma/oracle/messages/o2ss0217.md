---
title: 'O2SS0217: вызов КУРРВАЛ последовательности идентификаторов не поддерживается (ошибка)'
description: Рассматриваются некоторые причины, по которым Помощник по миграции SQL Server (SSMA) для Oracle не преобразуют процедуры со ссылкой на функцию КУРРВАЛ последовательности.
author: nahk-ivanov
ms.prod: sql
ms.technology: ssma
ms.devlang: sql
ms.topic: article
ms.date: 1/22/2020
ms.author: alexiva
ms.openlocfilehash: 372aa72b86cacddd1dc8d7b00aaf283fce3b8bd5
ms.sourcegitcommit: e572f1642f588b8c4c75bc9ea6adf4ccd48a353b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2020
ms.locfileid: "84778836"
---
# <a name="o2ss0217-call-to-identity-sequence-currval-not-supported-error"></a>O2SS0217: вызов КУРРВАЛ последовательности идентификаторов не поддерживается (ошибка)

В этой статье рассматриваются некоторые причины, по которым Помощник по миграции SQL Server (SSMA) для Oracle не преобразуют процедуры со ссылкой на функцию последовательности `CURRVAL` .

## <a name="background"></a>Историческая справка

`SEQUENCE`— Это независимый объект базы данных в Oracle, который автоматически создает уникальные целые числа, обычно для первичных и внешних значений. Объект `CURRVAL` используется для доступа к текущему значению указанной последовательности.

При преобразовании `SEQUENCE` объектов SSMA может использовать два метода: имя, **последовательность для последовательности** и **последовательность для идентификации**. При преобразовании в Sequence SSMA создаст соответствующий `SEQUENCE` объект в схеме SQL Server для каждой последовательности Oracle. В режиме **последовательности** в режим идентификации SSMA не создает никаких `SEQUENCE` объектов в SQL Server поэтому вызовы `CURRVAL` для последовательности Oracle приводят к появлению сообщения об ошибке.

## <a name="example"></a>Пример

Рассмотрим следующий пример.

```sql
CREATE OR REPLACE PROCEDURE proc1
AS
    t1 NUMBER;
BEGIN
    SELECT customers_seq.CURRVAL INTO t1 FROM DUAL;
END;
```

Здесь у нас есть хранимая процедура, которая пытается получить текущее значение для последовательности `customers_seq` . Если в SSMA используется режим " **последовательность в удостоверение** ", будет выдаваться следующее сообщение об ошибке:

> O2SS0217: вызов КУРРВАЛ последовательности идентификаторов не поддерживается

## <a name="possible-remedies"></a>Возможные способы устранения

Чтобы устранить эту ошибку, можно либо переписать код PL/SQL, чтобы исключить доступ к `CURRVAL` параметрам проекта SSMA, либо изменить его параметры для создания `SEQUENCE` объектов в SQL Server, а не в столбцах идентификаторов. Чтобы сделать это позже:

1. В меню **Сервис** выберите пункт **Параметры проекта**.
2. Затем перейдите на вкладку **Общие** .
3. Теперь в разделе **Преобразование последовательности** набор групп преобразования последовательностей в **генератор** последовательностей **используется SQL Server генератора последовательности**.
4. Примените эти параметры и нажмите кнопку **ОК**.

## <a name="related-conversion-messages"></a>Связанные сообщения о преобразовании

* [O2SS0188: последовательность не найдена в метаданных источника](o2ss0188.md)
* O2SS0214: столбец имеет связанную последовательность, но последовательность не найдена в метаданных источника
* [O2SS0221: вызов НЕКСТВАЛ последовательности идентификаторов не поддерживается](o2ss0221.md)
