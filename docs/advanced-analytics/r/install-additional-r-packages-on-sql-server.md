---
title: Установка новых пакетов языка R - служб машинного обучения SQL Server
description: Добавление новых пакетов R в SQL Server 2016 R Services или служб SQL Server 2017 машинного обучения (в базе данных)
ms.prod: sql
ms.technology: machine-learning
ms.date: 05/29/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: 590dbcc08d433147b61678c2b865ba205a0e547d
ms.sourcegitcommit: 85bfaa5bac737253a6740f1f402be87788d691ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/15/2018
ms.locfileid: "53432807"
---
# <a name="install-new-r-packages-on-sql-server"></a>Установка новых пакетов R в SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье описывается установка новых пакетов R в экземпляр SQL Server, где включена машинного обучения. Существует несколько методов для установки новых пакетов R, в зависимости от версии SQL Server у вас есть, и является ли сервер подключен к Интернету. Возможны следующие подходы для новой установки пакета.

| Подход                           | Разрешения               | Удаленной или локальной |
|------------------------------------|---------------------------|--------------|
| [Использовать обычную диспетчеров пакетов R](use-r-package-managers-on-sql-server.md)  | Административный | Local |
| [Использование RevoScaleR](use-revoscaler-to-manage-r-packages.md) |  Администратор с поддержкой, роли базы данных после | both|
| [С помощью T-SQL (CREATE EXTERNAL LIBRARY)](install-r-packages-tsql.md) | Администратор с поддержкой, роли базы данных после | both 

## <a name="who-installs-permissions"></a>Кто устанавливает (разрешения)

Библиотека пакетов R физически расположен в папке Program Files экземпляра SQL Server, в защищенную папку с ограниченным доступом. Запись в этом расположении необходимы разрешения администратора.

Пользователи без прав администратора можно установить пакеты, но это требует addititional конфигурации и возможностей, не доступна на начальной установки. Существует два подхода для установки пакетов без прав администратора: RevoScaleR, с помощью версии 9.0.1 и более поздней версии или с использованием CREATE EXTERNAL LIBRARY (только для SQL Server 2017). В SQL Server 2017 **dbo_owner** или другой пользователь с разрешением CREATE EXTERNAL LIBRARY можно установить пакеты R на текущую базу данных.

R разработчики привыкли к созданию библиотек пользователей для пакетов, которые необходимы, если центральный библиотеки, сложно. Такой подход представляет проблему для кода R, выполнив в экземпляр ядра СУБД SQL Server. SQL Server не может загружать пакеты из внешних библиотек, даже если эту библиотеку на одном компьютере. Только пакеты из экземпляра библиотеки можно использовать в коде R, работающем в SQL Server.

Обычно доступ к файловой системе ограничен на сервере, и даже при наличии прав администратора и доступ к папке документов пользователя на сервере среды выполнения внешнего скрипта, который выполняется в SQL Server не могут получить все пакеты, установленные за пределами экземпляра по умолчанию Библиотека. 

## <a name="considerations-for-package-installation"></a>Рекомендации по установке пакета

Прежде чем устанавливать новые пакеты, рассмотрите возможность определить, подходят ли возможностей данного пакета в среде SQL Server. В среде SQL Server, усиленной защитой может потребоваться избежать следующее:

+ Пакеты, которые требуют доступа к сети
+ Пакеты, которые требуют Java или других платформ, обычно не используется в среде SQL Server
+ Пакеты, требующие доступ с повышенными правами файловой системы
+ Пакет используется для разработки веб-приложений или других задачах, которые не выигрывают, работает ли он в SQL Server

## <a name="offline-installation-no-internet-access"></a>Установки в автономном режиме (без доступа к Интернету)

Как правило серверы, на которых размещены рабочие базы данных блокировать подключения к Интернету. Установка новых пакетов R или Python в таких средах необходимо заранее подготовить пакеты и зависимости и скопируйте файлы в папку на сервере для установки в автономном режиме.

Определение всех зависимостей усложняется. Для R, мы рекомендуем использовать [miniCRAN для создания локального репозитория](create-a-local-package-repository-using-minicran.md) и последующей их передачей полностью определенную репозитория это изолированный экземпляр SQL Server.

Alternativley, сделайте это вручную:

1. Определите все зависимости пакета. 
2. Проверьте, установлены ли необходимые пакеты на сервере. Если пакет установлен, проверьте правильность версии.
3. Скачайте пакет и все зависимости на отдельный компьютер.
4. Переместите файлы в папку, доступную на сервере.
5. Запустите поддерживаемой команды или инструкции DDL для установки пакета в библиотеку экземпляра.

### <a name="download-the-package-as-a-zipped-file"></a>Загрузить пакет как ZIP-файл

Для установки на сервере без доступа к Интернету необходимо загрузить копию пакета в формате ZIP-файла для установки в автономном режиме. **Не Распакуйте пакет.**

Например, следующая процедура описывает сейчас, чтобы получить правильную версию [FISHalyseR](https://bioconductor.org/packages/release/bioc/html/FISHalyseR.html) пакет из Bioconductor, при условии, что компьютер имеет доступ к Интернету.

1.  В списке **Package Archives** (Архивы пакетов) найдите версию **Windows binary** (Двоичный файл Windows).

2.  Щелкните правой кнопкой мыши ссылку. ZIP-файл и выберите **сохранить объект как**.

3.  Перейдите к локальной папке, где хранятся сжатых пакетов и нажмите кнопку **Сохранить**.

    Будет создана локальная копия пакета. 

4. Если возникает ошибка загрузки, попробуйте другой зеркальный сайт.

5. После загрузки архива пакета, можно установить пакет, или скопируйте ZIP-пакета на сервер, не имеет доступа к Интернету.

> [!TIP]
> Если по ошибке установки пакета вместо загрузки двоичных файлов, также сохраняется копия загруженного ZIP-файла на компьютер. Просмотрите сообщения о состоянии, как пакет устанавливается для определения расположения файла. Этот ZIP-файл можно скопировать на сервер, который не имеет доступа к Интернету.
> 
> Тем не менее при получении пакетов с помощью этого метода, зависимости, не включаются. 


## <a name="side-by-side-installation-with-standalone-r-or-python-servers"></a>Параллельную установку с автономной R или Python серверов

Компоненты R и Python, включены в нескольких продуктов Microsoft, которые могут сосуществовать на одном компьютере.

Если вы установили SQL Server 2017 Microsoft Machine Learning Server (изолированный) или SQL Server 2016 R Server (изолированную версию) в дополнение к аналитики в базе данных (службы машинного обучения SQL Server 2017 и SQL Server 2016 R Services), на компьютере установлены отдельные установки R для каждого из них дубликатов всех средств R и библиотеки.

Пакеты, которые установлены в библиотеке R_SERVER, используются только на отдельном сервере и может быть недоступна для экземпляра SQL Server (в базе данных). Всегда используйте `R_SERVICES` библиотеки при установке пакетов, которые вы хотите использовать в базе данных на сервере SQL Server. Дополнительные сведения о путях см. в разделе [расположение библиотеки пакета](installing-and-managing-r-packages.md#package-library-location).


## <a name="see-also"></a>См. также

+ [Установка новых пакетов Python](../python/install-additional-python-packages-on-sql-server.md)
+ [Руководства, примеры, решения](../tutorials/machine-learning-services-tutorials.md)